(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function dw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pv={exports:{}},zu={},mv={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var va=Symbol.for("react.element"),fw=Symbol.for("react.portal"),pw=Symbol.for("react.fragment"),mw=Symbol.for("react.strict_mode"),gw=Symbol.for("react.profiler"),yw=Symbol.for("react.provider"),vw=Symbol.for("react.context"),_w=Symbol.for("react.forward_ref"),Ew=Symbol.for("react.suspense"),ww=Symbol.for("react.memo"),Tw=Symbol.for("react.lazy"),Om=Symbol.iterator;function Sw(t){return t===null||typeof t!="object"?null:(t=Om&&t[Om]||t["@@iterator"],typeof t=="function"?t:null)}var gv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yv=Object.assign,vv={};function Os(t,e,n){this.props=t,this.context=e,this.refs=vv,this.updater=n||gv}Os.prototype.isReactComponent={};Os.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Os.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _v(){}_v.prototype=Os.prototype;function df(t,e,n){this.props=t,this.context=e,this.refs=vv,this.updater=n||gv}var ff=df.prototype=new _v;ff.constructor=df;yv(ff,Os.prototype);ff.isPureReactComponent=!0;var bm=Array.isArray,Ev=Object.prototype.hasOwnProperty,pf={current:null},wv={key:!0,ref:!0,__self:!0,__source:!0};function Tv(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ev.call(e,r)&&!wv.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:va,type:t,key:s,ref:o,props:i,_owner:pf.current}}function Iw(t,e){return{$$typeof:va,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mf(t){return typeof t=="object"&&t!==null&&t.$$typeof===va}function Aw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Lm=/\/+/g;function Uc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Aw(""+t.key):e.toString(36)}function xl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case va:case fw:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Uc(o,0):r,bm(i)?(n="",t!=null&&(n=t.replace(Lm,"$&/")+"/"),xl(i,e,n,"",function(h){return h})):i!=null&&(mf(i)&&(i=Iw(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Lm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",bm(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Uc(s,l);o+=xl(s,e,n,u,i)}else if(u=Sw(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Uc(s,l++),o+=xl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function rl(t,e,n){if(t==null)return t;var r=[],i=0;return xl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Cw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dt={current:null},kl={transition:null},Rw={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:kl,ReactCurrentOwner:pf};function Sv(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:rl,forEach:function(t,e,n){rl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rl(t,function(){e++}),e},toArray:function(t){return rl(t,function(e){return e})||[]},only:function(t){if(!mf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Os;re.Fragment=pw;re.Profiler=gw;re.PureComponent=df;re.StrictMode=mw;re.Suspense=Ew;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rw;re.act=Sv;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yv({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=pf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Ev.call(e,u)&&!wv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:va,type:t.type,key:i,ref:s,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:vw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yw,_context:t},t.Consumer=t};re.createElement=Tv;re.createFactory=function(t){var e=Tv.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:_w,render:t}};re.isValidElement=mf;re.lazy=function(t){return{$$typeof:Tw,_payload:{_status:-1,_result:t},_init:Cw}};re.memo=function(t,e){return{$$typeof:ww,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=kl.transition;kl.transition={};try{t()}finally{kl.transition=e}};re.unstable_act=Sv;re.useCallback=function(t,e){return Dt.current.useCallback(t,e)};re.useContext=function(t){return Dt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return Dt.current.useDeferredValue(t)};re.useEffect=function(t,e){return Dt.current.useEffect(t,e)};re.useId=function(){return Dt.current.useId()};re.useImperativeHandle=function(t,e,n){return Dt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return Dt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return Dt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return Dt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return Dt.current.useReducer(t,e,n)};re.useRef=function(t){return Dt.current.useRef(t)};re.useState=function(t){return Dt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return Dt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return Dt.current.useTransition()};re.version="18.3.1";mv.exports=re;var b=mv.exports;const ht=dw(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw=b,xw=Symbol.for("react.element"),kw=Symbol.for("react.fragment"),Nw=Object.prototype.hasOwnProperty,Dw=Pw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mw={key:!0,ref:!0,__self:!0,__source:!0};function Iv(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Nw.call(e,r)&&!Mw.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:xw,type:t,key:s,ref:o,props:i,_owner:Dw.current}}zu.Fragment=kw;zu.jsx=Iv;zu.jsxs=Iv;pv.exports=zu;var V=pv.exports,Av={exports:{}},Jt={},Cv={exports:{}},Rv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,q){var Q=z.length;z.push(q);e:for(;0<Q;){var le=Q-1>>>1,J=z[le];if(0<i(J,q))z[le]=q,z[Q]=J,Q=le;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var q=z[0],Q=z.pop();if(Q!==q){z[0]=Q;e:for(var le=0,J=z.length,he=J>>>1;le<he;){var Ye=2*(le+1)-1,it=z[Ye],ye=Ye+1,st=z[ye];if(0>i(it,Q))ye<J&&0>i(st,it)?(z[le]=st,z[ye]=Q,le=ye):(z[le]=it,z[Ye]=Q,le=Ye);else if(ye<J&&0>i(st,Q))z[le]=st,z[ye]=Q,le=ye;else break e}}return q}function i(z,q){var Q=z.sortIndex-q.sortIndex;return Q!==0?Q:z.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,p=null,y=3,T=!1,P=!1,R=!1,D=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var q=n(h);q!==null;){if(q.callback===null)r(h);else if(q.startTime<=z)r(h),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(h)}}function N(z){if(R=!1,S(z),!P)if(n(u)!==null)P=!0,xn(L);else{var q=n(h);q!==null&&Pe(N,q.startTime-z)}}function L(z,q){P=!1,R&&(R=!1,w(m),m=-1),T=!0;var Q=y;try{for(S(q),p=n(u);p!==null&&(!(p.expirationTime>q)||z&&!C());){var le=p.callback;if(typeof le=="function"){p.callback=null,y=p.priorityLevel;var J=le(p.expirationTime<=q);q=t.unstable_now(),typeof J=="function"?p.callback=J:p===n(u)&&r(u),S(q)}else r(u);p=n(u)}if(p!==null)var he=!0;else{var Ye=n(h);Ye!==null&&Pe(N,Ye.startTime-q),he=!1}return he}finally{p=null,y=Q,T=!1}}var O=!1,v=null,m=-1,E=5,I=-1;function C(){return!(t.unstable_now()-I<E)}function x(){if(v!==null){var z=t.unstable_now();I=z;var q=!0;try{q=v(!0,z)}finally{q?A():(O=!1,v=null)}}else O=!1}var A;if(typeof _=="function")A=function(){_(x)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,en=we.port2;we.port1.onmessage=x,A=function(){en.postMessage(null)}}else A=function(){D(x,0)};function xn(z){v=z,O||(O=!0,A())}function Pe(z,q){m=D(function(){z(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){P||T||(P=!0,xn(L))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(y){case 1:case 2:case 3:var q=3;break;default:q=y}var Q=y;y=q;try{return z()}finally{y=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=y;y=z;try{return q()}finally{y=Q}},t.unstable_scheduleCallback=function(z,q,Q){var le=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?le+Q:le):Q=le,z){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=Q+J,z={id:f++,callback:q,priorityLevel:z,startTime:Q,expirationTime:J,sortIndex:-1},Q>le?(z.sortIndex=Q,e(h,z),n(u)===null&&z===n(h)&&(R?(w(m),m=-1):R=!0,Pe(N,Q-le))):(z.sortIndex=J,e(u,z),P||T||(P=!0,xn(L))),z},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(z){var q=y;return function(){var Q=y;y=q;try{return z.apply(this,arguments)}finally{y=Q}}}})(Rv);Cv.exports=Rv;var Vw=Cv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow=b,Xt=Vw;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pv=new Set,Uo={};function Ci(t,e){ms(t,e),ms(t+"Capture",e)}function ms(t,e){for(Uo[t]=e,t=0;t<e.length;t++)Pv.add(e[t])}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jh=Object.prototype.hasOwnProperty,bw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fm={},$m={};function Lw(t){return jh.call($m,t)?!0:jh.call(Fm,t)?!1:bw.test(t)?$m[t]=!0:(Fm[t]=!0,!1)}function Fw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $w(t,e,n,r){if(e===null||typeof e>"u"||Fw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var gf=/[\-:]([a-z])/g;function yf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gf,yf);mt[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gf,yf);mt[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gf,yf);mt[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function vf(t,e,n,r){var i=mt.hasOwnProperty(e)?mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($w(e,n,i,r)&&(n=null),r||i===null?Lw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fr=Ow.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,il=Symbol.for("react.element"),Wi=Symbol.for("react.portal"),qi=Symbol.for("react.fragment"),_f=Symbol.for("react.strict_mode"),Bh=Symbol.for("react.profiler"),xv=Symbol.for("react.provider"),kv=Symbol.for("react.context"),Ef=Symbol.for("react.forward_ref"),Uh=Symbol.for("react.suspense"),zh=Symbol.for("react.suspense_list"),wf=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),Nv=Symbol.for("react.offscreen"),jm=Symbol.iterator;function so(t){return t===null||typeof t!="object"?null:(t=jm&&t[jm]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,zc;function mo(t){if(zc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zc=e&&e[1]||""}return`
`+zc+t}var Hc=!1;function Wc(t,e){if(!t||Hc)return"";Hc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Hc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?mo(t):""}function jw(t){switch(t.tag){case 5:return mo(t.type);case 16:return mo("Lazy");case 13:return mo("Suspense");case 19:return mo("SuspenseList");case 0:case 2:case 15:return t=Wc(t.type,!1),t;case 11:return t=Wc(t.type.render,!1),t;case 1:return t=Wc(t.type,!0),t;default:return""}}function Hh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qi:return"Fragment";case Wi:return"Portal";case Bh:return"Profiler";case _f:return"StrictMode";case Uh:return"Suspense";case zh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kv:return(t.displayName||"Context")+".Consumer";case xv:return(t._context.displayName||"Context")+".Provider";case Ef:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wf:return e=t.displayName||null,e!==null?e:Hh(t.type)||"Memo";case Sr:e=t._payload,t=t._init;try{return Hh(t(e))}catch{}}return null}function Bw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hh(e);case 8:return e===_f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Uw(t){var e=Dv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sl(t){t._valueTracker||(t._valueTracker=Uw(t))}function Mv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Dv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wh(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vv(t,e){e=e.checked,e!=null&&vf(t,"checked",e,!1)}function qh(t,e){Vv(t,e);var n=Ur(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kh(t,e.type,Ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Um(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Kh(t,e,n){(e!=="number"||Jl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var go=Array.isArray;function ss(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ur(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Gh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(go(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ur(n)}}function Ov(t,e){var n=Ur(e.value),r=Ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Hm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ol,Lv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ol=ol||document.createElement("div"),ol.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ol.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ao={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zw=["Webkit","ms","Moz","O"];Object.keys(Ao).forEach(function(t){zw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ao[e]=Ao[t]})});function Fv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ao.hasOwnProperty(t)&&Ao[t]?(""+e).trim():e+"px"}function $v(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Fv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Hw=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yh(t,e){if(e){if(Hw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function Xh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jh=null;function Tf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zh=null,os=null,as=null;function Wm(t){if(t=wa(t)){if(typeof Zh!="function")throw Error(j(280));var e=t.stateNode;e&&(e=Gu(e),Zh(t.stateNode,t.type,e))}}function jv(t){os?as?as.push(t):as=[t]:os=t}function Bv(){if(os){var t=os,e=as;if(as=os=null,Wm(t),e)for(t=0;t<e.length;t++)Wm(e[t])}}function Uv(t,e){return t(e)}function zv(){}var qc=!1;function Hv(t,e,n){if(qc)return t(e,n);qc=!0;try{return Uv(t,e,n)}finally{qc=!1,(os!==null||as!==null)&&(zv(),Bv())}}function Ho(t,e){var n=t.stateNode;if(n===null)return null;var r=Gu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var ed=!1;if(sr)try{var oo={};Object.defineProperty(oo,"passive",{get:function(){ed=!0}}),window.addEventListener("test",oo,oo),window.removeEventListener("test",oo,oo)}catch{ed=!1}function Ww(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Co=!1,Zl=null,eu=!1,td=null,qw={onError:function(t){Co=!0,Zl=t}};function Kw(t,e,n,r,i,s,o,l,u){Co=!1,Zl=null,Ww.apply(qw,arguments)}function Gw(t,e,n,r,i,s,o,l,u){if(Kw.apply(this,arguments),Co){if(Co){var h=Zl;Co=!1,Zl=null}else throw Error(j(198));eu||(eu=!0,td=h)}}function Ri(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Wv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qm(t){if(Ri(t)!==t)throw Error(j(188))}function Qw(t){var e=t.alternate;if(!e){if(e=Ri(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qm(i),t;if(s===r)return qm(i),e;s=s.sibling}throw Error(j(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function qv(t){return t=Qw(t),t!==null?Kv(t):null}function Kv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kv(t);if(e!==null)return e;t=t.sibling}return null}var Gv=Xt.unstable_scheduleCallback,Km=Xt.unstable_cancelCallback,Yw=Xt.unstable_shouldYield,Xw=Xt.unstable_requestPaint,$e=Xt.unstable_now,Jw=Xt.unstable_getCurrentPriorityLevel,Sf=Xt.unstable_ImmediatePriority,Qv=Xt.unstable_UserBlockingPriority,tu=Xt.unstable_NormalPriority,Zw=Xt.unstable_LowPriority,Yv=Xt.unstable_IdlePriority,Hu=null,Fn=null;function eT(t){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(Hu,t,void 0,(t.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:rT,tT=Math.log,nT=Math.LN2;function rT(t){return t>>>=0,t===0?32:31-(tT(t)/nT|0)|0}var al=64,ll=4194304;function yo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=yo(l):(s&=o,s!==0&&(r=yo(s)))}else o=n&~i,o!==0?r=yo(o):s!==0&&(r=yo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-In(e),i=1<<n,r|=t[n],e&=~i;return r}function iT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-In(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=iT(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function nd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xv(){var t=al;return al<<=1,!(al&4194240)&&(al=64),t}function Kc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _a(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-In(e),t[e]=n}function oT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-In(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function If(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-In(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var pe=0;function Jv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zv,Af,e0,t0,n0,rd=!1,ul=[],Nr=null,Dr=null,Mr=null,Wo=new Map,qo=new Map,Cr=[],aT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gm(t,e){switch(t){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Wo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(e.pointerId)}}function ao(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=wa(e),e!==null&&Af(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function lT(t,e,n,r,i){switch(e){case"focusin":return Nr=ao(Nr,t,e,n,r,i),!0;case"dragenter":return Dr=ao(Dr,t,e,n,r,i),!0;case"mouseover":return Mr=ao(Mr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Wo.set(s,ao(Wo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qo.set(s,ao(qo.get(s)||null,t,e,n,r,i)),!0}return!1}function r0(t){var e=oi(t.target);if(e!==null){var n=Ri(e);if(n!==null){if(e=n.tag,e===13){if(e=Wv(n),e!==null){t.blockedOn=e,n0(t.priority,function(){e0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=id(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jh=r,n.target.dispatchEvent(r),Jh=null}else return e=wa(n),e!==null&&Af(e),t.blockedOn=n,!1;e.shift()}return!0}function Qm(t,e,n){Nl(t)&&n.delete(e)}function uT(){rd=!1,Nr!==null&&Nl(Nr)&&(Nr=null),Dr!==null&&Nl(Dr)&&(Dr=null),Mr!==null&&Nl(Mr)&&(Mr=null),Wo.forEach(Qm),qo.forEach(Qm)}function lo(t,e){t.blockedOn===e&&(t.blockedOn=null,rd||(rd=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,uT)))}function Ko(t){function e(i){return lo(i,t)}if(0<ul.length){lo(ul[0],t);for(var n=1;n<ul.length;n++){var r=ul[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nr!==null&&lo(Nr,t),Dr!==null&&lo(Dr,t),Mr!==null&&lo(Mr,t),Wo.forEach(e),qo.forEach(e),n=0;n<Cr.length;n++)r=Cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cr.length&&(n=Cr[0],n.blockedOn===null);)r0(n),n.blockedOn===null&&Cr.shift()}var ls=fr.ReactCurrentBatchConfig,ru=!0;function cT(t,e,n,r){var i=pe,s=ls.transition;ls.transition=null;try{pe=1,Cf(t,e,n,r)}finally{pe=i,ls.transition=s}}function hT(t,e,n,r){var i=pe,s=ls.transition;ls.transition=null;try{pe=4,Cf(t,e,n,r)}finally{pe=i,ls.transition=s}}function Cf(t,e,n,r){if(ru){var i=id(t,e,n,r);if(i===null)rh(t,e,r,iu,n),Gm(t,r);else if(lT(i,t,e,n,r))r.stopPropagation();else if(Gm(t,r),e&4&&-1<aT.indexOf(t)){for(;i!==null;){var s=wa(i);if(s!==null&&Zv(s),s=id(t,e,n,r),s===null&&rh(t,e,r,iu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else rh(t,e,r,null,n)}}var iu=null;function id(t,e,n,r){if(iu=null,t=Tf(r),t=oi(t),t!==null)if(e=Ri(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Wv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return iu=t,null}function i0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jw()){case Sf:return 1;case Qv:return 4;case tu:case Zw:return 16;case Yv:return 536870912;default:return 16}default:return 16}}var Pr=null,Rf=null,Dl=null;function s0(){if(Dl)return Dl;var t,e=Rf,n=e.length,r,i="value"in Pr?Pr.value:Pr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Dl=i.slice(t,1<r?1-r:void 0)}function Ml(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cl(){return!0}function Ym(){return!1}function Zt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cl:Ym,this.isPropagationStopped=Ym,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cl)},persist:function(){},isPersistent:cl}),e}var bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pf=Zt(bs),Ea=De({},bs,{view:0,detail:0}),dT=Zt(Ea),Gc,Qc,uo,Wu=De({},Ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uo&&(uo&&t.type==="mousemove"?(Gc=t.screenX-uo.screenX,Qc=t.screenY-uo.screenY):Qc=Gc=0,uo=t),Gc)},movementY:function(t){return"movementY"in t?t.movementY:Qc}}),Xm=Zt(Wu),fT=De({},Wu,{dataTransfer:0}),pT=Zt(fT),mT=De({},Ea,{relatedTarget:0}),Yc=Zt(mT),gT=De({},bs,{animationName:0,elapsedTime:0,pseudoElement:0}),yT=Zt(gT),vT=De({},bs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_T=Zt(vT),ET=De({},bs,{data:0}),Jm=Zt(ET),wT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ST={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ST[t])?!!e[t]:!1}function xf(){return IT}var AT=De({},Ea,{key:function(t){if(t.key){var e=wT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ml(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xf,charCode:function(t){return t.type==="keypress"?Ml(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ml(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),CT=Zt(AT),RT=De({},Wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zm=Zt(RT),PT=De({},Ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xf}),xT=Zt(PT),kT=De({},bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),NT=Zt(kT),DT=De({},Wu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),MT=Zt(DT),VT=[9,13,27,32],kf=sr&&"CompositionEvent"in window,Ro=null;sr&&"documentMode"in document&&(Ro=document.documentMode);var OT=sr&&"TextEvent"in window&&!Ro,o0=sr&&(!kf||Ro&&8<Ro&&11>=Ro),eg=" ",tg=!1;function a0(t,e){switch(t){case"keyup":return VT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ki=!1;function bT(t,e){switch(t){case"compositionend":return l0(e);case"keypress":return e.which!==32?null:(tg=!0,eg);case"textInput":return t=e.data,t===eg&&tg?null:t;default:return null}}function LT(t,e){if(Ki)return t==="compositionend"||!kf&&a0(t,e)?(t=s0(),Dl=Rf=Pr=null,Ki=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return o0&&e.locale!=="ko"?null:e.data;default:return null}}var FT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ng(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!FT[t.type]:e==="textarea"}function u0(t,e,n,r){jv(r),e=su(e,"onChange"),0<e.length&&(n=new Pf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Po=null,Go=null;function $T(t){E0(t,0)}function qu(t){var e=Yi(t);if(Mv(e))return t}function jT(t,e){if(t==="change")return e}var c0=!1;if(sr){var Xc;if(sr){var Jc="oninput"in document;if(!Jc){var rg=document.createElement("div");rg.setAttribute("oninput","return;"),Jc=typeof rg.oninput=="function"}Xc=Jc}else Xc=!1;c0=Xc&&(!document.documentMode||9<document.documentMode)}function ig(){Po&&(Po.detachEvent("onpropertychange",h0),Go=Po=null)}function h0(t){if(t.propertyName==="value"&&qu(Go)){var e=[];u0(e,Go,t,Tf(t)),Hv($T,e)}}function BT(t,e,n){t==="focusin"?(ig(),Po=e,Go=n,Po.attachEvent("onpropertychange",h0)):t==="focusout"&&ig()}function UT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qu(Go)}function zT(t,e){if(t==="click")return qu(e)}function HT(t,e){if(t==="input"||t==="change")return qu(e)}function WT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rn=typeof Object.is=="function"?Object.is:WT;function Qo(t,e){if(Rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!jh.call(e,i)||!Rn(t[i],e[i]))return!1}return!0}function sg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function og(t,e){var n=sg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sg(n)}}function d0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?d0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f0(){for(var t=window,e=Jl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jl(t.document)}return e}function Nf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qT(t){var e=f0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&d0(n.ownerDocument.documentElement,n)){if(r!==null&&Nf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=og(n,s);var o=og(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KT=sr&&"documentMode"in document&&11>=document.documentMode,Gi=null,sd=null,xo=null,od=!1;function ag(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;od||Gi==null||Gi!==Jl(r)||(r=Gi,"selectionStart"in r&&Nf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xo&&Qo(xo,r)||(xo=r,r=su(sd,"onSelect"),0<r.length&&(e=new Pf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gi)))}function hl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qi={animationend:hl("Animation","AnimationEnd"),animationiteration:hl("Animation","AnimationIteration"),animationstart:hl("Animation","AnimationStart"),transitionend:hl("Transition","TransitionEnd")},Zc={},p0={};sr&&(p0=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function Ku(t){if(Zc[t])return Zc[t];if(!Qi[t])return t;var e=Qi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in p0)return Zc[t]=e[n];return t}var m0=Ku("animationend"),g0=Ku("animationiteration"),y0=Ku("animationstart"),v0=Ku("transitionend"),_0=new Map,lg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(t,e){_0.set(t,e),Ci(e,[t])}for(var eh=0;eh<lg.length;eh++){var th=lg[eh],GT=th.toLowerCase(),QT=th[0].toUpperCase()+th.slice(1);Kr(GT,"on"+QT)}Kr(m0,"onAnimationEnd");Kr(g0,"onAnimationIteration");Kr(y0,"onAnimationStart");Kr("dblclick","onDoubleClick");Kr("focusin","onFocus");Kr("focusout","onBlur");Kr(v0,"onTransitionEnd");ms("onMouseEnter",["mouseout","mouseover"]);ms("onMouseLeave",["mouseout","mouseover"]);ms("onPointerEnter",["pointerout","pointerover"]);ms("onPointerLeave",["pointerout","pointerover"]);Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YT=new Set("cancel close invalid load scroll toggle".split(" ").concat(vo));function ug(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Gw(r,e,void 0,t),t.currentTarget=null}function E0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;ug(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;ug(i,l,h),s=u}}}if(eu)throw t=td,eu=!1,td=null,t}function Se(t,e){var n=e[hd];n===void 0&&(n=e[hd]=new Set);var r=t+"__bubble";n.has(r)||(w0(e,t,2,!1),n.add(r))}function nh(t,e,n){var r=0;e&&(r|=4),w0(n,t,r,e)}var dl="_reactListening"+Math.random().toString(36).slice(2);function Yo(t){if(!t[dl]){t[dl]=!0,Pv.forEach(function(n){n!=="selectionchange"&&(YT.has(n)||nh(n,!1,t),nh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dl]||(e[dl]=!0,nh("selectionchange",!1,e))}}function w0(t,e,n,r){switch(i0(e)){case 1:var i=cT;break;case 4:i=hT;break;default:i=Cf}n=i.bind(null,e,n,t),i=void 0,!ed||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function rh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=oi(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Hv(function(){var h=s,f=Tf(n),p=[];e:{var y=_0.get(t);if(y!==void 0){var T=Pf,P=t;switch(t){case"keypress":if(Ml(n)===0)break e;case"keydown":case"keyup":T=CT;break;case"focusin":P="focus",T=Yc;break;case"focusout":P="blur",T=Yc;break;case"beforeblur":case"afterblur":T=Yc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Xm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=pT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=xT;break;case m0:case g0:case y0:T=yT;break;case v0:T=NT;break;case"scroll":T=dT;break;case"wheel":T=MT;break;case"copy":case"cut":case"paste":T=_T;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Zm}var R=(e&4)!==0,D=!R&&t==="scroll",w=R?y!==null?y+"Capture":null:y;R=[];for(var _=h,S;_!==null;){S=_;var N=S.stateNode;if(S.tag===5&&N!==null&&(S=N,w!==null&&(N=Ho(_,w),N!=null&&R.push(Xo(_,N,S)))),D)break;_=_.return}0<R.length&&(y=new T(y,P,null,n,f),p.push({event:y,listeners:R}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",y&&n!==Jh&&(P=n.relatedTarget||n.fromElement)&&(oi(P)||P[or]))break e;if((T||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,T?(P=n.relatedTarget||n.toElement,T=h,P=P?oi(P):null,P!==null&&(D=Ri(P),P!==D||P.tag!==5&&P.tag!==6)&&(P=null)):(T=null,P=h),T!==P)){if(R=Xm,N="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(R=Zm,N="onPointerLeave",w="onPointerEnter",_="pointer"),D=T==null?y:Yi(T),S=P==null?y:Yi(P),y=new R(N,_+"leave",T,n,f),y.target=D,y.relatedTarget=S,N=null,oi(f)===h&&(R=new R(w,_+"enter",P,n,f),R.target=S,R.relatedTarget=D,N=R),D=N,T&&P)t:{for(R=T,w=P,_=0,S=R;S;S=$i(S))_++;for(S=0,N=w;N;N=$i(N))S++;for(;0<_-S;)R=$i(R),_--;for(;0<S-_;)w=$i(w),S--;for(;_--;){if(R===w||w!==null&&R===w.alternate)break t;R=$i(R),w=$i(w)}R=null}else R=null;T!==null&&cg(p,y,T,R,!1),P!==null&&D!==null&&cg(p,D,P,R,!0)}}e:{if(y=h?Yi(h):window,T=y.nodeName&&y.nodeName.toLowerCase(),T==="select"||T==="input"&&y.type==="file")var L=jT;else if(ng(y))if(c0)L=HT;else{L=UT;var O=BT}else(T=y.nodeName)&&T.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(L=zT);if(L&&(L=L(t,h))){u0(p,L,n,f);break e}O&&O(t,y,h),t==="focusout"&&(O=y._wrapperState)&&O.controlled&&y.type==="number"&&Kh(y,"number",y.value)}switch(O=h?Yi(h):window,t){case"focusin":(ng(O)||O.contentEditable==="true")&&(Gi=O,sd=h,xo=null);break;case"focusout":xo=sd=Gi=null;break;case"mousedown":od=!0;break;case"contextmenu":case"mouseup":case"dragend":od=!1,ag(p,n,f);break;case"selectionchange":if(KT)break;case"keydown":case"keyup":ag(p,n,f)}var v;if(kf)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Ki?a0(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(o0&&n.locale!=="ko"&&(Ki||m!=="onCompositionStart"?m==="onCompositionEnd"&&Ki&&(v=s0()):(Pr=f,Rf="value"in Pr?Pr.value:Pr.textContent,Ki=!0)),O=su(h,m),0<O.length&&(m=new Jm(m,t,null,n,f),p.push({event:m,listeners:O}),v?m.data=v:(v=l0(n),v!==null&&(m.data=v)))),(v=OT?bT(t,n):LT(t,n))&&(h=su(h,"onBeforeInput"),0<h.length&&(f=new Jm("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:h}),f.data=v))}E0(p,e)})}function Xo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function su(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ho(t,n),s!=null&&r.unshift(Xo(t,s,i)),s=Ho(t,e),s!=null&&r.push(Xo(t,s,i))),t=t.return}return r}function $i(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Ho(n,s),u!=null&&o.unshift(Xo(n,u,l))):i||(u=Ho(n,s),u!=null&&o.push(Xo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var XT=/\r\n?/g,JT=/\u0000|\uFFFD/g;function hg(t){return(typeof t=="string"?t:""+t).replace(XT,`
`).replace(JT,"")}function fl(t,e,n){if(e=hg(e),hg(t)!==e&&n)throw Error(j(425))}function ou(){}var ad=null,ld=null;function ud(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cd=typeof setTimeout=="function"?setTimeout:void 0,ZT=typeof clearTimeout=="function"?clearTimeout:void 0,dg=typeof Promise=="function"?Promise:void 0,eS=typeof queueMicrotask=="function"?queueMicrotask:typeof dg<"u"?function(t){return dg.resolve(null).then(t).catch(tS)}:cd;function tS(t){setTimeout(function(){throw t})}function ih(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ko(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ko(e)}function Vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ls=Math.random().toString(36).slice(2),Ln="__reactFiber$"+Ls,Jo="__reactProps$"+Ls,or="__reactContainer$"+Ls,hd="__reactEvents$"+Ls,nS="__reactListeners$"+Ls,rS="__reactHandles$"+Ls;function oi(t){var e=t[Ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[or]||n[Ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fg(t);t!==null;){if(n=t[Ln])return n;t=fg(t)}return e}t=n,n=t.parentNode}return null}function wa(t){return t=t[Ln]||t[or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function Gu(t){return t[Jo]||null}var dd=[],Xi=-1;function Gr(t){return{current:t}}function Ae(t){0>Xi||(t.current=dd[Xi],dd[Xi]=null,Xi--)}function Ee(t,e){Xi++,dd[Xi]=t.current,t.current=e}var zr={},Pt=Gr(zr),$t=Gr(!1),vi=zr;function gs(t,e){var n=t.type.contextTypes;if(!n)return zr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function jt(t){return t=t.childContextTypes,t!=null}function au(){Ae($t),Ae(Pt)}function pg(t,e,n){if(Pt.current!==zr)throw Error(j(168));Ee(Pt,e),Ee($t,n)}function T0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(j(108,Bw(t)||"Unknown",i));return De({},n,r)}function lu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zr,vi=Pt.current,Ee(Pt,t),Ee($t,$t.current),!0}function mg(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=T0(t,e,vi),r.__reactInternalMemoizedMergedChildContext=t,Ae($t),Ae(Pt),Ee(Pt,t)):Ae($t),Ee($t,n)}var Jn=null,Qu=!1,sh=!1;function S0(t){Jn===null?Jn=[t]:Jn.push(t)}function iS(t){Qu=!0,S0(t)}function Qr(){if(!sh&&Jn!==null){sh=!0;var t=0,e=pe;try{var n=Jn;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Jn=null,Qu=!1}catch(i){throw Jn!==null&&(Jn=Jn.slice(t+1)),Gv(Sf,Qr),i}finally{pe=e,sh=!1}}return null}var Ji=[],Zi=0,uu=null,cu=0,an=[],ln=0,_i=null,Zn=1,er="";function ti(t,e){Ji[Zi++]=cu,Ji[Zi++]=uu,uu=t,cu=e}function I0(t,e,n){an[ln++]=Zn,an[ln++]=er,an[ln++]=_i,_i=t;var r=Zn;t=er;var i=32-In(r)-1;r&=~(1<<i),n+=1;var s=32-In(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zn=1<<32-In(e)+i|n<<i|r,er=s+t}else Zn=1<<s|n<<i|r,er=t}function Df(t){t.return!==null&&(ti(t,1),I0(t,1,0))}function Mf(t){for(;t===uu;)uu=Ji[--Zi],Ji[Zi]=null,cu=Ji[--Zi],Ji[Zi]=null;for(;t===_i;)_i=an[--ln],an[ln]=null,er=an[--ln],an[ln]=null,Zn=an[--ln],an[ln]=null}var Qt=null,Gt=null,Ce=!1,wn=null;function A0(t,e){var n=cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Gt=Vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_i!==null?{id:Zn,overflow:er}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Gt=null,!0):!1;default:return!1}}function fd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pd(t){if(Ce){var e=Gt;if(e){var n=e;if(!gg(t,e)){if(fd(t))throw Error(j(418));e=Vr(n.nextSibling);var r=Qt;e&&gg(t,e)?A0(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Qt=t)}}else{if(fd(t))throw Error(j(418));t.flags=t.flags&-4097|2,Ce=!1,Qt=t}}}function yg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function pl(t){if(t!==Qt)return!1;if(!Ce)return yg(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ud(t.type,t.memoizedProps)),e&&(e=Gt)){if(fd(t))throw C0(),Error(j(418));for(;e;)A0(t,e),e=Vr(e.nextSibling)}if(yg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gt=Vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gt=null}}else Gt=Qt?Vr(t.stateNode.nextSibling):null;return!0}function C0(){for(var t=Gt;t;)t=Vr(t.nextSibling)}function ys(){Gt=Qt=null,Ce=!1}function Vf(t){wn===null?wn=[t]:wn.push(t)}var sS=fr.ReactCurrentBatchConfig;function co(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function ml(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vg(t){var e=t._init;return e(t._payload)}function R0(t){function e(w,_){if(t){var S=w.deletions;S===null?(w.deletions=[_],w.flags|=16):S.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=Fr(w,_),w.index=0,w.sibling=null,w}function s(w,_,S){return w.index=S,t?(S=w.alternate,S!==null?(S=S.index,S<_?(w.flags|=2,_):S):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,_,S,N){return _===null||_.tag!==6?(_=dh(S,w.mode,N),_.return=w,_):(_=i(_,S),_.return=w,_)}function u(w,_,S,N){var L=S.type;return L===qi?f(w,_,S.props.children,N,S.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Sr&&vg(L)===_.type)?(N=i(_,S.props),N.ref=co(w,_,S),N.return=w,N):(N=jl(S.type,S.key,S.props,null,w.mode,N),N.ref=co(w,_,S),N.return=w,N)}function h(w,_,S,N){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=fh(S,w.mode,N),_.return=w,_):(_=i(_,S.children||[]),_.return=w,_)}function f(w,_,S,N,L){return _===null||_.tag!==7?(_=di(S,w.mode,N,L),_.return=w,_):(_=i(_,S),_.return=w,_)}function p(w,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=dh(""+_,w.mode,S),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case il:return S=jl(_.type,_.key,_.props,null,w.mode,S),S.ref=co(w,null,_),S.return=w,S;case Wi:return _=fh(_,w.mode,S),_.return=w,_;case Sr:var N=_._init;return p(w,N(_._payload),S)}if(go(_)||so(_))return _=di(_,w.mode,S,null),_.return=w,_;ml(w,_)}return null}function y(w,_,S,N){var L=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return L!==null?null:l(w,_,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case il:return S.key===L?u(w,_,S,N):null;case Wi:return S.key===L?h(w,_,S,N):null;case Sr:return L=S._init,y(w,_,L(S._payload),N)}if(go(S)||so(S))return L!==null?null:f(w,_,S,N,null);ml(w,S)}return null}function T(w,_,S,N,L){if(typeof N=="string"&&N!==""||typeof N=="number")return w=w.get(S)||null,l(_,w,""+N,L);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case il:return w=w.get(N.key===null?S:N.key)||null,u(_,w,N,L);case Wi:return w=w.get(N.key===null?S:N.key)||null,h(_,w,N,L);case Sr:var O=N._init;return T(w,_,S,O(N._payload),L)}if(go(N)||so(N))return w=w.get(S)||null,f(_,w,N,L,null);ml(_,N)}return null}function P(w,_,S,N){for(var L=null,O=null,v=_,m=_=0,E=null;v!==null&&m<S.length;m++){v.index>m?(E=v,v=null):E=v.sibling;var I=y(w,v,S[m],N);if(I===null){v===null&&(v=E);break}t&&v&&I.alternate===null&&e(w,v),_=s(I,_,m),O===null?L=I:O.sibling=I,O=I,v=E}if(m===S.length)return n(w,v),Ce&&ti(w,m),L;if(v===null){for(;m<S.length;m++)v=p(w,S[m],N),v!==null&&(_=s(v,_,m),O===null?L=v:O.sibling=v,O=v);return Ce&&ti(w,m),L}for(v=r(w,v);m<S.length;m++)E=T(v,w,m,S[m],N),E!==null&&(t&&E.alternate!==null&&v.delete(E.key===null?m:E.key),_=s(E,_,m),O===null?L=E:O.sibling=E,O=E);return t&&v.forEach(function(C){return e(w,C)}),Ce&&ti(w,m),L}function R(w,_,S,N){var L=so(S);if(typeof L!="function")throw Error(j(150));if(S=L.call(S),S==null)throw Error(j(151));for(var O=L=null,v=_,m=_=0,E=null,I=S.next();v!==null&&!I.done;m++,I=S.next()){v.index>m?(E=v,v=null):E=v.sibling;var C=y(w,v,I.value,N);if(C===null){v===null&&(v=E);break}t&&v&&C.alternate===null&&e(w,v),_=s(C,_,m),O===null?L=C:O.sibling=C,O=C,v=E}if(I.done)return n(w,v),Ce&&ti(w,m),L;if(v===null){for(;!I.done;m++,I=S.next())I=p(w,I.value,N),I!==null&&(_=s(I,_,m),O===null?L=I:O.sibling=I,O=I);return Ce&&ti(w,m),L}for(v=r(w,v);!I.done;m++,I=S.next())I=T(v,w,m,I.value,N),I!==null&&(t&&I.alternate!==null&&v.delete(I.key===null?m:I.key),_=s(I,_,m),O===null?L=I:O.sibling=I,O=I);return t&&v.forEach(function(x){return e(w,x)}),Ce&&ti(w,m),L}function D(w,_,S,N){if(typeof S=="object"&&S!==null&&S.type===qi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case il:e:{for(var L=S.key,O=_;O!==null;){if(O.key===L){if(L=S.type,L===qi){if(O.tag===7){n(w,O.sibling),_=i(O,S.props.children),_.return=w,w=_;break e}}else if(O.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Sr&&vg(L)===O.type){n(w,O.sibling),_=i(O,S.props),_.ref=co(w,O,S),_.return=w,w=_;break e}n(w,O);break}else e(w,O);O=O.sibling}S.type===qi?(_=di(S.props.children,w.mode,N,S.key),_.return=w,w=_):(N=jl(S.type,S.key,S.props,null,w.mode,N),N.ref=co(w,_,S),N.return=w,w=N)}return o(w);case Wi:e:{for(O=S.key;_!==null;){if(_.key===O)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(w,_.sibling),_=i(_,S.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=fh(S,w.mode,N),_.return=w,w=_}return o(w);case Sr:return O=S._init,D(w,_,O(S._payload),N)}if(go(S))return P(w,_,S,N);if(so(S))return R(w,_,S,N);ml(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(w,_.sibling),_=i(_,S),_.return=w,w=_):(n(w,_),_=dh(S,w.mode,N),_.return=w,w=_),o(w)):n(w,_)}return D}var vs=R0(!0),P0=R0(!1),hu=Gr(null),du=null,es=null,Of=null;function bf(){Of=es=du=null}function Lf(t){var e=hu.current;Ae(hu),t._currentValue=e}function md(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function us(t,e){du=t,Of=es=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function dn(t){var e=t._currentValue;if(Of!==t)if(t={context:t,memoizedValue:e,next:null},es===null){if(du===null)throw Error(j(308));es=t,du.dependencies={lanes:0,firstContext:t}}else es=es.next=t;return e}var ai=null;function Ff(t){ai===null?ai=[t]:ai.push(t)}function x0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ff(e)):(n.next=i.next,i.next=n),e.interleaved=n,ar(t,r)}function ar(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ir=!1;function $f(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ar(t,n)}return i=r.interleaved,i===null?(e.next=e,Ff(r)):(e.next=i.next,i.next=e),r.interleaved=e,ar(t,n)}function Vl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,If(t,n)}}function _g(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fu(t,e,n,r){var i=t.updateQueue;Ir=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,f=h=u=null,l=s;do{var y=l.lane,T=l.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,R=l;switch(y=e,T=n,R.tag){case 1:if(P=R.payload,typeof P=="function"){p=P.call(T,p,y);break e}p=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=R.payload,y=typeof P=="function"?P.call(T,p,y):P,y==null)break e;p=De({},p,y);break e;case 2:Ir=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[l]:y.push(l))}else T={eventTime:T,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=T,u=p):f=f.next=T,o|=y;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);wi|=o,t.lanes=o,t.memoizedState=p}}function Eg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(j(191,i));i.call(r)}}}var Ta={},$n=Gr(Ta),Zo=Gr(Ta),ea=Gr(Ta);function li(t){if(t===Ta)throw Error(j(174));return t}function jf(t,e){switch(Ee(ea,e),Ee(Zo,t),Ee($n,Ta),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qh(e,t)}Ae($n),Ee($n,e)}function _s(){Ae($n),Ae(Zo),Ae(ea)}function N0(t){li(ea.current);var e=li($n.current),n=Qh(e,t.type);e!==n&&(Ee(Zo,t),Ee($n,n))}function Bf(t){Zo.current===t&&(Ae($n),Ae(Zo))}var ke=Gr(0);function pu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var oh=[];function Uf(){for(var t=0;t<oh.length;t++)oh[t]._workInProgressVersionPrimary=null;oh.length=0}var Ol=fr.ReactCurrentDispatcher,ah=fr.ReactCurrentBatchConfig,Ei=0,Ne=null,We=null,Ze=null,mu=!1,ko=!1,ta=0,oS=0;function Tt(){throw Error(j(321))}function zf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rn(t[n],e[n]))return!1;return!0}function Hf(t,e,n,r,i,s){if(Ei=s,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ol.current=t===null||t.memoizedState===null?cS:hS,t=n(r,i),ko){s=0;do{if(ko=!1,ta=0,25<=s)throw Error(j(301));s+=1,Ze=We=null,e.updateQueue=null,Ol.current=dS,t=n(r,i)}while(ko)}if(Ol.current=gu,e=We!==null&&We.next!==null,Ei=0,Ze=We=Ne=null,mu=!1,e)throw Error(j(300));return t}function Wf(){var t=ta!==0;return ta=0,t}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Ne.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function fn(){if(We===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Ze===null?Ne.memoizedState:Ze.next;if(e!==null)Ze=e,We=t;else{if(t===null)throw Error(j(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ze===null?Ne.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function na(t,e){return typeof e=="function"?e(t):e}function lh(t){var e=fn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=We,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var f=h.lane;if((Ei&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Ne.lanes|=f,wi|=f}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,Rn(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ne.lanes|=s,wi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uh(t){var e=fn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Rn(s,e.memoizedState)||(Lt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function D0(){}function M0(t,e){var n=Ne,r=fn(),i=e(),s=!Rn(r.memoizedState,i);if(s&&(r.memoizedState=i,Lt=!0),r=r.queue,qf(b0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,ra(9,O0.bind(null,n,r,i,e),void 0,null),nt===null)throw Error(j(349));Ei&30||V0(n,e,i)}return i}function V0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function O0(t,e,n,r){e.value=n,e.getSnapshot=r,L0(e)&&F0(t)}function b0(t,e,n){return n(function(){L0(e)&&F0(t)})}function L0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rn(t,n)}catch{return!0}}function F0(t){var e=ar(t,1);e!==null&&An(e,t,1,-1)}function wg(t){var e=On();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:na,lastRenderedState:t},e.queue=t,t=t.dispatch=uS.bind(null,Ne,t),[e.memoizedState,t]}function ra(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $0(){return fn().memoizedState}function bl(t,e,n,r){var i=On();Ne.flags|=t,i.memoizedState=ra(1|e,n,void 0,r===void 0?null:r)}function Yu(t,e,n,r){var i=fn();r=r===void 0?null:r;var s=void 0;if(We!==null){var o=We.memoizedState;if(s=o.destroy,r!==null&&zf(r,o.deps)){i.memoizedState=ra(e,n,s,r);return}}Ne.flags|=t,i.memoizedState=ra(1|e,n,s,r)}function Tg(t,e){return bl(8390656,8,t,e)}function qf(t,e){return Yu(2048,8,t,e)}function j0(t,e){return Yu(4,2,t,e)}function B0(t,e){return Yu(4,4,t,e)}function U0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function z0(t,e,n){return n=n!=null?n.concat([t]):null,Yu(4,4,U0.bind(null,e,t),n)}function Kf(){}function H0(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function W0(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function q0(t,e,n){return Ei&21?(Rn(n,e)||(n=Xv(),Ne.lanes|=n,wi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=n)}function aS(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=ah.transition;ah.transition={};try{t(!1),e()}finally{pe=n,ah.transition=r}}function K0(){return fn().memoizedState}function lS(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},G0(t))Q0(e,n);else if(n=x0(t,e,n,r),n!==null){var i=Nt();An(n,t,r,i),Y0(n,e,r)}}function uS(t,e,n){var r=Lr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(G0(t))Q0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Rn(l,o)){var u=e.interleaved;u===null?(i.next=i,Ff(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=x0(t,e,i,r),n!==null&&(i=Nt(),An(n,t,r,i),Y0(n,e,r))}}function G0(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Q0(t,e){ko=mu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Y0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,If(t,n)}}var gu={readContext:dn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},cS={readContext:dn,useCallback:function(t,e){return On().memoizedState=[t,e===void 0?null:e],t},useContext:dn,useEffect:Tg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bl(4194308,4,U0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bl(4194308,4,t,e)},useInsertionEffect:function(t,e){return bl(4,2,t,e)},useMemo:function(t,e){var n=On();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=On();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lS.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=On();return t={current:t},e.memoizedState=t},useState:wg,useDebugValue:Kf,useDeferredValue:function(t){return On().memoizedState=t},useTransition:function(){var t=wg(!1),e=t[0];return t=aS.bind(null,t[1]),On().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,i=On();if(Ce){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),nt===null)throw Error(j(349));Ei&30||V0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Tg(b0.bind(null,r,s,t),[t]),r.flags|=2048,ra(9,O0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=On(),e=nt.identifierPrefix;if(Ce){var n=er,r=Zn;n=(r&~(1<<32-In(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ta++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hS={readContext:dn,useCallback:H0,useContext:dn,useEffect:qf,useImperativeHandle:z0,useInsertionEffect:j0,useLayoutEffect:B0,useMemo:W0,useReducer:lh,useRef:$0,useState:function(){return lh(na)},useDebugValue:Kf,useDeferredValue:function(t){var e=fn();return q0(e,We.memoizedState,t)},useTransition:function(){var t=lh(na)[0],e=fn().memoizedState;return[t,e]},useMutableSource:D0,useSyncExternalStore:M0,useId:K0,unstable_isNewReconciler:!1},dS={readContext:dn,useCallback:H0,useContext:dn,useEffect:qf,useImperativeHandle:z0,useInsertionEffect:j0,useLayoutEffect:B0,useMemo:W0,useReducer:uh,useRef:$0,useState:function(){return uh(na)},useDebugValue:Kf,useDeferredValue:function(t){var e=fn();return We===null?e.memoizedState=t:q0(e,We.memoizedState,t)},useTransition:function(){var t=uh(na)[0],e=fn().memoizedState;return[t,e]},useMutableSource:D0,useSyncExternalStore:M0,useId:K0,unstable_isNewReconciler:!1};function _n(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xu={isMounted:function(t){return(t=t._reactInternals)?Ri(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=Lr(t),s=ir(r,i);s.payload=e,n!=null&&(s.callback=n),e=Or(t,s,i),e!==null&&(An(e,t,i,r),Vl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=Lr(t),s=ir(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Or(t,s,i),e!==null&&(An(e,t,i,r),Vl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=Lr(t),i=ir(n,r);i.tag=2,e!=null&&(i.callback=e),e=Or(t,i,r),e!==null&&(An(e,t,r,n),Vl(e,t,r))}};function Sg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Qo(n,r)||!Qo(i,s):!0}function X0(t,e,n){var r=!1,i=zr,s=e.contextType;return typeof s=="object"&&s!==null?s=dn(s):(i=jt(e)?vi:Pt.current,r=e.contextTypes,s=(r=r!=null)?gs(t,i):zr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ig(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xu.enqueueReplaceState(e,e.state,null)}function yd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},$f(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=dn(s):(s=jt(e)?vi:Pt.current,i.context=gs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(gd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Xu.enqueueReplaceState(i,i.state,null),fu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Es(t,e){try{var n="",r=e;do n+=jw(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ch(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fS=typeof WeakMap=="function"?WeakMap:Map;function J0(t,e,n){n=ir(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vu||(vu=!0,Pd=r),vd(t,e)},n}function Z0(t,e,n){n=ir(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){vd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vd(t,e),typeof r!="function"&&(br===null?br=new Set([this]):br.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ag(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=RS.bind(null,t,e,n),e.then(t,t))}function Cg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ir(-1,1),e.tag=2,Or(n,e,1))),n.lanes|=1),t)}var pS=fr.ReactCurrentOwner,Lt=!1;function kt(t,e,n,r){e.child=t===null?P0(e,null,n,r):vs(e,t.child,n,r)}function Pg(t,e,n,r,i){n=n.render;var s=e.ref;return us(e,i),r=Hf(t,e,n,r,s,i),n=Wf(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lr(t,e,i)):(Ce&&n&&Df(e),e.flags|=1,kt(t,e,r,i),e.child)}function xg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!tp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,e_(t,e,s,r,i)):(t=jl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Qo,n(o,r)&&t.ref===e.ref)return lr(t,e,i)}return e.flags|=1,t=Fr(s,r),t.ref=e.ref,t.return=e,e.child=t}function e_(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Qo(s,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,lr(t,e,i)}return _d(t,e,n,r,i)}function t_(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(ns,Kt),Kt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(ns,Kt),Kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ee(ns,Kt),Kt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ee(ns,Kt),Kt|=r;return kt(t,e,i,n),e.child}function n_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _d(t,e,n,r,i){var s=jt(n)?vi:Pt.current;return s=gs(e,s),us(e,i),n=Hf(t,e,n,r,s,i),r=Wf(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lr(t,e,i)):(Ce&&r&&Df(e),e.flags|=1,kt(t,e,n,i),e.child)}function kg(t,e,n,r,i){if(jt(n)){var s=!0;lu(e)}else s=!1;if(us(e,i),e.stateNode===null)Ll(t,e),X0(e,n,r),yd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=dn(h):(h=jt(n)?vi:Pt.current,h=gs(e,h));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Ig(e,o,r,h),Ir=!1;var y=e.memoizedState;o.state=y,fu(e,r,o,i),u=e.memoizedState,l!==r||y!==u||$t.current||Ir?(typeof f=="function"&&(gd(e,n,f,r),u=e.memoizedState),(l=Ir||Sg(e,n,l,r,y,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,k0(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:_n(e.type,l),o.props=h,p=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=dn(u):(u=jt(n)?vi:Pt.current,u=gs(e,u));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||y!==u)&&Ig(e,o,r,u),Ir=!1,y=e.memoizedState,o.state=y,fu(e,r,o,i);var P=e.memoizedState;l!==p||y!==P||$t.current||Ir?(typeof T=="function"&&(gd(e,n,T,r),P=e.memoizedState),(h=Ir||Sg(e,n,h,r,y,P,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Ed(t,e,n,r,s,i)}function Ed(t,e,n,r,i,s){n_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&mg(e,n,!1),lr(t,e,s);r=e.stateNode,pS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=vs(e,t.child,null,s),e.child=vs(e,null,l,s)):kt(t,e,l,s),e.memoizedState=r.state,i&&mg(e,n,!0),e.child}function r_(t){var e=t.stateNode;e.pendingContext?pg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pg(t,e.context,!1),jf(t,e.containerInfo)}function Ng(t,e,n,r,i){return ys(),Vf(i),e.flags|=256,kt(t,e,n,r),e.child}var wd={dehydrated:null,treeContext:null,retryLane:0};function Td(t){return{baseLanes:t,cachePool:null,transitions:null}}function i_(t,e,n){var r=e.pendingProps,i=ke.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ee(ke,i&1),t===null)return pd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ec(o,r,0,null),t=di(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Td(n),e.memoizedState=wd,t):Gf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return mS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Fr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Fr(l,s):(s=di(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Td(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=wd,r}return s=t.child,t=s.sibling,r=Fr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Gf(t,e){return e=ec({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gl(t,e,n,r){return r!==null&&Vf(r),vs(e,t.child,null,n),t=Gf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ch(Error(j(422))),gl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ec({mode:"visible",children:r.children},i,0,null),s=di(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&vs(e,t.child,null,o),e.child.memoizedState=Td(o),e.memoizedState=wd,s);if(!(e.mode&1))return gl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(j(419)),r=ch(s,r,void 0),gl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Lt||l){if(r=nt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ar(t,i),An(r,t,i,-1))}return ep(),r=ch(Error(j(421))),gl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=PS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Gt=Vr(i.nextSibling),Qt=e,Ce=!0,wn=null,t!==null&&(an[ln++]=Zn,an[ln++]=er,an[ln++]=_i,Zn=t.id,er=t.overflow,_i=e),e=Gf(e,r.children),e.flags|=4096,e)}function Dg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),md(t.return,e,n)}function hh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function s_(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(kt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dg(t,n,e);else if(t.tag===19)Dg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&pu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),hh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&pu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}hh(e,!0,n,null,s);break;case"together":hh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ll(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gS(t,e,n){switch(e.tag){case 3:r_(e),ys();break;case 5:N0(e);break;case 1:jt(e.type)&&lu(e);break;case 4:jf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ee(hu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?i_(t,e,n):(Ee(ke,ke.current&1),t=lr(t,e,n),t!==null?t.sibling:null);Ee(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return s_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ee(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,t_(t,e,n)}return lr(t,e,n)}var o_,Sd,a_,l_;o_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sd=function(){};a_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,li($n.current);var s=null;switch(n){case"input":i=Wh(t,i),r=Wh(t,r),s=[];break;case"select":i=De({},i,{value:void 0}),r=De({},r,{value:void 0}),s=[];break;case"textarea":i=Gh(t,i),r=Gh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ou)}Yh(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Uo.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Uo.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Se("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};l_=function(t,e,n,r){n!==r&&(e.flags|=4)};function ho(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yS(t,e,n){var r=e.pendingProps;switch(Mf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return jt(e.type)&&au(),St(e),null;case 3:return r=e.stateNode,_s(),Ae($t),Ae(Pt),Uf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wn!==null&&(Nd(wn),wn=null))),Sd(t,e),St(e),null;case 5:Bf(e);var i=li(ea.current);if(n=e.type,t!==null&&e.stateNode!=null)a_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return St(e),null}if(t=li($n.current),pl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ln]=e,r[Jo]=s,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<vo.length;i++)Se(vo[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":Bm(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":zm(r,s),Se("invalid",r)}Yh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&fl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&fl(r.textContent,l,t),i=["children",""+l]):Uo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":sl(r),Um(r,s,!0);break;case"textarea":sl(r),Hm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ou)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ln]=e,t[Jo]=r,o_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Xh(n,r),n){case"dialog":Se("cancel",t),Se("close",t),i=r;break;case"iframe":case"object":case"embed":Se("load",t),i=r;break;case"video":case"audio":for(i=0;i<vo.length;i++)Se(vo[i],t);i=r;break;case"source":Se("error",t),i=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),i=r;break;case"details":Se("toggle",t),i=r;break;case"input":Bm(t,r),i=Wh(t,r),Se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=De({},r,{value:void 0}),Se("invalid",t);break;case"textarea":zm(t,r),i=Gh(t,r),Se("invalid",t);break;default:i=r}Yh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?$v(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Lv(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&zo(t,u):typeof u=="number"&&zo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Se("scroll",t):u!=null&&vf(t,s,u,o))}switch(n){case"input":sl(t),Um(t,r,!1);break;case"textarea":sl(t),Hm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ur(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ss(t,!!r.multiple,s,!1):r.defaultValue!=null&&ss(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ou)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)l_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=li(ea.current),li($n.current),pl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ln]=e,(s=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:fl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ln]=e,e.stateNode=r}return St(e),null;case 13:if(Ae(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Gt!==null&&e.mode&1&&!(e.flags&128))C0(),ys(),e.flags|=98560,s=!1;else if(s=pl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(j(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[Ln]=e}else ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),s=!1}else wn!==null&&(Nd(wn),wn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?Ge===0&&(Ge=3):ep())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return _s(),Sd(t,e),t===null&&Yo(e.stateNode.containerInfo),St(e),null;case 10:return Lf(e.type._context),St(e),null;case 17:return jt(e.type)&&au(),St(e),null;case 19:if(Ae(ke),s=e.memoizedState,s===null)return St(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ho(s,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pu(t),o!==null){for(e.flags|=128,ho(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(ke,ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&$e()>ws&&(e.flags|=128,r=!0,ho(s,!1),e.lanes=4194304)}else{if(!r)if(t=pu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ho(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ce)return St(e),null}else 2*$e()-s.renderingStartTime>ws&&n!==1073741824&&(e.flags|=128,r=!0,ho(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$e(),e.sibling=null,n=ke.current,Ee(ke,r?n&1|2:n&1),e):(St(e),null);case 22:case 23:return Zf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kt&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function vS(t,e){switch(Mf(e),e.tag){case 1:return jt(e.type)&&au(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _s(),Ae($t),Ae(Pt),Uf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bf(e),null;case 13:if(Ae(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));ys()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(ke),null;case 4:return _s(),null;case 10:return Lf(e.type._context),null;case 22:case 23:return Zf(),null;case 24:return null;default:return null}}var yl=!1,Ct=!1,_S=typeof WeakSet=="function"?WeakSet:Set,H=null;function ts(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function Id(t,e,n){try{n()}catch(r){be(t,e,r)}}var Mg=!1;function ES(t,e){if(ad=ru,t=f0(),Nf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,f=0,p=t,y=null;t:for(;;){for(var T;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(T=p.firstChild)!==null;)y=p,p=T;for(;;){if(p===t)break t;if(y===n&&++h===i&&(l=o),y===s&&++f===r&&(u=o),(T=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=T}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ld={focusedElem:t,selectionRange:n},ru=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var R=P.memoizedProps,D=P.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?R:_n(e.type,R),D);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(N){be(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return P=Mg,Mg=!1,P}function No(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Id(e,n,s)}i=i.next}while(i!==r)}}function Ju(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ad(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function u_(t){var e=t.alternate;e!==null&&(t.alternate=null,u_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ln],delete e[Jo],delete e[hd],delete e[nS],delete e[rS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function c_(t){return t.tag===5||t.tag===3||t.tag===4}function Vg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ou));else if(r!==4&&(t=t.child,t!==null))for(Cd(t,e,n),t=t.sibling;t!==null;)Cd(t,e,n),t=t.sibling}function Rd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rd(t,e,n),t=t.sibling;t!==null;)Rd(t,e,n),t=t.sibling}var ut=null,En=!1;function wr(t,e,n){for(n=n.child;n!==null;)h_(t,e,n),n=n.sibling}function h_(t,e,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(Hu,n)}catch{}switch(n.tag){case 5:Ct||ts(n,e);case 6:var r=ut,i=En;ut=null,wr(t,e,n),ut=r,En=i,ut!==null&&(En?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(En?(t=ut,n=n.stateNode,t.nodeType===8?ih(t.parentNode,n):t.nodeType===1&&ih(t,n),Ko(t)):ih(ut,n.stateNode));break;case 4:r=ut,i=En,ut=n.stateNode.containerInfo,En=!0,wr(t,e,n),ut=r,En=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Id(n,e,o),i=i.next}while(i!==r)}wr(t,e,n);break;case 1:if(!Ct&&(ts(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){be(n,e,l)}wr(t,e,n);break;case 21:wr(t,e,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,wr(t,e,n),Ct=r):wr(t,e,n);break;default:wr(t,e,n)}}function Og(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _S),e.forEach(function(r){var i=xS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ut=l.stateNode,En=!1;break e;case 3:ut=l.stateNode.containerInfo,En=!0;break e;case 4:ut=l.stateNode.containerInfo,En=!0;break e}l=l.return}if(ut===null)throw Error(j(160));h_(s,o,i),ut=null,En=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){be(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)d_(e,t),e=e.sibling}function d_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vn(e,t),Vn(t),r&4){try{No(3,t,t.return),Ju(3,t)}catch(R){be(t,t.return,R)}try{No(5,t,t.return)}catch(R){be(t,t.return,R)}}break;case 1:vn(e,t),Vn(t),r&512&&n!==null&&ts(n,n.return);break;case 5:if(vn(e,t),Vn(t),r&512&&n!==null&&ts(n,n.return),t.flags&32){var i=t.stateNode;try{zo(i,"")}catch(R){be(t,t.return,R)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Vv(i,s),Xh(l,o);var h=Xh(l,s);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?$v(i,p):f==="dangerouslySetInnerHTML"?Lv(i,p):f==="children"?zo(i,p):vf(i,f,p,h)}switch(l){case"input":qh(i,s);break;case"textarea":Ov(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var T=s.value;T!=null?ss(i,!!s.multiple,T,!1):y!==!!s.multiple&&(s.defaultValue!=null?ss(i,!!s.multiple,s.defaultValue,!0):ss(i,!!s.multiple,s.multiple?[]:"",!1))}i[Jo]=s}catch(R){be(t,t.return,R)}}break;case 6:if(vn(e,t),Vn(t),r&4){if(t.stateNode===null)throw Error(j(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(R){be(t,t.return,R)}}break;case 3:if(vn(e,t),Vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ko(e.containerInfo)}catch(R){be(t,t.return,R)}break;case 4:vn(e,t),Vn(t);break;case 13:vn(e,t),Vn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Xf=$e())),r&4&&Og(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(h=Ct)||f,vn(e,t),Ct=h):vn(e,t),Vn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(p=H=f;H!==null;){switch(y=H,T=y.child,y.tag){case 0:case 11:case 14:case 15:No(4,y,y.return);break;case 1:ts(y,y.return);var P=y.stateNode;if(typeof P.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(R){be(r,n,R)}}break;case 5:ts(y,y.return);break;case 22:if(y.memoizedState!==null){Lg(p);continue}}T!==null?(T.return=y,H=T):Lg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Fv("display",o))}catch(R){be(t,t.return,R)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(R){be(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:vn(e,t),Vn(t),r&4&&Og(t);break;case 21:break;default:vn(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(c_(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(zo(i,""),r.flags&=-33);var s=Vg(t);Rd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Vg(t);Cd(t,l,o);break;default:throw Error(j(161))}}catch(u){be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wS(t,e,n){H=t,f_(t)}function f_(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var i=H,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||yl;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Ct;l=yl;var h=Ct;if(yl=o,(Ct=u)&&!h)for(H=i;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?Fg(i):u!==null?(u.return=o,H=u):Fg(i);for(;s!==null;)H=s,f_(s),s=s.sibling;H=i,yl=l,Ct=h}bg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,H=s):bg(t)}}function bg(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||Ju(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:_n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Eg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Eg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Ko(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}Ct||e.flags&512&&Ad(e)}catch(y){be(e,e.return,y)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Lg(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Fg(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ju(4,e)}catch(u){be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){be(e,i,u)}}var s=e.return;try{Ad(e)}catch(u){be(e,s,u)}break;case 5:var o=e.return;try{Ad(e)}catch(u){be(e,o,u)}}}catch(u){be(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var TS=Math.ceil,yu=fr.ReactCurrentDispatcher,Qf=fr.ReactCurrentOwner,hn=fr.ReactCurrentBatchConfig,ae=0,nt=null,He=null,ft=0,Kt=0,ns=Gr(0),Ge=0,ia=null,wi=0,Zu=0,Yf=0,Do=null,bt=null,Xf=0,ws=1/0,Yn=null,vu=!1,Pd=null,br=null,vl=!1,xr=null,_u=0,Mo=0,xd=null,Fl=-1,$l=0;function Nt(){return ae&6?$e():Fl!==-1?Fl:Fl=$e()}function Lr(t){return t.mode&1?ae&2&&ft!==0?ft&-ft:sS.transition!==null?($l===0&&($l=Xv()),$l):(t=pe,t!==0||(t=window.event,t=t===void 0?16:i0(t.type)),t):1}function An(t,e,n,r){if(50<Mo)throw Mo=0,xd=null,Error(j(185));_a(t,n,r),(!(ae&2)||t!==nt)&&(t===nt&&(!(ae&2)&&(Zu|=n),Ge===4&&Rr(t,ft)),Bt(t,r),n===1&&ae===0&&!(e.mode&1)&&(ws=$e()+500,Qu&&Qr()))}function Bt(t,e){var n=t.callbackNode;sT(t,e);var r=nu(t,t===nt?ft:0);if(r===0)n!==null&&Km(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Km(n),e===1)t.tag===0?iS($g.bind(null,t)):S0($g.bind(null,t)),eS(function(){!(ae&6)&&Qr()}),n=null;else{switch(Jv(r)){case 1:n=Sf;break;case 4:n=Qv;break;case 16:n=tu;break;case 536870912:n=Yv;break;default:n=tu}n=w_(n,p_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function p_(t,e){if(Fl=-1,$l=0,ae&6)throw Error(j(327));var n=t.callbackNode;if(cs()&&t.callbackNode!==n)return null;var r=nu(t,t===nt?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Eu(t,r);else{e=r;var i=ae;ae|=2;var s=g_();(nt!==t||ft!==e)&&(Yn=null,ws=$e()+500,hi(t,e));do try{AS();break}catch(l){m_(t,l)}while(!0);bf(),yu.current=s,ae=i,He!==null?e=0:(nt=null,ft=0,e=Ge)}if(e!==0){if(e===2&&(i=nd(t),i!==0&&(r=i,e=kd(t,i))),e===1)throw n=ia,hi(t,0),Rr(t,r),Bt(t,$e()),n;if(e===6)Rr(t,r);else{if(i=t.current.alternate,!(r&30)&&!SS(i)&&(e=Eu(t,r),e===2&&(s=nd(t),s!==0&&(r=s,e=kd(t,s))),e===1))throw n=ia,hi(t,0),Rr(t,r),Bt(t,$e()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:ni(t,bt,Yn);break;case 3:if(Rr(t,r),(r&130023424)===r&&(e=Xf+500-$e(),10<e)){if(nu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=cd(ni.bind(null,t,bt,Yn),e);break}ni(t,bt,Yn);break;case 4:if(Rr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-In(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*TS(r/1960))-r,10<r){t.timeoutHandle=cd(ni.bind(null,t,bt,Yn),r);break}ni(t,bt,Yn);break;case 5:ni(t,bt,Yn);break;default:throw Error(j(329))}}}return Bt(t,$e()),t.callbackNode===n?p_.bind(null,t):null}function kd(t,e){var n=Do;return t.current.memoizedState.isDehydrated&&(hi(t,e).flags|=256),t=Eu(t,e),t!==2&&(e=bt,bt=n,e!==null&&Nd(e)),t}function Nd(t){bt===null?bt=t:bt.push.apply(bt,t)}function SS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Rn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rr(t,e){for(e&=~Yf,e&=~Zu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-In(e),r=1<<n;t[n]=-1,e&=~r}}function $g(t){if(ae&6)throw Error(j(327));cs();var e=nu(t,0);if(!(e&1))return Bt(t,$e()),null;var n=Eu(t,e);if(t.tag!==0&&n===2){var r=nd(t);r!==0&&(e=r,n=kd(t,r))}if(n===1)throw n=ia,hi(t,0),Rr(t,e),Bt(t,$e()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ni(t,bt,Yn),Bt(t,$e()),null}function Jf(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(ws=$e()+500,Qu&&Qr())}}function Ti(t){xr!==null&&xr.tag===0&&!(ae&6)&&cs();var e=ae;ae|=1;var n=hn.transition,r=pe;try{if(hn.transition=null,pe=1,t)return t()}finally{pe=r,hn.transition=n,ae=e,!(ae&6)&&Qr()}}function Zf(){Kt=ns.current,Ae(ns)}function hi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ZT(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Mf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&au();break;case 3:_s(),Ae($t),Ae(Pt),Uf();break;case 5:Bf(r);break;case 4:_s();break;case 13:Ae(ke);break;case 19:Ae(ke);break;case 10:Lf(r.type._context);break;case 22:case 23:Zf()}n=n.return}if(nt=t,He=t=Fr(t.current,null),ft=Kt=e,Ge=0,ia=null,Yf=Zu=wi=0,bt=Do=null,ai!==null){for(e=0;e<ai.length;e++)if(n=ai[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ai=null}return t}function m_(t,e){do{var n=He;try{if(bf(),Ol.current=gu,mu){for(var r=Ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}mu=!1}if(Ei=0,Ze=We=Ne=null,ko=!1,ta=0,Qf.current=null,n===null||n.return===null){Ge=1,ia=e,He=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=ft,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=Cg(o);if(T!==null){T.flags&=-257,Rg(T,o,l,s,e),T.mode&1&&Ag(s,h,e),e=T,u=h;var P=e.updateQueue;if(P===null){var R=new Set;R.add(u),e.updateQueue=R}else P.add(u);break e}else{if(!(e&1)){Ag(s,h,e),ep();break e}u=Error(j(426))}}else if(Ce&&l.mode&1){var D=Cg(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Rg(D,o,l,s,e),Vf(Es(u,l));break e}}s=u=Es(u,l),Ge!==4&&(Ge=2),Do===null?Do=[s]:Do.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=J0(s,u,e);_g(s,w);break e;case 1:l=u;var _=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(br===null||!br.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=Z0(s,l,e);_g(s,N);break e}}s=s.return}while(s!==null)}v_(n)}catch(L){e=L,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function g_(){var t=yu.current;return yu.current=gu,t===null?gu:t}function ep(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),nt===null||!(wi&268435455)&&!(Zu&268435455)||Rr(nt,ft)}function Eu(t,e){var n=ae;ae|=2;var r=g_();(nt!==t||ft!==e)&&(Yn=null,hi(t,e));do try{IS();break}catch(i){m_(t,i)}while(!0);if(bf(),ae=n,yu.current=r,He!==null)throw Error(j(261));return nt=null,ft=0,Ge}function IS(){for(;He!==null;)y_(He)}function AS(){for(;He!==null&&!Yw();)y_(He)}function y_(t){var e=E_(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,e===null?v_(t):He=e,Qf.current=null}function v_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vS(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,He=null;return}}else if(n=yS(n,e,Kt),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Ge===0&&(Ge=5)}function ni(t,e,n){var r=pe,i=hn.transition;try{hn.transition=null,pe=1,CS(t,e,n,r)}finally{hn.transition=i,pe=r}return null}function CS(t,e,n,r){do cs();while(xr!==null);if(ae&6)throw Error(j(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(oT(t,s),t===nt&&(He=nt=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vl||(vl=!0,w_(tu,function(){return cs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hn.transition,hn.transition=null;var o=pe;pe=1;var l=ae;ae|=4,Qf.current=null,ES(t,n),d_(n,t),qT(ld),ru=!!ad,ld=ad=null,t.current=n,wS(n),Xw(),ae=l,pe=o,hn.transition=s}else t.current=n;if(vl&&(vl=!1,xr=t,_u=i),s=t.pendingLanes,s===0&&(br=null),eT(n.stateNode),Bt(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(vu)throw vu=!1,t=Pd,Pd=null,t;return _u&1&&t.tag!==0&&cs(),s=t.pendingLanes,s&1?t===xd?Mo++:(Mo=0,xd=t):Mo=0,Qr(),null}function cs(){if(xr!==null){var t=Jv(_u),e=hn.transition,n=pe;try{if(hn.transition=null,pe=16>t?16:t,xr===null)var r=!1;else{if(t=xr,xr=null,_u=0,ae&6)throw Error(j(331));var i=ae;for(ae|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(H=h;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:No(8,f,s)}var p=f.child;if(p!==null)p.return=f,H=p;else for(;H!==null;){f=H;var y=f.sibling,T=f.return;if(u_(f),f===h){H=null;break}if(y!==null){y.return=T,H=y;break}H=T}}}var P=s.alternate;if(P!==null){var R=P.child;if(R!==null){P.child=null;do{var D=R.sibling;R.sibling=null,R=D}while(R!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:No(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,H=w;break e}H=s.return}}var _=t.current;for(H=_;H!==null;){o=H;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,H=S;else e:for(o=_;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ju(9,l)}}catch(L){be(l,l.return,L)}if(l===o){H=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,H=N;break e}H=l.return}}if(ae=i,Qr(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(Hu,t)}catch{}r=!0}return r}finally{pe=n,hn.transition=e}}return!1}function jg(t,e,n){e=Es(n,e),e=J0(t,e,1),t=Or(t,e,1),e=Nt(),t!==null&&(_a(t,1,e),Bt(t,e))}function be(t,e,n){if(t.tag===3)jg(t,t,n);else for(;e!==null;){if(e.tag===3){jg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(br===null||!br.has(r))){t=Es(n,t),t=Z0(e,t,1),e=Or(e,t,1),t=Nt(),e!==null&&(_a(e,1,t),Bt(e,t));break}}e=e.return}}function RS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(ft&n)===n&&(Ge===4||Ge===3&&(ft&130023424)===ft&&500>$e()-Xf?hi(t,0):Yf|=n),Bt(t,e)}function __(t,e){e===0&&(t.mode&1?(e=ll,ll<<=1,!(ll&130023424)&&(ll=4194304)):e=1);var n=Nt();t=ar(t,e),t!==null&&(_a(t,e,n),Bt(t,n))}function PS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),__(t,n)}function xS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),__(t,n)}var E_;E_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$t.current)Lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lt=!1,gS(t,e,n);Lt=!!(t.flags&131072)}else Lt=!1,Ce&&e.flags&1048576&&I0(e,cu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ll(t,e),t=e.pendingProps;var i=gs(e,Pt.current);us(e,n),i=Hf(null,e,r,t,i,n);var s=Wf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(s=!0,lu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$f(e),i.updater=Xu,e.stateNode=i,i._reactInternals=e,yd(e,r,t,n),e=Ed(null,e,r,!0,s,n)):(e.tag=0,Ce&&s&&Df(e),kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ll(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=NS(r),t=_n(r,t),i){case 0:e=_d(null,e,r,t,n);break e;case 1:e=kg(null,e,r,t,n);break e;case 11:e=Pg(null,e,r,t,n);break e;case 14:e=xg(null,e,r,_n(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),_d(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),kg(t,e,r,i,n);case 3:e:{if(r_(e),t===null)throw Error(j(387));r=e.pendingProps,s=e.memoizedState,i=s.element,k0(t,e),fu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Es(Error(j(423)),e),e=Ng(t,e,r,n,i);break e}else if(r!==i){i=Es(Error(j(424)),e),e=Ng(t,e,r,n,i);break e}else for(Gt=Vr(e.stateNode.containerInfo.firstChild),Qt=e,Ce=!0,wn=null,n=P0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ys(),r===i){e=lr(t,e,n);break e}kt(t,e,r,n)}e=e.child}return e;case 5:return N0(e),t===null&&pd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ud(r,i)?o=null:s!==null&&ud(r,s)&&(e.flags|=32),n_(t,e),kt(t,e,o,n),e.child;case 6:return t===null&&pd(e),null;case 13:return i_(t,e,n);case 4:return jf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vs(e,null,r,n):kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Pg(t,e,r,i,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ee(hu,r._currentValue),r._currentValue=o,s!==null)if(Rn(s.value,o)){if(s.children===i.children&&!$t.current){e=lr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=ir(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),md(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(j(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),md(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,us(e,n),i=dn(i),r=r(i),e.flags|=1,kt(t,e,r,n),e.child;case 14:return r=e.type,i=_n(r,e.pendingProps),i=_n(r.type,i),xg(t,e,r,i,n);case 15:return e_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Ll(t,e),e.tag=1,jt(r)?(t=!0,lu(e)):t=!1,us(e,n),X0(e,r,i),yd(e,r,i,n),Ed(null,e,r,!0,t,n);case 19:return s_(t,e,n);case 22:return t_(t,e,n)}throw Error(j(156,e.tag))};function w_(t,e){return Gv(t,e)}function kS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,e,n,r){return new kS(t,e,n,r)}function tp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function NS(t){if(typeof t=="function")return tp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ef)return 11;if(t===wf)return 14}return 2}function Fr(t,e){var n=t.alternate;return n===null?(n=cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")tp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qi:return di(n.children,i,s,e);case _f:o=8,i|=8;break;case Bh:return t=cn(12,n,e,i|2),t.elementType=Bh,t.lanes=s,t;case Uh:return t=cn(13,n,e,i),t.elementType=Uh,t.lanes=s,t;case zh:return t=cn(19,n,e,i),t.elementType=zh,t.lanes=s,t;case Nv:return ec(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xv:o=10;break e;case kv:o=9;break e;case Ef:o=11;break e;case wf:o=14;break e;case Sr:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=cn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function di(t,e,n,r){return t=cn(7,t,r,e),t.lanes=n,t}function ec(t,e,n,r){return t=cn(22,t,r,e),t.elementType=Nv,t.lanes=n,t.stateNode={isHidden:!1},t}function dh(t,e,n){return t=cn(6,t,null,e),t.lanes=n,t}function fh(t,e,n){return e=cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function DS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kc(0),this.expirationTimes=Kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function np(t,e,n,r,i,s,o,l,u){return t=new DS(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=cn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$f(s),t}function MS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function T_(t){if(!t)return zr;t=t._reactInternals;e:{if(Ri(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(jt(n))return T0(t,n,e)}return e}function S_(t,e,n,r,i,s,o,l,u){return t=np(n,r,!0,t,i,s,o,l,u),t.context=T_(null),n=t.current,r=Nt(),i=Lr(n),s=ir(r,i),s.callback=e??null,Or(n,s,i),t.current.lanes=i,_a(t,i,r),Bt(t,r),t}function tc(t,e,n,r){var i=e.current,s=Nt(),o=Lr(i);return n=T_(n),e.context===null?e.context=n:e.pendingContext=n,e=ir(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Or(i,e,o),t!==null&&(An(t,i,o,s),Vl(t,i,o)),o}function wu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rp(t,e){Bg(t,e),(t=t.alternate)&&Bg(t,e)}function VS(){return null}var I_=typeof reportError=="function"?reportError:function(t){console.error(t)};function ip(t){this._internalRoot=t}nc.prototype.render=ip.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));tc(t,e,null,null)};nc.prototype.unmount=ip.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ti(function(){tc(null,t,null,null)}),e[or]=null}};function nc(t){this._internalRoot=t}nc.prototype.unstable_scheduleHydration=function(t){if(t){var e=t0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cr.length&&e!==0&&e<Cr[n].priority;n++);Cr.splice(n,0,t),n===0&&r0(t)}};function sp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ug(){}function OS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=wu(o);s.call(h)}}var o=S_(e,r,t,0,null,!1,!1,"",Ug);return t._reactRootContainer=o,t[or]=o.current,Yo(t.nodeType===8?t.parentNode:t),Ti(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=wu(u);l.call(h)}}var u=np(t,0,!1,null,null,!1,!1,"",Ug);return t._reactRootContainer=u,t[or]=u.current,Yo(t.nodeType===8?t.parentNode:t),Ti(function(){tc(e,u,n,r)}),u}function ic(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=wu(o);l.call(u)}}tc(e,o,t,i)}else o=OS(n,e,t,i,r);return wu(o)}Zv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yo(e.pendingLanes);n!==0&&(If(e,n|1),Bt(e,$e()),!(ae&6)&&(ws=$e()+500,Qr()))}break;case 13:Ti(function(){var r=ar(t,1);if(r!==null){var i=Nt();An(r,t,1,i)}}),rp(t,1)}};Af=function(t){if(t.tag===13){var e=ar(t,134217728);if(e!==null){var n=Nt();An(e,t,134217728,n)}rp(t,134217728)}};e0=function(t){if(t.tag===13){var e=Lr(t),n=ar(t,e);if(n!==null){var r=Nt();An(n,t,e,r)}rp(t,e)}};t0=function(){return pe};n0=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};Zh=function(t,e,n){switch(e){case"input":if(qh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Gu(r);if(!i)throw Error(j(90));Mv(r),qh(r,i)}}}break;case"textarea":Ov(t,n);break;case"select":e=n.value,e!=null&&ss(t,!!n.multiple,e,!1)}};Uv=Jf;zv=Ti;var bS={usingClientEntryPoint:!1,Events:[wa,Yi,Gu,jv,Bv,Jf]},fo={findFiberByHostInstance:oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LS={bundleType:fo.bundleType,version:fo.version,rendererPackageName:fo.rendererPackageName,rendererConfig:fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qv(t),t===null?null:t.stateNode},findFiberByHostInstance:fo.findFiberByHostInstance||VS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_l.isDisabled&&_l.supportsFiber)try{Hu=_l.inject(LS),Fn=_l}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bS;Jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sp(e))throw Error(j(200));return MS(t,e,null,n)};Jt.createRoot=function(t,e){if(!sp(t))throw Error(j(299));var n=!1,r="",i=I_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=np(t,1,!1,null,null,n,!1,r,i),t[or]=e.current,Yo(t.nodeType===8?t.parentNode:t),new ip(e)};Jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=qv(e),t=t===null?null:t.stateNode,t};Jt.flushSync=function(t){return Ti(t)};Jt.hydrate=function(t,e,n){if(!rc(e))throw Error(j(200));return ic(null,t,e,!0,n)};Jt.hydrateRoot=function(t,e,n){if(!sp(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=I_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=S_(e,null,t,1,n??null,i,!1,s,o),t[or]=e.current,Yo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new nc(e)};Jt.render=function(t,e,n){if(!rc(e))throw Error(j(200));return ic(null,t,e,!1,n)};Jt.unmountComponentAtNode=function(t){if(!rc(t))throw Error(j(40));return t._reactRootContainer?(Ti(function(){ic(null,null,t,!1,function(){t._reactRootContainer=null,t[or]=null})}),!0):!1};Jt.unstable_batchedUpdates=Jf;Jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!rc(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return ic(t,e,n,!1,r)};Jt.version="18.3.1-next-f1338f8080-20240426";function A_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A_)}catch(t){console.error(t)}}A_(),Av.exports=Jt;var si=Av.exports,C_,zg=si;C_=zg.createRoot,zg.hydrateRoot;const tr={EASY:"",NORMAL:"",HARD:"",HELL:""},FS={[tr.EASY]:[25,50,75,125,250,300,350,450,550,600,800,1e3,1100,1250,1400,1600,2e3,2100,2400,2800],[tr.NORMAL]:[50,100,150,250,500,600,750,900,1100,1200,1600,2e3,2200,2500,2800,3200,3900,4200,4900,5700],[tr.HARD]:[75,150,225,375,750,900,1100,1400,1600,1900,2400,3e3,3400,3800,4300,4800,5900,6300,7300,8500],[tr.HELL]:[100,200,400,500,1100,1400,1700,2100,2400,2800,3600,4500,5100,5700,6400,7200,8800,9500,10900,12700]},$S=t=>{const[e,n]=b.useState(t),r=b.useMemo(()=>{const{level:l,numCharacters:u,difficulty:h}=e;return FS[h][l-1]*u},[e]);return{settings:e,setLevel:l=>{n({...e,level:l})},setNumCharacters:l=>{n({...e,numCharacters:l})},setDifficulty:l=>{n({...e,difficulty:l})},totalExp:r}},ph=()=>V.jsx("hr",{className:"my-1"}),Qn=({label:t,text:e})=>V.jsxs("p",{className:"card-text my-0",children:[V.jsx("b",{children:t}),"",e]}),te={STR:"",DEX:"",CON:"",INT:"",WIS:"",CHA:""},jS=({label:t,value:e})=>{const n=Math.floor((e-10)/2),r=n>=0?`+${n}`:n.toString();return V.jsxs("div",{className:"col px-0",children:[V.jsx("p",{className:"my-0",children:V.jsx("b",{children:t})}),V.jsxs("p",{className:"my-0",children:[e,"(",r,")"]})]})},BS=({monster:t})=>{const{name:e,num:n,size:r,monsterType:i,ac:s,hp:o,move:l,cr:u,exp:h,abilities:f,actions:p,skills:y,senses:T,languages:P,specialAbilities:R}=t;return V.jsxs("div",{className:"card",children:[V.jsxs("div",{className:"card-header d-flex",children:[V.jsx("h5",{className:"card-title mb-0",children:e}),V.jsxs("span",{className:"ms-auto",children:[n,""]})]}),V.jsxs("div",{className:"card-body py-2",children:[V.jsxs("p",{className:"card-text my-0",children:[r,"",i,""]}),V.jsx(ph,{}),V.jsx(Qn,{label:"AC",text:s}),V.jsx(Qn,{label:"hp",text:o}),V.jsx(Qn,{label:"",text:l.join("")}),V.jsx(ph,{}),Object.keys(y).length>0&&V.jsx(Qn,{label:"",text:Object.entries(y).map(([D,w])=>`${D}+${w}`).join("")}),V.jsx(Qn,{label:"",text:T.join("")}),Object.keys(P).length>0&&V.jsx(Qn,{label:"",text:P.join("")}),V.jsx(Qn,{label:"",text:`${u}(${h}exp)`}),V.jsx(ph,{}),V.jsx("div",{className:"row text-center",children:Object.values(te).map(D=>V.jsx(jS,{label:D,value:f[D]},D))}),V.jsx("hr",{className:"my-1"}),V.jsx("h6",{className:"card-title mt-2",children:""}),p.map(({label:D,text:w})=>V.jsx(Qn,{label:D,text:w},D)),V.jsx("hr",{className:"my-1"}),R.map(({label:D,text:w})=>V.jsx(Qn,{label:D,text:w},D))]})]})},US={level:4,numCharacters:4,difficulty:tr.NORMAL},_o=t=>t[Math.floor(Math.random()*t.length)],jn=t=>[...Array(t).keys()],Hg={"1/8":25,"1/4":50,"1/2":100,1:200,2:450,3:700,4:1100,5:1800,6:2300,7:2900,8:3900,9:5e3,10:5900,11:7200,12:8400,13:1e4,14:11500,15:13e3,16:15e3,17:18e3,18:2e4,19:22e3,20:25e3,21:33e3,22:41e3,23:5e4,24:62e3,25:75e3,26:9e4,27:105e3,28:12e4,29:135e3,30:155e3},zS={"1/8":{baseBonus:2,ac:13,hpMin:7,hpMax:35,atBonus:3,damageMin:2,damageMax:3,save:13},"1/4":{baseBonus:2,ac:13,hpMin:36,hpMax:49,atBonus:3,damageMin:4,damageMax:5,save:13},"1/2":{baseBonus:2,ac:13,hpMin:50,hpMax:70,atBonus:3,damageMin:6,damageMax:8,save:13},1:{baseBonus:2,ac:13,hpMin:71,hpMax:85,atBonus:3,damageMin:9,damageMax:14,save:13},2:{baseBonus:2,ac:13,hpMin:86,hpMax:100,atBonus:3,damageMin:15,damageMax:20,save:13},3:{baseBonus:2,ac:13,hpMin:101,hpMax:115,atBonus:3,damageMin:21,damageMax:26,save:13},4:{baseBonus:2,ac:14,hpMin:116,hpMax:130,atBonus:4,damageMin:27,damageMax:32,save:14},5:{baseBonus:3,ac:15,hpMin:131,hpMax:145,atBonus:5,damageMin:33,damageMax:38,save:15},6:{baseBonus:3,ac:15,hpMin:146,hpMax:160,atBonus:5,damageMin:39,damageMax:44,save:15},7:{baseBonus:3,ac:15,hpMin:161,hpMax:175,atBonus:5,damageMin:45,damageMax:50,save:15},8:{baseBonus:3,ac:16,hpMin:176,hpMax:190,atBonus:5,damageMin:51,damageMax:56,save:16},9:{baseBonus:4,ac:16,hpMin:191,hpMax:205,atBonus:6,damageMin:57,damageMax:62,save:16},10:{baseBonus:4,ac:17,hpMin:206,hpMax:220,atBonus:6,damageMin:63,damageMax:68,save:17},11:{baseBonus:4,ac:17,hpMin:221,hpMax:235,atBonus:6,damageMin:69,damageMax:74,save:17},12:{baseBonus:4,ac:17,hpMin:236,hpMax:250,atBonus:6,damageMin:75,damageMax:80,save:17},13:{baseBonus:5,ac:18,hpMin:251,hpMax:265,atBonus:7,damageMin:81,damageMax:86,save:18},14:{baseBonus:5,ac:18,hpMin:266,hpMax:280,atBonus:7,damageMin:87,damageMax:92,save:18},15:{baseBonus:5,ac:18,hpMin:281,hpMax:295,atBonus:7,damageMin:93,damageMax:98,save:18},16:{baseBonus:5,ac:18,hpMin:296,hpMax:310,atBonus:7,damageMin:99,damageMax:104,save:18},17:{baseBonus:6,ac:19,hpMin:311,hpMax:325,atBonus:8,damageMin:105,damageMax:110,save:19},18:{baseBonus:6,ac:19,hpMin:326,hpMax:340,atBonus:8,damageMin:111,damageMax:116,save:19},19:{baseBonus:6,ac:19,hpMin:341,hpMax:355,atBonus:8,damageMin:117,damageMax:122,save:19},20:{baseBonus:6,ac:19,hpMin:356,hpMax:400,atBonus:8,damageMin:123,damageMax:140,save:19},21:{baseBonus:7,ac:19,hpMin:401,hpMax:445,atBonus:9,damageMin:141,damageMax:158,save:19},22:{baseBonus:7,ac:19,hpMin:446,hpMax:490,atBonus:9,damageMin:159,damageMax:176,save:19},23:{baseBonus:7,ac:19,hpMin:491,hpMax:535,atBonus:9,damageMin:177,damageMax:194,save:19},24:{baseBonus:7,ac:19,hpMin:536,hpMax:580,atBonus:9,damageMin:195,damageMax:212,save:19},25:{baseBonus:8,ac:19,hpMin:581,hpMax:625,atBonus:10,damageMin:213,damageMax:230,save:19},26:{baseBonus:8,ac:19,hpMin:626,hpMax:670,atBonus:10,damageMin:231,damageMax:248,save:19},27:{baseBonus:8,ac:19,hpMin:671,hpMax:715,atBonus:10,damageMin:249,damageMax:266,save:19},28:{baseBonus:8,ac:19,hpMin:716,hpMax:760,atBonus:10,damageMin:267,damageMax:284,save:19},29:{baseBonus:9,ac:19,hpMin:761,hpMax:805,atBonus:11,damageMin:285,damageMax:302,save:19},30:{baseBonus:9,ac:19,hpMin:806,hpMax:850,atBonus:11,damageMin:303,damageMax:320,save:19}},ri={TINY:"",SMALL:"",MEDIUM:"",LARGE:"",HUGE:"",GARGANTUAN:""},ge={ABERRATION:"",BEAST:"",CELESTIAL:"",CONSTRUCT:"",DRAGON:"",ELEMENTAL:"",FEY:"",FIEND:"",GIANT:"",HUMANOID:"",MONSTROSITY:"",OOZE:"",PLANT:"",UNDEAD:""},Fs={Monster:"Monster",Character:"Character"},nr=50,Tu=44,rs=1,HS=2,Wg=nr-rs,Sa=16,sc=20,op=["##............##","#..............#","................","................","................","................","................","................","........####....","........####....","...####.........","...####.........","................",".............#..",".............#..",".............#..","................","................","...............#","..............##"],WS=t=>Math.floor(Math.random()*20)+1+R_(t),R_=t=>Math.floor((t.abilities[te.DEX]-10)/2),qS=()=>{for(;;){const t=Math.floor(Math.random()*Sa),e=Math.floor(Math.random()*10);if(op[e][t]===".")return{x:t,y:e}}},KS=(t,e)=>{const{x:n,y:r}=qS(),{hp:i,name:s}=t;return{id:`m${e}`,type:Fs.Monster,name:s,x:n,y:r,hp:i}},GS=t=>e=>({...e,move:[...e.move,t]}),QS=(t,e)=>n=>({...n,specialAbilities:[...n.specialAbilities,{label:t,text:e}]}),YS=t=>{const e=Math.floor(t),n=_o([4,6,8,10,12]),r=(n+1)/2,i=Math.max(1,Math.floor(e/r)),s=Math.floor(e-i*r),o=s===0?"":s>0?`+${s}`:`${s}`;return`${e}(${i}d${n}${o})`},XS={name:"string",num:1,size:"",monsterType:"",ac:10,hp:1,save:1,move:[],skills:{},senses:[],languages:[],cr:"string",exp:-1,abilities:{[te.STR]:10,[te.DEX]:10,[te.CON]:10,[te.INT]:10,[te.WIS]:10,[te.CHA]:10},actions:[],specialAbilities:[],toHit:-1,damage:-1,diceNum:-1,damageMod:-1,baseBonus:-1,initiative:-1},Ot={initiative:WS,dexMod:R_,unit:KS,empty:XS,moveEnhancer:GS,saEnhancer:QS,toDmDice:YS},JS=(t,e)=>n=>({...n,actions:[...n.actions,{label:t,text:e}]}),ZS=(t,e)=>n=>({...n,specialAbilities:[...n.specialAbilities,{label:t,text:e}]}),eI=t=>e=>({...e,move:[...e.move,t]}),tI=t=>e=>({...e,senses:[...e.senses,t]}),nI=t=>e=>({...e,languages:[...e.languages,t]}),rI=(t,e)=>n=>({...n,abilities:{...n.abilities,[t]:n.abilities[t]+e}}),iI=t=>e=>({...e,size:t}),B=t=>e=>{const n={:`+${e.toHit}51:${Ot.toDmDice(e.damage)}[]`,:`+${e.toHit}51:${Ot.toDmDice(e.damage)}[]`,:`+${e.toHit}51:${Ot.toDmDice(e.damage)}[]`,:`+${e.toHit}601:${Ot.toDmDice(e.damage)}[]`,:`+${e.toHit}601:${Ot.toDmDice(e.damage)}[]`,:`603:${Ot.toDmDice(Math.floor(e.damage/6))}[]`};for(const[o,l]of Object.entries(n))if(t===o)return JS(t,l)(e);const r={:"",:"",:"",:"20",:"",:"",:"",:"[][][]",:`${e.save}1`,:`${e.save}[]`,:"[][][][]",:":[][]",:"[]0+51",:`(6)30ft${e.save}hp1${Ot.toDmDice(e.damage/4)}[]`,:`[][]${Math.floor(e.hp/5)+1}`,:`30ft${e.save-5}${e.save}`,"":`(5-6)1${Ot.toDmDice(e.hp/5)}hp`,:"30ft",:"",:`20ft${e.save}[]`,:`${e.save}[]`,:`${e.save}[]`,:`(5-6)30ft${e.save}[]${e.damage}[]`,:`(5-6)60ft${e.save}[]${Ot.toDmDice(e.damage/2)}[]`,:`(5-6)30ft3${e.save}[]${Ot.toDmDice(e.damage/3)}[]`,:"",:`(4-6)${e.save}[]${Ot.toDmDice(e.damage/2)}[]${e.save}`,:`130ft${Ot.toDmDice(e.damage/2)}[]`};for(const[o,l]of Object.entries(r))if(t===o)return ZS(t,l)(e);if(t.endsWith("ft"))return eI(t)(e);if(t.startsWith(""))return tI(t)(e);if(t.endsWith(""))return nI(t)(e);const i={"+":[te.STR,4],"++":[te.STR,8],"-":[te.STR,-4],"--":[te.STR,-8],"+":[te.DEX,4],"++":[te.DEX,8],"-":[te.DEX,-4],"--":[te.DEX,-8],"+":[te.CON,4],"++":[te.CON,8],"-":[te.CON,-4],"--":[te.CON,-8],"+":[te.INT,4],"++":[te.INT,8],"-":[te.INT,-4],"--":[te.INT,-8],"+":[te.WIS,4],"++":[te.WIS,8],"-":[te.WIS,-4],"--":[te.WIS,-8],"+":[te.CHA,4],"++":[te.CHA,8],"-":[te.CHA,-4],"--":[te.CHA,-8]};if(t in i){const[o,l]=i[t];return rI(o,l)(e)}const s={:ri.TINY,:ri.SMALL,:ri.MEDIUM,:ri.LARGE,:ri.HUGE,:ri.GARGANTUAN};if(t in s)return iI(s[t])(e);throw new Error(`Unknown label: ${t}`)},X=(...t)=>e=>t.reduce((n,r)=>r(n),e),rt={TYPE:"type",TERRAIN:"terrain",RACE:"race",CLASS:"class"},gt={COMMON:"common",UNCOMMON:"uncommon",RARE:"rare",MYTHIC:"mythic"},mh={rarity:gt.COMMON,monsterType:ge.HUMANOID,templateType:rt.RACE},sI=[{...mh,name:"",enhancer:X(B(""))},{...mh,name:"",enhancer:X(B(""))},{...mh,name:"",enhancer:X(B(""))}],oI={rarity:gt.UNCOMMON,monsterType:ge.HUMANOID,templateType:rt.RACE},aI={:[""],:[""],:[""],:["30ft"],:["30ft"],:["30ft"],:["30ft"],:[""],:[""],:[""]},lI=Object.entries(aI).map(([t,e])=>({...oI,name:t,enhancer:X(...e.map(n=>B(n)))})),gh={rarity:gt.COMMON,templateType:rt.RACE,monsterType:ge.UNDEAD},uI=[{...gh,name:"",enhancer:X(B(""))},{...gh,name:"",enhancer:X(B(""))},{...gh,name:"",enhancer:X(B(""))}],cI=[{name:"",rarity:gt.RARE,templateType:rt.RACE,monsterType:ge.UNDEAD,enhancer:X(B("40ft"),B(""))}],hI=[{name:"",templateType:rt.RACE,rarity:gt.UNCOMMON,monsterType:ge.GIANT,enhancer:X(B(""))}],El={rarity:gt.COMMON,templateType:rt.CLASS},dI=[{...El,name:"",enhancer:X(B(""),B(""),B("+"))},{...El,name:"",enhancer:X(B(""),B(""),B("+"))},{...El,name:"",enhancer:X(B(""),B(""),B("+"))},{...El,name:"",enhancer:X(B(""),B(""),B("+"))}],qg={templateType:rt.RACE,rarity:gt.COMMON,monsterType:ge.MONSTROSITY},fI=[{...qg,name:"",enhancer:X(B("40ft"),B(""),B(""))},{...qg,name:"",enhancer:X(B(""),B("60"),B(""))}],ji={rarity:gt.COMMON,templateType:rt.RACE,monsterType:ge.BEAST},pI=[{...ji,name:"",enhancer:X(B(""),B("60ft"))},{...ji,name:"",enhancer:X(B(""),B("60ft"))},{...ji,name:"",enhancer:X(B(""),B("60ft"))},{...ji,name:"",enhancer:X(B("++"),B("-"))},{...ji,name:"",enhancer:X(B(""),B(""))},{...ji,name:"",enhancer:X(B(""))}],yh={rarity:gt.COMMON,templateType:rt.TYPE},mI=[{...yh,name:ge.UNDEAD,monsterType:ge.UNDEAD,enhancer:X(B("20ft"),B(""),B("60'"))},{...yh,name:ge.HUMANOID,monsterType:ge.HUMANOID,enhancer:X(B("30ft"),B(""))},{...yh,name:ge.BEAST,monsterType:ge.BEAST,enhancer:X(B("40ft"),B("60'"))}],wl={rarity:gt.UNCOMMON,templateType:rt.TYPE},gI=[{...wl,name:"",monsterType:ge.GIANT,enhancer:X(B("40ft"),B(""),B("--"),B("--"),B(""))},{...wl,name:"",monsterType:ge.MONSTROSITY,enhancer:X(B("30ft"),B("60'"))},{...wl,name:"",monsterType:ge.PLANT,enhancer:X(B("30ft"),B("60'"),B("--"))},{...wl,name:"",monsterType:ge.OOZE,enhancer:X(B("20ft"),B(""),B("60'"),B("--"))}],Tl={rarity:gt.RARE,templateType:rt.TYPE},yI=[{...Tl,name:"",monsterType:ge.FEY,enhancer:X(B("30ft"),B("60'"),B("++"),B(""))},{...Tl,name:"",monsterType:ge.ELEMENTAL,enhancer:X(B("30ft"),B("60'"))},{...Tl,name:"",monsterType:ge.ABERRATION,enhancer:X(B("30ft"),B("60'"))},{...Tl,name:"",monsterType:ge.CONSTRUCT,enhancer:X(B("20ft"),B(""),B("60'"))}],vh={templateType:rt.TYPE,rarity:gt.MYTHIC},vI=[{...vh,name:"",monsterType:ge.FIEND,enhancer:X(B("60ft"),B("++"),B("++"))},{...vh,name:"",monsterType:ge.CELESTIAL,enhancer:X(B("60ft"),B("++"))},{...vh,name:"",monsterType:ge.DRAGON,enhancer:X(B("60ft"))}],_h={rarity:gt.COMMON,templateType:rt.RACE,monsterType:ge.PLANT},_I=[{..._h,name:"",enhancer:X(B(""))},{..._h,name:"",enhancer:X(B(""))},{..._h,name:"",enhancer:X(B(""))}],Eh={rarity:gt.COMMON,templateType:rt.RACE,monsterType:ge.OOZE},EI=[{...Eh,name:"",enhancer:X(B(""))},{...Eh,name:"",enhancer:X(B(""))},{...Eh,name:"",enhancer:X(B(""))}],wh={rarity:gt.COMMON,templateType:rt.RACE,monsterType:ge.FEY},wI=[{...wh,name:"",enhancer:X(B(""),B(""))},{...wh,name:"",enhancer:X(B("30ft"),B(""))},{...wh,name:"",enhancer:X(B(""))}],Th=[...sI,...lI,...uI,...cI,...hI,...dI,...fI,...pI,...mI,...gI,...yI,...vI,..._I,...EI,...wI];var Kg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},TI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},x_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let y=(l&15)<<2|h>>6,T=h&63;u||(T=64,o||(y=64)),r.push(n[f],n[p],n[y],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(P_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||p==null)throw new SI;const y=s<<2|l>>4;if(r.push(y),h!==64){const T=l<<4&240|h>>2;if(r.push(T),p!==64){const P=h<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const II=function(t){const e=P_(t);return x_.encodeByteArray(e,!0)},Su=function(t){return II(t).replace(/\./g,"")},AI=function(t){try{return x_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=()=>CI().__FIREBASE_DEFAULTS__,PI=()=>{if(typeof process>"u"||typeof Kg>"u")return;const t=Kg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&AI(t[1]);return e&&JSON.parse(e)},ap=()=>{try{return RI()||PI()||xI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kI=t=>{var e,n;return(n=(e=ap())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},NI=t=>{const e=kI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},k_=()=>{var t;return(t=ap())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Su(JSON.stringify(n)),Su(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OI(){var t;const e=(t=ap())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bI(){return!OI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LI(){try{return typeof indexedDB=="object"}catch{return!1}}function FI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="FirebaseError";class $s extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$I,Object.setPrototypeOf(this,$s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N_.prototype.create)}}class N_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?jI(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new $s(i,l,r)}}function jI(t,e){return t.replace(BI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const BI=/\{\$([^}]+)}/g;function Dd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Gg(s)&&Gg(o)){if(!Dd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Gg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t){return t&&t._delegate?t._delegate:t}class sa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new DI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HI(e))try{this.getOrInitializeService({instanceIdentifier:ii})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ii){return this.instances.has(e)}getOptions(e=ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ii){return this.component?this.component.multipleInstances?e:ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zI(t){return t===ii?void 0:t}function HI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const qI={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},KI=oe.INFO,GI={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},QI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=GI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class D_{constructor(e){this.name=e,this._logLevel=KI,this._logHandler=QI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const YI=(t,e)=>e.some(n=>t instanceof n);let Qg,Yg;function XI(){return Qg||(Qg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JI(){return Yg||(Yg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const M_=new WeakMap,Md=new WeakMap,V_=new WeakMap,Sh=new WeakMap,lp=new WeakMap;function ZI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n($r(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&M_.set(n,t)}).catch(()=>{}),lp.set(e,t),e}function eA(t){if(Md.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Md.set(t,e)}let Vd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Md.get(t);if(e==="objectStoreNames")return t.objectStoreNames||V_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tA(t){Vd=t(Vd)}function nA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ih(this),e,...n);return V_.set(r,e.sort?e.sort():[e]),$r(r)}:JI().includes(t)?function(...e){return t.apply(Ih(this),e),$r(M_.get(this))}:function(...e){return $r(t.apply(Ih(this),e))}}function rA(t){return typeof t=="function"?nA(t):(t instanceof IDBTransaction&&eA(t),YI(t,XI())?new Proxy(t,Vd):t)}function $r(t){if(t instanceof IDBRequest)return ZI(t);if(Sh.has(t))return Sh.get(t);const e=rA(t);return e!==t&&(Sh.set(t,e),lp.set(e,t)),e}const Ih=t=>lp.get(t);function iA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=$r(o);return r&&o.addEventListener("upgradeneeded",u=>{r($r(o.result),u.oldVersion,u.newVersion,$r(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const sA=["get","getKey","getAll","getAllKeys","count"],oA=["put","add","delete","clear"],Ah=new Map;function Xg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ah.get(e))return Ah.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=oA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sA.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Ah.set(e,s),s}tA(t=>({...t,get:(e,n,r)=>Xg(e,n)||t.get(e,n,r),has:(e,n)=>!!Xg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Od="@firebase/app",Jg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new D_("@firebase/app"),uA="@firebase/app-compat",cA="@firebase/analytics-compat",hA="@firebase/analytics",dA="@firebase/app-check-compat",fA="@firebase/app-check",pA="@firebase/auth",mA="@firebase/auth-compat",gA="@firebase/database",yA="@firebase/data-connect",vA="@firebase/database-compat",_A="@firebase/functions",EA="@firebase/functions-compat",wA="@firebase/installations",TA="@firebase/installations-compat",SA="@firebase/messaging",IA="@firebase/messaging-compat",AA="@firebase/performance",CA="@firebase/performance-compat",RA="@firebase/remote-config",PA="@firebase/remote-config-compat",xA="@firebase/storage",kA="@firebase/storage-compat",NA="@firebase/firestore",DA="@firebase/vertexai-preview",MA="@firebase/firestore-compat",VA="firebase",OA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="[DEFAULT]",bA={[Od]:"fire-core",[uA]:"fire-core-compat",[hA]:"fire-analytics",[cA]:"fire-analytics-compat",[fA]:"fire-app-check",[dA]:"fire-app-check-compat",[pA]:"fire-auth",[mA]:"fire-auth-compat",[gA]:"fire-rtdb",[yA]:"fire-data-connect",[vA]:"fire-rtdb-compat",[_A]:"fire-fn",[EA]:"fire-fn-compat",[wA]:"fire-iid",[TA]:"fire-iid-compat",[SA]:"fire-fcm",[IA]:"fire-fcm-compat",[AA]:"fire-perf",[CA]:"fire-perf-compat",[RA]:"fire-rc",[PA]:"fire-rc-compat",[xA]:"fire-gcs",[kA]:"fire-gcs-compat",[NA]:"fire-fst",[MA]:"fire-fst-compat",[DA]:"fire-vertex","fire-js":"fire-js",[VA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=new Map,LA=new Map,Ld=new Map;function Zg(t,e){try{t.container.addComponent(e)}catch(n){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Au(t){const e=t.name;if(Ld.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;Ld.set(e,t);for(const n of Iu.values())Zg(n,t);for(const n of LA.values())Zg(n,t);return!0}function FA(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new N_("app","Firebase",$A);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=OA;function O_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:bd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw jr.create("bad-app-name",{appName:String(i)});if(n||(n=k_()),!n)throw jr.create("no-options");const s=Iu.get(i);if(s){if(Dd(n,s.options)&&Dd(r,s.config))return s;throw jr.create("duplicate-app",{appName:i})}const o=new WI(i);for(const u of Ld.values())o.addComponent(u);const l=new jA(n,r,o);return Iu.set(i,l),l}function UA(t=bd){const e=Iu.get(t);if(!e&&t===bd&&k_())return O_();if(!e)throw jr.create("no-app",{appName:t});return e}function hs(t,e,n){var r;let i=(r=bA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(l.join(" "));return}Au(new sa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="firebase-heartbeat-database",HA=1,oa="firebase-heartbeat-store";let Ch=null;function b_(){return Ch||(Ch=iA(zA,HA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(oa)}catch(n){console.warn(n)}}}}).catch(t=>{throw jr.create("idb-open",{originalErrorMessage:t.message})})),Ch}async function WA(t){try{const n=(await b_()).transaction(oa),r=await n.objectStore(oa).get(L_(t));return await n.done,r}catch(e){if(e instanceof $s)ur.warn(e.message);else{const n=jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ur.warn(n.message)}}}async function ey(t,e){try{const r=(await b_()).transaction(oa,"readwrite");await r.objectStore(oa).put(e,L_(t)),await r.done}catch(n){if(n instanceof $s)ur.warn(n.message);else{const r=jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ur.warn(r.message)}}}function L_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=1024,KA=30*24*60*60*1e3;class GA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ty();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=KA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ty(),{heartbeatsToSend:r,unsentEntries:i}=QA(this._heartbeatsCache.heartbeats),s=Su(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ur.warn(n),""}}}function ty(){return new Date().toISOString().substring(0,10)}function QA(t,e=qA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ny(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ny(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class YA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LI()?FI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ey(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ey(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ny(t){return Su(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t){Au(new sa("platform-logger",e=>new aA(e),"PRIVATE")),Au(new sa("heartbeat",e=>new GA(e),"PRIVATE")),hs(Od,Jg,t),hs(Od,Jg,"esm2017"),hs("fire-js","")}XA("");var ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fi,F_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,m){function E(){}E.prototype=m.prototype,v.D=m.prototype,v.prototype=new E,v.prototype.constructor=v,v.C=function(I,C,x){for(var A=Array(arguments.length-2),we=2;we<arguments.length;we++)A[we-2]=arguments[we];return m.prototype[C].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,m,E){E||(E=0);var I=Array(16);if(typeof m=="string")for(var C=0;16>C;++C)I[C]=m.charCodeAt(E++)|m.charCodeAt(E++)<<8|m.charCodeAt(E++)<<16|m.charCodeAt(E++)<<24;else for(C=0;16>C;++C)I[C]=m[E++]|m[E++]<<8|m[E++]<<16|m[E++]<<24;m=v.g[0],E=v.g[1],C=v.g[2];var x=v.g[3],A=m+(x^E&(C^x))+I[0]+3614090360&4294967295;m=E+(A<<7&4294967295|A>>>25),A=x+(C^m&(E^C))+I[1]+3905402710&4294967295,x=m+(A<<12&4294967295|A>>>20),A=C+(E^x&(m^E))+I[2]+606105819&4294967295,C=x+(A<<17&4294967295|A>>>15),A=E+(m^C&(x^m))+I[3]+3250441966&4294967295,E=C+(A<<22&4294967295|A>>>10),A=m+(x^E&(C^x))+I[4]+4118548399&4294967295,m=E+(A<<7&4294967295|A>>>25),A=x+(C^m&(E^C))+I[5]+1200080426&4294967295,x=m+(A<<12&4294967295|A>>>20),A=C+(E^x&(m^E))+I[6]+2821735955&4294967295,C=x+(A<<17&4294967295|A>>>15),A=E+(m^C&(x^m))+I[7]+4249261313&4294967295,E=C+(A<<22&4294967295|A>>>10),A=m+(x^E&(C^x))+I[8]+1770035416&4294967295,m=E+(A<<7&4294967295|A>>>25),A=x+(C^m&(E^C))+I[9]+2336552879&4294967295,x=m+(A<<12&4294967295|A>>>20),A=C+(E^x&(m^E))+I[10]+4294925233&4294967295,C=x+(A<<17&4294967295|A>>>15),A=E+(m^C&(x^m))+I[11]+2304563134&4294967295,E=C+(A<<22&4294967295|A>>>10),A=m+(x^E&(C^x))+I[12]+1804603682&4294967295,m=E+(A<<7&4294967295|A>>>25),A=x+(C^m&(E^C))+I[13]+4254626195&4294967295,x=m+(A<<12&4294967295|A>>>20),A=C+(E^x&(m^E))+I[14]+2792965006&4294967295,C=x+(A<<17&4294967295|A>>>15),A=E+(m^C&(x^m))+I[15]+1236535329&4294967295,E=C+(A<<22&4294967295|A>>>10),A=m+(C^x&(E^C))+I[1]+4129170786&4294967295,m=E+(A<<5&4294967295|A>>>27),A=x+(E^C&(m^E))+I[6]+3225465664&4294967295,x=m+(A<<9&4294967295|A>>>23),A=C+(m^E&(x^m))+I[11]+643717713&4294967295,C=x+(A<<14&4294967295|A>>>18),A=E+(x^m&(C^x))+I[0]+3921069994&4294967295,E=C+(A<<20&4294967295|A>>>12),A=m+(C^x&(E^C))+I[5]+3593408605&4294967295,m=E+(A<<5&4294967295|A>>>27),A=x+(E^C&(m^E))+I[10]+38016083&4294967295,x=m+(A<<9&4294967295|A>>>23),A=C+(m^E&(x^m))+I[15]+3634488961&4294967295,C=x+(A<<14&4294967295|A>>>18),A=E+(x^m&(C^x))+I[4]+3889429448&4294967295,E=C+(A<<20&4294967295|A>>>12),A=m+(C^x&(E^C))+I[9]+568446438&4294967295,m=E+(A<<5&4294967295|A>>>27),A=x+(E^C&(m^E))+I[14]+3275163606&4294967295,x=m+(A<<9&4294967295|A>>>23),A=C+(m^E&(x^m))+I[3]+4107603335&4294967295,C=x+(A<<14&4294967295|A>>>18),A=E+(x^m&(C^x))+I[8]+1163531501&4294967295,E=C+(A<<20&4294967295|A>>>12),A=m+(C^x&(E^C))+I[13]+2850285829&4294967295,m=E+(A<<5&4294967295|A>>>27),A=x+(E^C&(m^E))+I[2]+4243563512&4294967295,x=m+(A<<9&4294967295|A>>>23),A=C+(m^E&(x^m))+I[7]+1735328473&4294967295,C=x+(A<<14&4294967295|A>>>18),A=E+(x^m&(C^x))+I[12]+2368359562&4294967295,E=C+(A<<20&4294967295|A>>>12),A=m+(E^C^x)+I[5]+4294588738&4294967295,m=E+(A<<4&4294967295|A>>>28),A=x+(m^E^C)+I[8]+2272392833&4294967295,x=m+(A<<11&4294967295|A>>>21),A=C+(x^m^E)+I[11]+1839030562&4294967295,C=x+(A<<16&4294967295|A>>>16),A=E+(C^x^m)+I[14]+4259657740&4294967295,E=C+(A<<23&4294967295|A>>>9),A=m+(E^C^x)+I[1]+2763975236&4294967295,m=E+(A<<4&4294967295|A>>>28),A=x+(m^E^C)+I[4]+1272893353&4294967295,x=m+(A<<11&4294967295|A>>>21),A=C+(x^m^E)+I[7]+4139469664&4294967295,C=x+(A<<16&4294967295|A>>>16),A=E+(C^x^m)+I[10]+3200236656&4294967295,E=C+(A<<23&4294967295|A>>>9),A=m+(E^C^x)+I[13]+681279174&4294967295,m=E+(A<<4&4294967295|A>>>28),A=x+(m^E^C)+I[0]+3936430074&4294967295,x=m+(A<<11&4294967295|A>>>21),A=C+(x^m^E)+I[3]+3572445317&4294967295,C=x+(A<<16&4294967295|A>>>16),A=E+(C^x^m)+I[6]+76029189&4294967295,E=C+(A<<23&4294967295|A>>>9),A=m+(E^C^x)+I[9]+3654602809&4294967295,m=E+(A<<4&4294967295|A>>>28),A=x+(m^E^C)+I[12]+3873151461&4294967295,x=m+(A<<11&4294967295|A>>>21),A=C+(x^m^E)+I[15]+530742520&4294967295,C=x+(A<<16&4294967295|A>>>16),A=E+(C^x^m)+I[2]+3299628645&4294967295,E=C+(A<<23&4294967295|A>>>9),A=m+(C^(E|~x))+I[0]+4096336452&4294967295,m=E+(A<<6&4294967295|A>>>26),A=x+(E^(m|~C))+I[7]+1126891415&4294967295,x=m+(A<<10&4294967295|A>>>22),A=C+(m^(x|~E))+I[14]+2878612391&4294967295,C=x+(A<<15&4294967295|A>>>17),A=E+(x^(C|~m))+I[5]+4237533241&4294967295,E=C+(A<<21&4294967295|A>>>11),A=m+(C^(E|~x))+I[12]+1700485571&4294967295,m=E+(A<<6&4294967295|A>>>26),A=x+(E^(m|~C))+I[3]+2399980690&4294967295,x=m+(A<<10&4294967295|A>>>22),A=C+(m^(x|~E))+I[10]+4293915773&4294967295,C=x+(A<<15&4294967295|A>>>17),A=E+(x^(C|~m))+I[1]+2240044497&4294967295,E=C+(A<<21&4294967295|A>>>11),A=m+(C^(E|~x))+I[8]+1873313359&4294967295,m=E+(A<<6&4294967295|A>>>26),A=x+(E^(m|~C))+I[15]+4264355552&4294967295,x=m+(A<<10&4294967295|A>>>22),A=C+(m^(x|~E))+I[6]+2734768916&4294967295,C=x+(A<<15&4294967295|A>>>17),A=E+(x^(C|~m))+I[13]+1309151649&4294967295,E=C+(A<<21&4294967295|A>>>11),A=m+(C^(E|~x))+I[4]+4149444226&4294967295,m=E+(A<<6&4294967295|A>>>26),A=x+(E^(m|~C))+I[11]+3174756917&4294967295,x=m+(A<<10&4294967295|A>>>22),A=C+(m^(x|~E))+I[2]+718787259&4294967295,C=x+(A<<15&4294967295|A>>>17),A=E+(x^(C|~m))+I[9]+3951481745&4294967295,v.g[0]=v.g[0]+m&4294967295,v.g[1]=v.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,v.g[2]=v.g[2]+C&4294967295,v.g[3]=v.g[3]+x&4294967295}r.prototype.u=function(v,m){m===void 0&&(m=v.length);for(var E=m-this.blockSize,I=this.B,C=this.h,x=0;x<m;){if(C==0)for(;x<=E;)i(this,v,x),x+=this.blockSize;if(typeof v=="string"){for(;x<m;)if(I[C++]=v.charCodeAt(x++),C==this.blockSize){i(this,I),C=0;break}}else for(;x<m;)if(I[C++]=v[x++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=m},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var m=1;m<v.length-8;++m)v[m]=0;var E=8*this.o;for(m=v.length-8;m<v.length;++m)v[m]=E&255,E/=256;for(this.u(v),v=Array(16),m=E=0;4>m;++m)for(var I=0;32>I;I+=8)v[E++]=this.g[m]>>>I&255;return v};function s(v,m){var E=l;return Object.prototype.hasOwnProperty.call(E,v)?E[v]:E[v]=m(v)}function o(v,m){this.h=m;for(var E=[],I=!0,C=v.length-1;0<=C;C--){var x=v[C]|0;I&&x==m||(E[C]=x,I=!1)}this.g=E}var l={};function u(v){return-128<=v&&128>v?s(v,function(m){return new o([m|0],0>m?-1:0)}):new o([v|0],0>v?-1:0)}function h(v){if(isNaN(v)||!isFinite(v))return p;if(0>v)return D(h(-v));for(var m=[],E=1,I=0;v>=E;I++)m[I]=v/E|0,E*=4294967296;return new o(m,0)}function f(v,m){if(v.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(v.charAt(0)=="-")return D(f(v.substring(1),m));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(m,8)),I=p,C=0;C<v.length;C+=8){var x=Math.min(8,v.length-C),A=parseInt(v.substring(C,C+x),m);8>x?(x=h(Math.pow(m,x)),I=I.j(x).add(h(A))):(I=I.j(E),I=I.add(h(A)))}return I}var p=u(0),y=u(1),T=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-D(this).m();for(var v=0,m=1,E=0;E<this.g.length;E++){var I=this.i(E);v+=(0<=I?I:4294967296+I)*m,m*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(P(this))return"0";if(R(this))return"-"+D(this).toString(v);for(var m=h(Math.pow(v,6)),E=this,I="";;){var C=N(E,m).g;E=w(E,C.j(m));var x=((0<E.g.length?E.g[0]:E.h)>>>0).toString(v);if(E=C,P(E))return x+I;for(;6>x.length;)x="0"+x;I=x+I}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function P(v){if(v.h!=0)return!1;for(var m=0;m<v.g.length;m++)if(v.g[m]!=0)return!1;return!0}function R(v){return v.h==-1}t.l=function(v){return v=w(this,v),R(v)?-1:P(v)?0:1};function D(v){for(var m=v.g.length,E=[],I=0;I<m;I++)E[I]=~v.g[I];return new o(E,~v.h).add(y)}t.abs=function(){return R(this)?D(this):this},t.add=function(v){for(var m=Math.max(this.g.length,v.g.length),E=[],I=0,C=0;C<=m;C++){var x=I+(this.i(C)&65535)+(v.i(C)&65535),A=(x>>>16)+(this.i(C)>>>16)+(v.i(C)>>>16);I=A>>>16,x&=65535,A&=65535,E[C]=A<<16|x}return new o(E,E[E.length-1]&-2147483648?-1:0)};function w(v,m){return v.add(D(m))}t.j=function(v){if(P(this)||P(v))return p;if(R(this))return R(v)?D(this).j(D(v)):D(D(this).j(v));if(R(v))return D(this.j(D(v)));if(0>this.l(T)&&0>v.l(T))return h(this.m()*v.m());for(var m=this.g.length+v.g.length,E=[],I=0;I<2*m;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<v.g.length;C++){var x=this.i(I)>>>16,A=this.i(I)&65535,we=v.i(C)>>>16,en=v.i(C)&65535;E[2*I+2*C]+=A*en,_(E,2*I+2*C),E[2*I+2*C+1]+=x*en,_(E,2*I+2*C+1),E[2*I+2*C+1]+=A*we,_(E,2*I+2*C+1),E[2*I+2*C+2]+=x*we,_(E,2*I+2*C+2)}for(I=0;I<m;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=m;I<2*m;I++)E[I]=0;return new o(E,0)};function _(v,m){for(;(v[m]&65535)!=v[m];)v[m+1]+=v[m]>>>16,v[m]&=65535,m++}function S(v,m){this.g=v,this.h=m}function N(v,m){if(P(m))throw Error("division by zero");if(P(v))return new S(p,p);if(R(v))return m=N(D(v),m),new S(D(m.g),D(m.h));if(R(m))return m=N(v,D(m)),new S(D(m.g),m.h);if(30<v.g.length){if(R(v)||R(m))throw Error("slowDivide_ only works with positive integers.");for(var E=y,I=m;0>=I.l(v);)E=L(E),I=L(I);var C=O(E,1),x=O(I,1);for(I=O(I,2),E=O(E,2);!P(I);){var A=x.add(I);0>=A.l(v)&&(C=C.add(E),x=A),I=O(I,1),E=O(E,1)}return m=w(v,C.j(m)),new S(C,m)}for(C=p;0<=v.l(m);){for(E=Math.max(1,Math.floor(v.m()/m.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),x=h(E),A=x.j(m);R(A)||0<A.l(v);)E-=I,x=h(E),A=x.j(m);P(x)&&(x=y),C=C.add(x),v=w(v,A)}return new S(C,v)}t.A=function(v){return N(this,v).h},t.and=function(v){for(var m=Math.max(this.g.length,v.g.length),E=[],I=0;I<m;I++)E[I]=this.i(I)&v.i(I);return new o(E,this.h&v.h)},t.or=function(v){for(var m=Math.max(this.g.length,v.g.length),E=[],I=0;I<m;I++)E[I]=this.i(I)|v.i(I);return new o(E,this.h|v.h)},t.xor=function(v){for(var m=Math.max(this.g.length,v.g.length),E=[],I=0;I<m;I++)E[I]=this.i(I)^v.i(I);return new o(E,this.h^v.h)};function L(v){for(var m=v.g.length+1,E=[],I=0;I<m;I++)E[I]=v.i(I)<<1|v.i(I-1)>>>31;return new o(E,v.h)}function O(v,m){var E=m>>5;m%=32;for(var I=v.g.length-E,C=[],x=0;x<I;x++)C[x]=0<m?v.i(x+E)>>>m|v.i(x+E+1)<<32-m:v.i(x+E);return new o(C,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,F_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,fi=o}).apply(typeof ry<"u"?ry:typeof self<"u"?self:typeof window<"u"?window:{});var Sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $_,Eo,j_,Bl,Fd,B_,U_,z_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,d){return a==Array.prototype||a==Object.prototype||(a[c]=d.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sl=="object"&&Sl];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var d=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var k=a[g];if(!(k in d))break e;d=d[k]}a=a[a.length-1],g=d[a],c=c(g),c!=g&&c!=null&&e(d,a,{configurable:!0,writable:!0,value:c})}}function s(a,c){a instanceof String&&(a+="");var d=0,g=!1,k={next:function(){if(!g&&d<a.length){var M=d++;return{value:c(M,a[M]),done:!1}}return g=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}i("Array.prototype.values",function(a){return a||function(){return s(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function h(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,d){return a.call.apply(a.bind,arguments)}function p(a,c,d){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,g),a.apply(c,k)}}return function(){return a.apply(c,arguments)}}function y(a,c,d){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function T(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function P(a,c){function d(){}d.prototype=c.prototype,a.aa=c.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(g,k,M){for(var U=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)U[ve-2]=arguments[ve];return c.prototype[k].apply(g,U)}}function R(a){const c=a.length;if(0<c){const d=Array(c);for(let g=0;g<c;g++)d[g]=a[g];return d}return[]}function D(a,c){for(let d=1;d<arguments.length;d++){const g=arguments[d];if(u(g)){const k=a.length||0,M=g.length||0;a.length=k+M;for(let U=0;U<M;U++)a[k+U]=g[U]}else a.push(g)}}class w{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function _(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function N(a){return N[" "](a),a}N[" "]=function(){};var L=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function O(a,c,d){for(const g in a)c.call(d,a[g],g,a)}function v(a,c){for(const d in a)c.call(void 0,a[d],d,a)}function m(a){const c={};for(const d in a)c[d]=a[d];return c}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,c){let d,g;for(let k=1;k<arguments.length;k++){g=arguments[k];for(d in g)a[d]=g[d];for(let M=0;M<E.length;M++)d=E[M],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function C(a){var c=1;a=a.split(":");const d=[];for(;0<c&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(":")),d}function x(a){l.setTimeout(()=>{throw a},0)}function A(){var a=q;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class we{constructor(){this.h=this.g=null}add(c,d){const g=en.get();g.set(c,d),this.h?this.h.next=g:this.g=g,this.h=g}}var en=new w(()=>new xn,a=>a.reset());class xn{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Pe,z=!1,q=new we,Q=()=>{const a=l.Promise.resolve(void 0);Pe=()=>{a.then(le)}};var le=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(d){x(d)}var c=en;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}z=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ye=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return a}();function it(a,c){if(he.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(L){e:{try{N(c.nodeName);var k=!0;break e}catch{}k=!1}k||(c=null)}}else d=="mouseover"?c=a.fromElement:d=="mouseout"&&(c=a.toElement);this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ye[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&it.aa.h.call(this)}}P(it,he);var ye={2:"touch",3:"pen",4:"mouse"};it.prototype.h=function(){it.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),kn=0;function tn(a,c,d,g,k){this.listener=a,this.proxy=null,this.src=c,this.type=d,this.capture=!!g,this.ha=k,this.key=++kn,this.da=this.fa=!1}function je(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function zt(a){this.src=a,this.g={},this.h=0}zt.prototype.add=function(a,c,d,g,k){var M=a.toString();a=this.g[M],a||(a=this.g[M]=[],this.h++);var U=ki(a,c,g,k);return-1<U?(c=a[U],d||(c.fa=!1)):(c=new tn(c,this.src,M,!!g,k),c.fa=d,a.push(c)),c};function Be(a,c){var d=c.type;if(d in a.g){var g=a.g[d],k=Array.prototype.indexOf.call(g,c,void 0),M;(M=0<=k)&&Array.prototype.splice.call(g,k,1),M&&(je(c),a.g[d].length==0&&(delete a.g[d],a.h--))}}function ki(a,c,d,g){for(var k=0;k<a.length;++k){var M=a[k];if(!M.da&&M.listener==c&&M.capture==!!d&&M.ha==g)return k}return-1}var mn="closure_lm_"+(1e6*Math.random()|0),pr={};function qn(a,c,d,g,k){if(Array.isArray(c)){for(var M=0;M<c.length;M++)qn(a,c[M],d,g,k);return null}return d=ba(d),a&&a[st]?a.K(c,d,h(g)?!!g.capture:!!g,k):Va(a,c,d,!1,g,k)}function Va(a,c,d,g,k,M){if(!c)throw Error("Invalid event type");var U=h(k)?!!k.capture:!!k,ve=Mi(a);if(ve||(a[mn]=ve=new zt(a)),d=ve.add(c,d,g,U,M),d.proxy)return d;if(g=Oa(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)Ye||(k=U),k===void 0&&(k=!1),a.addEventListener(c.toString(),g,k);else if(a.attachEvent)a.attachEvent(Yr(c.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Oa(){function a(d){return c.call(a.src,a.listener,d)}const c=Di;return a}function Ni(a,c,d,g,k){if(Array.isArray(c))for(var M=0;M<c.length;M++)Ni(a,c[M],d,g,k);else g=h(g)?!!g.capture:!!g,d=ba(d),a&&a[st]?(a=a.i,c=String(c).toString(),c in a.g&&(M=a.g[c],d=ki(M,d,g,k),-1<d&&(je(M[d]),Array.prototype.splice.call(M,d,1),M.length==0&&(delete a.g[c],a.h--)))):a&&(a=Mi(a))&&(c=a.g[c.toString()],a=-1,c&&(a=ki(c,d,g,k)),(d=-1<a?c[a]:null)&&nn(d))}function nn(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[st])Be(c.i,a);else{var d=a.type,g=a.proxy;c.removeEventListener?c.removeEventListener(d,g,a.capture):c.detachEvent?c.detachEvent(Yr(d),g):c.addListener&&c.removeListener&&c.removeListener(g),(d=Mi(c))?(Be(d,a),d.h==0&&(d.src=null,c[mn]=null)):je(a)}}}function Yr(a){return a in pr?pr[a]:pr[a]="on"+a}function Di(a,c){if(a.da)a=!0;else{c=new it(c,this);var d=a.listener,g=a.ha||a.src;a.fa&&nn(a),a=d.call(g,c)}return a}function Mi(a){return a=a[mn],a instanceof zt?a:null}var Vi="__closure_events_fn_"+(1e9*Math.random()>>>0);function ba(a){return typeof a=="function"?a:(a[Vi]||(a[Vi]=function(c){return a.handleEvent(c)}),a[Vi])}function Xe(){J.call(this),this.i=new zt(this),this.M=this,this.F=null}P(Xe,J),Xe.prototype[st]=!0,Xe.prototype.removeEventListener=function(a,c,d,g){Ni(this,a,c,d,g)};function Ve(a,c){var d,g=a.F;if(g)for(d=[];g;g=g.F)d.push(g);if(a=a.M,g=c.type||c,typeof c=="string")c=new he(c,a);else if(c instanceof he)c.target=c.target||a;else{var k=c;c=new he(g,a),I(c,k)}if(k=!0,d)for(var M=d.length-1;0<=M;M--){var U=c.g=d[M];k=gn(U,g,!0,c)&&k}if(U=c.g=a,k=gn(U,g,!0,c)&&k,k=gn(U,g,!1,c)&&k,d)for(M=0;M<d.length;M++)U=c.g=d[M],k=gn(U,g,!1,c)&&k}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var d=a.g[c],g=0;g<d.length;g++)je(d[g]);delete a.g[c],a.h--}}this.F=null},Xe.prototype.K=function(a,c,d,g){return this.i.add(String(a),c,!1,d,g)},Xe.prototype.L=function(a,c,d,g){return this.i.add(String(a),c,!0,d,g)};function gn(a,c,d,g){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var k=!0,M=0;M<c.length;++M){var U=c[M];if(U&&!U.da&&U.capture==d){var ve=U.listener,lt=U.ha||U.src;U.fa&&Be(a.i,U),k=ve.call(lt,g)!==!1&&k}}return k&&!g.defaultPrevented}function mr(a,c,d){if(typeof a=="function")d&&(a=y(a,d));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function Gs(a){a.g=mr(()=>{a.g=null,a.i&&(a.i=!1,Gs(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class Nn extends J{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Gs(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(a){J.call(this),this.h=a,this.g={}}P(gr,J);var La=[];function Fa(a){O(a.g,function(c,d){this.g.hasOwnProperty(d)&&nn(c)},a),a.g={}}gr.prototype.N=function(){gr.aa.N.call(this),Fa(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oi=l.JSON.stringify,xc=l.JSON.parse,$a=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Qs(){}Qs.prototype.h=null;function ja(a){return a.h||(a.h=a.i())}function Ba(){}var xe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ot(){he.call(this,"d")}P(ot,he);function at(){he.call(this,"c")}P(at,he);var vt={},xt=null;function _t(){return xt=xt||new Xe}vt.La="serverreachability";function Ht(a){he.call(this,vt.La,a)}P(Ht,he);function rn(a){const c=_t();Ve(c,new Ht(c))}vt.STAT_EVENT="statevent";function Vt(a,c){he.call(this,vt.STAT_EVENT,a),this.stat=c}P(Vt,he);function Le(a){const c=_t();Ve(c,new Vt(c,a))}vt.Ma="timingevent";function yr(a,c){he.call(this,vt.Ma,a),this.size=c}P(yr,he);function Dn(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function Mn(){this.g=!0}Mn.prototype.xa=function(){this.g=!1};function Ua(a,c,d,g,k,M){a.info(function(){if(a.g)if(M)for(var U="",ve=M.split("&"),lt=0;lt<ve.length;lt++){var ue=ve[lt].split("=");if(1<ue.length){var Et=ue[0];ue=ue[1];var wt=Et.split("_");U=2<=wt.length&&wt[1]=="type"?U+(Et+"="+ue+"&"):U+(Et+"=redacted&")}}else U=null;else U=M;return"XMLHTTP REQ ("+g+") [attempt "+k+"]: "+c+`
`+d+`
`+U})}function Xr(a,c,d,g,k,M,U){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+k+"]: "+c+`
`+d+`
`+M+" "+U})}function sn(a,c,d,g){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+qE(a,d)+(g?" "+g:"")})}function Ys(a,c){a.info(function(){return"TIMEOUT: "+c})}Mn.prototype.info=function(){};function qE(a,c){if(!a.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var g=d[a];if(!(2>g.length)){var k=g[1];if(Array.isArray(k)&&!(1>k.length)){var M=k[0];if(M!="noop"&&M!="stop"&&M!="close")for(var U=1;U<k.length;U++)k[U]=""}}}}return Oi(d)}catch{return c}}var za={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kc;function Ha(){}P(Ha,Qs),Ha.prototype.g=function(){return new XMLHttpRequest},Ha.prototype.i=function(){return{}},kc=new Ha;function vr(a,c,d,g){this.j=a,this.i=c,this.l=d,this.R=g||1,this.U=new gr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xp}function Xp(){this.i=null,this.g="",this.h=!1}var Jp={},Nc={};function Dc(a,c,d){a.L=1,a.v=Ga(Kn(c)),a.m=d,a.P=!0,Zp(a,null)}function Zp(a,c){a.F=Date.now(),Wa(a),a.A=Kn(a.v);var d=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),fm(d.i,"t",g),a.C=0,d=a.j.J,a.h=new Xp,a.g=Nm(a.j,d?c:null,!a.m),0<a.O&&(a.M=new Nn(y(a.Y,a,a.g),a.O)),c=a.U,d=a.g,g=a.ca;var k="readystatechange";Array.isArray(k)||(k&&(La[0]=k.toString()),k=La);for(var M=0;M<k.length;M++){var U=qn(d,k[M],g||c.handleEvent,!1,c.h||c);if(!U)break;c.g[U.key]=U}c=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),rn(),Ua(a.i,a.u,a.A,a.l,a.R,a.m)}vr.prototype.ca=function(a){a=a.target;const c=this.M;c&&Gn(a)==3?c.j():this.Y(a)},vr.prototype.Y=function(a){try{if(a==this.g)e:{const wt=Gn(this.g);var c=this.g.Ba();const Fi=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||Em(this.g)))){this.J||wt!=4||c==7||(c==8||0>=Fi?rn(3):rn(2)),Mc(this);var d=this.g.Z();this.X=d;t:if(em(this)){var g=Em(this.g);a="";var k=g.length,M=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jr(this),Xs(this);var U="";break t}this.h.i=new l.TextDecoder}for(c=0;c<k;c++)this.h.h=!0,a+=this.h.i.decode(g[c],{stream:!(M&&c==k-1)});g.length=0,this.h.g+=a,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=d==200,Xr(this.i,this.u,this.A,this.l,this.R,wt,d),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,lt=this.g;if((ve=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ve)){var ue=ve;break t}}ue=null}if(d=ue)sn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vc(this,d);else{this.o=!1,this.s=3,Le(12),Jr(this),Xs(this);break e}}if(this.P){d=!0;let yn;for(;!this.J&&this.C<U.length;)if(yn=KE(this,U),yn==Nc){wt==4&&(this.s=4,Le(14),d=!1),sn(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Jp){this.s=4,Le(15),sn(this.i,this.l,U,"[Invalid Chunk]"),d=!1;break}else sn(this.i,this.l,yn,null),Vc(this,yn);if(em(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||U.length!=0||this.h.h||(this.s=1,Le(16),d=!1),this.o=this.o&&d,!d)sn(this.i,this.l,U,"[Invalid Chunked Response]"),Jr(this),Xs(this);else if(0<U.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),jc(Et),Et.M=!0,Le(11))}}else sn(this.i,this.l,U,null),Vc(this,U);wt==4&&Jr(this),this.o&&!this.J&&(wt==4?Rm(this.j,this):(this.o=!1,Wa(this)))}else cw(this.g),d==400&&0<U.indexOf("Unknown SID")?(this.s=3,Le(12)):(this.s=0,Le(13)),Jr(this),Xs(this)}}}catch{}finally{}};function em(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function KE(a,c){var d=a.C,g=c.indexOf(`
`,d);return g==-1?Nc:(d=Number(c.substring(d,g)),isNaN(d)?Jp:(g+=1,g+d>c.length?Nc:(c=c.slice(g,g+d),a.C=g+d,c)))}vr.prototype.cancel=function(){this.J=!0,Jr(this)};function Wa(a){a.S=Date.now()+a.I,tm(a,a.I)}function tm(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Dn(y(a.ba,a),c)}function Mc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}vr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Ys(this.i,this.A),this.L!=2&&(rn(),Le(17)),Jr(this),this.s=2,Xs(this)):tm(this,this.S-a)};function Xs(a){a.j.G==0||a.J||Rm(a.j,a)}function Jr(a){Mc(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,Fa(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function Vc(a,c){try{var d=a.j;if(d.G!=0&&(d.g==a||Oc(d.h,a))){if(!a.K&&Oc(d.h,a)&&d.G==3){try{var g=d.Da.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var k=g;if(k[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)el(d),Ja(d);else break e;$c(d),Le(18)}}else d.za=k[1],0<d.za-d.T&&37500>k[2]&&d.F&&d.v==0&&!d.C&&(d.C=Dn(y(d.Za,d),6e3));if(1>=im(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else ei(d,11)}else if((a.K||d.g==a)&&el(d),!_(c))for(k=d.Da.g.parse(c),c=0;c<k.length;c++){let ue=k[c];if(d.T=ue[0],ue=ue[1],d.G==2)if(ue[0]=="c"){d.K=ue[1],d.ia=ue[2];const Et=ue[3];Et!=null&&(d.la=Et,d.j.info("VER="+d.la));const wt=ue[4];wt!=null&&(d.Aa=wt,d.j.info("SVER="+d.Aa));const Fi=ue[5];Fi!=null&&typeof Fi=="number"&&0<Fi&&(g=1.5*Fi,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const yn=a.g;if(yn){const nl=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nl){var M=g.h;M.g||nl.indexOf("spdy")==-1&&nl.indexOf("quic")==-1&&nl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(bc(M,M.h),M.h=null))}if(g.D){const Bc=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bc&&(g.ya=Bc,Te(g.I,g.D,Bc))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var U=a;if(g.qa=km(g,g.J?g.ia:null,g.W),U.K){sm(g.h,U);var ve=U,lt=g.L;lt&&(ve.I=lt),ve.B&&(Mc(ve),Wa(ve)),g.g=U}else Am(g);0<d.i.length&&Za(d)}else ue[0]!="stop"&&ue[0]!="close"||ei(d,7);else d.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?ei(d,7):Fc(d):ue[0]!="noop"&&d.l&&d.l.ta(ue),d.v=0)}}rn(4)}catch{}}var GE=class{constructor(a,c){this.g=a,this.map=c}};function nm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function im(a){return a.h?1:a.g?a.g.size:0}function Oc(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function bc(a,c){a.g?a.g.add(c):a.h=c}function sm(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}nm.prototype.cancel=function(){if(this.i=om(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function om(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const d of a.g.values())c=c.concat(d.D);return c}return R(a.i)}function QE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],d=a.length,g=0;g<d;g++)c.push(a[g]);return c}c=[],d=0;for(g in a)c[d++]=a[g];return c}function YE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var d=0;d<a;d++)c.push(d);return c}c=[],d=0;for(const g in a)c[d++]=g;return c}}}function am(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var d=YE(a),g=QE(a),k=g.length,M=0;M<k;M++)c.call(void 0,g[M],d&&d[M],a)}var lm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XE(a,c){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var g=a[d].indexOf("="),k=null;if(0<=g){var M=a[d].substring(0,g);k=a[d].substring(g+1)}else M=a[d];c(M,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Zr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Zr){this.h=a.h,qa(this,a.j),this.o=a.o,this.g=a.g,Ka(this,a.s),this.l=a.l;var c=a.i,d=new eo;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),um(this,d),this.m=a.m}else a&&(c=String(a).match(lm))?(this.h=!1,qa(this,c[1]||"",!0),this.o=Js(c[2]||""),this.g=Js(c[3]||"",!0),Ka(this,c[4]),this.l=Js(c[5]||"",!0),um(this,c[6]||"",!0),this.m=Js(c[7]||"")):(this.h=!1,this.i=new eo(null,this.h))}Zr.prototype.toString=function(){var a=[],c=this.j;c&&a.push(Zs(c,cm,!0),":");var d=this.g;return(d||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Zs(c,cm,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Zs(d,d.charAt(0)=="/"?ew:ZE,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Zs(d,nw)),a.join("")};function Kn(a){return new Zr(a)}function qa(a,c,d){a.j=d?Js(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Ka(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function um(a,c,d){c instanceof eo?(a.i=c,rw(a.i,a.h)):(d||(c=Zs(c,tw)),a.i=new eo(c,a.h))}function Te(a,c,d){a.i.set(c,d)}function Ga(a){return Te(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Js(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Zs(a,c,d){return typeof a=="string"?(a=encodeURI(a).replace(c,JE),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function JE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var cm=/[#\/\?@]/g,ZE=/[#\?:]/g,ew=/[#\?]/g,tw=/[#\?@]/g,nw=/#/g;function eo(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function _r(a){a.g||(a.g=new Map,a.h=0,a.i&&XE(a.i,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=eo.prototype,t.add=function(a,c){_r(this),this.i=null,a=bi(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(c),this.h+=1,this};function hm(a,c){_r(a),c=bi(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function dm(a,c){return _r(a),c=bi(a,c),a.g.has(c)}t.forEach=function(a,c){_r(this),this.g.forEach(function(d,g){d.forEach(function(k){a.call(c,k,g,this)},this)},this)},t.na=function(){_r(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let g=0;g<c.length;g++){const k=a[g];for(let M=0;M<k.length;M++)d.push(c[g])}return d},t.V=function(a){_r(this);let c=[];if(typeof a=="string")dm(this,a)&&(c=c.concat(this.g.get(bi(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)c=c.concat(a[d])}return c},t.set=function(a,c){return _r(this),this.i=null,a=bi(this,a),dm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function fm(a,c,d){hm(a,c),0<d.length&&(a.i=null,a.g.set(bi(a,c),R(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var g=c[d];const M=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var k=M;U[g]!==""&&(k+="="+encodeURIComponent(String(U[g]))),a.push(k)}}return this.i=a.join("&")};function bi(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function rw(a,c){c&&!a.j&&(_r(a),a.i=null,a.g.forEach(function(d,g){var k=g.toLowerCase();g!=k&&(hm(this,g),fm(this,k,d))},a)),a.j=c}function iw(a,c){const d=new Mn;if(l.Image){const g=new Image;g.onload=T(Er,d,"TestLoadImage: loaded",!0,c,g),g.onerror=T(Er,d,"TestLoadImage: error",!1,c,g),g.onabort=T(Er,d,"TestLoadImage: abort",!1,c,g),g.ontimeout=T(Er,d,"TestLoadImage: timeout",!1,c,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else c(!1)}function sw(a,c){const d=new Mn,g=new AbortController,k=setTimeout(()=>{g.abort(),Er(d,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:g.signal}).then(M=>{clearTimeout(k),M.ok?Er(d,"TestPingServer: ok",!0,c):Er(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(k),Er(d,"TestPingServer: error",!1,c)})}function Er(a,c,d,g,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),g(d)}catch{}}function ow(){this.g=new $a}function aw(a,c,d){const g=d||"";try{am(a,function(k,M){let U=k;h(k)&&(U=Oi(k)),c.push(g+M+"="+encodeURIComponent(U))})}catch(k){throw c.push(g+"type="+encodeURIComponent("_badmap")),k}}function Qa(a){this.l=a.Ub||null,this.j=a.eb||!1}P(Qa,Qs),Qa.prototype.g=function(){return new Ya(this.l,this.j)},Qa.prototype.i=function(a){return function(){return a}}({});function Ya(a,c){Xe.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Ya,Xe),t=Ya.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,no(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,to(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,no(this)),this.g&&(this.readyState=3,no(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function pm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?to(this):no(this),this.readyState==3&&pm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,to(this))},t.Qa=function(a){this.g&&(this.response=a,to(this))},t.ga=function(){this.g&&to(this)};function to(a){a.readyState=4,a.l=null,a.j=null,a.v=null,no(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=c.next();return a.join(`\r
`)};function no(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ya.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function mm(a){let c="";return O(a,function(d,g){c+=g,c+=":",c+=d,c+=`\r
`}),c}function Lc(a,c,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=mm(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Te(a,c,d))}function Oe(a){Xe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Oe,Xe);var lw=/^https?$/i,uw=["POST","PUT"];t=Oe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kc.g(),this.v=this.o?ja(this.o):ja(kc),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(M){gm(this,M);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var k in g)d.set(k,g[k]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const M of g.keys())d.set(M,g.get(M));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(M=>M.toLowerCase()=="content-type"),k=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(uw,c,void 0))||g||k||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,U]of d)this.g.setRequestHeader(M,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_m(this),this.u=!0,this.g.send(a),this.u=!1}catch(M){gm(this,M)}};function gm(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,ym(a),Xa(a)}function ym(a){a.A||(a.A=!0,Ve(a,"complete"),Ve(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ve(this,"complete"),Ve(this,"abort"),Xa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xa(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vm(this):this.bb())},t.bb=function(){vm(this)};function vm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Gn(a)!=4||a.Z()!=2)){if(a.u&&Gn(a)==4)mr(a.Ea,0,a);else if(Ve(a,"readystatechange"),Gn(a)==4){a.h=!1;try{const U=a.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var g;if(g=U===0){var k=String(a.D).match(lm)[1]||null;!k&&l.self&&l.self.location&&(k=l.self.location.protocol.slice(0,-1)),g=!lw.test(k?k.toLowerCase():"")}d=g}if(d)Ve(a,"complete"),Ve(a,"success");else{a.m=6;try{var M=2<Gn(a)?a.g.statusText:""}catch{M=""}a.l=M+" ["+a.Z()+"]",ym(a)}}finally{Xa(a)}}}}function Xa(a,c){if(a.g){_m(a);const d=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||Ve(a,"ready");try{d.onreadystatechange=g}catch{}}}function _m(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Gn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),xc(c)}};function Em(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function cw(a){const c={};a=(a.g&&2<=Gn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(_(a[g]))continue;var d=C(a[g]);const k=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const M=c[k]||[];c[k]=M,M.push(d)}v(c,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ro(a,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||c}function wm(a){this.Aa=0,this.i=[],this.j=new Mn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ro("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ro("baseRetryDelayMs",5e3,a),this.cb=ro("retryDelaySeedMs",1e4,a),this.Wa=ro("forwardChannelMaxRetries",2,a),this.wa=ro("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new nm(a&&a.concurrentRequestLimit),this.Da=new ow,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wm.prototype,t.la=8,t.G=1,t.connect=function(a,c,d,g){Le(0),this.W=a,this.H=c||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=km(this,null,this.W),Za(this)};function Fc(a){if(Tm(a),a.G==3){var c=a.U++,d=Kn(a.I);if(Te(d,"SID",a.K),Te(d,"RID",c),Te(d,"TYPE","terminate"),io(a,d),c=new vr(a,a.j,c),c.L=2,c.v=Ga(Kn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Nm(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Wa(c)}xm(a)}function Ja(a){a.g&&(jc(a),a.g.cancel(),a.g=null)}function Tm(a){Ja(a),a.u&&(l.clearTimeout(a.u),a.u=null),el(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Za(a){if(!rm(a.h)&&!a.s){a.s=!0;var c=a.Ga;Pe||Q(),z||(Pe(),z=!0),q.add(c,a),a.B=0}}function hw(a,c){return im(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Dn(y(a.Ga,a,c),Pm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const k=new vr(this,this.j,a);let M=this.o;if(this.S&&(M?(M=m(M),I(M,this.S)):M=this.S),this.m!==null||this.O||(k.H=M,M=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Im(this,k,c),d=Kn(this.I),Te(d,"RID",a),Te(d,"CVER",22),this.D&&Te(d,"X-HTTP-Session-Id",this.D),io(this,d),M&&(this.O?c="headers="+encodeURIComponent(String(mm(M)))+"&"+c:this.m&&Lc(d,this.m,M)),bc(this.h,k),this.Ua&&Te(d,"TYPE","init"),this.P?(Te(d,"$req",c),Te(d,"SID","null"),k.T=!0,Dc(k,d,null)):Dc(k,d,c),this.G=2}}else this.G==3&&(a?Sm(this,a):this.i.length==0||rm(this.h)||Sm(this))};function Sm(a,c){var d;c?d=c.l:d=a.U++;const g=Kn(a.I);Te(g,"SID",a.K),Te(g,"RID",d),Te(g,"AID",a.T),io(a,g),a.m&&a.o&&Lc(g,a.m,a.o),d=new vr(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),c&&(a.i=c.D.concat(a.i)),c=Im(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),bc(a.h,d),Dc(d,g,c)}function io(a,c){a.H&&O(a.H,function(d,g){Te(c,g,d)}),a.l&&am({},function(d,g){Te(c,g,d)})}function Im(a,c,d){d=Math.min(a.i.length,d);var g=a.l?y(a.l.Na,a.l,a):null;e:{var k=a.i;let M=-1;for(;;){const U=["count="+d];M==-1?0<d?(M=k[0].g,U.push("ofs="+M)):M=0:U.push("ofs="+M);let ve=!0;for(let lt=0;lt<d;lt++){let ue=k[lt].g;const Et=k[lt].map;if(ue-=M,0>ue)M=Math.max(0,k[lt].g-100),ve=!1;else try{aw(Et,U,"req"+ue+"_")}catch{g&&g(Et)}}if(ve){g=U.join("&");break e}}}return a=a.i.splice(0,d),c.D=a,g}function Am(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;Pe||Q(),z||(Pe(),z=!0),q.add(c,a),a.v=0}}function $c(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Dn(y(a.Fa,a),Pm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Cm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Dn(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Le(10),Ja(this),Cm(this))};function jc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Cm(a){a.g=new vr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=Kn(a.qa);Te(c,"RID","rpc"),Te(c,"SID",a.K),Te(c,"AID",a.T),Te(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&Te(c,"TO",a.ja),Te(c,"TYPE","xmlhttp"),io(a,c),a.m&&a.o&&Lc(c,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Ga(Kn(c)),d.m=null,d.P=!0,Zp(d,a)}t.Za=function(){this.C!=null&&(this.C=null,Ja(this),$c(this),Le(19))};function el(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Rm(a,c){var d=null;if(a.g==c){el(a),jc(a),a.g=null;var g=2}else if(Oc(a.h,c))d=c.D,sm(a.h,c),g=1;else return;if(a.G!=0){if(c.o)if(g==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var k=a.B;g=_t(),Ve(g,new yr(g,d)),Za(a)}else Am(a);else if(k=c.s,k==3||k==0&&0<c.X||!(g==1&&hw(a,c)||g==2&&$c(a)))switch(d&&0<d.length&&(c=a.h,c.i=c.i.concat(d)),k){case 1:ei(a,5);break;case 4:ei(a,10);break;case 3:ei(a,6);break;default:ei(a,2)}}}function Pm(a,c){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*c}function ei(a,c){if(a.j.info("Error code "+c),c==2){var d=y(a.fb,a),g=a.Xa;const k=!g;g=new Zr(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||qa(g,"https"),Ga(g),k?iw(g.toString(),d):sw(g.toString(),d)}else Le(2);a.G=0,a.l&&a.l.sa(c),xm(a),Tm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function xm(a){if(a.G=0,a.ka=[],a.l){const c=om(a.h);(c.length!=0||a.i.length!=0)&&(D(a.ka,c),D(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function km(a,c,d){var g=d instanceof Zr?Kn(d):new Zr(d);if(g.g!="")c&&(g.g=c+"."+g.g),Ka(g,g.s);else{var k=l.location;g=k.protocol,c=c?c+"."+k.hostname:k.hostname,k=+k.port;var M=new Zr(null);g&&qa(M,g),c&&(M.g=c),k&&Ka(M,k),d&&(M.l=d),g=M}return d=a.D,c=a.ya,d&&c&&Te(g,d,c),Te(g,"VER",a.la),io(a,g),g}function Nm(a,c,d){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new Oe(new Qa({eb:d})):new Oe(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dm(){}t=Dm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function tl(){}tl.prototype.g=function(a,c){return new Wt(a,c)};function Wt(a,c){Xe.call(this),this.g=new wm(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!_(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!_(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Li(this)}P(Wt,Xe),Wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){Fc(this.g)},Wt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Oi(a),a=d);c.i.push(new GE(c.Ya++,a)),c.G==3&&Za(c)},Wt.prototype.N=function(){this.g.l=null,delete this.j,Fc(this.g),delete this.g,Wt.aa.N.call(this)};function Mm(a){ot.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const d in c){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}P(Mm,ot);function Vm(){at.call(this),this.status=1}P(Vm,at);function Li(a){this.g=a}P(Li,Dm),Li.prototype.ua=function(){Ve(this.g,"a")},Li.prototype.ta=function(a){Ve(this.g,new Mm(a))},Li.prototype.sa=function(a){Ve(this.g,new Vm)},Li.prototype.ra=function(){Ve(this.g,"b")},tl.prototype.createWebChannel=tl.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,z_=function(){return new tl},U_=function(){return _t()},B_=vt,Fd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},za.NO_ERROR=0,za.TIMEOUT=8,za.HTTP_ERROR=6,Bl=za,Yp.COMPLETE="complete",j_=Yp,Ba.EventType=xe,xe.OPEN="a",xe.CLOSE="b",xe.ERROR="c",xe.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,Eo=Ba,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,$_=Oe}).apply(typeof Sl<"u"?Sl:typeof self<"u"?self:typeof window<"u"?window:{});const iy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let js="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new D_("@firebase/firestore");function po(){return Si.logLevel}function W(t,...e){if(Si.logLevel<=oe.DEBUG){const n=e.map(up);Si.debug(`Firestore (${js}): ${t}`,...n)}}function cr(t,...e){if(Si.logLevel<=oe.ERROR){const n=e.map(up);Si.error(`Firestore (${js}): ${t}`,...n)}}function Ss(t,...e){if(Si.logLevel<=oe.WARN){const n=e.map(up);Si.warn(`Firestore (${js}): ${t}`,...n)}}function up(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${js}) INTERNAL ASSERTION FAILED: `+t;throw cr(e),new Error(e)}function me(t,e){t||Y()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends $s{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class ZA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eC{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new H_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new At(e)}}class tC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new tC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){me(this.o===void 0);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new rC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sC(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function Is(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Qe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Qe(0,0))}static max(){return new Z(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return aa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof aa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends aa{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const oC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends aa{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return oC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new K($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new K($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new K($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Re.fromString(e))}static fromName(e){return new G(Re.fromString(e).popFirst(5))}static empty(){return new G(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Re(e.slice()))}}function aC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new Hr(i,G.empty(),e)}function lC(t){return new Hr(t.readTime,t.key,-1)}class Hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hr(Z.min(),G.empty(),-1)}static max(){return new Hr(Z.max(),G.empty(),-1)}}function uC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ia(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==cC)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function dC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Aa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}cp.oe=-1;function oc(t){return t==null}function Cu(t){return t===0&&1/t==-1/0}function fC(t){return typeof t=="number"&&Number.isInteger(t)&&!Cu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function q_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Il(this.root,e,this.comparator,!1)}getReverseIterator(){return new Il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Il(this.root,e,this.comparator,!0)}}class Il{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ct.RED,this.left=i??ct.EMPTY,this.right=s??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ct(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ct.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new oy(this.data.getIterator())}getIteratorFrom(e){return new oy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class oy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Sn([])}unionWith(e){let n=new pt(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Is(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new K_("Invalid base64 string: "+s):s}}(e);return new yt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const pC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(t){if(me(!!t),typeof t=="string"){let e=0;const n=pC.exec(t);if(me(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ii(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function dp(t){const e=t.mapValue.fields.__previous_value__;return hp(e)?dp(e):e}function la(t){const e=Wr(t.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n,r,i,s,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class ua{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ua("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ua&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ai(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hp(t)?4:yC(t)?9007199254740991:gC(t)?10:11:Y()}function Hn(t,e){if(t===e)return!0;const n=Ai(t);if(n!==Ai(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return la(t).isEqual(la(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Wr(i.timestampValue),l=Wr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ii(i.bytesValue).isEqual(Ii(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Fe(i.geoPointValue.latitude)===Fe(s.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Fe(i.integerValue)===Fe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Fe(i.doubleValue),l=Fe(s.doubleValue);return o===l?Cu(o)===Cu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Is(t.arrayValue.values||[],e.arrayValue.values||[],Hn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(sy(o)!==sy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Hn(o[u],l[u])))return!1;return!0}(t,e);default:return Y()}}function ca(t,e){return(t.values||[]).find(n=>Hn(n,e))!==void 0}function As(t,e){if(t===e)return 0;const n=Ai(t),r=Ai(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Fe(s.integerValue||s.doubleValue),u=Fe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return ay(t.timestampValue,e.timestampValue);case 4:return ay(la(t),la(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Ii(s),u=Ii(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=ce(l[h],u[h]);if(f!==0)return f}return ce(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ce(Fe(s.latitude),Fe(o.latitude));return l!==0?l:ce(Fe(s.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ly(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,h,f;const p=s.fields||{},y=o.fields||{},T=(l=p.value)===null||l===void 0?void 0:l.arrayValue,P=(u=y.value)===null||u===void 0?void 0:u.arrayValue,R=ce(((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0,((f=P==null?void 0:P.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:ly(T,P)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Al.mapValue&&o===Al.mapValue)return 0;if(s===Al.mapValue)return 1;if(o===Al.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const y=ce(u[p],f[p]);if(y!==0)return y;const T=As(l[u[p]],h[f[p]]);if(T!==0)return T}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Y()}}function ay(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Wr(t),r=Wr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function ly(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=As(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function Cs(t){return $d(t)}function $d(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ii(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=$d(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${$d(n.fields[o])}`;return i+"}"}(t.mapValue):Y()}function jd(t){return!!t&&"integerValue"in t}function fp(t){return!!t&&"arrayValue"in t}function uy(t){return!!t&&"nullValue"in t}function cy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ul(t){return!!t&&"mapValue"in t}function gC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Vo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function yC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ul(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vo(n)}setAll(e){let n=dt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Vo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ul(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ul(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Bs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new un(Vo(this.value))}}function G_(t){const e=[];return Bs(t.fields,(n,r)=>{const i=new dt([n]);if(Ul(r)){const s=G_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Rt(e,0,Z.min(),Z.min(),Z.min(),un.empty(),0)}static newFoundDocument(e,n,r,i){return new Rt(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new Rt(e,2,n,Z.min(),Z.min(),un.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,Z.min(),Z.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n){this.position=e,this.inclusive=n}}function hy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=As(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function dy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n="asc"){this.field=e,this.dir=n}}function vC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{}class Ke extends Q_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new EC(e,n,r):n==="array-contains"?new SC(e,r):n==="in"?new IC(e,r):n==="not-in"?new AC(e,r):n==="array-contains-any"?new CC(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wC(e,r):new TC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(As(n,this.value)):n!==null&&Ai(this.value)===Ai(n)&&this.matchesComparison(As(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends Q_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Wn(e,n)}matches(e){return Y_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Y_(t){return t.op==="and"}function X_(t){return _C(t)&&Y_(t)}function _C(t){for(const e of t.filters)if(e instanceof Wn)return!1;return!0}function Bd(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+Cs(t.value);if(X_(t))return t.filters.map(e=>Bd(e)).join(",");{const e=t.filters.map(n=>Bd(n)).join(",");return`${t.op}(${e})`}}function J_(t,e){return t instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&Hn(r.value,i.value)}(t,e):t instanceof Wn?function(r,i){return i instanceof Wn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&J_(o,i.filters[l]),!0):!1}(t,e):void Y()}function Z_(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${Cs(n.value)}`}(t):t instanceof Wn?function(n){return n.op.toString()+" {"+n.getFilters().map(Z_).join(" ,")+"}"}(t):"Filter"}class EC extends Ke{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class wC extends Ke{constructor(e,n){super(e,"in",n),this.keys=e1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class TC extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=e1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function e1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class SC extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fp(n)&&ca(n.arrayValue,this.value)}}class IC extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ca(this.value.arrayValue,n)}}class AC extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ca(this.value.arrayValue,n)}}class CC extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ca(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function fy(t,e=null,n=[],r=[],i=null,s=null,o=null){return new RC(t,e,n,r,i,s,o)}function pp(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Bd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),oc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Cs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Cs(r)).join(",")),e.ue=n}return e.ue}function mp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!J_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dy(t.startAt,e.startAt)&&dy(t.endAt,e.endAt)}function Ud(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function PC(t,e,n,r,i,s,o,l){return new ac(t,e,n,r,i,s,o,l)}function gp(t){return new ac(t)}function py(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xC(t){return t.collectionGroup!==null}function Oo(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new pt(dt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Pu(s,r))}),n.has(dt.keyField().canonicalString())||e.ce.push(new Pu(dt.keyField(),r))}return e.ce}function Bn(t){const e=ee(t);return e.le||(e.le=kC(e,Oo(t))),e.le}function kC(t,e){if(t.limitType==="F")return fy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Pu(i.field,s)});const n=t.endAt?new Ru(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ru(t.startAt.position,t.startAt.inclusive):null;return fy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zd(t,e,n){return new ac(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lc(t,e){return mp(Bn(t),Bn(e))&&t.limitType===e.limitType}function t1(t){return`${pp(Bn(t))}|lt:${t.limitType}`}function Ui(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Z_(i)).join(", ")}]`),oc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Cs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Cs(i)).join(",")),`Target(${r})`}(Bn(t))}; limitType=${t.limitType})`}function uc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Oo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=hy(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Oo(r),i)||r.endAt&&!function(o,l,u){const h=hy(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Oo(r),i))}(t,e)}function NC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function n1(t){return(e,n)=>{let r=!1;for(const i of Oo(t)){const s=DC(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function DC(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?As(u,h):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return q_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new Me(G.comparator);function hr(){return MC}const r1=new Me(G.comparator);function wo(...t){let e=r1;for(const n of t)e=e.insert(n.key,n);return e}function i1(t){let e=r1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ui(){return bo()}function s1(){return bo()}function bo(){return new Us(t=>t.toString(),(t,e)=>t.isEqual(e))}const VC=new Me(G.comparator),OC=new pt(G.comparator);function ie(...t){let e=OC;for(const n of t)e=e.add(n);return e}const bC=new pt(ce);function LC(){return bC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cu(e)?"-0":e}}function o1(t){return{integerValue:""+t}}function FC(t,e){return fC(e)?o1(e):yp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(){this._=void 0}}function $C(t,e,n){return t instanceof xu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&hp(s)&&(s=dp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ha?l1(t,e):t instanceof da?u1(t,e):function(i,s){const o=a1(i,s),l=my(o)+my(i.Pe);return jd(o)&&jd(i.Pe)?o1(l):yp(i.serializer,l)}(t,e)}function jC(t,e,n){return t instanceof ha?l1(t,e):t instanceof da?u1(t,e):n}function a1(t,e){return t instanceof ku?function(r){return jd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class xu extends cc{}class ha extends cc{constructor(e){super(),this.elements=e}}function l1(t,e){const n=c1(e);for(const r of t.elements)n.some(i=>Hn(i,r))||n.push(r);return{arrayValue:{values:n}}}class da extends cc{constructor(e){super(),this.elements=e}}function u1(t,e){let n=c1(e);for(const r of t.elements)n=n.filter(i=>!Hn(i,r));return{arrayValue:{values:n}}}class ku extends cc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function my(t){return Fe(t.integerValue||t.doubleValue)}function c1(t){return fp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BC(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ha&&i instanceof ha||r instanceof da&&i instanceof da?Is(r.elements,i.elements,Hn):r instanceof ku&&i instanceof ku?Hn(r.Pe,i.Pe):r instanceof xu&&i instanceof xu}(t.transform,e.transform)}class UC{constructor(e,n){this.version=e,this.transformResults=n}}class Un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hc{}function h1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vp(t.key,Un.none()):new Ca(t.key,t.data,Un.none());{const n=t.data,r=un.empty();let i=new pt(dt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Pi(t.key,r,new Sn(i.toArray()),Un.none())}}function zC(t,e,n){t instanceof Ca?function(i,s,o){const l=i.value.clone(),u=yy(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Pi?function(i,s,o){if(!zl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=yy(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(d1(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Lo(t,e,n,r){return t instanceof Ca?function(s,o,l,u){if(!zl(s.precondition,o))return l;const h=s.value.clone(),f=vy(s.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Pi?function(s,o,l,u){if(!zl(s.precondition,o))return l;const h=vy(s.fieldTransforms,u,o),f=o.data;return f.setAll(d1(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return zl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function HC(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=a1(r.transform,i||null);s!=null&&(n===null&&(n=un.empty()),n.set(r.field,s))}return n||null}function gy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Is(r,i,(s,o)=>BC(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ca extends hc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Pi extends hc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function d1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function yy(t,e,n){const r=new Map;me(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,jC(o,l,n[i]))}return r}function vy(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,$C(s,o,e))}return r}class vp extends hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WC extends hc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zC(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Lo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Lo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=s1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=h1(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Is(this.mutations,e.mutations,(n,r)=>gy(n,r))&&Is(this.baseMutations,e.baseMutations,(n,r)=>gy(n,r))}}class _p{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){me(e.mutations.length===r.length);let i=function(){return VC}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new _p(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,se;function QC(t){switch(t){default:return Y();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function f1(t){if(t===void 0)return cr("GRPC error has no .code"),$.UNKNOWN;switch(t){case Ue.OK:return $.OK;case Ue.CANCELLED:return $.CANCELLED;case Ue.UNKNOWN:return $.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return $.INTERNAL;case Ue.UNAVAILABLE:return $.UNAVAILABLE;case Ue.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ue.NOT_FOUND:return $.NOT_FOUND;case Ue.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ue.ABORTED:return $.ABORTED;case Ue.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ue.DATA_LOSS:return $.DATA_LOSS;default:return Y()}}(se=Ue||(Ue={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=new fi([4294967295,4294967295],0);function _y(t){const e=YC().encode(t),n=new F_;return n.update(e),new Uint8Array(n.digest())}function Ey(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fi([n,r],0),new fi([i,s],0)]}class Ep{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new To(`Invalid padding: ${n}`);if(r<0)throw new To(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new To(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new To(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=fi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(fi.fromNumber(r)));return i.compare(XC)===1&&(i=new fi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=_y(e),[r,i]=Ey(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Ep(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=_y(e),[r,i]=Ey(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class To extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ra.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new dc(Z.min(),i,new Me(ce),hr(),ie())}}class Ra{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ra(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class p1{constructor(e,n){this.targetId=e,this.me=n}}class m1{constructor(e,n,r=yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class wy{constructor(){this.fe=0,this.ge=Sy(),this.pe=yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new Ra(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Sy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class JC{constructor(e){this.Le=e,this.Be=new Map,this.ke=hr(),this.qe=Ty(),this.Qe=new Me(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Ud(s))if(r===0){const o=new G(s.path);this.Ue(n,o,Rt.newNoDocument(o,Z.min()))}else me(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Ii(r).toUint8Array()}catch(u){if(u instanceof K_)return Ss("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Ep(o,i,s)}catch(u){return Ss(u instanceof To?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Ud(l.target)){const u=new G(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Rt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ie();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new dc(e,n,this.Qe,this.ke,r);return this.ke=hr(),this.qe=Ty(),this.Qe=new Me(ce),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new wy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new pt(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new wy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ty(){return new Me(G.comparator)}function Sy(){return new Me(G.comparator)}const ZC={asc:"ASCENDING",desc:"DESCENDING"},eR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tR={and:"AND",or:"OR"};class nR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hd(t,e){return t.useProto3Json||oc(e)?e:{value:e}}function Nu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rR(t,e){return Nu(t,e.toTimestamp())}function zn(t){return me(!!t),Z.fromTimestamp(function(n){const r=Wr(n);return new Qe(r.seconds,r.nanos)}(t))}function wp(t,e){return Wd(t,e).canonicalString()}function Wd(t,e){const n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function y1(t){const e=Re.fromString(t);return me(T1(e)),e}function qd(t,e){return wp(t.databaseId,e.path)}function Rh(t,e){const n=y1(e);if(n.get(1)!==t.databaseId.projectId)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(_1(n))}function v1(t,e){return wp(t.databaseId,e)}function iR(t){const e=y1(t);return e.length===4?Re.emptyPath():_1(e)}function Kd(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _1(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Iy(t,e,n){return{name:qd(t,e),fields:n.value.mapValue.fields}}function sR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(me(f===void 0||typeof f=="string"),yt.fromBase64String(f||"")):(me(f===void 0||f instanceof Buffer||f instanceof Uint8Array),yt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?$.UNKNOWN:f1(h.code);return new K(f,h.message||"")}(o);n=new m1(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Rh(t,r.document.name),s=zn(r.document.updateTime),o=r.document.createTime?zn(r.document.createTime):Z.min(),l=new un({mapValue:{fields:r.document.fields}}),u=Rt.newFoundDocument(i,s,o,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Hl(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Rh(t,r.document),s=r.readTime?zn(r.readTime):Z.min(),o=Rt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Hl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Rh(t,r.document),s=r.removedTargetIds||[];n=new Hl([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new GC(i,s),l=r.targetId;n=new p1(l,o)}}return n}function oR(t,e){let n;if(e instanceof Ca)n={update:Iy(t,e.key,e.value)};else if(e instanceof vp)n={delete:qd(t,e.key)};else if(e instanceof Pi)n={update:Iy(t,e.key,e.data),updateMask:mR(e.fieldMask)};else{if(!(e instanceof WC))return Y();n={verify:qd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof xu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ha)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof da)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ku)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:rR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(t,e.precondition)),n}function aR(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?zn(i.updateTime):zn(s);return o.isEqual(Z.min())&&(o=zn(s)),new UC(o,i.transformResults||[])}(n,e))):[]}function lR(t,e){return{documents:[v1(t,e.path)]}}function uR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=v1(t,i);const s=function(h){if(h.length!==0)return w1(Wn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(f=>function(y){return{field:zi(y.field),direction:dR(y.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Hd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function cR(t){let e=iR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){me(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const y=E1(p);return y instanceof Wn&&X_(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(y=>function(P){return new Pu(Hi(P.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(p){let y;return y=typeof p=="object"?p.value:p,oc(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){const y=!!p.before,T=p.values||[];return new Ru(T,y)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const y=!p.before,T=p.values||[];return new Ru(T,y)}(n.endAt)),PC(e,i,o,s,l,"F",u,h)}function hR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function E1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hi(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hi(n.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Hi(n.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Hi(n.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(Hi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Wn.create(n.compositeFilter.filters.map(r=>E1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function dR(t){return ZC[t]}function fR(t){return eR[t]}function pR(t){return tR[t]}function zi(t){return{fieldPath:t.canonicalString()}}function Hi(t){return dt.fromServerFormat(t.fieldPath)}function w1(t){return t instanceof Ke?function(n){if(n.op==="=="){if(cy(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NAN"}};if(uy(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cy(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NOT_NAN"}};if(uy(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zi(n.field),op:fR(n.op),value:n.value}}}(t):t instanceof Wn?function(n){const r=n.getFilters().map(i=>w1(i));return r.length===1?r[0]:{compositeFilter:{op:pR(n.op),filters:r}}}(t):Y()}function mR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function T1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,r,i,s=Z.min(),o=Z.min(),l=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.ct=e}}function yR(t){const e=cR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.un=new _R}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Hr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Hr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class _R{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pt(Re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pt(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Rs(0)}static kn(){return new Rs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this.changes=new Us(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Lo(r.mutation,i,Sn.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const i=ui();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=wo();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ui();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=hr();const o=bo(),l=function(){return bo()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof Pi)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Lo(f.mutation,h,f.mutation.getFieldMask(),Qe.now())):o.set(h.key,Sn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var p;return l.set(h,new wR(f,(p=o.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=bo();let i=new Me((o,l)=>o-l),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||Sn.empty();f=l.applyToLocalView(h,f),r.set(u,f);const p=(i.get(l.batchId)||ie()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,p=s1();f.forEach(y=>{if(!s.has(y)){const T=h1(n.get(y),r.get(y));T!==null&&p.set(y,T),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(ui());let l=-1,u=s;return o.next(h=>F.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ie())).next(f=>({batchId:l,changes:i1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=wo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=wo();return this.indexManager.getCollectionParents(e,s).next(l=>F.forEach(l,u=>{const h=function(p,y){return new ac(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Rt.newInvalidDocument(f)))});let l=wo();return o.forEach((u,h)=>{const f=s.get(u);f!==void 0&&Lo(f.mutation,h,Sn.empty(),Qe.now()),uc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:zn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:yR(i.bundledQuery),readTime:zn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.overlays=new Me(G.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ui();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=ui(),s=n.length+1,o=new G(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Me((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=ui(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=ui(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return F.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new KC(n,r));let s=this.Ir.get(n);s===void 0&&(s=ie(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this.Tr=new pt(Je.Er),this.dr=new pt(Je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Je(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new Re([])),r=new Je(n,e),i=new Je(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new Re([])),r=new Je(n,e),i=new Je(n,e+1);let s=ie();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Je(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new pt(Je.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qC(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Je(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),i=new Je(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(ce);return n.forEach(i=>{const s=new Je(i,0),o=new Je(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new Je(new G(s),0);let l=new pt(ce);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new Je(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Je(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.Mr=e,this.docs=function(){return new Me(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=hr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hr();const o=n.path,l=new G(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||uC(lC(f),r)<=0||(i.has(f.key)||uc(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Y()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new PR(this)}getSize(e){return F.resolve(this.size)}}class PR extends ER{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.persistence=e,this.Nr=new Us(n=>pp(n),mp),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Tp,this.targetCount=0,this.kr=Rs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Rs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new cp(0),this.Kr=!1,this.Kr=!0,this.$r=new AR,this.referenceDelegate=e(this),this.Ur=new xR(this),this.indexManager=new vR,this.remoteDocumentCache=function(i){return new RR(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new gR(n),this.Gr=new SR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new CR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new NR(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class NR extends hC{constructor(e){super(),this.currentSequenceNumber=e}}class Sp{constructor(e){this.persistence=e,this.Jr=new Tp,this.Yr=null}static Zr(e){return new Sp(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=G.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ie(),i=ie();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ip(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return bI()?8:dC(VI())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new DR;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(po()<=oe.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ui(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(po()<=oe.DEBUG&&W("QueryEngine","Query:",Ui(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(po()<=oe.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ui(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(n))):F.resolve())}Yi(e,n){if(py(n))return F.resolve(null);let r=Bn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=zd(n,null,"F"),r=Bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ie(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,zd(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return py(n)||i.isEqual(Z.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?F.resolve(null):(po()<=oe.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ui(n)),this.rs(e,o,n,aC(i,-1)).next(l=>l))})}ts(e,n){let r=new pt(n1(e));return n.forEach((i,s)=>{uc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return po()<=oe.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ui(n)),this.Ji.getDocumentsMatchingQuery(e,n,Hr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Me(ce),this._s=new Us(s=>pp(s),mp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function OR(t,e,n,r){return new VR(t,e,n,r)}async function S1(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ie();for(const h of i){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of s){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function bR(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const p=h.batch,y=p.keys();let T=F.resolve();return y.forEach(P=>{T=T.next(()=>f.getEntry(u,P)).next(R=>{const D=h.docVersions.get(P);me(D!==null),R.version.compareTo(D)<0&&(p.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),f.addEntry(R)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ie();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function I1(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function LR(t,e){const n=ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const y=i.get(p);if(!y)return;l.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,p)));let T=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?T=T.withResumeToken(yt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,r)),i=i.insert(p,T),function(R,D,w){return R.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(y,T,f)&&l.push(n.Ur.updateTargetData(s,T))});let u=hr(),h=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(FR(s,o,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(Z.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.os=i,s))}function FR(t,e,n){let r=ie(),i=ie();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=hr();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function $R(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jR(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new kr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Gd(t,e,n){const r=ee(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Aa(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Ay(t,e,n){const r=ee(t);let i=Z.min(),s=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const p=ee(u),y=p._s.get(f);return y!==void 0?F.resolve(p.os.get(y)):p.Ur.getTargetData(h,f)}(r,o,Bn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Z.min(),n?s:ie())).next(l=>(BR(r,NC(e),l),{documents:l,Ts:s})))}function BR(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Cy{constructor(){this.activeTargetIds=LC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UR{constructor(){this.so=new Cy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Cy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cl=null;function Ph(){return Cl===null?Cl=function(){return 268435456+Math.round(2147483648*Math.random())}():Cl++,"0x"+Cl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class qR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=Ph(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,u,h,i).then(f=>(W("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Ss("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+js}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=HR[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Ph();return new Promise((o,l)=>{const u=new $_;u.setWithCredentials(!0),u.listenOnce(j_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Bl.NO_ERROR:const f=u.getResponseJson();W(It,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Bl.TIMEOUT:W(It,`RPC '${e}' ${s} timed out`),l(new K($.DEADLINE_EXCEEDED,"Request time out"));break;case Bl.HTTP_ERROR:const p=u.getStatus();if(W(It,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const T=y==null?void 0:y.error;if(T&&T.status&&T.message){const P=function(D){const w=D.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(w)>=0?w:$.UNKNOWN}(T.status);l(new K(P,T.message))}else l(new K($.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new K($.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{W(It,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);W(It,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=Ph(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=z_(),l=U_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");W(It,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);let y=!1,T=!1;const P=new WR({Io:D=>{T?W(It,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(y||(W(It,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),W(It,`RPC '${e}' stream ${i} sending:`,D),p.send(D))},To:()=>p.close()}),R=(D,w,_)=>{D.listen(w,S=>{try{_(S)}catch(N){setTimeout(()=>{throw N},0)}})};return R(p,Eo.EventType.OPEN,()=>{T||(W(It,`RPC '${e}' stream ${i} transport opened.`),P.yo())}),R(p,Eo.EventType.CLOSE,()=>{T||(T=!0,W(It,`RPC '${e}' stream ${i} transport closed`),P.So())}),R(p,Eo.EventType.ERROR,D=>{T||(T=!0,Ss(It,`RPC '${e}' stream ${i} transport errored:`,D),P.So(new K($.UNAVAILABLE,"The operation could not be completed")))}),R(p,Eo.EventType.MESSAGE,D=>{var w;if(!T){const _=D.data[0];me(!!_);const S=_,N=S.error||((w=S[0])===null||w===void 0?void 0:w.error);if(N){W(It,`RPC '${e}' stream ${i} received error:`,N);const L=N.status;let O=function(E){const I=Ue[E];if(I!==void 0)return f1(I)}(L),v=N.message;O===void 0&&(O=$.INTERNAL,v="Unknown error status: "+L+" with message "+N.message),T=!0,P.So(new K(O,v)),p.close()}else W(It,`RPC '${e}' stream ${i} received:`,_),P.bo(_)}}),R(l,B_.STAT_EVENT,D=>{D.stat===Fd.PROXY?W(It,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===Fd.NOPROXY&&W(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function xh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t){return new nR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new A1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new K($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KR extends C1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=sR(this.serializer,e),r=function(s){if(!("targetChange"in s))return Z.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?zn(o.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Kd(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Ud(u)?{documents:lR(s,u)}:{query:uR(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=g1(s,o.resumeToken);const h=Hd(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Z.min())>0){l.readTime=Nu(s,o.snapshotVersion.toTimestamp());const h=Hd(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=hR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Kd(this.serializer),n.removeTarget=e,this.a_(n)}}class GR extends C1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=aR(e.writeResults,e.commitTime),r=zn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Kd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>oR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Wd(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K($.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Wd(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class YR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cr(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{xi(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=ee(u);h.L_.add(4),await Pa(h),h.q_.set("Unknown"),h.L_.delete(4),await pc(h)}(this))})}),this.q_=new YR(r,i)}}async function pc(t){if(xi(t))for(const e of t.B_)await e(!0)}async function Pa(t){for(const e of t.B_)await e(!1)}function R1(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Pp(n)?Rp(n):zs(n).r_()&&Cp(n,e))}function Ap(t,e){const n=ee(t),r=zs(n);n.N_.delete(e),r.r_()&&P1(n,e),n.N_.size===0&&(r.r_()?r.o_():xi(n)&&n.q_.set("Unknown"))}function Cp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zs(t).A_(e)}function P1(t,e){t.Q_.xe(e),zs(t).R_(e)}function Rp(t){t.Q_=new JC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),zs(t).start(),t.q_.v_()}function Pp(t){return xi(t)&&!zs(t).n_()&&t.N_.size>0}function xi(t){return ee(t).L_.size===0}function x1(t){t.Q_=void 0}async function JR(t){t.q_.set("Online")}async function ZR(t){t.N_.forEach((e,n)=>{Cp(t,e)})}async function eP(t,e){x1(t),Pp(t)?(t.q_.M_(e),Rp(t)):t.q_.set("Unknown")}async function tP(t,e,n){if(t.q_.set("Online"),e instanceof m1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Du(t,r)}else if(e instanceof Hl?t.Q_.Ke(e):e instanceof p1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const r=await I1(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(h);f&&s.N_.set(h,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(yt.EMPTY_BYTE_STRING,f.snapshotVersion)),P1(s,u);const p=new kr(f.target,u,h,f.sequenceNumber);Cp(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Du(t,r)}}async function Du(t,e,n){if(!Aa(e))throw e;t.L_.add(1),await Pa(t),t.q_.set("Offline"),n||(n=()=>I1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await pc(t)})}function k1(t,e){return e().catch(n=>Du(t,n,e))}async function mc(t){const e=ee(t),n=qr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;nP(e);)try{const i=await $R(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,rP(e,i)}catch(i){await Du(e,i)}N1(e)&&D1(e)}function nP(t){return xi(t)&&t.O_.length<10}function rP(t,e){t.O_.push(e);const n=qr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function N1(t){return xi(t)&&!qr(t).n_()&&t.O_.length>0}function D1(t){qr(t).start()}async function iP(t){qr(t).p_()}async function sP(t){const e=qr(t);for(const n of t.O_)e.m_(n.mutations)}async function oP(t,e,n){const r=t.O_.shift(),i=_p.from(r,e,n);await k1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await mc(t)}async function aP(t,e){e&&qr(t).V_&&await async function(r,i){if(function(o){return QC(o)&&o!==$.ABORTED}(i.code)){const s=r.O_.shift();qr(r).s_(),await k1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await mc(r)}}(t,e),N1(t)&&D1(t)}async function Py(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=xi(n);n.L_.add(3),await Pa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await pc(n)}async function lP(t,e){const n=ee(t);e?(n.L_.delete(2),await pc(n)):e||(n.L_.add(2),await Pa(n),n.q_.set("Unknown"))}function zs(t){return t.K_||(t.K_=function(n,r,i){const s=ee(n);return s.w_(),new KR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:JR.bind(null,t),Ro:ZR.bind(null,t),mo:eP.bind(null,t),d_:tP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Pp(t)?Rp(t):t.q_.set("Unknown")):(await t.K_.stop(),x1(t))})),t.K_}function qr(t){return t.U_||(t.U_=function(n,r,i){const s=ee(n);return s.w_(),new GR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:iP.bind(null,t),mo:aP.bind(null,t),f_:sP.bind(null,t),g_:oP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await mc(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new xp(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kp(t,e){if(cr("AsyncQueue",`${e}: ${t}`),Aa(t))return new K($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=wo(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new ds(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ds)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ds;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(){this.W_=new Me(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ps{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ps(e,n,ds.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class cP{constructor(){this.queries=ky(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ee(n),s=i.queries;i.queries=ky(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new K($.ABORTED,"Firestore shutting down"))}}function ky(){return new Us(t=>t1(t),lc)}async function hP(t,e){const n=ee(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new uP,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=kp(o,`Initialization of query '${Ui(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Np(n)}async function dP(t,e){const n=ee(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function fP(t,e){const n=ee(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&Np(n)}function pP(t,e,n){const r=ee(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Np(t){t.Y_.forEach(e=>{e.next()})}var Qd,Ny;(Ny=Qd||(Qd={})).ea="default",Ny.Cache="cache";class mP{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ps(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ps.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.key=e}}class V1{constructor(e){this.key=e}}class gP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=n1(e),this.Ra=new ds(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new xy,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const y=i.get(f),T=uc(this.query,p)?p:null,P=!!y&&this.mutatedKeys.has(y.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let D=!1;y&&T?y.data.isEqual(T.data)?P!==R&&(r.track({type:3,doc:T}),D=!0):this.ga(y,T)||(r.track({type:2,doc:T}),D=!0,(u&&this.Aa(T,u)>0||h&&this.Aa(T,h)<0)&&(l=!0)):!y&&T?(r.track({type:0,doc:T}),D=!0):y&&!T&&(r.track({type:1,doc:y}),D=!0,(u||h)&&(l=!0)),D&&(T?(o=o.add(T),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(T,P){const R=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return R(T)-R(P)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new Ps(this.query,e.Ra,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new V1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new M1(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ps.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class yP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vP{constructor(e){this.key=e,this.va=!1}}class _P{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Us(l=>t1(l),lc),this.Ma=new Map,this.xa=new Set,this.Oa=new Me(G.comparator),this.Na=new Map,this.La=new Tp,this.Ba={},this.ka=new Map,this.qa=Rs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function EP(t,e,n=!0){const r=j1(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await O1(r,e,n,!0),i}async function wP(t,e){const n=j1(t);await O1(n,e,!0,!1)}async function O1(t,e,n,r){const i=await jR(t.localStore,Bn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await TP(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&R1(t.remoteStore,i),l}async function TP(t,e,n,r,i){t.Ka=(p,y,T)=>async function(R,D,w,_){let S=D.view.ma(w);S.ns&&(S=await Ay(R.localStore,D.query,!1).then(({documents:v})=>D.view.ma(v,S)));const N=_&&_.targetChanges.get(D.targetId),L=_&&_.targetMismatches.get(D.targetId)!=null,O=D.view.applyChanges(S,R.isPrimaryClient,N,L);return My(R,D.targetId,O.wa),O.snapshot}(t,p,y,T);const s=await Ay(t.localStore,e,!0),o=new gP(e,s.Ts),l=o.ma(s.documents),u=Ra.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);My(t,n,h.wa);const f=new yP(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function SP(t,e,n){const r=ee(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!lc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Gd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ap(r.remoteStore,i.targetId),Yd(r,i.targetId)}).catch(Ia)):(Yd(r,i.targetId),await Gd(r.localStore,i.targetId,!0))}async function IP(t,e){const n=ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ap(n.remoteStore,r.targetId))}async function AP(t,e,n){const r=DP(t);try{const i=await function(o,l){const u=ee(o),h=Qe.now(),f=l.reduce((T,P)=>T.add(P.key),ie());let p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let P=hr(),R=ie();return u.cs.getEntries(T,f).next(D=>{P=D,P.forEach((w,_)=>{_.isValidDocument()||(R=R.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,P)).next(D=>{p=D;const w=[];for(const _ of l){const S=HC(_,p.get(_.key).overlayedDocument);S!=null&&w.push(new Pi(_.key,S,G_(S.value.mapValue),Un.exists(!0)))}return u.mutationQueue.addMutationBatch(T,h,w,l)}).next(D=>{y=D;const w=D.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(T,D.batchId,w)})}).then(()=>({batchId:y.batchId,changes:i1(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Me(ce)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await xa(r,i.changes),await mc(r.remoteStore)}catch(i){const s=kp(i,"Failed to persist write");n.reject(s)}}async function b1(t,e){const n=ee(t);try{const r=await LR(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?me(o.va):i.removedDocuments.size>0&&(me(o.va),o.va=!1))}),await xa(n,r,e)}catch(r){await Ia(r)}}function Dy(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ee(o);u.onlineState=l;let h=!1;u.queries.forEach((f,p)=>{for(const y of p.j_)y.Z_(l)&&(h=!0)}),h&&Np(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CP(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Me(G.comparator);o=o.insert(s,Rt.newNoDocument(s,Z.min()));const l=ie().add(s),u=new dc(Z.min(),new Map,new Me(ce),o,l);await b1(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Dp(r)}else await Gd(r.localStore,e,!1).then(()=>Yd(r,e,n)).catch(Ia)}async function RP(t,e){const n=ee(t),r=e.batch.batchId;try{const i=await bR(n.localStore,e);F1(n,r,null),L1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xa(n,i)}catch(i){await Ia(i)}}async function PP(t,e,n){const r=ee(t);try{const i=await function(o,l){const u=ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(me(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);F1(r,e,n),L1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xa(r,i)}catch(i){await Ia(i)}}function L1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function F1(t,e,n){const r=ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Yd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||$1(t,r)})}function $1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ap(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Dp(t))}function My(t,e,n){for(const r of n)r instanceof M1?(t.La.addReference(r.key,e),xP(t,r)):r instanceof V1?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||$1(t,r.key)):Y()}function xP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),Dp(t))}function Dp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(Re.fromString(e)),r=t.qa.next();t.Na.set(r,new vP(n)),t.Oa=t.Oa.insert(n,r),R1(t.remoteStore,new kr(Bn(gp(n.path)),r,"TargetPurposeLimboResolution",cp.oe))}}async function xa(t,e,n){const r=ee(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Ip.Wi(u.targetId,h);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,h){const f=ee(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(h,y=>F.forEach(y.$i,T=>f.persistence.referenceDelegate.addReference(p,y.targetId,T)).next(()=>F.forEach(y.Ui,T=>f.persistence.referenceDelegate.removeReference(p,y.targetId,T)))))}catch(p){if(!Aa(p))throw p;W("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const y=p.targetId;if(!p.fromCache){const T=f.os.get(y),P=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(P);f.os=f.os.insert(y,R)}}}(r.localStore,s))}async function kP(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await S1(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new K($.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xa(n,r.hs)}}function NP(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function j1(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=b1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CP.bind(null,e),e.Ca.d_=fP.bind(null,e.eventManager),e.Ca.$a=pP.bind(null,e.eventManager),e}function DP(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PP.bind(null,e),e}class Mu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return OR(this.persistence,new MR,e.initialUser,this.serializer)}Ga(e){return new kR(Sp.Zr,this.serializer)}Wa(e){return new UR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mu.provider={build:()=>new Mu};class Xd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Dy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kP.bind(null,this.syncEngine),await lP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cP}()}createDatastore(e){const n=fc(e.databaseInfo.databaseId),r=function(s){return new qR(s)}(e.databaseInfo);return function(s,o,l,u){return new QR(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new XR(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Dy(this.syncEngine,n,0),function(){return Ry.D()?new Ry:new zR}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,f){const p=new _P(i,s,o,l,u,h);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ee(i);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Pa(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Xd.provider={build:()=>new Xd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=At.UNAUTHENTICATED,this.clientId=W_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kh(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await S1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Vy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await OP(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Py(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Py(e.remoteStore,i)),t._onlineComponents=e}async function OP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await kh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ss("Error using user provided cache. Falling back to memory cache: "+n),await kh(t,new Mu)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await kh(t,new Mu);return t._offlineComponents}async function B1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Vy(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Vy(t,new Xd))),t._onlineComponents}function bP(t){return B1(t).then(e=>e.syncEngine)}async function Oy(t){const e=await B1(t),n=e.eventManager;return n.onListen=EP.bind(null,e.syncEngine),n.onUnlisten=SP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=wP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IP.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t,e,n){if(!n)throw new K($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LP(t,e,n,r){if(e===!0&&r===!0)throw new K($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ly(t){if(!G.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fy(t){if(G.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function mi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mp(t);throw new K($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=U1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $y({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $y(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new JA;switch(r.type){case"firstParty":return new nC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=by.get(n);r&&(W("ComponentProvider","Removing Datastore"),by.delete(n),r.terminate())}(this),Promise.resolve()}}function FP(t,e,n,r={}){var i;const s=(t=mi(t,gc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ss("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=At.MOCK_USER;else{l=MI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new K($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new At(h)}t._authCredentials=new ZA(new H_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yc(this.firestore,e,this._query)}}class Yt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}}class Br extends yc{constructor(e,n,r){super(e,n,gp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new G(e))}withConverter(e){return new Br(this.firestore,e,this._path)}}function H1(t,e,...n){if(t=Ts(t),z1("collection","path",e),t instanceof gc){const r=Re.fromString(e,...n);return Fy(r),new Br(t,null,r)}{if(!(t instanceof Yt||t instanceof Br))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return Fy(r),new Br(t.firestore,null,r)}}function rr(t,e,...n){if(t=Ts(t),arguments.length===1&&(e=W_.newId()),z1("doc","path",e),t instanceof gc){const r=Re.fromString(e,...n);return Ly(r),new Yt(t,null,new G(r))}{if(!(t instanceof Yt||t instanceof Br))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return Ly(r),new Yt(t.firestore,t instanceof Br?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new A1(this,"async_queue_retry"),this.Vu=()=>{const r=xh();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=xh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=xh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new pi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Aa(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw cr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=xp.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function By(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class fa extends gc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new jy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jy(e),this._firestoreClient=void 0,await e}}}function $P(t,e){const n=typeof t=="object"?t:UA(),r=typeof t=="string"?t:"(default)",i=FA(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=NI("firestore");s&&FP(i,...s)}return i}function W1(t){if(t._terminated)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jP(t),t._firestoreClient}function jP(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,f){return new mC(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,U1(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new VP(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xs(yt.fromBase64String(e))}catch(n){throw new K($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xs(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=/^__.*__$/;class UP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ca(e,this.data,n,this.fieldTransforms)}}function K1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Lp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Lp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(K1(this.Cu)&&BP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class zP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fc(e)}Qu(e,n,r,i=!1){return new Lp({Cu:e,methodName:n,qu:r,path:dt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function HP(t){const e=t._freezeSettings(),n=fc(t._databaseId);return new zP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function WP(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);X1("Data must be an object, but it was:",o,r);const l=Q1(r,o);let u,h;if(s.merge)u=new Sn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const y=qP(e,p,n);if(!o.contains(y))throw new K($.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);GP(f,y)||f.push(y)}u=new Sn(f),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new UP(new un(l),u,h)}function G1(t,e){if(Y1(t=Ts(t)))return X1("Unsupported field value:",e,t),Q1(t,e);if(t instanceof q1)return function(r,i){if(!K1(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=G1(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ts(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Qe.fromDate(r);return{timestampValue:Nu(i.serializer,s)}}if(r instanceof Qe){const s=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nu(i.serializer,s)}}if(r instanceof Op)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xs)return{bytesValue:g1(i.serializer,r._byteString)};if(r instanceof Yt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:wp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bp)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return yp(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Mp(r)}`)}(t,e)}function Q1(t,e){const n={};return q_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bs(t,(r,i)=>{const s=G1(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Y1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof Op||t instanceof xs||t instanceof Yt||t instanceof q1||t instanceof bp)}function X1(t,e,n){if(!Y1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Mp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function qP(t,e,n){if((e=Ts(e))instanceof Vp)return e._internalPath;if(typeof e=="string")return J1(t,e);throw Vu("Field path arguments must be of type string or ",t,!1,void 0,n)}const KP=new RegExp("[~\\*/\\[\\]]");function J1(t,e,n){if(e.search(KP)>=0)throw Vu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vp(...e.split("."))._internalPath}catch{throw Vu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new K($.INVALID_ARGUMENT,l+t+u)}function GP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(eE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QP extends Z1{data(){return super.data()}}function eE(t,e){return typeof e=="string"?J1(t,e):e instanceof Vp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class XP{convertValue(e,n="none"){switch(Ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Bs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Fe(o.doubleValue));return new bp(s)}convertGeoPoint(e){return new Op(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=dp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(la(e));default:return null}}convertTimestamp(e){const n=Wr(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);me(T1(r));const i=new ua(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||cr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tE extends Z1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(eE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Wl extends tE{data(e={}){return super.data(e)}}class ZP{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new So(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Wl(this._firestore,this._userDataWriter,r.key,r,new So(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Wl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new So(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Wl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new So(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:ex(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ex(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}class nE extends XP{constructor(e){super(),this.firestore=e}convertBytes(e){return new xs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}function fs(t,e,n){t=mi(t,Yt);const r=mi(t.firestore,fa),i=JP(t.converter,e,n);return rE(r,[WP(HP(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Un.none())])}function tx(t){return rE(mi(t.firestore,fa),[new vp(t._key,Un.none())])}function vc(t,...e){var n,r,i;t=Ts(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||By(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(By(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,h,f;if(t instanceof Yt)h=mi(t.firestore,fa),f=gp(t._key.path),u={next:p=>{e[o]&&e[o](nx(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=mi(t,yc);h=mi(p.firestore,fa),f=p._query;const y=new nE(h);u={next:T=>{e[o]&&e[o](new ZP(h,y,p,T))},error:e[o+1],complete:e[o+2]},YP(t._query)}return function(y,T,P,R){const D=new MP(R),w=new mP(T,D,P);return y.asyncQueue.enqueueAndForget(async()=>hP(await Oy(y),w)),()=>{D.Za(),y.asyncQueue.enqueueAndForget(async()=>dP(await Oy(y),w))}}(W1(h),f,l,u)}function rE(t,e){return function(r,i){const s=new pi;return r.asyncQueue.enqueueAndForget(async()=>AP(await bP(r),i,s)),s.promise}(W1(t),e)}function nx(t,e,n){const r=n.docs.get(e._key),i=new nE(t);return new tE(t,i,e._key,r,new So(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){js=i})(BA),Au(new sa("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new fa(new eC(r.getProvider("auth-internal")),new iC(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new K($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ua(h.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),hs(iy,"4.7.3",e),hs(iy,"4.7.3","esm2017")})();var rx="firebase",ix="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hs(rx,ix,"app");const sx={apiKey:"AIzaSyAffBMfX9NHVgSg_w4a8ZKa55vmp0eHb2w",authDomain:"dd5tools.firebaseapp.com",databaseURL:"https://dd5tools.firebaseio.com",projectId:"dd5tools",storageBucket:"dd5tools.appspot.com",messagingSenderId:"1096592466642",appId:"1:1096592466642:web:f03ea81d304964f1f1030b"},ox=O_(sx),Tn=$P(ox),ax=t=>{const[e,n]=b.useState(0),[r,i]=b.useState(Ot.empty);b.useEffect(()=>{vc(rr(Tn,"monster","monster"),x=>{x.data()!=null&&i(x.data())})},[]);const{cr:s,num:o,exp:l}=b.useMemo(()=>_o(Object.keys(Hg).map(x=>{const A=Hg[x],we=Math.floor(t/A);return{cr:x,num:we,exp:A}}).filter(({num:x})=>1<=x&&x<=15)),[e]),u=new Set([gt.COMMON]);Math.random()<.5&&u.add(gt.UNCOMMON);const h=b.useMemo(()=>_o(Th.filter(x=>x.templateType===rt.TYPE&&u.has(x.rarity))),[e]),f=b.useMemo(()=>_o(Th.filter(x=>x.templateType===rt.RACE&&x.monsterType===h.monsterType&&u.has(x.rarity))),[e]),p=b.useMemo(()=>_o(Th.filter(x=>x.templateType===rt.CLASS&&u.has(x.rarity))),[e]);console.log(`monsterType: ${h.name}`),console.log(`monsterRace: ${f.name}`),console.log(`monsterClass: ${p.name}`);const{baseBonus:y,ac:T,hpMin:P,hpMax:R,atBonus:D,damageMin:w,damageMax:_,save:S}=zS[s],N=Math.floor((P+R)/2),L=Math.floor((w+_)/2),O=Math.floor(L/3.5),v=Math.floor(L-O*3.5),m=Math.floor(Math.random()*20)+y,E={name:f.name+p.name,num:o,size:ri.MEDIUM,monsterType:h.monsterType??ge.HUMANOID,ac:T,hp:N,save:S,move:[],cr:s,exp:l,abilities:{[te.STR]:8+y,[te.DEX]:8+y,[te.CON]:8+y,[te.INT]:8+y,[te.WIS]:8+y,[te.CHA]:8+y},skills:{},senses:[],languages:[],specialAbilities:[],actions:[],toHit:D,damage:L,diceNum:O,damageMod:v,baseBonus:y,initiative:m},I=X(f.enhancer,h.enhancer,p.enhancer)(E);return{monster:r,reRollMonster:()=>{n(Math.random()),fs(rr(Tn,"monster","monster"),I).then()}}},lx=({settings:t,setLevel:e,setNumCharacters:n,setDifficulty:r})=>{const{level:i,numCharacters:s,difficulty:o}=t;return V.jsxs(V.Fragment,{children:[V.jsx("h3",{children:""}),V.jsxs("select",{value:i,className:"form-select form-select-lg mb-3",onChange:l=>e(parseInt(l.target.value)),children:[V.jsx("option",{value:"",children:""}),[...Array(20).keys()].map(l=>V.jsxs("option",{value:l+1,children:[" ",l+1]},l))]}),V.jsxs("select",{value:s,className:"form-select form-select-lg mb-3",onChange:l=>n(parseInt(l.target.value)),children:[V.jsx("option",{value:"",children:""}),[...Array(6).keys()].map(l=>V.jsxs("option",{value:l+1,children:[" ",l+1]},l))]}),V.jsxs("select",{value:o,className:"form-select form-select-lg mb-3",onChange:l=>r(l.target.value),children:[V.jsx("option",{value:"",children:""}),V.jsx("option",{value:tr.EASY,children:""}),V.jsx("option",{value:tr.NORMAL,children:""}),V.jsx("option",{value:tr.HARD,children:""}),V.jsx("option",{value:tr.HELL,children:""})]})]})},de={Setting:"Setting",Character:"Character",Monster:"Monster",Room:"Room",HitPoint:"HitPoint",EditRoom:"EditRoom"},ux=t=>{const[e,n]=b.useState(de.Room),r=b.useMemo(()=>{switch(e){case de.Setting:return"";case de.Monster:return"";case de.Room:return"";case de.HitPoint:return"";case de.EditRoom:return"";default:return""}},[e]);return{page:e,setPage:n,reRoll:()=>{t[e]()},reRollLabel:r}},cx=({page:t,setPage:e,reRoll:n,reRollLabel:r,isMaster:i,setIsMaster:s})=>V.jsx("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark mb-3",children:V.jsxs("div",{className:"container-fluid",children:[V.jsx("a",{className:"navbar-brand",onClick:n,children:"DD5eTool"}),V.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:V.jsx("span",{className:"navbar-toggler-icon"})}),V.jsxs("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[V.jsxs("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[i&&V.jsx("li",{className:"nav-item",children:V.jsx("a",{className:t===de.Setting?"nav-link active":"nav-link",onClick:()=>e(de.Setting),children:""})}),V.jsx("li",{className:"nav-item",children:V.jsx("a",{className:t===de.Character?"nav-link active":"nav-link",onClick:()=>e(de.Character),children:""})}),i&&V.jsx("li",{className:"nav-item",children:V.jsx("a",{className:t===de.Monster?"nav-link active":"nav-link",onClick:()=>e(de.Monster),children:""})}),V.jsx("li",{className:"nav-item",children:V.jsx("a",{className:t===de.Room?"nav-link active":"nav-link",onClick:()=>e(de.Room),children:""})}),i&&V.jsx("li",{className:"nav-item",children:V.jsx("a",{className:t===de.HitPoint?"nav-link active":"nav-link",onClick:()=>e(de.HitPoint),children:""})}),i&&V.jsx("li",{className:"nav-item",children:V.jsx("a",{className:t===de.EditRoom?"nav-link active":"nav-link",onClick:()=>e(de.EditRoom),children:""})})]}),V.jsxs("div",{className:"form-check form-switch me-4",children:[V.jsx("input",{className:"form-check-input",type:"checkbox",id:"isMaster",checked:i,onChange:o=>{s(o.target.checked)}}),i?V.jsx("label",{className:"form-check-label text-white",htmlFor:"isMaster",children:""}):V.jsx("label",{className:"form-check-label text-white",htmlFor:"isMaster",children:""})]}),V.jsx("button",{className:"btn btn-secondary",onClick:n,children:V.jsx("i",{className:"bi bi-dice-5-fill",children:r})})]})]})}),hx=()=>{const[t,e]=b.useState([]),n=H1(Tn,"units");return b.useEffect(()=>{vc(n,l=>e(l.docs.map(u=>u.data())))},[]),{units:t,move:(l,u,h)=>{fs(rr(Tn,"units",l),{x:u,y:h},{merge:!0}).then()},setUnit:l=>{fs(rr(Tn,"units",l.id),l).then()},deleteUnit:l=>{tx(rr(Tn,"units",l)).then()},setHitPoint:(l,u)=>{fs(rr(Tn,"units",l),{hp:u},{merge:!0}).then()}}},_c=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Hs(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Fp(t){return"nodeType"in t}function Ut(t){var e,n;return t?Hs(t)?t:Fp(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function $p(t){const{Document:e}=Ut(t);return t instanceof e}function ka(t){return Hs(t)?!1:t instanceof Ut(t).HTMLElement}function iE(t){return t instanceof Ut(t).SVGElement}function Ws(t){return t?Hs(t)?t.document:Fp(t)?$p(t)?t:ka(t)||iE(t)?t.ownerDocument:document:document:document}const dr=_c?b.useLayoutEffect:b.useEffect;function jp(t){const e=b.useRef(t);return dr(()=>{e.current=t}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function dx(){const t=b.useRef(null),e=b.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=b.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function pa(t,e){e===void 0&&(e=[t]);const n=b.useRef(t);return dr(()=>{n.current!==t&&(n.current=t)},e),n}function Na(t,e){const n=b.useRef();return b.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Ou(t){const e=jp(t),n=b.useRef(null),r=b.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function Jd(t){const e=b.useRef();return b.useEffect(()=>{e.current=t},[t]),e.current}let Nh={};function Ec(t,e){return b.useMemo(()=>{if(e)return e;const n=Nh[t]==null?0:Nh[t]+1;return Nh[t]=n,t+"-"+n},[t,e])}function sE(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const l=Object.entries(o);for(const[u,h]of l){const f=s[u];f!=null&&(s[u]=f+t*h)}return s},{...e})}}const ps=sE(1),bu=sE(-1);function fx(t){return"clientX"in t&&"clientY"in t}function oE(t){if(!t)return!1;const{KeyboardEvent:e}=Ut(t.target);return e&&t instanceof e}function px(t){if(!t)return!1;const{TouchEvent:e}=Ut(t.target);return e&&t instanceof e}function Zd(t){if(px(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return fx(t)?{x:t.clientX,y:t.clientY}:null}const ef=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[ef.Translate.toString(t),ef.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Uy="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function mx(t){return t.matches(Uy)?t:t.querySelector(Uy)}const gx={display:"none"};function yx(t){let{id:e,value:n}=t;return ht.createElement("div",{id:e,style:gx},n)}function vx(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ht.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function _x(){const[t,e]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const aE=b.createContext(null);function Ex(t){const e=b.useContext(aE);b.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function wx(){const[t]=b.useState(()=>new Set),e=b.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[b.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,s)})},[t]),e]}const Tx={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Sx={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Ix(t){let{announcements:e=Sx,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=Tx}=t;const{announce:s,announcement:o}=_x(),l=Ec("DndLiveRegion"),[u,h]=b.useState(!1);if(b.useEffect(()=>{h(!0)},[]),Ex(b.useMemo(()=>({onDragStart(p){let{active:y}=p;s(e.onDragStart({active:y}))},onDragMove(p){let{active:y,over:T}=p;e.onDragMove&&s(e.onDragMove({active:y,over:T}))},onDragOver(p){let{active:y,over:T}=p;s(e.onDragOver({active:y,over:T}))},onDragEnd(p){let{active:y,over:T}=p;s(e.onDragEnd({active:y,over:T}))},onDragCancel(p){let{active:y,over:T}=p;s(e.onDragCancel({active:y,over:T}))}}),[s,e])),!u)return null;const f=ht.createElement(ht.Fragment,null,ht.createElement(yx,{id:r,value:i.draggable}),ht.createElement(vx,{id:l,announcement:o}));return n?si.createPortal(f,n):f}var qe;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(qe||(qe={}));function Lu(){}const Pn=Object.freeze({x:0,y:0});function Ax(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Cx(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Rx(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,l=s-n;if(r<i&&n<s){const u=e.width*e.height,h=t.width*t.height,f=o*l,p=f/(u+h-f);return Number(p.toFixed(4))}return 0}const Px=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=Rx(l,e);u>0&&i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(Ax)};function xx(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function lE(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Pn}function kx(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const Nx=kx(1);function Dx(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Mx(t,e,n){const r=Dx(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:l}=r,u=t.left-o-(1-i)*parseFloat(n),h=t.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),f=i?t.width/i:t.width,p=s?t.height/s:t.height;return{width:f,height:p,top:h,right:u+f,bottom:h+p,left:u}}const Vx={ignoreTransform:!1};function Da(t,e){e===void 0&&(e=Vx);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:f}=Ut(t).getComputedStyle(t);h&&(n=Mx(n,h,f))}const{top:r,left:i,width:s,height:o,bottom:l,right:u}=n;return{top:r,left:i,width:s,height:o,bottom:l,right:u}}function zy(t){return Da(t,{ignoreTransform:!0})}function Ox(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function bx(t,e){return e===void 0&&(e=Ut(t).getComputedStyle(t)),e.position==="fixed"}function Lx(t,e){e===void 0&&(e=Ut(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function Bp(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if($p(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!ka(i)||iE(i)||n.includes(i))return n;const s=Ut(t).getComputedStyle(i);return i!==t&&Lx(i,s)&&n.push(i),bx(i,s)?n:r(i.parentNode)}return t?r(t):n}function uE(t){const[e]=Bp(t,1);return e??null}function Dh(t){return!_c||!t?null:Hs(t)?t:Fp(t)?$p(t)||t===Ws(t).scrollingElement?window:ka(t)?t:null:null}function cE(t){return Hs(t)?t.scrollX:t.scrollLeft}function hE(t){return Hs(t)?t.scrollY:t.scrollTop}function tf(t){return{x:cE(t),y:hE(t)}}var et;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(et||(et={}));function dE(t){return!_c||!t?!1:t===document.scrollingElement}function fE(t){const e={x:0,y:0},n=dE(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const Fx={x:.2,y:.2};function $x(t,e,n,r,i){let{top:s,left:o,right:l,bottom:u}=n;r===void 0&&(r=10),i===void 0&&(i=Fx);const{isTop:h,isBottom:f,isLeft:p,isRight:y}=fE(t),T={x:0,y:0},P={x:0,y:0},R={height:e.height*i.y,width:e.width*i.x};return!h&&s<=e.top+R.height?(T.y=et.Backward,P.y=r*Math.abs((e.top+R.height-s)/R.height)):!f&&u>=e.bottom-R.height&&(T.y=et.Forward,P.y=r*Math.abs((e.bottom-R.height-u)/R.height)),!y&&l>=e.right-R.width?(T.x=et.Forward,P.x=r*Math.abs((e.right-R.width-l)/R.width)):!p&&o<=e.left+R.width&&(T.x=et.Backward,P.x=r*Math.abs((e.left+R.width-o)/R.width)),{direction:T,speed:P}}function jx(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function pE(t){return t.reduce((e,n)=>ps(e,tf(n)),Pn)}function Bx(t){return t.reduce((e,n)=>e+cE(n),0)}function Ux(t){return t.reduce((e,n)=>e+hE(n),0)}function zx(t,e){if(e===void 0&&(e=Da),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);uE(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Hx=[["x",["left","right"],Bx],["y",["top","bottom"],Ux]];class Up{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Bp(n),i=pE(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,l]of Hx)for(const u of o)Object.defineProperty(this,u,{get:()=>{const h=l(r),f=i[s]-h;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Fo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function Wx(t){const{EventTarget:e}=Ut(t);return t instanceof e?t:Ws(t)}function Mh(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var on;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(on||(on={}));function Hy(t){t.preventDefault()}function qx(t){t.stopPropagation()}var _e;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(_e||(_e={}));const mE={start:[_e.Space,_e.Enter],cancel:[_e.Esc],end:[_e.Space,_e.Enter]},Kx=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case _e.Right:return{...n,x:n.x+25};case _e.Left:return{...n,x:n.x-25};case _e.Down:return{...n,y:n.y+25};case _e.Up:return{...n,y:n.y-25}}};class gE{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Fo(Ws(n)),this.windowListeners=new Fo(Ut(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(on.Resize,this.handleCancel),this.windowListeners.add(on.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(on.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&zx(r),n(Pn)}handleKeyDown(e){if(oE(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=mE,coordinateGetter:o=Kx,scrollBehavior:l="smooth"}=i,{code:u}=e;if(s.end.includes(u)){this.handleEnd(e);return}if(s.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:h}=r.current,f=h?{x:h.left,y:h.top}:Pn;this.referenceCoordinates||(this.referenceCoordinates=f);const p=o(e,{active:n,context:r.current,currentCoordinates:f});if(p){const y=bu(p,f),T={x:0,y:0},{scrollableAncestors:P}=r.current;for(const R of P){const D=e.code,{isTop:w,isRight:_,isLeft:S,isBottom:N,maxScroll:L,minScroll:O}=fE(R),v=jx(R),m={x:Math.min(D===_e.Right?v.right-v.width/2:v.right,Math.max(D===_e.Right?v.left:v.left+v.width/2,p.x)),y:Math.min(D===_e.Down?v.bottom-v.height/2:v.bottom,Math.max(D===_e.Down?v.top:v.top+v.height/2,p.y))},E=D===_e.Right&&!_||D===_e.Left&&!S,I=D===_e.Down&&!N||D===_e.Up&&!w;if(E&&m.x!==p.x){const C=R.scrollLeft+y.x,x=D===_e.Right&&C<=L.x||D===_e.Left&&C>=O.x;if(x&&!y.y){R.scrollTo({left:C,behavior:l});return}x?T.x=R.scrollLeft-C:T.x=D===_e.Right?R.scrollLeft-L.x:R.scrollLeft-O.x,T.x&&R.scrollBy({left:-T.x,behavior:l});break}else if(I&&m.y!==p.y){const C=R.scrollTop+y.y,x=D===_e.Down&&C<=L.y||D===_e.Up&&C>=O.y;if(x&&!y.x){R.scrollTo({top:C,behavior:l});return}x?T.y=R.scrollTop-C:T.y=D===_e.Down?R.scrollTop-L.y:R.scrollTop-O.y,T.y&&R.scrollBy({top:-T.y,behavior:l});break}}this.handleMove(e,ps(bu(p,this.referenceCoordinates),T))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}gE.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=mE,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=s.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function Wy(t){return!!(t&&"distance"in t)}function qy(t){return!!(t&&"delay"in t)}class zp{constructor(e,n,r){var i;r===void 0&&(r=Wx(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=Ws(o),this.documentListeners=new Fo(this.document),this.listeners=new Fo(r),this.windowListeners=new Fo(Ut(o)),this.initialCoordinates=(i=Zd(s))!=null?i:Pn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(on.Resize,this.handleCancel),this.windowListeners.add(on.DragStart,Hy),this.windowListeners.add(on.VisibilityChange,this.handleCancel),this.windowListeners.add(on.ContextMenu,Hy),this.documentListeners.add(on.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(qy(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(Wy(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(on.Click,qx,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(on.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:l}}=s;if(!i)return;const u=(n=Zd(e))!=null?n:Pn,h=bu(i,u);if(!r&&l){if(Wy(l)){if(l.tolerance!=null&&Mh(h,l.tolerance))return this.handleCancel();if(Mh(h,l.distance))return this.handleStart()}return qy(l)&&Mh(h,l.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===_e.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Gx={move:{name:"pointermove"},end:{name:"pointerup"}};class yE extends zp{constructor(e){const{event:n}=e,r=Ws(n.target);super(e,Gx,r)}}yE.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Qx={move:{name:"mousemove"},end:{name:"mouseup"}};var nf;(function(t){t[t.RightClick=2]="RightClick"})(nf||(nf={}));class Yx extends zp{constructor(e){super(e,Qx,Ws(e.event.target))}}Yx.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===nf.RightClick?!1:(r==null||r({event:n}),!0)}}];const Vh={move:{name:"touchmove"},end:{name:"touchend"}};class Xx extends zp{constructor(e){super(e,Vh)}static setup(){return window.addEventListener(Vh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Vh.move.name,e)};function e(){}}}Xx.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var $o;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})($o||($o={}));var Fu;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Fu||(Fu={}));function Jx(t){let{acceleration:e,activator:n=$o.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:l=Fu.TreeOrder,pointerCoordinates:u,scrollableAncestors:h,scrollableAncestorRects:f,delta:p,threshold:y}=t;const T=ek({delta:p,disabled:!s}),[P,R]=dx(),D=b.useRef({x:0,y:0}),w=b.useRef({x:0,y:0}),_=b.useMemo(()=>{switch(n){case $o.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case $o.DraggableRect:return i}},[n,i,u]),S=b.useRef(null),N=b.useCallback(()=>{const O=S.current;if(!O)return;const v=D.current.x*w.current.x,m=D.current.y*w.current.y;O.scrollBy(v,m)},[]),L=b.useMemo(()=>l===Fu.TreeOrder?[...h].reverse():h,[l,h]);b.useEffect(()=>{if(!s||!h.length||!_){R();return}for(const O of L){if((r==null?void 0:r(O))===!1)continue;const v=h.indexOf(O),m=f[v];if(!m)continue;const{direction:E,speed:I}=$x(O,m,_,e,y);for(const C of["x","y"])T[C][E[C]]||(I[C]=0,E[C]=0);if(I.x>0||I.y>0){R(),S.current=O,P(N,o),D.current=I,w.current=E;return}}D.current={x:0,y:0},w.current={x:0,y:0},R()},[e,N,r,R,s,o,JSON.stringify(_),JSON.stringify(T),P,h,L,f,JSON.stringify(y)])}const Zx={x:{[et.Backward]:!1,[et.Forward]:!1},y:{[et.Backward]:!1,[et.Forward]:!1}};function ek(t){let{delta:e,disabled:n}=t;const r=Jd(e);return Na(i=>{if(n||!r||!i)return Zx;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[et.Backward]:i.x[et.Backward]||s.x===-1,[et.Forward]:i.x[et.Forward]||s.x===1},y:{[et.Backward]:i.y[et.Backward]||s.y===-1,[et.Forward]:i.y[et.Forward]||s.y===1}}},[n,e,r])}function tk(t,e){const n=e!==null?t.get(e):void 0,r=n?n.node.current:null;return Na(i=>{var s;return e===null?null:(s=r??i)!=null?s:null},[r,e])}function nk(t,e){return b.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var ma;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ma||(ma={}));var rf;(function(t){t.Optimized="optimized"})(rf||(rf={}));const Ky=new Map;function rk(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=b.useState(null),{frequency:l,measure:u,strategy:h}=i,f=b.useRef(t),p=D(),y=pa(p),T=b.useCallback(function(w){w===void 0&&(w=[]),!y.current&&o(_=>_===null?w:_.concat(w.filter(S=>!_.includes(S))))},[y]),P=b.useRef(null),R=Na(w=>{if(p&&!n)return Ky;if(!w||w===Ky||f.current!==t||s!=null){const _=new Map;for(let S of t){if(!S)continue;if(s&&s.length>0&&!s.includes(S.id)&&S.rect.current){_.set(S.id,S.rect.current);continue}const N=S.node.current,L=N?new Up(u(N),N):null;S.rect.current=L,L&&_.set(S.id,L)}return _}return w},[t,s,n,p,u]);return b.useEffect(()=>{f.current=t},[t]),b.useEffect(()=>{p||T()},[n,p]),b.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),b.useEffect(()=>{p||typeof l!="number"||P.current!==null||(P.current=setTimeout(()=>{T(),P.current=null},l))},[l,p,T,...r]),{droppableRects:R,measureDroppableContainers:T,measuringScheduled:s!=null};function D(){switch(h){case ma.Always:return!1;case ma.BeforeDragging:return n;default:return!n}}}function vE(t,e){return Na(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function ik(t,e){return vE(t,e)}function sk(t){let{callback:e,disabled:n}=t;const r=jp(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function wc(t){let{callback:e,disabled:n}=t;const r=jp(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function ok(t){return new Up(Da(t),t)}function Gy(t,e,n){e===void 0&&(e=ok);const[r,i]=b.useReducer(l,null),s=sk({callback(u){if(t)for(const h of u){const{type:f,target:p}=h;if(f==="childList"&&p instanceof HTMLElement&&p.contains(t)){i();break}}}}),o=wc({callback:i});return dr(()=>{i(),t?(o==null||o.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[t]),r;function l(u){if(!t)return null;if(t.isConnected===!1){var h;return(h=u??n)!=null?h:null}const f=e(t);return JSON.stringify(u)===JSON.stringify(f)?u:f}}function ak(t){const e=vE(t);return lE(t,e)}const Qy=[];function lk(t){const e=b.useRef(t),n=Na(r=>t?r&&r!==Qy&&t&&e.current&&t.parentNode===e.current.parentNode?r:Bp(t):Qy,[t]);return b.useEffect(()=>{e.current=t},[t]),n}function uk(t){const[e,n]=b.useState(null),r=b.useRef(t),i=b.useCallback(s=>{const o=Dh(s.target);o&&n(l=>l?(l.set(o,tf(o)),new Map(l)):null)},[]);return b.useEffect(()=>{const s=r.current;if(t!==s){o(s);const l=t.map(u=>{const h=Dh(u);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,tf(h)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(s)};function o(l){l.forEach(u=>{const h=Dh(u);h==null||h.removeEventListener("scroll",i)})}},[i,t]),b.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>ps(s,o),Pn):pE(t):Pn,[t,e])}function Yy(t,e){e===void 0&&(e=[]);const n=b.useRef(null);return b.useEffect(()=>{n.current=null},e),b.useEffect(()=>{const r=t!==Pn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?bu(t,n.current):Pn}function ck(t){b.useEffect(()=>{if(!_c)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function hk(t,e){return b.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function _E(t){return b.useMemo(()=>t?Ox(t):null,[t])}const Oh=[];function dk(t,e){e===void 0&&(e=Da);const[n]=t,r=_E(n?Ut(n):null),[i,s]=b.useReducer(l,Oh),o=wc({callback:s});return t.length>0&&i===Oh&&s(),dr(()=>{t.length?t.forEach(u=>o==null?void 0:o.observe(u)):(o==null||o.disconnect(),s())},[t]),i;function l(){return t.length?t.map(u=>dE(u)?r:new Up(e(u),u)):Oh}}function fk(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return ka(e)?e:t}function pk(t){let{measure:e}=t;const[n,r]=b.useState(null),i=b.useCallback(h=>{for(const{target:f}of h)if(ka(f)){r(p=>{const y=e(f);return p?{...p,width:y.width,height:y.height}:y});break}},[e]),s=wc({callback:i}),o=b.useCallback(h=>{const f=fk(h);s==null||s.disconnect(),f&&(s==null||s.observe(f)),r(f?e(f):null)},[e,s]),[l,u]=Ou(o);return b.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const mk=[{sensor:yE,options:{}},{sensor:gE,options:{}}],gk={current:{}},ql={draggable:{measure:zy},droppable:{measure:zy,strategy:ma.WhileDragging,frequency:rf.Optimized},dragOverlay:{measure:Da}};class jo extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const yk={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new jo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Lu},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ql,measureDroppableContainers:Lu,windowRect:null,measuringScheduled:!1},vk={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Lu,draggableNodes:new Map,over:null,measureDroppableContainers:Lu},Tc=b.createContext(vk),_k=b.createContext(yk);function Ek(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new jo}}}function wk(t,e){switch(e.type){case qe.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case qe.DragMove:return t.draggable.active?{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}}:t;case qe.DragEnd:case qe.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case qe.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new jo(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case qe.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new jo(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case qe.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new jo(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function Tk(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=b.useContext(Tc),s=Jd(r),o=Jd(n==null?void 0:n.id);return b.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!oE(s)||document.activeElement===s.target)return;const l=i.get(o);if(!l)return;const{activatorNode:u,node:h}=l;if(!u.current&&!h.current)return;requestAnimationFrame(()=>{for(const f of[u.current,h.current]){if(!f)continue;const p=mx(f);if(p){p.focus();break}}})}},[r,e,i,o,s]),null}function Sk(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function Ik(t){return b.useMemo(()=>({draggable:{...ql.draggable,...t==null?void 0:t.draggable},droppable:{...ql.droppable,...t==null?void 0:t.droppable},dragOverlay:{...ql.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Ak(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=b.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;dr(()=>{if(!o&&!l||!e){s.current=!1;return}if(s.current||!r)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const f=n(h),p=lE(f,r);if(o||(p.x=0),l||(p.y=0),s.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const y=uE(h);y&&y.scrollBy({top:p.y,left:p.x})}},[e,o,l,r,n])}const EE=b.createContext({...Pn,scaleX:1,scaleY:1});var Ar;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ar||(Ar={}));const Ck=b.memo(function(e){var n,r,i,s;let{id:o,accessibility:l,autoScroll:u=!0,children:h,sensors:f=mk,collisionDetection:p=Px,measuring:y,modifiers:T,...P}=e;const R=b.useReducer(wk,void 0,Ek),[D,w]=R,[_,S]=wx(),[N,L]=b.useState(Ar.Uninitialized),O=N===Ar.Initialized,{draggable:{active:v,nodes:m,translate:E},droppable:{containers:I}}=D,C=v?m.get(v):null,x=b.useRef({initial:null,translated:null}),A=b.useMemo(()=>{var xe;return v!=null?{id:v,data:(xe=C==null?void 0:C.data)!=null?xe:gk,rect:x}:null},[v,C]),we=b.useRef(null),[en,xn]=b.useState(null),[Pe,z]=b.useState(null),q=pa(P,Object.values(P)),Q=Ec("DndDescribedBy",o),le=b.useMemo(()=>I.getEnabled(),[I]),J=Ik(y),{droppableRects:he,measureDroppableContainers:Ye,measuringScheduled:it}=rk(le,{dragging:O,dependencies:[E.x,E.y],config:J.droppable}),ye=tk(m,v),st=b.useMemo(()=>Pe?Zd(Pe):null,[Pe]),kn=Ba(),tn=ik(ye,J.draggable.measure);Ak({activeNode:v?m.get(v):null,config:kn.layoutShiftCompensation,initialRect:tn,measure:J.draggable.measure});const je=Gy(ye,J.draggable.measure,tn),zt=Gy(ye?ye.parentElement:null),Be=b.useRef({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:he,draggableNodes:m,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ki=I.getNodeFor((n=Be.current.over)==null?void 0:n.id),mn=pk({measure:J.dragOverlay.measure}),pr=(r=mn.nodeRef.current)!=null?r:ye,qn=O?(i=mn.rect)!=null?i:je:null,Va=!!(mn.nodeRef.current&&mn.rect),Oa=ak(Va?null:je),Ni=_E(pr?Ut(pr):null),nn=lk(O?ki??ye:null),Yr=dk(nn),Di=Sk(T,{transform:{x:E.x-Oa.x,y:E.y-Oa.y,scaleX:1,scaleY:1},activatorEvent:Pe,active:A,activeNodeRect:je,containerNodeRect:zt,draggingNodeRect:qn,over:Be.current.over,overlayNodeRect:mn.rect,scrollableAncestors:nn,scrollableAncestorRects:Yr,windowRect:Ni}),Mi=st?ps(st,E):null,Vi=uk(nn),ba=Yy(Vi),Xe=Yy(Vi,[je]),Ve=ps(Di,ba),gn=qn?Nx(qn,Di):null,mr=A&&gn?p({active:A,collisionRect:gn,droppableRects:he,droppableContainers:le,pointerCoordinates:Mi}):null,Gs=Cx(mr,"id"),[Nn,gr]=b.useState(null),La=Va?Di:ps(Di,Xe),Fa=xx(La,(s=Nn==null?void 0:Nn.rect)!=null?s:null,je),Oi=b.useCallback((xe,ot)=>{let{sensor:at,options:vt}=ot;if(we.current==null)return;const xt=m.get(we.current);if(!xt)return;const _t=xe.nativeEvent,Ht=new at({active:we.current,activeNode:xt,event:_t,options:vt,context:Be,onStart(Vt){const Le=we.current;if(Le==null)return;const yr=m.get(Le);if(!yr)return;const{onDragStart:Dn}=q.current,Mn={active:{id:Le,data:yr.data,rect:x}};si.unstable_batchedUpdates(()=>{Dn==null||Dn(Mn),L(Ar.Initializing),w({type:qe.DragStart,initialCoordinates:Vt,active:Le}),_({type:"onDragStart",event:Mn})})},onMove(Vt){w({type:qe.DragMove,coordinates:Vt})},onEnd:rn(qe.DragEnd),onCancel:rn(qe.DragCancel)});si.unstable_batchedUpdates(()=>{xn(Ht),z(xe.nativeEvent)});function rn(Vt){return async function(){const{active:yr,collisions:Dn,over:Mn,scrollAdjustedTranslate:Ua}=Be.current;let Xr=null;if(yr&&Ua){const{cancelDrop:sn}=q.current;Xr={activatorEvent:_t,active:yr,collisions:Dn,delta:Ua,over:Mn},Vt===qe.DragEnd&&typeof sn=="function"&&await Promise.resolve(sn(Xr))&&(Vt=qe.DragCancel)}we.current=null,si.unstable_batchedUpdates(()=>{w({type:Vt}),L(Ar.Uninitialized),gr(null),xn(null),z(null);const sn=Vt===qe.DragEnd?"onDragEnd":"onDragCancel";if(Xr){const Ys=q.current[sn];Ys==null||Ys(Xr),_({type:sn,event:Xr})}})}}},[m]),xc=b.useCallback((xe,ot)=>(at,vt)=>{const xt=at.nativeEvent,_t=m.get(vt);if(we.current!==null||!_t||xt.dndKit||xt.defaultPrevented)return;const Ht={active:_t};xe(at,ot.options,Ht)===!0&&(xt.dndKit={capturedBy:ot.sensor},we.current=vt,Oi(at,ot))},[m,Oi]),$a=nk(f,xc);ck(f),dr(()=>{je&&N===Ar.Initializing&&L(Ar.Initialized)},[je,N]),b.useEffect(()=>{const{onDragMove:xe}=q.current,{active:ot,activatorEvent:at,collisions:vt,over:xt}=Be.current;if(!ot||!at)return;const _t={active:ot,activatorEvent:at,collisions:vt,delta:{x:Ve.x,y:Ve.y},over:xt};si.unstable_batchedUpdates(()=>{xe==null||xe(_t),_({type:"onDragMove",event:_t})})},[Ve.x,Ve.y]),b.useEffect(()=>{const{active:xe,activatorEvent:ot,collisions:at,droppableContainers:vt,scrollAdjustedTranslate:xt}=Be.current;if(!xe||we.current==null||!ot||!xt)return;const{onDragOver:_t}=q.current,Ht=vt.get(Gs),rn=Ht&&Ht.rect.current?{id:Ht.id,rect:Ht.rect.current,data:Ht.data,disabled:Ht.disabled}:null,Vt={active:xe,activatorEvent:ot,collisions:at,delta:{x:xt.x,y:xt.y},over:rn};si.unstable_batchedUpdates(()=>{gr(rn),_t==null||_t(Vt),_({type:"onDragOver",event:Vt})})},[Gs]),dr(()=>{Be.current={activatorEvent:Pe,active:A,activeNode:ye,collisionRect:gn,collisions:mr,droppableRects:he,draggableNodes:m,draggingNode:pr,draggingNodeRect:qn,droppableContainers:I,over:Nn,scrollableAncestors:nn,scrollAdjustedTranslate:Ve},x.current={initial:qn,translated:gn}},[A,ye,mr,gn,m,pr,qn,he,I,Nn,nn,Ve]),Jx({...kn,delta:E,draggingRect:gn,pointerCoordinates:Mi,scrollableAncestors:nn,scrollableAncestorRects:Yr});const Qs=b.useMemo(()=>({active:A,activeNode:ye,activeNodeRect:je,activatorEvent:Pe,collisions:mr,containerNodeRect:zt,dragOverlay:mn,draggableNodes:m,droppableContainers:I,droppableRects:he,over:Nn,measureDroppableContainers:Ye,scrollableAncestors:nn,scrollableAncestorRects:Yr,measuringConfiguration:J,measuringScheduled:it,windowRect:Ni}),[A,ye,je,Pe,mr,zt,mn,m,I,he,Nn,Ye,nn,Yr,J,it,Ni]),ja=b.useMemo(()=>({activatorEvent:Pe,activators:$a,active:A,activeNodeRect:je,ariaDescribedById:{draggable:Q},dispatch:w,draggableNodes:m,over:Nn,measureDroppableContainers:Ye}),[Pe,$a,A,je,w,Q,m,Nn,Ye]);return ht.createElement(aE.Provider,{value:S},ht.createElement(Tc.Provider,{value:ja},ht.createElement(_k.Provider,{value:Qs},ht.createElement(EE.Provider,{value:Fa},h)),ht.createElement(Tk,{disabled:(l==null?void 0:l.restoreFocus)===!1})),ht.createElement(Ix,{...l,hiddenTextDescribedById:Q}));function Ba(){const xe=(en==null?void 0:en.autoScrollEnabled)===!1,ot=typeof u=="object"?u.enabled===!1:u===!1,at=O&&!xe&&!ot;return typeof u=="object"?{...u,enabled:at}:{enabled:at}}}),Rk=b.createContext(null),Xy="button",Pk="Droppable";function xk(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=Ec(Pk),{activators:o,activatorEvent:l,active:u,activeNodeRect:h,ariaDescribedById:f,draggableNodes:p,over:y}=b.useContext(Tc),{role:T=Xy,roleDescription:P="draggable",tabIndex:R=0}=i??{},D=(u==null?void 0:u.id)===e,w=b.useContext(D?EE:Rk),[_,S]=Ou(),[N,L]=Ou(),O=hk(o,e),v=pa(n);dr(()=>(p.set(e,{id:e,key:s,node:_,activatorNode:N,data:v}),()=>{const E=p.get(e);E&&E.key===s&&p.delete(e)}),[p,e]);const m=b.useMemo(()=>({role:T,tabIndex:R,"aria-disabled":r,"aria-pressed":D&&T===Xy?!0:void 0,"aria-roledescription":P,"aria-describedby":f.draggable}),[r,T,R,D,P,f.draggable]);return{active:u,activatorEvent:l,activeNodeRect:h,attributes:m,isDragging:D,listeners:r?void 0:O,node:_,over:y,setNodeRef:S,setActivatorNodeRef:L,transform:w}}const kk="Droppable",Nk={timeout:25};function Dk(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=Ec(kk),{active:o,dispatch:l,over:u,measureDroppableContainers:h}=b.useContext(Tc),f=b.useRef({disabled:n}),p=b.useRef(!1),y=b.useRef(null),T=b.useRef(null),{disabled:P,updateMeasurementsFor:R,timeout:D}={...Nk,...i},w=pa(R??r),_=b.useCallback(()=>{if(!p.current){p.current=!0;return}T.current!=null&&clearTimeout(T.current),T.current=setTimeout(()=>{h(Array.isArray(w.current)?w.current:[w.current]),T.current=null},D)},[D]),S=wc({callback:_,disabled:P||!o}),N=b.useCallback((m,E)=>{S&&(E&&(S.unobserve(E),p.current=!1),m&&S.observe(m))},[S]),[L,O]=Ou(N),v=pa(e);return b.useEffect(()=>{!S||!L.current||(S.disconnect(),p.current=!1,S.observe(L.current))},[L,S]),dr(()=>(l({type:qe.RegisterDroppable,element:{id:r,key:s,disabled:n,node:L,rect:y,data:v}}),()=>l({type:qe.UnregisterDroppable,key:s,id:r})),[r]),b.useEffect(()=>{n!==f.current.disabled&&(l({type:qe.SetDroppableDisabled,id:r,key:s,disabled:n}),f.current.disabled=n)},[r,s,n,l]),{active:o,rect:y,isOver:(u==null?void 0:u.id)===r,node:L,over:u,setNodeRef:O}}var Ft=function(){return Ft=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ft.apply(this,arguments)};function $u(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Ie="-ms-",Bo="-moz-",fe="-webkit-",wE="comm",Sc="rule",Hp="decl",Mk="@import",TE="@keyframes",Vk="@layer",SE=Math.abs,Wp=String.fromCharCode,sf=Object.assign;function Ok(t,e){return tt(t,0)^45?(((e<<2^tt(t,0))<<2^tt(t,1))<<2^tt(t,2))<<2^tt(t,3):0}function IE(t){return t.trim()}function Xn(t,e){return(t=e.exec(t))?t[0]:t}function ne(t,e,n){return t.replace(e,n)}function Kl(t,e,n){return t.indexOf(e,n)}function tt(t,e){return t.charCodeAt(e)|0}function ks(t,e,n){return t.slice(e,n)}function bn(t){return t.length}function AE(t){return t.length}function Io(t,e){return e.push(t),t}function bk(t,e){return t.map(e).join("")}function Jy(t,e){return t.filter(function(n){return!Xn(n,e)})}var Ic=1,Ns=1,CE=0,pn=0,ze=0,qs="";function Ac(t,e,n,r,i,s,o,l){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Ic,column:Ns,length:o,return:"",siblings:l}}function Tr(t,e){return sf(Ac("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function Bi(t){for(;t.root;)t=Tr(t.root,{children:[t]});Io(t,t.siblings)}function Lk(){return ze}function Fk(){return ze=pn>0?tt(qs,--pn):0,Ns--,ze===10&&(Ns=1,Ic--),ze}function Cn(){return ze=pn<CE?tt(qs,pn++):0,Ns++,ze===10&&(Ns=1,Ic++),ze}function gi(){return tt(qs,pn)}function Gl(){return pn}function Cc(t,e){return ks(qs,t,e)}function of(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $k(t){return Ic=Ns=1,CE=bn(qs=t),pn=0,[]}function jk(t){return qs="",t}function bh(t){return IE(Cc(pn-1,af(t===91?t+2:t===40?t+1:t)))}function Bk(t){for(;(ze=gi())&&ze<33;)Cn();return of(t)>2||of(ze)>3?"":" "}function Uk(t,e){for(;--e&&Cn()&&!(ze<48||ze>102||ze>57&&ze<65||ze>70&&ze<97););return Cc(t,Gl()+(e<6&&gi()==32&&Cn()==32))}function af(t){for(;Cn();)switch(ze){case t:return pn;case 34:case 39:t!==34&&t!==39&&af(ze);break;case 40:t===41&&af(t);break;case 92:Cn();break}return pn}function zk(t,e){for(;Cn()&&t+ze!==57;)if(t+ze===84&&gi()===47)break;return"/*"+Cc(e,pn-1)+"*"+Wp(t===47?t:Cn())}function Hk(t){for(;!of(gi());)Cn();return Cc(t,pn)}function Wk(t){return jk(Ql("",null,null,null,[""],t=$k(t),0,[0],t))}function Ql(t,e,n,r,i,s,o,l,u){for(var h=0,f=0,p=o,y=0,T=0,P=0,R=1,D=1,w=1,_=0,S="",N=i,L=s,O=r,v=S;D;)switch(P=_,_=Cn()){case 40:if(P!=108&&tt(v,p-1)==58){Kl(v+=ne(bh(_),"&","&\f"),"&\f",SE(h?l[h-1]:0))!=-1&&(w=-1);break}case 34:case 39:case 91:v+=bh(_);break;case 9:case 10:case 13:case 32:v+=Bk(P);break;case 92:v+=Uk(Gl()-1,7);continue;case 47:switch(gi()){case 42:case 47:Io(qk(zk(Cn(),Gl()),e,n,u),u);break;default:v+="/"}break;case 123*R:l[h++]=bn(v)*w;case 125*R:case 59:case 0:switch(_){case 0:case 125:D=0;case 59+f:w==-1&&(v=ne(v,/\f/g,"")),T>0&&bn(v)-p&&Io(T>32?ev(v+";",r,n,p-1,u):ev(ne(v," ","")+";",r,n,p-2,u),u);break;case 59:v+=";";default:if(Io(O=Zy(v,e,n,h,f,i,l,S,N=[],L=[],p,s),s),_===123)if(f===0)Ql(v,e,O,O,N,s,p,l,L);else switch(y===99&&tt(v,3)===110?100:y){case 100:case 108:case 109:case 115:Ql(t,O,O,r&&Io(Zy(t,O,O,0,0,i,l,S,i,N=[],p,L),L),i,L,p,l,r?N:L);break;default:Ql(v,O,O,O,[""],L,0,l,L)}}h=f=T=0,R=w=1,S=v="",p=o;break;case 58:p=1+bn(v),T=P;default:if(R<1){if(_==123)--R;else if(_==125&&R++==0&&Fk()==125)continue}switch(v+=Wp(_),_*R){case 38:w=f>0?1:(v+="\f",-1);break;case 44:l[h++]=(bn(v)-1)*w,w=1;break;case 64:gi()===45&&(v+=bh(Cn())),y=gi(),f=p=bn(S=v+=Hk(Gl())),_++;break;case 45:P===45&&bn(v)==2&&(R=0)}}return s}function Zy(t,e,n,r,i,s,o,l,u,h,f,p){for(var y=i-1,T=i===0?s:[""],P=AE(T),R=0,D=0,w=0;R<r;++R)for(var _=0,S=ks(t,y+1,y=SE(D=o[R])),N=t;_<P;++_)(N=IE(D>0?T[_]+" "+S:ne(S,/&\f/g,T[_])))&&(u[w++]=N);return Ac(t,e,n,i===0?Sc:l,u,h,f,p)}function qk(t,e,n,r){return Ac(t,e,n,wE,Wp(Lk()),ks(t,2,-2),0,r)}function ev(t,e,n,r,i){return Ac(t,e,n,Hp,ks(t,0,r),ks(t,r+1,-1),r,i)}function RE(t,e,n){switch(Ok(t,e)){case 5103:return fe+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return fe+t+t;case 4789:return Bo+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return fe+t+Bo+t+Ie+t+t;case 5936:switch(tt(t,e+11)){case 114:return fe+t+Ie+ne(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return fe+t+Ie+ne(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return fe+t+Ie+ne(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return fe+t+Ie+t+t;case 6165:return fe+t+Ie+"flex-"+t+t;case 5187:return fe+t+ne(t,/(\w+).+(:[^]+)/,fe+"box-$1$2"+Ie+"flex-$1$2")+t;case 5443:return fe+t+Ie+"flex-item-"+ne(t,/flex-|-self/g,"")+(Xn(t,/flex-|baseline/)?"":Ie+"grid-row-"+ne(t,/flex-|-self/g,""))+t;case 4675:return fe+t+Ie+"flex-line-pack"+ne(t,/align-content|flex-|-self/g,"")+t;case 5548:return fe+t+Ie+ne(t,"shrink","negative")+t;case 5292:return fe+t+Ie+ne(t,"basis","preferred-size")+t;case 6060:return fe+"box-"+ne(t,"-grow","")+fe+t+Ie+ne(t,"grow","positive")+t;case 4554:return fe+ne(t,/([^-])(transform)/g,"$1"+fe+"$2")+t;case 6187:return ne(ne(ne(t,/(zoom-|grab)/,fe+"$1"),/(image-set)/,fe+"$1"),t,"")+t;case 5495:case 3959:return ne(t,/(image-set\([^]*)/,fe+"$1$`$1");case 4968:return ne(ne(t,/(.+:)(flex-)?(.*)/,fe+"box-pack:$3"+Ie+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+fe+t+t;case 4200:if(!Xn(t,/flex-|baseline/))return Ie+"grid-column-align"+ks(t,e)+t;break;case 2592:case 3360:return Ie+ne(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,i){return e=i,Xn(r.props,/grid-\w+-end/)})?~Kl(t+(n=n[e].value),"span",0)?t:Ie+ne(t,"-start","")+t+Ie+"grid-row-span:"+(~Kl(n,"span",0)?Xn(n,/\d+/):+Xn(n,/\d+/)-+Xn(t,/\d+/))+";":Ie+ne(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return Xn(r.props,/grid-\w+-start/)})?t:Ie+ne(ne(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return ne(t,/(.+)-inline(.+)/,fe+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(bn(t)-1-e>6)switch(tt(t,e+1)){case 109:if(tt(t,e+4)!==45)break;case 102:return ne(t,/(.+:)(.+)-([^]+)/,"$1"+fe+"$2-$3$1"+Bo+(tt(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Kl(t,"stretch",0)?RE(ne(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return ne(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,s,o,l,u,h){return Ie+i+":"+s+h+(o?Ie+i+"-span:"+(l?u:+u-+s)+h:"")+t});case 4949:if(tt(t,e+6)===121)return ne(t,":",":"+fe)+t;break;case 6444:switch(tt(t,tt(t,14)===45?18:11)){case 120:return ne(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+fe+(tt(t,14)===45?"inline-":"")+"box$3$1"+fe+"$2$3$1"+Ie+"$2box$3")+t;case 100:return ne(t,":",":"+Ie)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ne(t,"scroll-","scroll-snap-")+t}return t}function ju(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function Kk(t,e,n,r){switch(t.type){case Vk:if(t.children.length)break;case Mk:case Hp:return t.return=t.return||t.value;case wE:return"";case TE:return t.return=t.value+"{"+ju(t.children,r)+"}";case Sc:if(!bn(t.value=t.props.join(",")))return""}return bn(n=ju(t.children,r))?t.return=t.value+"{"+n+"}":""}function Gk(t){var e=AE(t);return function(n,r,i,s){for(var o="",l=0;l<e;l++)o+=t[l](n,r,i,s)||"";return o}}function Qk(t){return function(e){e.root||(e=e.return)&&t(e)}}function Yk(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case Hp:t.return=RE(t.value,t.length,n);return;case TE:return ju([Tr(t,{value:ne(t.value,"@","@"+fe)})],r);case Sc:if(t.length)return bk(n=t.props,function(i){switch(Xn(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Bi(Tr(t,{props:[ne(i,/:(read-\w+)/,":"+Bo+"$1")]})),Bi(Tr(t,{props:[i]})),sf(t,{props:Jy(n,r)});break;case"::placeholder":Bi(Tr(t,{props:[ne(i,/:(plac\w+)/,":"+fe+"input-$1")]})),Bi(Tr(t,{props:[ne(i,/:(plac\w+)/,":"+Bo+"$1")]})),Bi(Tr(t,{props:[ne(i,/:(plac\w+)/,Ie+"input-$1")]})),Bi(Tr(t,{props:[i]})),sf(t,{props:Jy(n,r)});break}return""})}}var Xk={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},qt={},Ds=typeof process<"u"&&qt!==void 0&&(qt.REACT_APP_SC_ATTR||qt.SC_ATTR)||"data-styled",PE="active",xE="data-styled-version",Rc="6.1.13",qp=`/*!sc*/
`,Bu=typeof window<"u"&&"HTMLElement"in window,Jk=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&qt!==void 0&&qt.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&qt.REACT_APP_SC_DISABLE_SPEEDY!==""?qt.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&qt.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&qt!==void 0&&qt.SC_DISABLE_SPEEDY!==void 0&&qt.SC_DISABLE_SPEEDY!==""&&qt.SC_DISABLE_SPEEDY!=="false"&&qt.SC_DISABLE_SPEEDY),Pc=Object.freeze([]),Ms=Object.freeze({});function Zk(t,e,n){return n===void 0&&(n=Ms),t.theme!==n.theme&&t.theme||e||n.theme}var kE=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),eN=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,tN=/(^-|-$)/g;function tv(t){return t.replace(eN,"-").replace(tN,"")}var nN=/(a)(d)/gi,Rl=52,nv=function(t){return String.fromCharCode(t+(t>25?39:97))};function lf(t){var e,n="";for(e=Math.abs(t);e>Rl;e=e/Rl|0)n=nv(e%Rl)+n;return(nv(e%Rl)+n).replace(nN,"$1-$2")}var Lh,NE=5381,is=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},DE=function(t){return is(NE,t)};function rN(t){return lf(DE(t)>>>0)}function iN(t){return t.displayName||t.name||"Component"}function Fh(t){return typeof t=="string"&&!0}var ME=typeof Symbol=="function"&&Symbol.for,VE=ME?Symbol.for("react.memo"):60115,sN=ME?Symbol.for("react.forward_ref"):60112,oN={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},aN={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},OE={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},lN=((Lh={})[sN]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Lh[VE]=OE,Lh);function rv(t){return("type"in(e=t)&&e.type.$$typeof)===VE?OE:"$$typeof"in t?lN[t.$$typeof]:oN;var e}var uN=Object.defineProperty,cN=Object.getOwnPropertyNames,iv=Object.getOwnPropertySymbols,hN=Object.getOwnPropertyDescriptor,dN=Object.getPrototypeOf,sv=Object.prototype;function bE(t,e,n){if(typeof e!="string"){if(sv){var r=dN(e);r&&r!==sv&&bE(t,r,n)}var i=cN(e);iv&&(i=i.concat(iv(e)));for(var s=rv(t),o=rv(e),l=0;l<i.length;++l){var u=i[l];if(!(u in aN||n&&n[u]||o&&u in o||s&&u in s)){var h=hN(e,u);try{uN(t,u,h)}catch{}}}}return t}function Vs(t){return typeof t=="function"}function Kp(t){return typeof t=="object"&&"styledComponentId"in t}function ci(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function ov(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function ga(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function uf(t,e,n){if(n===void 0&&(n=!1),!n&&!ga(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=uf(t[r],e[r]);else if(ga(e))for(var r in e)t[r]=uf(t[r],e[r]);return t}function Gp(t,e){Object.defineProperty(t,"toString",{value:e})}function Ma(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var fN=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,s=i;e>=s;)if((s<<=1)<0)throw Ma(16,"".concat(e));this.groupSizes=new Uint32Array(s),this.groupSizes.set(r),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var l=this.indexOfGroup(e+1),u=(o=0,n.length);o<u;o++)this.tag.insertRule(l,n[o])&&(this.groupSizes[e]++,l++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n;this.groupSizes[e]=0;for(var s=r;s<i;s++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),s=i+r,o=i;o<s;o++)n+="".concat(this.tag.getRule(o)).concat(qp);return n},t}(),Yl=new Map,Uu=new Map,Xl=1,Pl=function(t){if(Yl.has(t))return Yl.get(t);for(;Uu.has(Xl);)Xl++;var e=Xl++;return Yl.set(t,e),Uu.set(e,t),e},pN=function(t,e){Xl=e+1,Yl.set(t,e),Uu.set(e,t)},mN="style[".concat(Ds,"][").concat(xE,'="').concat(Rc,'"]'),gN=new RegExp("^".concat(Ds,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),yN=function(t,e,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&t.registerName(e,r)},vN=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(qp),i=[],s=0,o=r.length;s<o;s++){var l=r[s].trim();if(l){var u=l.match(gN);if(u){var h=0|parseInt(u[1],10),f=u[2];h!==0&&(pN(f,h),yN(t,f,u[3]),t.getTag().insertRules(h,i)),i.length=0}else i.push(l)}}},av=function(t){for(var e=document.querySelectorAll(mN),n=0,r=e.length;n<r;n++){var i=e[n];i&&i.getAttribute(Ds)!==PE&&(vN(t,i),i.parentNode&&i.parentNode.removeChild(i))}};function _N(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var LE=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(l){var u=Array.from(l.querySelectorAll("style[".concat(Ds,"]")));return u[u.length-1]}(n),s=i!==void 0?i.nextSibling:null;r.setAttribute(Ds,PE),r.setAttribute(xE,Rc);var o=_N();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},EN=function(){function t(e){this.element=LE(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,i=0,s=r.length;i<s;i++){var o=r[i];if(o.ownerNode===n)return o}throw Ma(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t}(),wN=function(){function t(e){this.element=LE(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),TN=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),lv=Bu,SN={isServer:!Bu,useCSSOMInjection:!Jk},FE=function(){function t(e,n,r){e===void 0&&(e=Ms),n===void 0&&(n={});var i=this;this.options=Ft(Ft({},SN),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Bu&&lv&&(lv=!1,av(this)),Gp(this,function(){return function(s){for(var o=s.getTag(),l=o.length,u="",h=function(p){var y=function(w){return Uu.get(w)}(p);if(y===void 0)return"continue";var T=s.names.get(y),P=o.getGroup(p);if(T===void 0||!T.size||P.length===0)return"continue";var R="".concat(Ds,".g").concat(p,'[id="').concat(y,'"]'),D="";T!==void 0&&T.forEach(function(w){w.length>0&&(D+="".concat(w,","))}),u+="".concat(P).concat(R,'{content:"').concat(D,'"}').concat(qp)},f=0;f<l;f++)h(f);return u}(i)})}return t.registerId=function(e){return Pl(e)},t.prototype.rehydrate=function(){!this.server&&Bu&&av(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(Ft(Ft({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(n){var r=n.useCSSOMInjection,i=n.target;return n.isServer?new TN(i):r?new EN(i):new wN(i)}(this.options),new fN(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(Pl(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(Pl(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(Pl(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),IN=/&/g,AN=/^\s*\/\/.*$/gm;function $E(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=$E(n.children,e)),n})}function CN(t){var e,n,r,i=Ms,s=i.options,o=s===void 0?Ms:s,l=i.plugins,u=l===void 0?Pc:l,h=function(y,T,P){return P.startsWith(n)&&P.endsWith(n)&&P.replaceAll(n,"").length>0?".".concat(e):y},f=u.slice();f.push(function(y){y.type===Sc&&y.value.includes("&")&&(y.props[0]=y.props[0].replace(IN,n).replace(r,h))}),o.prefix&&f.push(Yk),f.push(Kk);var p=function(y,T,P,R){T===void 0&&(T=""),P===void 0&&(P=""),R===void 0&&(R="&"),e=R,n=T,r=new RegExp("\\".concat(n,"\\b"),"g");var D=y.replace(AN,""),w=Wk(P||T?"".concat(P," ").concat(T," { ").concat(D," }"):D);o.namespace&&(w=$E(w,o.namespace));var _=[];return ju(w,Gk(f.concat(Qk(function(S){return _.push(S)})))),_};return p.hash=u.length?u.reduce(function(y,T){return T.name||Ma(15),is(y,T.name)},NE).toString():"",p}var RN=new FE,cf=CN(),jE=ht.createContext({shouldForwardProp:void 0,styleSheet:RN,stylis:cf});jE.Consumer;ht.createContext(void 0);function uv(){return b.useContext(jE)}var PN=function(){function t(e,n){var r=this;this.inject=function(i,s){s===void 0&&(s=cf);var o=r.name+s.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,s(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,Gp(this,function(){throw Ma(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=cf),this.name+e.hash},t}(),xN=function(t){return t>="A"&&t<="Z"};function cv(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;xN(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var BE=function(t){return t==null||t===!1||t===""},UE=function(t){var e,n,r=[];for(var i in t){var s=t[i];t.hasOwnProperty(i)&&!BE(s)&&(Array.isArray(s)&&s.isCss||Vs(s)?r.push("".concat(cv(i),":"),s,";"):ga(s)?r.push.apply(r,$u($u(["".concat(i," {")],UE(s),!1),["}"],!1)):r.push("".concat(cv(i),": ").concat((e=i,(n=s)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in Xk||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function yi(t,e,n,r){if(BE(t))return[];if(Kp(t))return[".".concat(t.styledComponentId)];if(Vs(t)){if(!Vs(s=t)||s.prototype&&s.prototype.isReactComponent||!e)return[t];var i=t(e);return yi(i,e,n,r)}var s;return t instanceof PN?n?(t.inject(n,r),[t.getName(r)]):[t]:ga(t)?UE(t):Array.isArray(t)?Array.prototype.concat.apply(Pc,t.map(function(o){return yi(o,e,n,r)})):[t.toString()]}function kN(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Vs(n)&&!Kp(n))return!1}return!0}var NN=DE(Rc),DN=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&kN(e),this.componentId=n,this.baseHash=is(NN,n),this.baseStyle=r,FE.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=ci(i,this.staticRulesId);else{var s=ov(yi(this.rules,e,n,r)),o=lf(is(this.baseHash,s)>>>0);if(!n.hasNameForId(this.componentId,o)){var l=r(s,".".concat(o),void 0,this.componentId);n.insertRules(this.componentId,o,l)}i=ci(i,o),this.staticRulesId=o}else{for(var u=is(this.baseHash,r.hash),h="",f=0;f<this.rules.length;f++){var p=this.rules[f];if(typeof p=="string")h+=p;else if(p){var y=ov(yi(p,e,n,r));u=is(u,y+f),h+=y}}if(h){var T=lf(u>>>0);n.hasNameForId(this.componentId,T)||n.insertRules(this.componentId,T,r(h,".".concat(T),void 0,this.componentId)),i=ci(i,T)}}return i},t}(),zE=ht.createContext(void 0);zE.Consumer;var $h={};function MN(t,e,n){var r=Kp(t),i=t,s=!Fh(t),o=e.attrs,l=o===void 0?Pc:o,u=e.componentId,h=u===void 0?function(N,L){var O=typeof N!="string"?"sc":tv(N);$h[O]=($h[O]||0)+1;var v="".concat(O,"-").concat(rN(Rc+O+$h[O]));return L?"".concat(L,"-").concat(v):v}(e.displayName,e.parentComponentId):u,f=e.displayName,p=f===void 0?function(N){return Fh(N)?"styled.".concat(N):"Styled(".concat(iN(N),")")}(t):f,y=e.displayName&&e.componentId?"".concat(tv(e.displayName),"-").concat(e.componentId):e.componentId||h,T=r&&i.attrs?i.attrs.concat(l).filter(Boolean):l,P=e.shouldForwardProp;if(r&&i.shouldForwardProp){var R=i.shouldForwardProp;if(e.shouldForwardProp){var D=e.shouldForwardProp;P=function(N,L){return R(N,L)&&D(N,L)}}else P=R}var w=new DN(n,y,r?i.componentStyle:void 0);function _(N,L){return function(O,v,m){var E=O.attrs,I=O.componentStyle,C=O.defaultProps,x=O.foldedComponentIds,A=O.styledComponentId,we=O.target,en=ht.useContext(zE),xn=uv(),Pe=O.shouldForwardProp||xn.shouldForwardProp,z=Zk(v,en,C)||Ms,q=function(it,ye,st){for(var kn,tn=Ft(Ft({},ye),{className:void 0,theme:st}),je=0;je<it.length;je+=1){var zt=Vs(kn=it[je])?kn(tn):kn;for(var Be in zt)tn[Be]=Be==="className"?ci(tn[Be],zt[Be]):Be==="style"?Ft(Ft({},tn[Be]),zt[Be]):zt[Be]}return ye.className&&(tn.className=ci(tn.className,ye.className)),tn}(E,v,z),Q=q.as||we,le={};for(var J in q)q[J]===void 0||J[0]==="$"||J==="as"||J==="theme"&&q.theme===z||(J==="forwardedAs"?le.as=q.forwardedAs:Pe&&!Pe(J,Q)||(le[J]=q[J]));var he=function(it,ye){var st=uv(),kn=it.generateAndInjectStyles(ye,st.styleSheet,st.stylis);return kn}(I,q),Ye=ci(x,A);return he&&(Ye+=" "+he),q.className&&(Ye+=" "+q.className),le[Fh(Q)&&!kE.has(Q)?"class":"className"]=Ye,le.ref=m,b.createElement(Q,le)}(S,N,L)}_.displayName=p;var S=ht.forwardRef(_);return S.attrs=T,S.componentStyle=w,S.displayName=p,S.shouldForwardProp=P,S.foldedComponentIds=r?ci(i.foldedComponentIds,i.styledComponentId):"",S.styledComponentId=y,S.target=r?i.target:t,Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(N){this._foldedDefaultProps=r?function(L){for(var O=[],v=1;v<arguments.length;v++)O[v-1]=arguments[v];for(var m=0,E=O;m<E.length;m++)uf(L,E[m],!0);return L}({},i.defaultProps,N):N}}),Gp(S,function(){return".".concat(S.styledComponentId)}),s&&bE(S,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),S}function hv(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n}var dv=function(t){return Object.assign(t,{isCss:!0})};function VN(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vs(t)||ga(t))return dv(yi(hv(Pc,$u([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?yi(r):dv(yi(hv(r,e)))}function hf(t,e,n){if(n===void 0&&(n=Ms),!e)throw Ma(1,e);var r=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return t(e,n,VN.apply(void 0,$u([i],s,!1)))};return r.attrs=function(i){return hf(t,e,Ft(Ft({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return hf(t,e,Ft(Ft({},n),i))},r}var HE=function(t){return hf(MN,t)},Ks=HE;kE.forEach(function(t){Ks[t]=HE(t)});const Qp=Ks.div.attrs(({x:t,y:e,$backgroundColor:n})=>({style:{left:`${t*Wg}px`,top:`${e*Wg}px`,backgroundColor:n}}))`
  position: absolute;
  width: ${nr}px;
  height: ${nr}px;
  border: ${rs}px solid darkgray;
`,ON=({x:t,y:e,id:n})=>{const{setNodeRef:r,isOver:i}=Dk({id:n,data:{x:t,y:e}}),s=i?"lightgreen":"white";return V.jsx(Qp,{ref:r,x:t,y:e,$backgroundColor:s})},ya=Ks.div`
  color: white;
  width: ${Tu}px;
  height: ${Tu}px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  background: ${t=>t.$isMonster?"crimson":"dodgerblue"};
  border-color: ${t=>t.$isMonster?"darkred":"darkblue"};
  border-width: ${HS}px;
  border-style: solid;
`,bN=Ks(ya)`
  position: absolute;
  cursor: grab;
  touch-action: none;
  left: ${t=>t.$left}px;
  top: ${t=>t.$top}px;
`,LN=t=>{const{id:e,x:n,y:r,type:i}=t,{setNodeRef:s,listeners:o,attributes:l,transform:u}=xk({id:e}),h={transform:ef.Transform.toString(u)},f=n*(nr-rs)+(nr-rs-Tu)/2,p=r*(nr-rs)+(nr-rs-Tu)/2;return V.jsx(bN,{$left:f,$top:p,$isMonster:i===Fs.Monster,ref:s,style:h,...l,...o,children:e})},FN=({move:t,units:e,board:n})=>V.jsx(WE,{children:V.jsxs(Ck,{onDragEnd:({over:r,active:i})=>{if(r&&r.data.current&&i){const{x:s,y:o}=r.data.current,l=i.id.toString();t(l,s,o)}},children:[jn(sc).map(r=>jn(Sa).map(i=>n[r][i]==="."?V.jsx(ON,{id:`${i}-${r}`,x:i,y:r},`${i}-${r}`):V.jsx(Qp,{x:i,y:r,$backgroundColor:"black"},`${i}-${r}`))),e.filter(r=>r.hp>0||r.type===Fs.Character).map(r=>V.jsx(LN,{...r},r.id))]})}),WE=Ks.div`
  position: relative;
  width: ${Sa*nr}px;
  height: ${sc*nr}px;
`,$N=t=>t.monsterType!==void 0,jN=({item:t})=>V.jsxs("div",{className:"d-flex flex-row mb-2 p-2 border rounded align-items-center",children:[$N(t)?V.jsx(ya,{$isMonster:!0,children:""}):V.jsx(ya,{$isMonster:!1,children:t.id}),V.jsx("div",{className:"flex-grow-1 p-2",children:t.name}),V.jsx("div",{className:"fs-5",children:t.initiative})]},t.name),BN=({monster:t,characters:e})=>{const n=[t,...e].sort((r,i)=>i.initiative-r.initiative);return V.jsxs("div",{className:"d-flex flex-column flex-grow-1",children:[V.jsx("h5",{className:"pb-2",children:""}),n.map(r=>V.jsx(jN,{item:r},r.name))]})},UN=t=>V.jsxs(zN,{children:[V.jsx(FN,{...t}),V.jsx(BN,{...t})]}),zN=Ks.div`
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  flex-wrap: wrap;
`,HN=()=>{for(;;){const t=Math.floor(Math.random()*Sa),e=Math.floor(Math.random()*4+sc-4);if(op[e][t]===".")return{x:t,y:e}}},WN=t=>{const{id:e,name:n,hp:r}=t,{x:i,y:s}=HN();return{id:e,type:Fs.Character,name:n,x:i,y:s,hp:r}},qN=t=>Math.floor(Math.random()*20)+1+KN(t),KN=t=>Math.floor((t.abilities[te.DEX]-10)/2),fv={unit:WN,rollInitiative:qN},GN=({unit:t,setHitPoint:e,monster:n})=>V.jsxs("div",{className:"d-flex flex-row mb-2 p-2 border rounded align-items-center",children:[V.jsx(ya,{...t,$isMonster:t.type===Fs.Monster,children:t.id}),V.jsx("div",{className:"flex-grow-1 p-2",children:V.jsxs("div",{className:"fs-6",children:[V.jsx("span",{children:n.name}),t.hp<=0&&V.jsx("span",{className:"text-danger",children:"[]"})]})}),V.jsx("div",{className:"fs-5 px-2",children:"hp"}),V.jsx("select",{value:t.hp,className:"form-select form-select-lg w-25",onChange:r=>e(t.id,parseInt(r.target.value)),children:jn(n.hp+1).map(r=>V.jsx("option",{value:r,children:r},r))})]},t.name),QN=({units:t,setHitPoint:e,monster:n})=>V.jsxs("div",{children:[V.jsx("h5",{children:""}),t.filter(r=>r.type===Fs.Monster).map(r=>V.jsx(GN,{unit:r,setHitPoint:e,monster:n},r.id))]}),YN=t=>{const[e,n]=b.useState(t);return b.useEffect(()=>{vc(rr(Tn,"board","board"),i=>{var s;n(((s=i.data())==null?void 0:s.board)??t)})},[]),{board:e,flipCell:(i,s)=>{const o=e.map((l,u)=>l.split("").map((h,f)=>f===i&&u===s?h==="#"?".":"#":h).join(""));fs(rr(Tn,"board","board"),{board:o}).then()}}},XN=({board:t,flipCell:e})=>V.jsx(WE,{children:jn(sc).map(n=>jn(Sa).map(r=>V.jsx(Qp,{x:r,y:n,$backgroundColor:t[n][r]==="#"?"black":"white",onClick:()=>e(r,n)},`${r}-${n}`)))}),JN=()=>{const[t,e]=b.useState([]),n=H1(Tn,"characters");return b.useEffect(()=>{vc(n,i=>e(i.docs.map(s=>s.data())))},[]),{characters:t,setCharacter:i=>{const{id:s}=i;fs(rr(Tn,"characters",s),i).then()}}},ZN=({character:t,setActive:e,setDex:n,setHp:r})=>V.jsxs("div",{className:"d-flex flex-row mb-2 p-2 border rounded align-items-center",children:[V.jsxs("div",{className:"form-check form-switch me-4",children:[V.jsx("input",{className:"form-check-input",type:"checkbox",id:"isActive",checked:t.active,onChange:i=>{e(i.target.checked)}}),t.active?V.jsx("label",{className:"form-check-label",htmlFor:"isActive",children:""}):V.jsx("label",{className:"form-check-label",htmlFor:"isActive",children:""})]}),V.jsx(ya,{...t,$isMonster:!1,children:t.id}),V.jsx("div",{className:"flex-grow-1 p-2",children:V.jsx("div",{className:"fs-6",children:V.jsx("span",{children:t.name})})}),V.jsx("div",{className:"fs-5 px-2",children:"hp"}),V.jsx("select",{value:t.hp,className:"form-select form-select-lg me-4",style:{width:"4em"},onChange:i=>r(parseInt(i.target.value)),children:jn(100).map(i=>V.jsx("option",{value:i,children:i},i))}),V.jsx("div",{className:"fs-5 px-2",children:""}),V.jsx("select",{value:t.abilities[te.DEX],className:"form-select form-select-lg",style:{width:"4em"},onChange:i=>n(parseInt(i.target.value)),children:jn(25).map(i=>V.jsx("option",{value:i,children:i},i))})]},t.id),eD=({characters:t,setCharacter:e})=>V.jsxs(V.Fragment,{children:[V.jsx("h5",{children:""}),Object.values(t).map(n=>V.jsx(ZN,{character:n,setActive:r=>{const i={...n,active:r};e(i)},setDex:r=>{const i={...n,abilities:{...n.abilities,[te.DEX]:r}};e(i)},setHp:r=>{const i={...n,hp:r};e(i)}},n.id))]});function tD(){const{settings:t,setLevel:e,setNumCharacters:n,setDifficulty:r,totalExp:i}=$S(US),{monster:s,reRollMonster:o}=ax(i),{units:l,move:u,setUnit:h,deleteUnit:f,setHitPoint:p}=hx(),{board:y,flipCell:T}=YN(op),{characters:P,setCharacter:R}=JN(),[D,w]=b.useState(!1),_=Object.values(P).filter(m=>m.active),S={[de.Setting]:()=>{o(),L(de.Monster)},[de.Monster]:o,[de.Character]:()=>{},[de.Room]:()=>{jn(s.num).forEach(m=>{const E=Ot.unit(s,m);h(E)}),jn(20-s.num).forEach(m=>{const E=`m${m+s.num}`;f(E)}),Object.values(P).forEach(m=>{const E=fv.rollInitiative(m);R({...m,initiative:E});const I=fv.unit(m);m.active?h(I):f(I.id)})},[de.HitPoint]:()=>{jn(s.num).forEach(m=>{const E=`m${m}`;p(E,s.hp)})},[de.EditRoom]:()=>{T(0,0)}},{page:N,setPage:L,reRollLabel:O,reRoll:v}=ux(S);return V.jsxs(V.Fragment,{children:[V.jsx(cx,{page:N,setPage:L,reRoll:v,reRollLabel:O,isMaster:D,setIsMaster:w}),V.jsxs("div",{className:"container-fluid",children:[N===de.Setting&&V.jsx(lx,{settings:t,setLevel:e,setNumCharacters:n,setDifficulty:r}),N===de.Character&&V.jsx(eD,{characters:P,setCharacter:R}),N===de.Monster&&V.jsx(BS,{monster:s}),N===de.Room&&V.jsx(UN,{units:l,move:u,monster:s,board:y,characters:_}),N===de.HitPoint&&V.jsx(QN,{units:l,setHitPoint:p,monster:s}),N===de.EditRoom&&V.jsx(XN,{board:y,flipCell:T})]})]})}C_(document.getElementById("root")).render(V.jsx(b.StrictMode,{children:V.jsx(tD,{})}));
