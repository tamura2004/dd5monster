(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function nw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rv={exports:{}},Bu={},iv={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ma=Symbol.for("react.element"),rw=Symbol.for("react.portal"),iw=Symbol.for("react.fragment"),sw=Symbol.for("react.strict_mode"),ow=Symbol.for("react.profiler"),aw=Symbol.for("react.provider"),lw=Symbol.for("react.context"),uw=Symbol.for("react.forward_ref"),cw=Symbol.for("react.suspense"),hw=Symbol.for("react.memo"),dw=Symbol.for("react.lazy"),Am=Symbol.iterator;function fw(t){return t===null||typeof t!="object"?null:(t=Am&&t[Am]||t["@@iterator"],typeof t=="function"?t:null)}var sv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ov=Object.assign,av={};function Ms(t,e,n){this.props=t,this.context=e,this.refs=av,this.updater=n||sv}Ms.prototype.isReactComponent={};Ms.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ms.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lv(){}lv.prototype=Ms.prototype;function ef(t,e,n){this.props=t,this.context=e,this.refs=av,this.updater=n||sv}var tf=ef.prototype=new lv;tf.constructor=ef;ov(tf,Ms.prototype);tf.isPureReactComponent=!0;var Cm=Array.isArray,uv=Object.prototype.hasOwnProperty,nf={current:null},cv={key:!0,ref:!0,__self:!0,__source:!0};function hv(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)uv.call(e,r)&&!cv.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ma,type:t,key:s,ref:o,props:i,_owner:nf.current}}function pw(t,e){return{$$typeof:ma,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rf(t){return typeof t=="object"&&t!==null&&t.$$typeof===ma}function mw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rm=/\/+/g;function Fc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mw(""+t.key):e.toString(36)}function Al(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ma:case rw:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Fc(o,0):r,Cm(i)?(n="",t!=null&&(n=t.replace(Rm,"$&/")+"/"),Al(i,e,n,"",function(h){return h})):i!=null&&(rf(i)&&(i=pw(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Rm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Cm(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Fc(s,l);o+=Al(s,e,n,u,i)}else if(u=fw(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Fc(s,l++),o+=Al(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function el(t,e,n){if(t==null)return t;var r=[],i=0;return Al(t,r,"","",function(s){return e.call(n,s,i++)}),r}function gw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dt={current:null},Cl={transition:null},yw={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:Cl,ReactCurrentOwner:nf};function dv(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:el,forEach:function(t,e,n){el(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return el(t,function(){e++}),e},toArray:function(t){return el(t,function(e){return e})||[]},only:function(t){if(!rf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=Ms;ne.Fragment=iw;ne.Profiler=ow;ne.PureComponent=ef;ne.StrictMode=sw;ne.Suspense=cw;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yw;ne.act=dv;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ov({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=nf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)uv.call(e,u)&&!cv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:ma,type:t.type,key:i,ref:s,props:r,_owner:o}};ne.createContext=function(t){return t={$$typeof:lw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aw,_context:t},t.Consumer=t};ne.createElement=hv;ne.createFactory=function(t){var e=hv.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:uw,render:t}};ne.isValidElement=rf;ne.lazy=function(t){return{$$typeof:dw,_payload:{_status:-1,_result:t},_init:gw}};ne.memo=function(t,e){return{$$typeof:hw,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=Cl.transition;Cl.transition={};try{t()}finally{Cl.transition=e}};ne.unstable_act=dv;ne.useCallback=function(t,e){return Dt.current.useCallback(t,e)};ne.useContext=function(t){return Dt.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return Dt.current.useDeferredValue(t)};ne.useEffect=function(t,e){return Dt.current.useEffect(t,e)};ne.useId=function(){return Dt.current.useId()};ne.useImperativeHandle=function(t,e,n){return Dt.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return Dt.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return Dt.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return Dt.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return Dt.current.useReducer(t,e,n)};ne.useRef=function(t){return Dt.current.useRef(t)};ne.useState=function(t){return Dt.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return Dt.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return Dt.current.useTransition()};ne.version="18.3.1";iv.exports=ne;var b=iv.exports;const dt=nw(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw=b,_w=Symbol.for("react.element"),Ew=Symbol.for("react.fragment"),ww=Object.prototype.hasOwnProperty,Tw=vw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Sw={key:!0,ref:!0,__self:!0,__source:!0};function fv(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ww.call(e,r)&&!Sw.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:_w,type:t,key:s,ref:o,props:i,_owner:Tw.current}}Bu.Fragment=Ew;Bu.jsx=fv;Bu.jsxs=fv;rv.exports=Bu;var L=rv.exports,pv={exports:{}},Xt={},mv={exports:{}},gv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,K){var Y=U.length;U.push(K);e:for(;0<Y;){var ae=Y-1>>>1,J=U[ae];if(0<i(J,K))U[ae]=K,U[Y]=J,Y=ae;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var K=U[0],Y=U.pop();if(Y!==K){U[0]=Y;e:for(var ae=0,J=U.length,he=J>>>1;ae<he;){var Je=2*(ae+1)-1,st=U[Je],me=Je+1,ot=U[me];if(0>i(st,Y))me<J&&0>i(ot,st)?(U[ae]=ot,U[me]=Y,ae=me):(U[ae]=st,U[Je]=Y,ae=Je);else if(me<J&&0>i(ot,Y))U[ae]=ot,U[me]=Y,ae=me;else break e}}return K}function i(U,K){var Y=U.sortIndex-K.sortIndex;return Y!==0?Y:U.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,p=null,y=3,T=!1,P=!1,R=!1,D=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var K=n(h);K!==null;){if(K.callback===null)r(h);else if(K.startTime<=U)r(h),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(h)}}function N(U){if(R=!1,S(U),!P)if(n(u)!==null)P=!0,Rn(O);else{var K=n(h);K!==null&&Pe(N,K.startTime-U)}}function O(U,K){P=!1,R&&(R=!1,E(m),m=-1),T=!0;var Y=y;try{for(S(K),p=n(u);p!==null&&(!(p.expirationTime>K)||U&&!C());){var ae=p.callback;if(typeof ae=="function"){p.callback=null,y=p.priorityLevel;var J=ae(p.expirationTime<=K);K=t.unstable_now(),typeof J=="function"?p.callback=J:p===n(u)&&r(u),S(K)}else r(u);p=n(u)}if(p!==null)var he=!0;else{var Je=n(h);Je!==null&&Pe(N,Je.startTime-K),he=!1}return he}finally{p=null,y=Y,T=!1}}var M=!1,v=null,m=-1,w=5,I=-1;function C(){return!(t.unstable_now()-I<w)}function x(){if(v!==null){var U=t.unstable_now();I=U;var K=!0;try{K=v(!0,U)}finally{K?A():(M=!1,v=null)}}else M=!1}var A;if(typeof _=="function")A=function(){_(x)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Zt=Re.port2;Re.port1.onmessage=x,A=function(){Zt.postMessage(null)}}else A=function(){D(x,0)};function Rn(U){v=U,M||(M=!0,A())}function Pe(U,K){m=D(function(){U(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){P||T||(P=!0,Rn(O))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(y){case 1:case 2:case 3:var K=3;break;default:K=y}var Y=y;y=K;try{return U()}finally{y=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Y=y;y=U;try{return K()}finally{y=Y}},t.unstable_scheduleCallback=function(U,K,Y){var ae=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ae+Y:ae):Y=ae,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=Y+J,U={id:f++,callback:K,priorityLevel:U,startTime:Y,expirationTime:J,sortIndex:-1},Y>ae?(U.sortIndex=Y,e(h,U),n(u)===null&&U===n(h)&&(R?(E(m),m=-1):R=!0,Pe(N,Y-ae))):(U.sortIndex=J,e(u,U),P||T||(P=!0,Rn(O))),U},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(U){var K=y;return function(){var Y=y;y=K;try{return U.apply(this,arguments)}finally{y=Y}}}})(gv);mv.exports=gv;var Iw=mv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw=b,Yt=Iw;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yv=new Set,Bo={};function Ai(t,e){fs(t,e),fs(t+"Capture",e)}function fs(t,e){for(Bo[t]=e,t=0;t<e.length;t++)yv.add(e[t])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xh=Object.prototype.hasOwnProperty,Cw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pm={},xm={};function Rw(t){return xh.call(xm,t)?!0:xh.call(Pm,t)?!1:Cw.test(t)?xm[t]=!0:(Pm[t]=!0,!1)}function Pw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xw(t,e,n,r){if(e===null||typeof e>"u"||Pw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gt[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gt[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gt[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gt[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gt[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gt[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gt[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gt[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gt[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var sf=/[\-:]([a-z])/g;function of(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sf,of);gt[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sf,of);gt[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sf,of);gt[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});gt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function af(t,e,n,r){var i=gt.hasOwnProperty(e)?gt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xw(e,n,i,r)&&(n=null),r||i===null?Rw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var cr=Aw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tl=Symbol.for("react.element"),Hi=Symbol.for("react.portal"),Wi=Symbol.for("react.fragment"),lf=Symbol.for("react.strict_mode"),kh=Symbol.for("react.profiler"),vv=Symbol.for("react.provider"),_v=Symbol.for("react.context"),uf=Symbol.for("react.forward_ref"),Nh=Symbol.for("react.suspense"),Dh=Symbol.for("react.suspense_list"),cf=Symbol.for("react.memo"),wr=Symbol.for("react.lazy"),Ev=Symbol.for("react.offscreen"),km=Symbol.iterator;function ro(t){return t===null||typeof t!="object"?null:(t=km&&t[km]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,$c;function fo(t){if($c===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$c=e&&e[1]||""}return`
`+$c+t}var Bc=!1;function jc(t,e){if(!t||Bc)return"";Bc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Bc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fo(t):""}function kw(t){switch(t.tag){case 5:return fo(t.type);case 16:return fo("Lazy");case 13:return fo("Suspense");case 19:return fo("SuspenseList");case 0:case 2:case 15:return t=jc(t.type,!1),t;case 11:return t=jc(t.type.render,!1),t;case 1:return t=jc(t.type,!0),t;default:return""}}function Mh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wi:return"Fragment";case Hi:return"Portal";case kh:return"Profiler";case lf:return"StrictMode";case Nh:return"Suspense";case Dh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _v:return(t.displayName||"Context")+".Consumer";case vv:return(t._context.displayName||"Context")+".Provider";case uf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cf:return e=t.displayName||null,e!==null?e:Mh(t.type)||"Memo";case wr:e=t._payload,t=t._init;try{return Mh(t(e))}catch{}}return null}function Nw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mh(e);case 8:return e===lf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Dw(t){var e=wv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nl(t){t._valueTracker||(t._valueTracker=Dw(t))}function Tv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=wv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ql(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vh(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Nm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sv(t,e){e=e.checked,e!=null&&af(t,"checked",e,!1)}function Oh(t,e){Sv(t,e);var n=Ur(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bh(t,e.type,n):e.hasOwnProperty("defaultValue")&&bh(t,e.type,Ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bh(t,e,n){(e!=="number"||Ql(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var po=Array.isArray;function is(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ur(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Lh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(po(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ur(n)}}function Iv(t,e){var n=Ur(e.value),r=Ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Vm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Av(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Av(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rl,Cv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rl=rl||document.createElement("div"),rl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var To={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mw=["Webkit","ms","Moz","O"];Object.keys(To).forEach(function(t){Mw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),To[e]=To[t]})});function Rv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||To.hasOwnProperty(t)&&To[t]?(""+e).trim():e+"px"}function Pv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Rv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Vw=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $h(t,e){if(e){if(Vw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Bh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jh=null;function hf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uh=null,ss=null,os=null;function Om(t){if(t=va(t)){if(typeof Uh!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Wu(e),Uh(t.stateNode,t.type,e))}}function xv(t){ss?os?os.push(t):os=[t]:ss=t}function kv(){if(ss){var t=ss,e=os;if(os=ss=null,Om(t),e)for(t=0;t<e.length;t++)Om(e[t])}}function Nv(t,e){return t(e)}function Dv(){}var Uc=!1;function Mv(t,e,n){if(Uc)return t(e,n);Uc=!0;try{return Nv(t,e,n)}finally{Uc=!1,(ss!==null||os!==null)&&(Dv(),kv())}}function Uo(t,e){var n=t.stateNode;if(n===null)return null;var r=Wu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var zh=!1;if(nr)try{var io={};Object.defineProperty(io,"passive",{get:function(){zh=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{zh=!1}function Ow(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var So=!1,Gl=null,Yl=!1,Hh=null,bw={onError:function(t){So=!0,Gl=t}};function Lw(t,e,n,r,i,s,o,l,u){So=!1,Gl=null,Ow.apply(bw,arguments)}function Fw(t,e,n,r,i,s,o,l,u){if(Lw.apply(this,arguments),So){if(So){var h=Gl;So=!1,Gl=null}else throw Error(B(198));Yl||(Yl=!0,Hh=h)}}function Ci(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bm(t){if(Ci(t)!==t)throw Error(B(188))}function $w(t){var e=t.alternate;if(!e){if(e=Ci(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return bm(i),t;if(s===r)return bm(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function Ov(t){return t=$w(t),t!==null?bv(t):null}function bv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bv(t);if(e!==null)return e;t=t.sibling}return null}var Lv=Yt.unstable_scheduleCallback,Lm=Yt.unstable_cancelCallback,Bw=Yt.unstable_shouldYield,jw=Yt.unstable_requestPaint,je=Yt.unstable_now,Uw=Yt.unstable_getCurrentPriorityLevel,df=Yt.unstable_ImmediatePriority,Fv=Yt.unstable_UserBlockingPriority,Xl=Yt.unstable_NormalPriority,zw=Yt.unstable_LowPriority,$v=Yt.unstable_IdlePriority,ju=null,bn=null;function Hw(t){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(ju,t,void 0,(t.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:Kw,Ww=Math.log,qw=Math.LN2;function Kw(t){return t>>>=0,t===0?32:31-(Ww(t)/qw|0)|0}var il=64,sl=4194304;function mo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=mo(l):(s&=o,s!==0&&(r=mo(s)))}else o=n&~i,o!==0?r=mo(o):s!==0&&(r=mo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Tn(e),i=1<<n,r|=t[n],e&=~i;return r}function Qw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Tn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=Qw(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Wh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Bv(){var t=il;return il<<=1,!(il&4194240)&&(il=64),t}function zc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ga(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tn(e),t[e]=n}function Yw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Tn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ff(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Tn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var fe=0;function jv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Uv,pf,zv,Hv,Wv,qh=!1,ol=[],kr=null,Nr=null,Dr=null,zo=new Map,Ho=new Map,Ir=[],Xw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fm(t,e){switch(t){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":zo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(e.pointerId)}}function so(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=va(e),e!==null&&pf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Jw(t,e,n,r,i){switch(e){case"focusin":return kr=so(kr,t,e,n,r,i),!0;case"dragenter":return Nr=so(Nr,t,e,n,r,i),!0;case"mouseover":return Dr=so(Dr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return zo.set(s,so(zo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ho.set(s,so(Ho.get(s)||null,t,e,n,r,i)),!0}return!1}function qv(t){var e=si(t.target);if(e!==null){var n=Ci(e);if(n!==null){if(e=n.tag,e===13){if(e=Vv(n),e!==null){t.blockedOn=e,Wv(t.priority,function(){zv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jh=r,n.target.dispatchEvent(r),jh=null}else return e=va(n),e!==null&&pf(e),t.blockedOn=n,!1;e.shift()}return!0}function $m(t,e,n){Rl(t)&&n.delete(e)}function Zw(){qh=!1,kr!==null&&Rl(kr)&&(kr=null),Nr!==null&&Rl(Nr)&&(Nr=null),Dr!==null&&Rl(Dr)&&(Dr=null),zo.forEach($m),Ho.forEach($m)}function oo(t,e){t.blockedOn===e&&(t.blockedOn=null,qh||(qh=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,Zw)))}function Wo(t){function e(i){return oo(i,t)}if(0<ol.length){oo(ol[0],t);for(var n=1;n<ol.length;n++){var r=ol[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kr!==null&&oo(kr,t),Nr!==null&&oo(Nr,t),Dr!==null&&oo(Dr,t),zo.forEach(e),Ho.forEach(e),n=0;n<Ir.length;n++)r=Ir[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ir.length&&(n=Ir[0],n.blockedOn===null);)qv(n),n.blockedOn===null&&Ir.shift()}var as=cr.ReactCurrentBatchConfig,Zl=!0;function eT(t,e,n,r){var i=fe,s=as.transition;as.transition=null;try{fe=1,mf(t,e,n,r)}finally{fe=i,as.transition=s}}function tT(t,e,n,r){var i=fe,s=as.transition;as.transition=null;try{fe=4,mf(t,e,n,r)}finally{fe=i,as.transition=s}}function mf(t,e,n,r){if(Zl){var i=Kh(t,e,n,r);if(i===null)Zc(t,e,r,eu,n),Fm(t,r);else if(Jw(i,t,e,n,r))r.stopPropagation();else if(Fm(t,r),e&4&&-1<Xw.indexOf(t)){for(;i!==null;){var s=va(i);if(s!==null&&Uv(s),s=Kh(t,e,n,r),s===null&&Zc(t,e,r,eu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Zc(t,e,r,null,n)}}var eu=null;function Kh(t,e,n,r){if(eu=null,t=hf(r),t=si(t),t!==null)if(e=Ci(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return eu=t,null}function Kv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uw()){case df:return 1;case Fv:return 4;case Xl:case zw:return 16;case $v:return 536870912;default:return 16}default:return 16}}var Cr=null,gf=null,Pl=null;function Qv(){if(Pl)return Pl;var t,e=gf,n=e.length,r,i="value"in Cr?Cr.value:Cr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Pl=i.slice(t,1<r?1-r:void 0)}function xl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function al(){return!0}function Bm(){return!1}function Jt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?al:Bm,this.isPropagationStopped=Bm,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=al)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=al)},persist:function(){},isPersistent:al}),e}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yf=Jt(Vs),ya=Me({},Vs,{view:0,detail:0}),nT=Jt(ya),Hc,Wc,ao,Uu=Me({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ao&&(ao&&t.type==="mousemove"?(Hc=t.screenX-ao.screenX,Wc=t.screenY-ao.screenY):Wc=Hc=0,ao=t),Hc)},movementY:function(t){return"movementY"in t?t.movementY:Wc}}),jm=Jt(Uu),rT=Me({},Uu,{dataTransfer:0}),iT=Jt(rT),sT=Me({},ya,{relatedTarget:0}),qc=Jt(sT),oT=Me({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),aT=Jt(oT),lT=Me({},Vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uT=Jt(lT),cT=Me({},Vs,{data:0}),Um=Jt(cT),hT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fT[t])?!!e[t]:!1}function vf(){return pT}var mT=Me({},ya,{key:function(t){if(t.key){var e=hT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vf,charCode:function(t){return t.type==="keypress"?xl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gT=Jt(mT),yT=Me({},Uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zm=Jt(yT),vT=Me({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vf}),_T=Jt(vT),ET=Me({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),wT=Jt(ET),TT=Me({},Uu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ST=Jt(TT),IT=[9,13,27,32],_f=nr&&"CompositionEvent"in window,Io=null;nr&&"documentMode"in document&&(Io=document.documentMode);var AT=nr&&"TextEvent"in window&&!Io,Gv=nr&&(!_f||Io&&8<Io&&11>=Io),Hm=" ",Wm=!1;function Yv(t,e){switch(t){case"keyup":return IT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qi=!1;function CT(t,e){switch(t){case"compositionend":return Xv(e);case"keypress":return e.which!==32?null:(Wm=!0,Hm);case"textInput":return t=e.data,t===Hm&&Wm?null:t;default:return null}}function RT(t,e){if(qi)return t==="compositionend"||!_f&&Yv(t,e)?(t=Qv(),Pl=gf=Cr=null,qi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gv&&e.locale!=="ko"?null:e.data;default:return null}}var PT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PT[t.type]:e==="textarea"}function Jv(t,e,n,r){xv(r),e=tu(e,"onChange"),0<e.length&&(n=new yf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ao=null,qo=null;function xT(t){u0(t,0)}function zu(t){var e=Gi(t);if(Tv(e))return t}function kT(t,e){if(t==="change")return e}var Zv=!1;if(nr){var Kc;if(nr){var Qc="oninput"in document;if(!Qc){var Km=document.createElement("div");Km.setAttribute("oninput","return;"),Qc=typeof Km.oninput=="function"}Kc=Qc}else Kc=!1;Zv=Kc&&(!document.documentMode||9<document.documentMode)}function Qm(){Ao&&(Ao.detachEvent("onpropertychange",e0),qo=Ao=null)}function e0(t){if(t.propertyName==="value"&&zu(qo)){var e=[];Jv(e,qo,t,hf(t)),Mv(xT,e)}}function NT(t,e,n){t==="focusin"?(Qm(),Ao=e,qo=n,Ao.attachEvent("onpropertychange",e0)):t==="focusout"&&Qm()}function DT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zu(qo)}function MT(t,e){if(t==="click")return zu(e)}function VT(t,e){if(t==="input"||t==="change")return zu(e)}function OT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var An=typeof Object.is=="function"?Object.is:OT;function Ko(t,e){if(An(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xh.call(e,i)||!An(t[i],e[i]))return!1}return!0}function Gm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ym(t,e){var n=Gm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gm(n)}}function t0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?t0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function n0(){for(var t=window,e=Ql();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ql(t.document)}return e}function Ef(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bT(t){var e=n0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&t0(n.ownerDocument.documentElement,n)){if(r!==null&&Ef(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ym(n,s);var o=Ym(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var LT=nr&&"documentMode"in document&&11>=document.documentMode,Ki=null,Qh=null,Co=null,Gh=!1;function Xm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gh||Ki==null||Ki!==Ql(r)||(r=Ki,"selectionStart"in r&&Ef(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Co&&Ko(Co,r)||(Co=r,r=tu(Qh,"onSelect"),0<r.length&&(e=new yf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ki)))}function ll(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qi={animationend:ll("Animation","AnimationEnd"),animationiteration:ll("Animation","AnimationIteration"),animationstart:ll("Animation","AnimationStart"),transitionend:ll("Transition","TransitionEnd")},Gc={},r0={};nr&&(r0=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function Hu(t){if(Gc[t])return Gc[t];if(!Qi[t])return t;var e=Qi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in r0)return Gc[t]=e[n];return t}var i0=Hu("animationend"),s0=Hu("animationiteration"),o0=Hu("animationstart"),a0=Hu("transitionend"),l0=new Map,Jm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(t,e){l0.set(t,e),Ai(e,[t])}for(var Yc=0;Yc<Jm.length;Yc++){var Xc=Jm[Yc],FT=Xc.toLowerCase(),$T=Xc[0].toUpperCase()+Xc.slice(1);Kr(FT,"on"+$T)}Kr(i0,"onAnimationEnd");Kr(s0,"onAnimationIteration");Kr(o0,"onAnimationStart");Kr("dblclick","onDoubleClick");Kr("focusin","onFocus");Kr("focusout","onBlur");Kr(a0,"onTransitionEnd");fs("onMouseEnter",["mouseout","mouseover"]);fs("onMouseLeave",["mouseout","mouseover"]);fs("onPointerEnter",["pointerout","pointerover"]);fs("onPointerLeave",["pointerout","pointerover"]);Ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ai("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BT=new Set("cancel close invalid load scroll toggle".split(" ").concat(go));function Zm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Fw(r,e,void 0,t),t.currentTarget=null}function u0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Zm(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Zm(i,l,h),s=u}}}if(Yl)throw t=Hh,Yl=!1,Hh=null,t}function we(t,e){var n=e[ed];n===void 0&&(n=e[ed]=new Set);var r=t+"__bubble";n.has(r)||(c0(e,t,2,!1),n.add(r))}function Jc(t,e,n){var r=0;e&&(r|=4),c0(n,t,r,e)}var ul="_reactListening"+Math.random().toString(36).slice(2);function Qo(t){if(!t[ul]){t[ul]=!0,yv.forEach(function(n){n!=="selectionchange"&&(BT.has(n)||Jc(n,!1,t),Jc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ul]||(e[ul]=!0,Jc("selectionchange",!1,e))}}function c0(t,e,n,r){switch(Kv(e)){case 1:var i=eT;break;case 4:i=tT;break;default:i=mf}n=i.bind(null,e,n,t),i=void 0,!zh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Zc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=si(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Mv(function(){var h=s,f=hf(n),p=[];e:{var y=l0.get(t);if(y!==void 0){var T=yf,P=t;switch(t){case"keypress":if(xl(n)===0)break e;case"keydown":case"keyup":T=gT;break;case"focusin":P="focus",T=qc;break;case"focusout":P="blur",T=qc;break;case"beforeblur":case"afterblur":T=qc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=jm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=iT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=_T;break;case i0:case s0:case o0:T=aT;break;case a0:T=wT;break;case"scroll":T=nT;break;case"wheel":T=ST;break;case"copy":case"cut":case"paste":T=uT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=zm}var R=(e&4)!==0,D=!R&&t==="scroll",E=R?y!==null?y+"Capture":null:y;R=[];for(var _=h,S;_!==null;){S=_;var N=S.stateNode;if(S.tag===5&&N!==null&&(S=N,E!==null&&(N=Uo(_,E),N!=null&&R.push(Go(_,N,S)))),D)break;_=_.return}0<R.length&&(y=new T(y,P,null,n,f),p.push({event:y,listeners:R}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",y&&n!==jh&&(P=n.relatedTarget||n.fromElement)&&(si(P)||P[rr]))break e;if((T||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,T?(P=n.relatedTarget||n.toElement,T=h,P=P?si(P):null,P!==null&&(D=Ci(P),P!==D||P.tag!==5&&P.tag!==6)&&(P=null)):(T=null,P=h),T!==P)){if(R=jm,N="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(R=zm,N="onPointerLeave",E="onPointerEnter",_="pointer"),D=T==null?y:Gi(T),S=P==null?y:Gi(P),y=new R(N,_+"leave",T,n,f),y.target=D,y.relatedTarget=S,N=null,si(f)===h&&(R=new R(E,_+"enter",P,n,f),R.target=S,R.relatedTarget=D,N=R),D=N,T&&P)t:{for(R=T,E=P,_=0,S=R;S;S=Fi(S))_++;for(S=0,N=E;N;N=Fi(N))S++;for(;0<_-S;)R=Fi(R),_--;for(;0<S-_;)E=Fi(E),S--;for(;_--;){if(R===E||E!==null&&R===E.alternate)break t;R=Fi(R),E=Fi(E)}R=null}else R=null;T!==null&&eg(p,y,T,R,!1),P!==null&&D!==null&&eg(p,D,P,R,!0)}}e:{if(y=h?Gi(h):window,T=y.nodeName&&y.nodeName.toLowerCase(),T==="select"||T==="input"&&y.type==="file")var O=kT;else if(qm(y))if(Zv)O=VT;else{O=DT;var M=NT}else(T=y.nodeName)&&T.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(O=MT);if(O&&(O=O(t,h))){Jv(p,O,n,f);break e}M&&M(t,y,h),t==="focusout"&&(M=y._wrapperState)&&M.controlled&&y.type==="number"&&bh(y,"number",y.value)}switch(M=h?Gi(h):window,t){case"focusin":(qm(M)||M.contentEditable==="true")&&(Ki=M,Qh=h,Co=null);break;case"focusout":Co=Qh=Ki=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,Xm(p,n,f);break;case"selectionchange":if(LT)break;case"keydown":case"keyup":Xm(p,n,f)}var v;if(_f)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else qi?Yv(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(Gv&&n.locale!=="ko"&&(qi||m!=="onCompositionStart"?m==="onCompositionEnd"&&qi&&(v=Qv()):(Cr=f,gf="value"in Cr?Cr.value:Cr.textContent,qi=!0)),M=tu(h,m),0<M.length&&(m=new Um(m,t,null,n,f),p.push({event:m,listeners:M}),v?m.data=v:(v=Xv(n),v!==null&&(m.data=v)))),(v=AT?CT(t,n):RT(t,n))&&(h=tu(h,"onBeforeInput"),0<h.length&&(f=new Um("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:h}),f.data=v))}u0(p,e)})}function Go(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Uo(t,n),s!=null&&r.unshift(Go(t,s,i)),s=Uo(t,e),s!=null&&r.push(Go(t,s,i))),t=t.return}return r}function Fi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function eg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Uo(n,s),u!=null&&o.unshift(Go(n,u,l))):i||(u=Uo(n,s),u!=null&&o.push(Go(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jT=/\r\n?/g,UT=/\u0000|\uFFFD/g;function tg(t){return(typeof t=="string"?t:""+t).replace(jT,`
`).replace(UT,"")}function cl(t,e,n){if(e=tg(e),tg(t)!==e&&n)throw Error(B(425))}function nu(){}var Yh=null,Xh=null;function Jh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zh=typeof setTimeout=="function"?setTimeout:void 0,zT=typeof clearTimeout=="function"?clearTimeout:void 0,ng=typeof Promise=="function"?Promise:void 0,HT=typeof queueMicrotask=="function"?queueMicrotask:typeof ng<"u"?function(t){return ng.resolve(null).then(t).catch(WT)}:Zh;function WT(t){setTimeout(function(){throw t})}function eh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Wo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Wo(e)}function Mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Os=Math.random().toString(36).slice(2),On="__reactFiber$"+Os,Yo="__reactProps$"+Os,rr="__reactContainer$"+Os,ed="__reactEvents$"+Os,qT="__reactListeners$"+Os,KT="__reactHandles$"+Os;function si(t){var e=t[On];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[On]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rg(t);t!==null;){if(n=t[On])return n;t=rg(t)}return e}t=n,n=t.parentNode}return null}function va(t){return t=t[On]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Wu(t){return t[Yo]||null}var td=[],Yi=-1;function Qr(t){return{current:t}}function Ie(t){0>Yi||(t.current=td[Yi],td[Yi]=null,Yi--)}function _e(t,e){Yi++,td[Yi]=t.current,t.current=e}var zr={},Pt=Qr(zr),Ft=Qr(!1),yi=zr;function ps(t,e){var n=t.type.contextTypes;if(!n)return zr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function $t(t){return t=t.childContextTypes,t!=null}function ru(){Ie(Ft),Ie(Pt)}function ig(t,e,n){if(Pt.current!==zr)throw Error(B(168));_e(Pt,e),_e(Ft,n)}function h0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,Nw(t)||"Unknown",i));return Me({},n,r)}function iu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zr,yi=Pt.current,_e(Pt,t),_e(Ft,Ft.current),!0}function sg(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=h0(t,e,yi),r.__reactInternalMemoizedMergedChildContext=t,Ie(Ft),Ie(Pt),_e(Pt,t)):Ie(Ft),_e(Ft,n)}var Gn=null,qu=!1,th=!1;function d0(t){Gn===null?Gn=[t]:Gn.push(t)}function QT(t){qu=!0,d0(t)}function Gr(){if(!th&&Gn!==null){th=!0;var t=0,e=fe;try{var n=Gn;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Gn=null,qu=!1}catch(i){throw Gn!==null&&(Gn=Gn.slice(t+1)),Lv(df,Gr),i}finally{fe=e,th=!1}}return null}var Xi=[],Ji=0,su=null,ou=0,on=[],an=0,vi=null,Xn=1,Jn="";function ti(t,e){Xi[Ji++]=ou,Xi[Ji++]=su,su=t,ou=e}function f0(t,e,n){on[an++]=Xn,on[an++]=Jn,on[an++]=vi,vi=t;var r=Xn;t=Jn;var i=32-Tn(r)-1;r&=~(1<<i),n+=1;var s=32-Tn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xn=1<<32-Tn(e)+i|n<<i|r,Jn=s+t}else Xn=1<<s|n<<i|r,Jn=t}function wf(t){t.return!==null&&(ti(t,1),f0(t,1,0))}function Tf(t){for(;t===su;)su=Xi[--Ji],Xi[Ji]=null,ou=Xi[--Ji],Xi[Ji]=null;for(;t===vi;)vi=on[--an],on[an]=null,Jn=on[--an],on[an]=null,Xn=on[--an],on[an]=null}var Qt=null,Kt=null,Ae=!1,En=null;function p0(t,e){var n=un(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function og(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=Mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vi!==null?{id:Xn,overflow:Jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=un(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Kt=null,!0):!1;default:return!1}}function nd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rd(t){if(Ae){var e=Kt;if(e){var n=e;if(!og(t,e)){if(nd(t))throw Error(B(418));e=Mr(n.nextSibling);var r=Qt;e&&og(t,e)?p0(r,n):(t.flags=t.flags&-4097|2,Ae=!1,Qt=t)}}else{if(nd(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ae=!1,Qt=t}}}function ag(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function hl(t){if(t!==Qt)return!1;if(!Ae)return ag(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jh(t.type,t.memoizedProps)),e&&(e=Kt)){if(nd(t))throw m0(),Error(B(418));for(;e;)p0(t,e),e=Mr(e.nextSibling)}if(ag(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kt=Mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kt=null}}else Kt=Qt?Mr(t.stateNode.nextSibling):null;return!0}function m0(){for(var t=Kt;t;)t=Mr(t.nextSibling)}function ms(){Kt=Qt=null,Ae=!1}function Sf(t){En===null?En=[t]:En.push(t)}var GT=cr.ReactCurrentBatchConfig;function lo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function dl(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lg(t){var e=t._init;return e(t._payload)}function g0(t){function e(E,_){if(t){var S=E.deletions;S===null?(E.deletions=[_],E.flags|=16):S.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function i(E,_){return E=Lr(E,_),E.index=0,E.sibling=null,E}function s(E,_,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<_?(E.flags|=2,_):S):(E.flags|=2,_)):(E.flags|=1048576,_)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,_,S,N){return _===null||_.tag!==6?(_=lh(S,E.mode,N),_.return=E,_):(_=i(_,S),_.return=E,_)}function u(E,_,S,N){var O=S.type;return O===Wi?f(E,_,S.props.children,N,S.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===wr&&lg(O)===_.type)?(N=i(_,S.props),N.ref=lo(E,_,S),N.return=E,N):(N=bl(S.type,S.key,S.props,null,E.mode,N),N.ref=lo(E,_,S),N.return=E,N)}function h(E,_,S,N){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=uh(S,E.mode,N),_.return=E,_):(_=i(_,S.children||[]),_.return=E,_)}function f(E,_,S,N,O){return _===null||_.tag!==7?(_=hi(S,E.mode,N,O),_.return=E,_):(_=i(_,S),_.return=E,_)}function p(E,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=lh(""+_,E.mode,S),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case tl:return S=bl(_.type,_.key,_.props,null,E.mode,S),S.ref=lo(E,null,_),S.return=E,S;case Hi:return _=uh(_,E.mode,S),_.return=E,_;case wr:var N=_._init;return p(E,N(_._payload),S)}if(po(_)||ro(_))return _=hi(_,E.mode,S,null),_.return=E,_;dl(E,_)}return null}function y(E,_,S,N){var O=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return O!==null?null:l(E,_,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case tl:return S.key===O?u(E,_,S,N):null;case Hi:return S.key===O?h(E,_,S,N):null;case wr:return O=S._init,y(E,_,O(S._payload),N)}if(po(S)||ro(S))return O!==null?null:f(E,_,S,N,null);dl(E,S)}return null}function T(E,_,S,N,O){if(typeof N=="string"&&N!==""||typeof N=="number")return E=E.get(S)||null,l(_,E,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case tl:return E=E.get(N.key===null?S:N.key)||null,u(_,E,N,O);case Hi:return E=E.get(N.key===null?S:N.key)||null,h(_,E,N,O);case wr:var M=N._init;return T(E,_,S,M(N._payload),O)}if(po(N)||ro(N))return E=E.get(S)||null,f(_,E,N,O,null);dl(_,N)}return null}function P(E,_,S,N){for(var O=null,M=null,v=_,m=_=0,w=null;v!==null&&m<S.length;m++){v.index>m?(w=v,v=null):w=v.sibling;var I=y(E,v,S[m],N);if(I===null){v===null&&(v=w);break}t&&v&&I.alternate===null&&e(E,v),_=s(I,_,m),M===null?O=I:M.sibling=I,M=I,v=w}if(m===S.length)return n(E,v),Ae&&ti(E,m),O;if(v===null){for(;m<S.length;m++)v=p(E,S[m],N),v!==null&&(_=s(v,_,m),M===null?O=v:M.sibling=v,M=v);return Ae&&ti(E,m),O}for(v=r(E,v);m<S.length;m++)w=T(v,E,m,S[m],N),w!==null&&(t&&w.alternate!==null&&v.delete(w.key===null?m:w.key),_=s(w,_,m),M===null?O=w:M.sibling=w,M=w);return t&&v.forEach(function(C){return e(E,C)}),Ae&&ti(E,m),O}function R(E,_,S,N){var O=ro(S);if(typeof O!="function")throw Error(B(150));if(S=O.call(S),S==null)throw Error(B(151));for(var M=O=null,v=_,m=_=0,w=null,I=S.next();v!==null&&!I.done;m++,I=S.next()){v.index>m?(w=v,v=null):w=v.sibling;var C=y(E,v,I.value,N);if(C===null){v===null&&(v=w);break}t&&v&&C.alternate===null&&e(E,v),_=s(C,_,m),M===null?O=C:M.sibling=C,M=C,v=w}if(I.done)return n(E,v),Ae&&ti(E,m),O;if(v===null){for(;!I.done;m++,I=S.next())I=p(E,I.value,N),I!==null&&(_=s(I,_,m),M===null?O=I:M.sibling=I,M=I);return Ae&&ti(E,m),O}for(v=r(E,v);!I.done;m++,I=S.next())I=T(v,E,m,I.value,N),I!==null&&(t&&I.alternate!==null&&v.delete(I.key===null?m:I.key),_=s(I,_,m),M===null?O=I:M.sibling=I,M=I);return t&&v.forEach(function(x){return e(E,x)}),Ae&&ti(E,m),O}function D(E,_,S,N){if(typeof S=="object"&&S!==null&&S.type===Wi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case tl:e:{for(var O=S.key,M=_;M!==null;){if(M.key===O){if(O=S.type,O===Wi){if(M.tag===7){n(E,M.sibling),_=i(M,S.props.children),_.return=E,E=_;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===wr&&lg(O)===M.type){n(E,M.sibling),_=i(M,S.props),_.ref=lo(E,M,S),_.return=E,E=_;break e}n(E,M);break}else e(E,M);M=M.sibling}S.type===Wi?(_=hi(S.props.children,E.mode,N,S.key),_.return=E,E=_):(N=bl(S.type,S.key,S.props,null,E.mode,N),N.ref=lo(E,_,S),N.return=E,E=N)}return o(E);case Hi:e:{for(M=S.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(E,_.sibling),_=i(_,S.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=uh(S,E.mode,N),_.return=E,E=_}return o(E);case wr:return M=S._init,D(E,_,M(S._payload),N)}if(po(S))return P(E,_,S,N);if(ro(S))return R(E,_,S,N);dl(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(E,_.sibling),_=i(_,S),_.return=E,E=_):(n(E,_),_=lh(S,E.mode,N),_.return=E,E=_),o(E)):n(E,_)}return D}var gs=g0(!0),y0=g0(!1),au=Qr(null),lu=null,Zi=null,If=null;function Af(){If=Zi=lu=null}function Cf(t){var e=au.current;Ie(au),t._currentValue=e}function id(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ls(t,e){lu=t,If=Zi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function hn(t){var e=t._currentValue;if(If!==t)if(t={context:t,memoizedValue:e,next:null},Zi===null){if(lu===null)throw Error(B(308));Zi=t,lu.dependencies={lanes:0,firstContext:t}}else Zi=Zi.next=t;return e}var oi=null;function Rf(t){oi===null?oi=[t]:oi.push(t)}function v0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Rf(e)):(n.next=i.next,i.next=n),e.interleaved=n,ir(t,r)}function ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function Pf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function tr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ir(t,n)}return i=r.interleaved,i===null?(e.next=e,Rf(r)):(e.next=i.next,i.next=e),r.interleaved=e,ir(t,n)}function kl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ff(t,n)}}function ug(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uu(t,e,n,r){var i=t.updateQueue;Tr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,f=h=u=null,l=s;do{var y=l.lane,T=l.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,R=l;switch(y=e,T=n,R.tag){case 1:if(P=R.payload,typeof P=="function"){p=P.call(T,p,y);break e}p=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=R.payload,y=typeof P=="function"?P.call(T,p,y):P,y==null)break e;p=Me({},p,y);break e;case 2:Tr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[l]:y.push(l))}else T={eventTime:T,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=T,u=p):f=f.next=T,o|=y;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ei|=o,t.lanes=o,t.memoizedState=p}}function cg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var _a={},Ln=Qr(_a),Xo=Qr(_a),Jo=Qr(_a);function ai(t){if(t===_a)throw Error(B(174));return t}function xf(t,e){switch(_e(Jo,e),_e(Xo,t),_e(Ln,_a),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fh(e,t)}Ie(Ln),_e(Ln,e)}function ys(){Ie(Ln),Ie(Xo),Ie(Jo)}function E0(t){ai(Jo.current);var e=ai(Ln.current),n=Fh(e,t.type);e!==n&&(_e(Xo,t),_e(Ln,n))}function kf(t){Xo.current===t&&(Ie(Ln),Ie(Xo))}var Ne=Qr(0);function cu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nh=[];function Nf(){for(var t=0;t<nh.length;t++)nh[t]._workInProgressVersionPrimary=null;nh.length=0}var Nl=cr.ReactCurrentDispatcher,rh=cr.ReactCurrentBatchConfig,_i=0,De=null,Ke=null,tt=null,hu=!1,Ro=!1,Zo=0,YT=0;function Tt(){throw Error(B(321))}function Df(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!An(t[n],e[n]))return!1;return!0}function Mf(t,e,n,r,i,s){if(_i=s,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nl.current=t===null||t.memoizedState===null?eS:tS,t=n(r,i),Ro){s=0;do{if(Ro=!1,Zo=0,25<=s)throw Error(B(301));s+=1,tt=Ke=null,e.updateQueue=null,Nl.current=nS,t=n(r,i)}while(Ro)}if(Nl.current=du,e=Ke!==null&&Ke.next!==null,_i=0,tt=Ke=De=null,hu=!1,e)throw Error(B(300));return t}function Vf(){var t=Zo!==0;return Zo=0,t}function Mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?De.memoizedState=tt=t:tt=tt.next=t,tt}function dn(){if(Ke===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=tt===null?De.memoizedState:tt.next;if(e!==null)tt=e,Ke=t;else{if(t===null)throw Error(B(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},tt===null?De.memoizedState=tt=t:tt=tt.next=t}return tt}function ea(t,e){return typeof e=="function"?e(t):e}function ih(t){var e=dn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var f=h.lane;if((_i&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,De.lanes|=f,Ei|=f}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,An(r,e.memoizedState)||(bt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,De.lanes|=s,Ei|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sh(t){var e=dn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);An(s,e.memoizedState)||(bt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function w0(){}function T0(t,e){var n=De,r=dn(),i=e(),s=!An(r.memoizedState,i);if(s&&(r.memoizedState=i,bt=!0),r=r.queue,Of(A0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,ta(9,I0.bind(null,n,r,i,e),void 0,null),it===null)throw Error(B(349));_i&30||S0(n,e,i)}return i}function S0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function I0(t,e,n,r){e.value=n,e.getSnapshot=r,C0(e)&&R0(t)}function A0(t,e,n){return n(function(){C0(e)&&R0(t)})}function C0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!An(t,n)}catch{return!0}}function R0(t){var e=ir(t,1);e!==null&&Sn(e,t,1,-1)}function hg(t){var e=Mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:t},e.queue=t,t=t.dispatch=ZT.bind(null,De,t),[e.memoizedState,t]}function ta(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function P0(){return dn().memoizedState}function Dl(t,e,n,r){var i=Mn();De.flags|=t,i.memoizedState=ta(1|e,n,void 0,r===void 0?null:r)}function Ku(t,e,n,r){var i=dn();r=r===void 0?null:r;var s=void 0;if(Ke!==null){var o=Ke.memoizedState;if(s=o.destroy,r!==null&&Df(r,o.deps)){i.memoizedState=ta(e,n,s,r);return}}De.flags|=t,i.memoizedState=ta(1|e,n,s,r)}function dg(t,e){return Dl(8390656,8,t,e)}function Of(t,e){return Ku(2048,8,t,e)}function x0(t,e){return Ku(4,2,t,e)}function k0(t,e){return Ku(4,4,t,e)}function N0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function D0(t,e,n){return n=n!=null?n.concat([t]):null,Ku(4,4,N0.bind(null,e,t),n)}function bf(){}function M0(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Df(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function V0(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Df(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function O0(t,e,n){return _i&21?(An(n,e)||(n=Bv(),De.lanes|=n,Ei|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=n)}function XT(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=rh.transition;rh.transition={};try{t(!1),e()}finally{fe=n,rh.transition=r}}function b0(){return dn().memoizedState}function JT(t,e,n){var r=br(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},L0(t))F0(e,n);else if(n=v0(t,e,n,r),n!==null){var i=Nt();Sn(n,t,r,i),$0(n,e,r)}}function ZT(t,e,n){var r=br(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(L0(t))F0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,An(l,o)){var u=e.interleaved;u===null?(i.next=i,Rf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=v0(t,e,i,r),n!==null&&(i=Nt(),Sn(n,t,r,i),$0(n,e,r))}}function L0(t){var e=t.alternate;return t===De||e!==null&&e===De}function F0(t,e){Ro=hu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ff(t,n)}}var du={readContext:hn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},eS={readContext:hn,useCallback:function(t,e){return Mn().memoizedState=[t,e===void 0?null:e],t},useContext:hn,useEffect:dg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dl(4194308,4,N0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dl(4,2,t,e)},useMemo:function(t,e){var n=Mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=JT.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=Mn();return t={current:t},e.memoizedState=t},useState:hg,useDebugValue:bf,useDeferredValue:function(t){return Mn().memoizedState=t},useTransition:function(){var t=hg(!1),e=t[0];return t=XT.bind(null,t[1]),Mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,i=Mn();if(Ae){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),it===null)throw Error(B(349));_i&30||S0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,dg(A0.bind(null,r,s,t),[t]),r.flags|=2048,ta(9,I0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Mn(),e=it.identifierPrefix;if(Ae){var n=Jn,r=Xn;n=(r&~(1<<32-Tn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=YT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tS={readContext:hn,useCallback:M0,useContext:hn,useEffect:Of,useImperativeHandle:D0,useInsertionEffect:x0,useLayoutEffect:k0,useMemo:V0,useReducer:ih,useRef:P0,useState:function(){return ih(ea)},useDebugValue:bf,useDeferredValue:function(t){var e=dn();return O0(e,Ke.memoizedState,t)},useTransition:function(){var t=ih(ea)[0],e=dn().memoizedState;return[t,e]},useMutableSource:w0,useSyncExternalStore:T0,useId:b0,unstable_isNewReconciler:!1},nS={readContext:hn,useCallback:M0,useContext:hn,useEffect:Of,useImperativeHandle:D0,useInsertionEffect:x0,useLayoutEffect:k0,useMemo:V0,useReducer:sh,useRef:P0,useState:function(){return sh(ea)},useDebugValue:bf,useDeferredValue:function(t){var e=dn();return Ke===null?e.memoizedState=t:O0(e,Ke.memoizedState,t)},useTransition:function(){var t=sh(ea)[0],e=dn().memoizedState;return[t,e]},useMutableSource:w0,useSyncExternalStore:T0,useId:b0,unstable_isNewReconciler:!1};function vn(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qu={isMounted:function(t){return(t=t._reactInternals)?Ci(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=br(t),s=tr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Vr(t,s,i),e!==null&&(Sn(e,t,i,r),kl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=br(t),s=tr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Vr(t,s,i),e!==null&&(Sn(e,t,i,r),kl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=br(t),i=tr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Vr(t,i,r),e!==null&&(Sn(e,t,r,n),kl(e,t,r))}};function fg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ko(n,r)||!Ko(i,s):!0}function B0(t,e,n){var r=!1,i=zr,s=e.contextType;return typeof s=="object"&&s!==null?s=hn(s):(i=$t(e)?yi:Pt.current,r=e.contextTypes,s=(r=r!=null)?ps(t,i):zr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function pg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Qu.enqueueReplaceState(e,e.state,null)}function od(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Pf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=hn(s):(s=$t(e)?yi:Pt.current,i.context=ps(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(sd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Qu.enqueueReplaceState(i,i.state,null),uu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function vs(t,e){try{var n="",r=e;do n+=kw(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function oh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ad(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rS=typeof WeakMap=="function"?WeakMap:Map;function j0(t,e,n){n=tr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pu||(pu=!0,yd=r),ad(t,e)},n}function U0(t,e,n){n=tr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ad(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ad(t,e),typeof r!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function mg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=yS.bind(null,t,e,n),e.then(t,t))}function gg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=tr(-1,1),e.tag=2,Vr(n,e,1))),n.lanes|=1),t)}var iS=cr.ReactCurrentOwner,bt=!1;function kt(t,e,n,r){e.child=t===null?y0(e,null,n,r):gs(e,t.child,n,r)}function vg(t,e,n,r,i){n=n.render;var s=e.ref;return ls(e,i),r=Mf(t,e,n,r,s,i),n=Vf(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,sr(t,e,i)):(Ae&&n&&wf(e),e.flags|=1,kt(t,e,r,i),e.child)}function _g(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Hf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,z0(t,e,s,r,i)):(t=bl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ko,n(o,r)&&t.ref===e.ref)return sr(t,e,i)}return e.flags|=1,t=Lr(s,r),t.ref=e.ref,t.return=e,e.child=t}function z0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ko(s,r)&&t.ref===e.ref)if(bt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,sr(t,e,i)}return ld(t,e,n,r,i)}function H0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(ts,qt),qt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(ts,qt),qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_e(ts,qt),qt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,_e(ts,qt),qt|=r;return kt(t,e,i,n),e.child}function W0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ld(t,e,n,r,i){var s=$t(n)?yi:Pt.current;return s=ps(e,s),ls(e,i),n=Mf(t,e,n,r,s,i),r=Vf(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,sr(t,e,i)):(Ae&&r&&wf(e),e.flags|=1,kt(t,e,n,i),e.child)}function Eg(t,e,n,r,i){if($t(n)){var s=!0;iu(e)}else s=!1;if(ls(e,i),e.stateNode===null)Ml(t,e),B0(e,n,r),od(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=hn(h):(h=$t(n)?yi:Pt.current,h=ps(e,h));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&pg(e,o,r,h),Tr=!1;var y=e.memoizedState;o.state=y,uu(e,r,o,i),u=e.memoizedState,l!==r||y!==u||Ft.current||Tr?(typeof f=="function"&&(sd(e,n,f,r),u=e.memoizedState),(l=Tr||fg(e,n,l,r,y,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_0(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:vn(e.type,l),o.props=h,p=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=hn(u):(u=$t(n)?yi:Pt.current,u=ps(e,u));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||y!==u)&&pg(e,o,r,u),Tr=!1,y=e.memoizedState,o.state=y,uu(e,r,o,i);var P=e.memoizedState;l!==p||y!==P||Ft.current||Tr?(typeof T=="function"&&(sd(e,n,T,r),P=e.memoizedState),(h=Tr||fg(e,n,h,r,y,P,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return ud(t,e,n,r,s,i)}function ud(t,e,n,r,i,s){W0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&sg(e,n,!1),sr(t,e,s);r=e.stateNode,iS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=gs(e,t.child,null,s),e.child=gs(e,null,l,s)):kt(t,e,l,s),e.memoizedState=r.state,i&&sg(e,n,!0),e.child}function q0(t){var e=t.stateNode;e.pendingContext?ig(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ig(t,e.context,!1),xf(t,e.containerInfo)}function wg(t,e,n,r,i){return ms(),Sf(i),e.flags|=256,kt(t,e,n,r),e.child}var cd={dehydrated:null,treeContext:null,retryLane:0};function hd(t){return{baseLanes:t,cachePool:null,transitions:null}}function K0(t,e,n){var r=e.pendingProps,i=Ne.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_e(Ne,i&1),t===null)return rd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Xu(o,r,0,null),t=hi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hd(n),e.memoizedState=cd,t):Lf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return sS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Lr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Lr(l,s):(s=hi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?hd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=cd,r}return s=t.child,t=s.sibling,r=Lr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lf(t,e){return e=Xu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fl(t,e,n,r){return r!==null&&Sf(r),gs(e,t.child,null,n),t=Lf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=oh(Error(B(422))),fl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Xu({mode:"visible",children:r.children},i,0,null),s=hi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&gs(e,t.child,null,o),e.child.memoizedState=hd(o),e.memoizedState=cd,s);if(!(e.mode&1))return fl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(B(419)),r=oh(s,r,void 0),fl(t,e,o,r)}if(l=(o&t.childLanes)!==0,bt||l){if(r=it,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ir(t,i),Sn(r,t,i,-1))}return zf(),r=oh(Error(B(421))),fl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=vS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Kt=Mr(i.nextSibling),Qt=e,Ae=!0,En=null,t!==null&&(on[an++]=Xn,on[an++]=Jn,on[an++]=vi,Xn=t.id,Jn=t.overflow,vi=e),e=Lf(e,r.children),e.flags|=4096,e)}function Tg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),id(t.return,e,n)}function ah(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Q0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(kt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tg(t,n,e);else if(t.tag===19)Tg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&cu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ah(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&cu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ah(e,!0,n,null,s);break;case"together":ah(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ml(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ei|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Lr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Lr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function oS(t,e,n){switch(e.tag){case 3:q0(e),ms();break;case 5:E0(e);break;case 1:$t(e.type)&&iu(e);break;case 4:xf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;_e(au,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?K0(t,e,n):(_e(Ne,Ne.current&1),t=sr(t,e,n),t!==null?t.sibling:null);_e(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Q0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,H0(t,e,n)}return sr(t,e,n)}var G0,dd,Y0,X0;G0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dd=function(){};Y0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ai(Ln.current);var s=null;switch(n){case"input":i=Vh(t,i),r=Vh(t,r),s=[];break;case"select":i=Me({},i,{value:void 0}),r=Me({},r,{value:void 0}),s=[];break;case"textarea":i=Lh(t,i),r=Lh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nu)}$h(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Bo.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Bo.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&we("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};X0=function(t,e,n,r){n!==r&&(e.flags|=4)};function uo(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function aS(t,e,n){var r=e.pendingProps;switch(Tf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return $t(e.type)&&ru(),St(e),null;case 3:return r=e.stateNode,ys(),Ie(Ft),Ie(Pt),Nf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,En!==null&&(Ed(En),En=null))),dd(t,e),St(e),null;case 5:kf(e);var i=ai(Jo.current);if(n=e.type,t!==null&&e.stateNode!=null)Y0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return St(e),null}if(t=ai(Ln.current),hl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[On]=e,r[Yo]=s,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(i=0;i<go.length;i++)we(go[i],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":Nm(r,s),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},we("invalid",r);break;case"textarea":Mm(r,s),we("invalid",r)}$h(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&cl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&cl(r.textContent,l,t),i=["children",""+l]):Bo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":nl(r),Dm(r,s,!0);break;case"textarea":nl(r),Vm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=nu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Av(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[On]=e,t[Yo]=r,G0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bh(n,r),n){case"dialog":we("cancel",t),we("close",t),i=r;break;case"iframe":case"object":case"embed":we("load",t),i=r;break;case"video":case"audio":for(i=0;i<go.length;i++)we(go[i],t);i=r;break;case"source":we("error",t),i=r;break;case"img":case"image":case"link":we("error",t),we("load",t),i=r;break;case"details":we("toggle",t),i=r;break;case"input":Nm(t,r),i=Vh(t,r),we("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Me({},r,{value:void 0}),we("invalid",t);break;case"textarea":Mm(t,r),i=Lh(t,r),we("invalid",t);break;default:i=r}$h(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Pv(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Cv(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&jo(t,u):typeof u=="number"&&jo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&we("scroll",t):u!=null&&af(t,s,u,o))}switch(n){case"input":nl(t),Dm(t,r,!1);break;case"textarea":nl(t),Vm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ur(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?is(t,!!r.multiple,s,!1):r.defaultValue!=null&&is(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=nu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)X0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=ai(Jo.current),ai(Ln.current),hl(e)){if(r=e.stateNode,n=e.memoizedProps,r[On]=e,(s=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:cl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[On]=e,e.stateNode=r}return St(e),null;case 13:if(Ie(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Kt!==null&&e.mode&1&&!(e.flags&128))m0(),ms(),e.flags|=98560,s=!1;else if(s=hl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[On]=e}else ms(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),s=!1}else En!==null&&(Ed(En),En=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Ye===0&&(Ye=3):zf())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return ys(),dd(t,e),t===null&&Qo(e.stateNode.containerInfo),St(e),null;case 10:return Cf(e.type._context),St(e),null;case 17:return $t(e.type)&&ru(),St(e),null;case 19:if(Ie(Ne),s=e.memoizedState,s===null)return St(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)uo(s,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=cu(t),o!==null){for(e.flags|=128,uo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&je()>_s&&(e.flags|=128,r=!0,uo(s,!1),e.lanes=4194304)}else{if(!r)if(t=cu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),uo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ae)return St(e),null}else 2*je()-s.renderingStartTime>_s&&n!==1073741824&&(e.flags|=128,r=!0,uo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=je(),e.sibling=null,n=Ne.current,_e(Ne,r?n&1|2:n&1),e):(St(e),null);case 22:case 23:return Uf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qt&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function lS(t,e){switch(Tf(e),e.tag){case 1:return $t(e.type)&&ru(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ys(),Ie(Ft),Ie(Pt),Nf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kf(e),null;case 13:if(Ie(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));ms()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Ne),null;case 4:return ys(),null;case 10:return Cf(e.type._context),null;case 22:case 23:return Uf(),null;case 24:return null;default:return null}}var pl=!1,Ct=!1,uS=typeof WeakSet=="function"?WeakSet:Set,H=null;function es(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function fd(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var Sg=!1;function cS(t,e){if(Yh=Zl,t=n0(),Ef(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,f=0,p=t,y=null;t:for(;;){for(var T;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(T=p.firstChild)!==null;)y=p,p=T;for(;;){if(p===t)break t;if(y===n&&++h===i&&(l=o),y===s&&++f===r&&(u=o),(T=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=T}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xh={focusedElem:t,selectionRange:n},Zl=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var R=P.memoizedProps,D=P.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?R:vn(e.type,R),D);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(N){Fe(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return P=Sg,Sg=!1,P}function Po(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&fd(e,n,s)}i=i.next}while(i!==r)}}function Gu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function J0(t){var e=t.alternate;e!==null&&(t.alternate=null,J0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[Yo],delete e[ed],delete e[qT],delete e[KT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Z0(t){return t.tag===5||t.tag===3||t.tag===4}function Ig(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Z0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nu));else if(r!==4&&(t=t.child,t!==null))for(md(t,e,n),t=t.sibling;t!==null;)md(t,e,n),t=t.sibling}function gd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gd(t,e,n),t=t.sibling;t!==null;)gd(t,e,n),t=t.sibling}var ct=null,_n=!1;function vr(t,e,n){for(n=n.child;n!==null;)e_(t,e,n),n=n.sibling}function e_(t,e,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(ju,n)}catch{}switch(n.tag){case 5:Ct||es(n,e);case 6:var r=ct,i=_n;ct=null,vr(t,e,n),ct=r,_n=i,ct!==null&&(_n?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(_n?(t=ct,n=n.stateNode,t.nodeType===8?eh(t.parentNode,n):t.nodeType===1&&eh(t,n),Wo(t)):eh(ct,n.stateNode));break;case 4:r=ct,i=_n,ct=n.stateNode.containerInfo,_n=!0,vr(t,e,n),ct=r,_n=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&fd(n,e,o),i=i.next}while(i!==r)}vr(t,e,n);break;case 1:if(!Ct&&(es(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,e,l)}vr(t,e,n);break;case 21:vr(t,e,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,vr(t,e,n),Ct=r):vr(t,e,n);break;default:vr(t,e,n)}}function Ag(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new uS),e.forEach(function(r){var i=_S.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function yn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ct=l.stateNode,_n=!1;break e;case 3:ct=l.stateNode.containerInfo,_n=!0;break e;case 4:ct=l.stateNode.containerInfo,_n=!0;break e}l=l.return}if(ct===null)throw Error(B(160));e_(s,o,i),ct=null,_n=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Fe(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)t_(e,t),e=e.sibling}function t_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yn(e,t),Dn(t),r&4){try{Po(3,t,t.return),Gu(3,t)}catch(R){Fe(t,t.return,R)}try{Po(5,t,t.return)}catch(R){Fe(t,t.return,R)}}break;case 1:yn(e,t),Dn(t),r&512&&n!==null&&es(n,n.return);break;case 5:if(yn(e,t),Dn(t),r&512&&n!==null&&es(n,n.return),t.flags&32){var i=t.stateNode;try{jo(i,"")}catch(R){Fe(t,t.return,R)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Sv(i,s),Bh(l,o);var h=Bh(l,s);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?Pv(i,p):f==="dangerouslySetInnerHTML"?Cv(i,p):f==="children"?jo(i,p):af(i,f,p,h)}switch(l){case"input":Oh(i,s);break;case"textarea":Iv(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var T=s.value;T!=null?is(i,!!s.multiple,T,!1):y!==!!s.multiple&&(s.defaultValue!=null?is(i,!!s.multiple,s.defaultValue,!0):is(i,!!s.multiple,s.multiple?[]:"",!1))}i[Yo]=s}catch(R){Fe(t,t.return,R)}}break;case 6:if(yn(e,t),Dn(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(R){Fe(t,t.return,R)}}break;case 3:if(yn(e,t),Dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wo(e.containerInfo)}catch(R){Fe(t,t.return,R)}break;case 4:yn(e,t),Dn(t);break;case 13:yn(e,t),Dn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Bf=je())),r&4&&Ag(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(h=Ct)||f,yn(e,t),Ct=h):yn(e,t),Dn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(p=H=f;H!==null;){switch(y=H,T=y.child,y.tag){case 0:case 11:case 14:case 15:Po(4,y,y.return);break;case 1:es(y,y.return);var P=y.stateNode;if(typeof P.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(R){Fe(r,n,R)}}break;case 5:es(y,y.return);break;case 22:if(y.memoizedState!==null){Rg(p);continue}}T!==null?(T.return=y,H=T):Rg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Rv("display",o))}catch(R){Fe(t,t.return,R)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(R){Fe(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:yn(e,t),Dn(t),r&4&&Ag(t);break;case 21:break;default:yn(e,t),Dn(t)}}function Dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Z0(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(jo(i,""),r.flags&=-33);var s=Ig(t);gd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ig(t);md(t,l,o);break;default:throw Error(B(161))}}catch(u){Fe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hS(t,e,n){H=t,n_(t)}function n_(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var i=H,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||pl;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Ct;l=pl;var h=Ct;if(pl=o,(Ct=u)&&!h)for(H=i;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?Pg(i):u!==null?(u.return=o,H=u):Pg(i);for(;s!==null;)H=s,n_(s),s=s.sibling;H=i,pl=l,Ct=h}Cg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,H=s):Cg(t)}}function Cg(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||Gu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:vn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&cg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Wo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Ct||e.flags&512&&pd(e)}catch(y){Fe(e,e.return,y)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Rg(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Pg(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gu(4,e)}catch(u){Fe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Fe(e,i,u)}}var s=e.return;try{pd(e)}catch(u){Fe(e,s,u)}break;case 5:var o=e.return;try{pd(e)}catch(u){Fe(e,o,u)}}}catch(u){Fe(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var dS=Math.ceil,fu=cr.ReactCurrentDispatcher,Ff=cr.ReactCurrentOwner,cn=cr.ReactCurrentBatchConfig,oe=0,it=null,qe=null,pt=0,qt=0,ts=Qr(0),Ye=0,na=null,Ei=0,Yu=0,$f=0,xo=null,Ot=null,Bf=0,_s=1/0,Kn=null,pu=!1,yd=null,Or=null,ml=!1,Rr=null,mu=0,ko=0,vd=null,Vl=-1,Ol=0;function Nt(){return oe&6?je():Vl!==-1?Vl:Vl=je()}function br(t){return t.mode&1?oe&2&&pt!==0?pt&-pt:GT.transition!==null?(Ol===0&&(Ol=Bv()),Ol):(t=fe,t!==0||(t=window.event,t=t===void 0?16:Kv(t.type)),t):1}function Sn(t,e,n,r){if(50<ko)throw ko=0,vd=null,Error(B(185));ga(t,n,r),(!(oe&2)||t!==it)&&(t===it&&(!(oe&2)&&(Yu|=n),Ye===4&&Ar(t,pt)),Bt(t,r),n===1&&oe===0&&!(e.mode&1)&&(_s=je()+500,qu&&Gr()))}function Bt(t,e){var n=t.callbackNode;Gw(t,e);var r=Jl(t,t===it?pt:0);if(r===0)n!==null&&Lm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Lm(n),e===1)t.tag===0?QT(xg.bind(null,t)):d0(xg.bind(null,t)),HT(function(){!(oe&6)&&Gr()}),n=null;else{switch(jv(r)){case 1:n=df;break;case 4:n=Fv;break;case 16:n=Xl;break;case 536870912:n=$v;break;default:n=Xl}n=c_(n,r_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function r_(t,e){if(Vl=-1,Ol=0,oe&6)throw Error(B(327));var n=t.callbackNode;if(us()&&t.callbackNode!==n)return null;var r=Jl(t,t===it?pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gu(t,r);else{e=r;var i=oe;oe|=2;var s=s_();(it!==t||pt!==e)&&(Kn=null,_s=je()+500,ci(t,e));do try{mS();break}catch(l){i_(t,l)}while(!0);Af(),fu.current=s,oe=i,qe!==null?e=0:(it=null,pt=0,e=Ye)}if(e!==0){if(e===2&&(i=Wh(t),i!==0&&(r=i,e=_d(t,i))),e===1)throw n=na,ci(t,0),Ar(t,r),Bt(t,je()),n;if(e===6)Ar(t,r);else{if(i=t.current.alternate,!(r&30)&&!fS(i)&&(e=gu(t,r),e===2&&(s=Wh(t),s!==0&&(r=s,e=_d(t,s))),e===1))throw n=na,ci(t,0),Ar(t,r),Bt(t,je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:ni(t,Ot,Kn);break;case 3:if(Ar(t,r),(r&130023424)===r&&(e=Bf+500-je(),10<e)){if(Jl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Zh(ni.bind(null,t,Ot,Kn),e);break}ni(t,Ot,Kn);break;case 4:if(Ar(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Tn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dS(r/1960))-r,10<r){t.timeoutHandle=Zh(ni.bind(null,t,Ot,Kn),r);break}ni(t,Ot,Kn);break;case 5:ni(t,Ot,Kn);break;default:throw Error(B(329))}}}return Bt(t,je()),t.callbackNode===n?r_.bind(null,t):null}function _d(t,e){var n=xo;return t.current.memoizedState.isDehydrated&&(ci(t,e).flags|=256),t=gu(t,e),t!==2&&(e=Ot,Ot=n,e!==null&&Ed(e)),t}function Ed(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function fS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!An(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e){for(e&=~$f,e&=~Yu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Tn(e),r=1<<n;t[n]=-1,e&=~r}}function xg(t){if(oe&6)throw Error(B(327));us();var e=Jl(t,0);if(!(e&1))return Bt(t,je()),null;var n=gu(t,e);if(t.tag!==0&&n===2){var r=Wh(t);r!==0&&(e=r,n=_d(t,r))}if(n===1)throw n=na,ci(t,0),Ar(t,e),Bt(t,je()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ni(t,Ot,Kn),Bt(t,je()),null}function jf(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(_s=je()+500,qu&&Gr())}}function wi(t){Rr!==null&&Rr.tag===0&&!(oe&6)&&us();var e=oe;oe|=1;var n=cn.transition,r=fe;try{if(cn.transition=null,fe=1,t)return t()}finally{fe=r,cn.transition=n,oe=e,!(oe&6)&&Gr()}}function Uf(){qt=ts.current,Ie(ts)}function ci(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zT(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Tf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ru();break;case 3:ys(),Ie(Ft),Ie(Pt),Nf();break;case 5:kf(r);break;case 4:ys();break;case 13:Ie(Ne);break;case 19:Ie(Ne);break;case 10:Cf(r.type._context);break;case 22:case 23:Uf()}n=n.return}if(it=t,qe=t=Lr(t.current,null),pt=qt=e,Ye=0,na=null,$f=Yu=Ei=0,Ot=xo=null,oi!==null){for(e=0;e<oi.length;e++)if(n=oi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}oi=null}return t}function i_(t,e){do{var n=qe;try{if(Af(),Nl.current=du,hu){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hu=!1}if(_i=0,tt=Ke=De=null,Ro=!1,Zo=0,Ff.current=null,n===null||n.return===null){Ye=1,na=e,qe=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=pt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=gg(o);if(T!==null){T.flags&=-257,yg(T,o,l,s,e),T.mode&1&&mg(s,h,e),e=T,u=h;var P=e.updateQueue;if(P===null){var R=new Set;R.add(u),e.updateQueue=R}else P.add(u);break e}else{if(!(e&1)){mg(s,h,e),zf();break e}u=Error(B(426))}}else if(Ae&&l.mode&1){var D=gg(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),yg(D,o,l,s,e),Sf(vs(u,l));break e}}s=u=vs(u,l),Ye!==4&&(Ye=2),xo===null?xo=[s]:xo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=j0(s,u,e);ug(s,E);break e;case 1:l=u;var _=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Or===null||!Or.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=U0(s,l,e);ug(s,N);break e}}s=s.return}while(s!==null)}a_(n)}catch(O){e=O,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function s_(){var t=fu.current;return fu.current=du,t===null?du:t}function zf(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),it===null||!(Ei&268435455)&&!(Yu&268435455)||Ar(it,pt)}function gu(t,e){var n=oe;oe|=2;var r=s_();(it!==t||pt!==e)&&(Kn=null,ci(t,e));do try{pS();break}catch(i){i_(t,i)}while(!0);if(Af(),oe=n,fu.current=r,qe!==null)throw Error(B(261));return it=null,pt=0,Ye}function pS(){for(;qe!==null;)o_(qe)}function mS(){for(;qe!==null&&!Bw();)o_(qe)}function o_(t){var e=u_(t.alternate,t,qt);t.memoizedProps=t.pendingProps,e===null?a_(t):qe=e,Ff.current=null}function a_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lS(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,qe=null;return}}else if(n=aS(n,e,qt),n!==null){qe=n;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Ye===0&&(Ye=5)}function ni(t,e,n){var r=fe,i=cn.transition;try{cn.transition=null,fe=1,gS(t,e,n,r)}finally{cn.transition=i,fe=r}return null}function gS(t,e,n,r){do us();while(Rr!==null);if(oe&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Yw(t,s),t===it&&(qe=it=null,pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ml||(ml=!0,c_(Xl,function(){return us(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=cn.transition,cn.transition=null;var o=fe;fe=1;var l=oe;oe|=4,Ff.current=null,cS(t,n),t_(n,t),bT(Xh),Zl=!!Yh,Xh=Yh=null,t.current=n,hS(n),jw(),oe=l,fe=o,cn.transition=s}else t.current=n;if(ml&&(ml=!1,Rr=t,mu=i),s=t.pendingLanes,s===0&&(Or=null),Hw(n.stateNode),Bt(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(pu)throw pu=!1,t=yd,yd=null,t;return mu&1&&t.tag!==0&&us(),s=t.pendingLanes,s&1?t===vd?ko++:(ko=0,vd=t):ko=0,Gr(),null}function us(){if(Rr!==null){var t=jv(mu),e=cn.transition,n=fe;try{if(cn.transition=null,fe=16>t?16:t,Rr===null)var r=!1;else{if(t=Rr,Rr=null,mu=0,oe&6)throw Error(B(331));var i=oe;for(oe|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(H=h;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:Po(8,f,s)}var p=f.child;if(p!==null)p.return=f,H=p;else for(;H!==null;){f=H;var y=f.sibling,T=f.return;if(J0(f),f===h){H=null;break}if(y!==null){y.return=T,H=y;break}H=T}}}var P=s.alternate;if(P!==null){var R=P.child;if(R!==null){P.child=null;do{var D=R.sibling;R.sibling=null,R=D}while(R!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Po(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,H=E;break e}H=s.return}}var _=t.current;for(H=_;H!==null;){o=H;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,H=S;else e:for(o=_;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Gu(9,l)}}catch(O){Fe(l,l.return,O)}if(l===o){H=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,H=N;break e}H=l.return}}if(oe=i,Gr(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(ju,t)}catch{}r=!0}return r}finally{fe=n,cn.transition=e}}return!1}function kg(t,e,n){e=vs(n,e),e=j0(t,e,1),t=Vr(t,e,1),e=Nt(),t!==null&&(ga(t,1,e),Bt(t,e))}function Fe(t,e,n){if(t.tag===3)kg(t,t,n);else for(;e!==null;){if(e.tag===3){kg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Or===null||!Or.has(r))){t=vs(n,t),t=U0(e,t,1),e=Vr(e,t,1),t=Nt(),e!==null&&(ga(e,1,t),Bt(e,t));break}}e=e.return}}function yS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(pt&n)===n&&(Ye===4||Ye===3&&(pt&130023424)===pt&&500>je()-Bf?ci(t,0):$f|=n),Bt(t,e)}function l_(t,e){e===0&&(t.mode&1?(e=sl,sl<<=1,!(sl&130023424)&&(sl=4194304)):e=1);var n=Nt();t=ir(t,e),t!==null&&(ga(t,e,n),Bt(t,n))}function vS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),l_(t,n)}function _S(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),l_(t,n)}var u_;u_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ft.current)bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bt=!1,oS(t,e,n);bt=!!(t.flags&131072)}else bt=!1,Ae&&e.flags&1048576&&f0(e,ou,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ml(t,e),t=e.pendingProps;var i=ps(e,Pt.current);ls(e,n),i=Mf(null,e,r,t,i,n);var s=Vf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(s=!0,iu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Pf(e),i.updater=Qu,e.stateNode=i,i._reactInternals=e,od(e,r,t,n),e=ud(null,e,r,!0,s,n)):(e.tag=0,Ae&&s&&wf(e),kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ml(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=wS(r),t=vn(r,t),i){case 0:e=ld(null,e,r,t,n);break e;case 1:e=Eg(null,e,r,t,n);break e;case 11:e=vg(null,e,r,t,n);break e;case 14:e=_g(null,e,r,vn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),ld(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),Eg(t,e,r,i,n);case 3:e:{if(q0(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,_0(t,e),uu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=vs(Error(B(423)),e),e=wg(t,e,r,n,i);break e}else if(r!==i){i=vs(Error(B(424)),e),e=wg(t,e,r,n,i);break e}else for(Kt=Mr(e.stateNode.containerInfo.firstChild),Qt=e,Ae=!0,En=null,n=y0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ms(),r===i){e=sr(t,e,n);break e}kt(t,e,r,n)}e=e.child}return e;case 5:return E0(e),t===null&&rd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Jh(r,i)?o=null:s!==null&&Jh(r,s)&&(e.flags|=32),W0(t,e),kt(t,e,o,n),e.child;case 6:return t===null&&rd(e),null;case 13:return K0(t,e,n);case 4:return xf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=gs(e,null,r,n):kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),vg(t,e,r,i,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,_e(au,r._currentValue),r._currentValue=o,s!==null)if(An(s.value,o)){if(s.children===i.children&&!Ft.current){e=sr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=tr(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),id(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),id(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ls(e,n),i=hn(i),r=r(i),e.flags|=1,kt(t,e,r,n),e.child;case 14:return r=e.type,i=vn(r,e.pendingProps),i=vn(r.type,i),_g(t,e,r,i,n);case 15:return z0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vn(r,i),Ml(t,e),e.tag=1,$t(r)?(t=!0,iu(e)):t=!1,ls(e,n),B0(e,r,i),od(e,r,i,n),ud(null,e,r,!0,t,n);case 19:return Q0(t,e,n);case 22:return H0(t,e,n)}throw Error(B(156,e.tag))};function c_(t,e){return Lv(t,e)}function ES(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(t,e,n,r){return new ES(t,e,n,r)}function Hf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wS(t){if(typeof t=="function")return Hf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uf)return 11;if(t===cf)return 14}return 2}function Lr(t,e){var n=t.alternate;return n===null?(n=un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Hf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Wi:return hi(n.children,i,s,e);case lf:o=8,i|=8;break;case kh:return t=un(12,n,e,i|2),t.elementType=kh,t.lanes=s,t;case Nh:return t=un(13,n,e,i),t.elementType=Nh,t.lanes=s,t;case Dh:return t=un(19,n,e,i),t.elementType=Dh,t.lanes=s,t;case Ev:return Xu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vv:o=10;break e;case _v:o=9;break e;case uf:o=11;break e;case cf:o=14;break e;case wr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=un(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function hi(t,e,n,r){return t=un(7,t,r,e),t.lanes=n,t}function Xu(t,e,n,r){return t=un(22,t,r,e),t.elementType=Ev,t.lanes=n,t.stateNode={isHidden:!1},t}function lh(t,e,n){return t=un(6,t,null,e),t.lanes=n,t}function uh(t,e,n){return e=un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function TS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wf(t,e,n,r,i,s,o,l,u){return t=new TS(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=un(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pf(s),t}function SS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function h_(t){if(!t)return zr;t=t._reactInternals;e:{if(Ci(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if($t(n))return h0(t,n,e)}return e}function d_(t,e,n,r,i,s,o,l,u){return t=Wf(n,r,!0,t,i,s,o,l,u),t.context=h_(null),n=t.current,r=Nt(),i=br(n),s=tr(r,i),s.callback=e??null,Vr(n,s,i),t.current.lanes=i,ga(t,i,r),Bt(t,r),t}function Ju(t,e,n,r){var i=e.current,s=Nt(),o=br(i);return n=h_(n),e.context===null?e.context=n:e.pendingContext=n,e=tr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vr(i,e,o),t!==null&&(Sn(t,i,o,s),kl(t,i,o)),o}function yu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ng(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qf(t,e){Ng(t,e),(t=t.alternate)&&Ng(t,e)}function IS(){return null}var f_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kf(t){this._internalRoot=t}Zu.prototype.render=Kf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Ju(t,e,null,null)};Zu.prototype.unmount=Kf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wi(function(){Ju(null,t,null,null)}),e[rr]=null}};function Zu(t){this._internalRoot=t}Zu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ir.length&&e!==0&&e<Ir[n].priority;n++);Ir.splice(n,0,t),n===0&&qv(t)}};function Qf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ec(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dg(){}function AS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=yu(o);s.call(h)}}var o=d_(e,r,t,0,null,!1,!1,"",Dg);return t._reactRootContainer=o,t[rr]=o.current,Qo(t.nodeType===8?t.parentNode:t),wi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=yu(u);l.call(h)}}var u=Wf(t,0,!1,null,null,!1,!1,"",Dg);return t._reactRootContainer=u,t[rr]=u.current,Qo(t.nodeType===8?t.parentNode:t),wi(function(){Ju(e,u,n,r)}),u}function tc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=yu(o);l.call(u)}}Ju(e,o,t,i)}else o=AS(n,e,t,i,r);return yu(o)}Uv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mo(e.pendingLanes);n!==0&&(ff(e,n|1),Bt(e,je()),!(oe&6)&&(_s=je()+500,Gr()))}break;case 13:wi(function(){var r=ir(t,1);if(r!==null){var i=Nt();Sn(r,t,1,i)}}),qf(t,1)}};pf=function(t){if(t.tag===13){var e=ir(t,134217728);if(e!==null){var n=Nt();Sn(e,t,134217728,n)}qf(t,134217728)}};zv=function(t){if(t.tag===13){var e=br(t),n=ir(t,e);if(n!==null){var r=Nt();Sn(n,t,e,r)}qf(t,e)}};Hv=function(){return fe};Wv=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};Uh=function(t,e,n){switch(e){case"input":if(Oh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Wu(r);if(!i)throw Error(B(90));Tv(r),Oh(r,i)}}}break;case"textarea":Iv(t,n);break;case"select":e=n.value,e!=null&&is(t,!!n.multiple,e,!1)}};Nv=jf;Dv=wi;var CS={usingClientEntryPoint:!1,Events:[va,Gi,Wu,xv,kv,jf]},co={findFiberByHostInstance:si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RS={bundleType:co.bundleType,version:co.version,rendererPackageName:co.rendererPackageName,rendererConfig:co.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ov(t),t===null?null:t.stateNode},findFiberByHostInstance:co.findFiberByHostInstance||IS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gl.isDisabled&&gl.supportsFiber)try{ju=gl.inject(RS),bn=gl}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CS;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qf(e))throw Error(B(200));return SS(t,e,null,n)};Xt.createRoot=function(t,e){if(!Qf(t))throw Error(B(299));var n=!1,r="",i=f_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Wf(t,1,!1,null,null,n,!1,r,i),t[rr]=e.current,Qo(t.nodeType===8?t.parentNode:t),new Kf(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=Ov(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return wi(t)};Xt.hydrate=function(t,e,n){if(!ec(e))throw Error(B(200));return tc(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!Qf(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=f_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=d_(e,null,t,1,n??null,i,!1,s,o),t[rr]=e.current,Qo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Zu(e)};Xt.render=function(t,e,n){if(!ec(e))throw Error(B(200));return tc(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!ec(t))throw Error(B(40));return t._reactRootContainer?(wi(function(){tc(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};Xt.unstable_batchedUpdates=jf;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ec(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return tc(t,e,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function p_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p_)}catch(t){console.error(t)}}p_(),pv.exports=Xt;var ii=pv.exports,m_,Mg=ii;m_=Mg.createRoot,Mg.hydrateRoot;const Zn={EASY:"簡単",NORMAL:"通常",HARD:"困難",HELL:"死地"},PS={[Zn.EASY]:[25,50,75,125,250,300,350,450,550,600,800,1e3,1100,1250,1400,1600,2e3,2100,2400,2800],[Zn.NORMAL]:[50,100,150,250,500,600,750,900,1100,1200,1600,2e3,2200,2500,2800,3200,3900,4200,4900,5700],[Zn.HARD]:[75,150,225,375,750,900,1100,1400,1600,1900,2400,3e3,3400,3800,4300,4800,5900,6300,7300,8500],[Zn.HELL]:[100,200,400,500,1100,1400,1700,2100,2400,2800,3600,4500,5100,5700,6400,7200,8800,9500,10900,12700]},xS=t=>{const[e,n]=b.useState(t),r=b.useMemo(()=>{const{level:l,numCharacters:u,difficulty:h}=e;return PS[h][l-1]*u},[e]);return{settings:e,setLevel:l=>{n({...e,level:l})},setNumCharacters:l=>{n({...e,numCharacters:l})},setDifficulty:l=>{n({...e,difficulty:l})},totalExp:r}},ch=()=>L.jsx("hr",{className:"my-1"}),qn=({label:t,text:e})=>L.jsxs("p",{className:"card-text my-0",children:[L.jsx("b",{children:t}),"：",e]}),W={STR:"筋力",DEX:"敏捷",CON:"耐久",INT:"知力",WIS:"判断",CHA:"魅力"},kS=({label:t,value:e})=>{const n=Math.floor((e-10)/2),r=n>=0?`+${n}`:n.toString();return L.jsxs("div",{className:"col px-0",children:[L.jsx("p",{className:"my-0",children:L.jsx("b",{children:t})}),L.jsxs("p",{className:"my-0",children:[e,"(",r,")"]})]})},NS=({monster:t})=>{const{name:e,num:n,size:r,monsterType:i,ac:s,hp:o,move:l,cr:u,exp:h,abilities:f,actions:p,skills:y,senses:T,languages:P,specialAbilities:R}=t;return L.jsxs("div",{className:"card",children:[L.jsxs("div",{className:"card-header d-flex",children:[L.jsx("h5",{className:"card-title mb-0",children:e}),L.jsxs("span",{className:"ms-auto",children:[n,"体"]})]}),L.jsxs("div",{className:"card-body py-2",children:[L.jsxs("p",{className:"card-text my-0",children:[r,"・",i,"、中立にして悪"]}),L.jsx(ch,{}),L.jsx(qn,{label:"AC",text:s}),L.jsx(qn,{label:"hp",text:o}),L.jsx(qn,{label:"移動速度",text:l.join("、")}),L.jsx(ch,{}),Object.keys(y).length>0&&L.jsx(qn,{label:"技能",text:Object.entries(y).map(([D,E])=>`${D}+${E}`).join("、")}),L.jsx(qn,{label:"感覚",text:T.join("、")}),Object.keys(P).length>0&&L.jsx(qn,{label:"言語",text:P.join("、")}),L.jsx(qn,{label:"脅威度",text:`${u}(${h}exp)`}),L.jsx(ch,{}),L.jsx("div",{className:"row text-center",children:Object.values(W).map(D=>L.jsx(kS,{label:D,value:f[D]},D))}),L.jsx("hr",{className:"my-1"}),L.jsx("h6",{className:"card-title mt-2",children:"アクション"}),p.map(({label:D,text:E})=>L.jsx(qn,{label:D,text:E},D)),L.jsx("hr",{className:"my-1"}),R.map(({label:D,text:E})=>L.jsx(qn,{label:D,text:E},D))]})]})},DS={level:4,numCharacters:4,difficulty:Zn.NORMAL},yl=t=>t[Math.floor(Math.random()*t.length)],Fr=t=>[...Array(t).keys()],Vg={"1/8":25,"1/4":50,"1/2":100,1:200,2:450,3:700,4:1100,5:1800,6:2300,7:2900,8:3900,9:5e3,10:5900,11:7200,12:8400,13:1e4,14:11500,15:13e3,16:15e3,17:18e3,18:2e4,19:22e3,20:25e3,21:33e3,22:41e3,23:5e4,24:62e3,25:75e3,26:9e4,27:105e3,28:12e4,29:135e3,30:155e3},MS={"1/8":{baseBonus:2,ac:13,hpMin:7,hpMax:35,atBonus:3,damageMin:2,damageMax:3,save:13},"1/4":{baseBonus:2,ac:13,hpMin:36,hpMax:49,atBonus:3,damageMin:4,damageMax:5,save:13},"1/2":{baseBonus:2,ac:13,hpMin:50,hpMax:70,atBonus:3,damageMin:6,damageMax:8,save:13},1:{baseBonus:2,ac:13,hpMin:71,hpMax:85,atBonus:3,damageMin:9,damageMax:14,save:13},2:{baseBonus:2,ac:13,hpMin:86,hpMax:100,atBonus:3,damageMin:15,damageMax:20,save:13},3:{baseBonus:2,ac:13,hpMin:101,hpMax:115,atBonus:3,damageMin:21,damageMax:26,save:13},4:{baseBonus:2,ac:14,hpMin:116,hpMax:130,atBonus:4,damageMin:27,damageMax:32,save:14},5:{baseBonus:3,ac:15,hpMin:131,hpMax:145,atBonus:5,damageMin:33,damageMax:38,save:15},6:{baseBonus:3,ac:15,hpMin:146,hpMax:160,atBonus:5,damageMin:39,damageMax:44,save:15},7:{baseBonus:3,ac:15,hpMin:161,hpMax:175,atBonus:5,damageMin:45,damageMax:50,save:15},8:{baseBonus:3,ac:16,hpMin:176,hpMax:190,atBonus:5,damageMin:51,damageMax:56,save:16},9:{baseBonus:4,ac:16,hpMin:191,hpMax:205,atBonus:6,damageMin:57,damageMax:62,save:16},10:{baseBonus:4,ac:17,hpMin:206,hpMax:220,atBonus:6,damageMin:63,damageMax:68,save:17},11:{baseBonus:4,ac:17,hpMin:221,hpMax:235,atBonus:6,damageMin:69,damageMax:74,save:17},12:{baseBonus:4,ac:17,hpMin:236,hpMax:250,atBonus:6,damageMin:75,damageMax:80,save:17},13:{baseBonus:5,ac:18,hpMin:251,hpMax:265,atBonus:7,damageMin:81,damageMax:86,save:18},14:{baseBonus:5,ac:18,hpMin:266,hpMax:280,atBonus:7,damageMin:87,damageMax:92,save:18},15:{baseBonus:5,ac:18,hpMin:281,hpMax:295,atBonus:7,damageMin:93,damageMax:98,save:18},16:{baseBonus:5,ac:18,hpMin:296,hpMax:310,atBonus:7,damageMin:99,damageMax:104,save:18},17:{baseBonus:6,ac:19,hpMin:311,hpMax:325,atBonus:8,damageMin:105,damageMax:110,save:19},18:{baseBonus:6,ac:19,hpMin:326,hpMax:340,atBonus:8,damageMin:111,damageMax:116,save:19},19:{baseBonus:6,ac:19,hpMin:341,hpMax:355,atBonus:8,damageMin:117,damageMax:122,save:19},20:{baseBonus:6,ac:19,hpMin:356,hpMax:400,atBonus:8,damageMin:123,damageMax:140,save:19},21:{baseBonus:7,ac:19,hpMin:401,hpMax:445,atBonus:9,damageMin:141,damageMax:158,save:19},22:{baseBonus:7,ac:19,hpMin:446,hpMax:490,atBonus:9,damageMin:159,damageMax:176,save:19},23:{baseBonus:7,ac:19,hpMin:491,hpMax:535,atBonus:9,damageMin:177,damageMax:194,save:19},24:{baseBonus:7,ac:19,hpMin:536,hpMax:580,atBonus:9,damageMin:195,damageMax:212,save:19},25:{baseBonus:8,ac:19,hpMin:581,hpMax:625,atBonus:10,damageMin:213,damageMax:230,save:19},26:{baseBonus:8,ac:19,hpMin:626,hpMax:670,atBonus:10,damageMin:231,damageMax:248,save:19},27:{baseBonus:8,ac:19,hpMin:671,hpMax:715,atBonus:10,damageMin:249,damageMax:266,save:19},28:{baseBonus:8,ac:19,hpMin:716,hpMax:760,atBonus:10,damageMin:267,damageMax:284,save:19},29:{baseBonus:9,ac:19,hpMin:761,hpMax:805,atBonus:11,damageMin:285,damageMax:302,save:19},30:{baseBonus:9,ac:19,hpMin:806,hpMax:850,atBonus:11,damageMin:303,damageMax:320,save:19}},VS={TINY:"超小型",SMALL:"小型",MEDIUM:"中型",LARGE:"大型",HUGE:"超大型",GARGANTUAN:"巨大"},Le={ABERRATION:"異形",BEAST:"野獣",CELESTIAL:"天使",CONSTRUCT:"人造",DRAGON:"ドラゴン",ELEMENTAL:"エレメンタル",FEY:"妖精",FIEND:"悪魔",GIANT:"巨人",HUMANOID:"人型",MONSTROSITY:"怪物",OOZE:"粘体",PLANT:"植物",UNDEAD:"アンデッド"},OS=(t,e)=>n=>({...n,actions:[...n.actions,{label:t,text:e}]}),bS=(t,e)=>n=>({...n,specialAbilities:[...n.specialAbilities,{label:t,text:e}]}),LS=t=>e=>({...e,move:[...e.move,t]}),FS=t=>e=>({...e,senses:[...e.senses,t]}),$S=t=>e=>({...e,languages:[...e.languages,t]}),BS=(t,e)=>n=>({...n,abilities:{...n.abilities,[t]:n.abilities[t]+e}}),z=t=>e=>{const n={ロングソード:`攻撃+${e.toHit}、間合い5フィート、目標1つ、ヒット:${e.damage}(${e.diceNum}d6+${e.damageMod})[斬撃]ダメージ`,噛みつき:`攻撃+${e.toHit}、間合い5フィート、目標1つ、ヒット:${e.damage}(${e.diceNum}d6+${e.damageMod})[刺突]ダメージ`,メイス:`攻撃+${e.toHit}、間合い5フィート、目標1つ、ヒット:${e.damage}(${e.diceNum}d6+${e.damageMod})[殴打]ダメージ`,ロングボウ:`攻撃+${e.toHit}、間合い60フィート、目標1つ、ヒット:${e.damage}(${e.diceNum}d6+${e.damageMod})[刺突]ダメージ`,ファイアボルト:`攻撃+${e.toHit}、間合い60フィート、目標1つ、ヒット:${e.damage}(${e.diceNum}d6+${e.damageMod})[炎]ダメージ`,マジックミサイル:`必中、間合い60フィート、目標3つ、ヒット:${Math.floor(e.damage/6)+1}[力場]ダメージ`};for(const[s,o]of Object.entries(n))if(t===s)return OS(t,o)(e);const r={素早い離脱:"ボーナス・アクションで離脱・隠れ身ができる",猛進:"ボーナスアクションとして敵方向へ移動できる",連携戦闘:"敵の隣に味方がいるなら、攻撃ロールに有利を得る",大暴れ:"出目20で攻撃に成功したら追加攻撃",連携打撃:"敵の隣に味方がいるなら、追加攻撃",蛮力:"近接攻撃のダメージダイスが一つ増える",水棲:"水中移動と呼吸が可能。水中での攻撃に有利",人狼の不死身:"魔法でも銀でもない武器による[刺突][斬撃][殴打]からダメージを受けない",麻痺の爪:`攻撃がヒットした対象は難易度${e.save}の耐久力セーヴに失敗すると1分間麻痺状態になる。対象は自分のターンの終了時に再度セーヴを行い、成功すればこの効果は終了する`,誘い寄せの歌:`このモンスターの歌を聞いて、難易度${e.save}の[判断力]セーヴに失敗すると、このモンスターに対して移動する以外できない。対象は自身のターン終了時に再度セーヴを行い、成功すればこの効果は終了する`,不死特性:"毒ダメージを受けず、[消耗]状態、[毒]状態、[魅了]状態、[恐怖]状態にならない。",硬い骨:"ダメージ耐性:[刺突]、ダメージ脆弱性[殴打]",アンデッドのしぶとさ:"[光輝]ダメージ以外でヒットポイントが0になった場合、難易度（受けたダメージ+5）の耐久力セーヴに成功すれば1ヒット・ポイント残る。",慟哭の鳴き声:`30ft以内のアンデッドでないクリーチャーは難易度${e.save}の【耐久力】セーヴに失敗するとhpが1になる。成功すると${e.diceNum}d6+${e.damageMod}の[精神]ダメージを受ける。`,再生:`前のターンに[酸][火]のダメージを受けていなければ、自分のターン開始時に${Math.floor(e.hp/5)+1}ヒット・ポイント回復する`,石化の凝視:`30ft以内で自分の手番を開始したクリーチャーは難易度${e.save-5}の【耐久力】セーヴに失敗すると石化状態になる。難易度${e.save}で失敗すると拘束状態になる。再度失敗すると石化状態になる。目を逸らすことを選べば石化を免れるが、メデューサへの攻撃・防御に不利を受ける`,"キュア・ライト・ウーンズ":`(チャージ5-6)1回のアクションで${e.diceNum}d6のhpを回復する`,精密射撃:"ボーナスアクションで30ft以上遠い敵への遠隔武器攻撃に有利を得る。",かすめ飛び:"飛行によって敵の間合いから出る際に機会攻撃を誘発しない",飛びかかり:`20ft以上敵に向かって直線上に移動して攻撃をヒットさせたら、対象は難易度${e.save}の[筋力]セーヴに失敗すると伏せ状態になる。伏せ状態の敵に対して追加攻撃ができる`,尾の打撃:`攻撃がヒットした対象は難易度${e.save}の[筋力]セーヴに失敗すると伏せ状態になる。`};for(const[s,o]of Object.entries(r))if(t===s)return bS(t,o)(e);if(t.endsWith("ft"))return LS(t)(e);if(t.startsWith("暗視"))return FS(t)(e);if(t.endsWith("語"))return $S(t)(e);const i={"筋力＋":[W.STR,4],"筋力＋＋":[W.STR,8],"筋力－":[W.STR,-4],"筋力－－":[W.STR,-8],"敏捷＋":[W.DEX,4],"敏捷＋＋":[W.DEX,8],"敏捷－":[W.DEX,-4],"敏捷－－":[W.DEX,-8],"耐久＋":[W.CON,4],"耐久＋＋":[W.CON,8],"耐久－":[W.CON,-4],"耐久－－":[W.CON,-8],"知力＋":[W.INT,4],"知力＋＋":[W.INT,8],"知力－":[W.INT,-4],"知力－－":[W.INT,-8],"判断＋":[W.WIS,4],"判断＋＋":[W.WIS,8],"判断－":[W.WIS,-4],"判断－－":[W.WIS,-8],"魅力＋":[W.CHA,4],"魅力＋＋":[W.CHA,8],"魅力－":[W.CHA,-4],"魅力－－":[W.CHA,-8]};if(t in i){const[s,o]=i[t];return BS(s,o)(e)}throw new Error(`Unknown label: ${t}`)},ue=(...t)=>e=>t.reduce((n,r)=>r(n),e),Se={TYPE:"type",TERRAIN:"terrain",RACE:"race",CLASS:"class"},ke={COMMON:"common",UNCOMMON:"uncommon",RARE:"rare",MYTHIC:"mythic"},jS={rarity:ke.COMMON,monsterType:Le.HUMANOID,templateType:Se.RACE},US={ゴブリン:["素早い離脱"],オーク:["猛進"],コボルド:["連携戦闘"]},zS=Object.entries(US).map(([t,e])=>({...jS,name:t,enhancer:ue(...e.map(n=>z(n)))})),HS={rarity:ke.UNCOMMON,monsterType:Le.HUMANOID,templateType:Se.RACE},WS={ノール:["大暴れ"],ホブゴブリン:["連携打撃"],バグベア:["蛮力"],マーフォーク:["水泳30ft"],サハギン:["水泳30ft"],カエルフォーク:["水泳30ft"],リザードフォーク:["水泳30ft"],ワーウルフ:["人狼の不死身"],ワーラット:["人狼の不死身"],ワーベア:["人狼の不死身"]},qS=Object.entries(WS).map(([t,e])=>({...HS,name:t,enhancer:ue(...e.map(n=>z(n)))})),KS={rarity:ke.COMMON,templateType:Se.RACE,monsterType:Le.UNDEAD},QS={グール:["麻痺の爪"],スケルトン:["硬い骨"],ゾンビ:["アンデッドのしぶとさ"]},GS=Object.entries(QS).map(([t,e])=>({...KS,name:t,enhancer:ue(...e.map(n=>z(n)))})),YS=[{name:"バンシー",rarity:ke.RARE,templateType:Se.RACE,monsterType:Le.UNDEAD,enhancer:ue(z("飛行40ft"),z("慟哭の鳴き声"))}],XS=[{name:"トロール",templateType:Se.RACE,rarity:ke.UNCOMMON,monsterType:Le.GIANT,enhancer:ue(z("再生"))}],vl={rarity:ke.COMMON,templateType:Se.CLASS},JS=[{...vl,name:"ソルジャー",enhancer:ue(z("連携戦闘"),z("ロングソード"),z("筋力＋"))},{...vl,name:"プリースト",enhancer:ue(z("メイス"),z("キュア・ライト・ウーンズ"),z("判断＋"))},{...vl,name:"アーチャー",enhancer:ue(z("ロングボウ"),z("精密射撃"),z("敏捷＋"))},{...vl,name:"メイジ",enhancer:ue(z("ファイアボルト"),z("マジックミサイル"),z("知力＋"))}],ZS=[{name:"アンデッド",templateType:Se.TYPE,monsterType:Le.UNDEAD,rarity:ke.COMMON,enhancer:ue(z("20ft"),z("不死特性"),z("暗視60'"))},{name:"人型",templateType:Se.TYPE,monsterType:Le.HUMANOID,rarity:ke.COMMON,enhancer:ue(z("30ft"),z("共通語"))},{name:"野獣",templateType:Se.TYPE,monsterType:Le.BEAST,rarity:ke.COMMON,enhancer:ue(z("40ft"),z("暗視60'"))},{name:"巨人",templateType:Se.TYPE,monsterType:Le.GIANT,rarity:ke.UNCOMMON,enhancer:ue(z("40ft"),z("巨人語"),z("筋力＋＋"),z("知力－－"))},{name:"怪物",templateType:Se.TYPE,monsterType:Le.MONSTROSITY,rarity:ke.UNCOMMON,enhancer:ue(z("30ft"),z("暗視60'"))},{name:"妖精",templateType:Se.TYPE,monsterType:Le.FEY,rarity:ke.UNCOMMON,enhancer:ue(z("30ft"),z("暗視60'"))},{name:"植物",templateType:Se.TYPE,monsterType:Le.PLANT,rarity:ke.UNCOMMON,enhancer:ue(z("30ft"),z("暗視60'"))},{name:"エレメンタル",templateType:Se.TYPE,monsterType:Le.ELEMENTAL,rarity:ke.UNCOMMON,enhancer:ue(z("30ft"),z("暗視60'"))},{name:"粘体",templateType:Se.TYPE,monsterType:Le.OOZE,rarity:ke.UNCOMMON,enhancer:ue(z("20ft"),z("不死特性"),z("暗視60'"))},{name:"異形",templateType:Se.TYPE,monsterType:Le.ABERRATION,rarity:ke.UNCOMMON,enhancer:ue(z("30ft"),z("暗視60'"))},{name:"悪魔",templateType:Se.TYPE,monsterType:Le.FIEND,rarity:ke.RARE,enhancer:ue(z("30ft"),z("暗視60'"))},{name:"天使",templateType:Se.TYPE,monsterType:Le.CELESTIAL,rarity:ke.RARE,enhancer:ue(z("飛行60ft"))},{name:"ドラゴン",templateType:Se.TYPE,monsterType:Le.DRAGON,rarity:ke.RARE,enhancer:ue(z("飛行60ft"))},{name:"人造",templateType:Se.TYPE,monsterType:Le.CONSTRUCT,rarity:ke.RARE,enhancer:ue(z("20ft"),z("不死特性"),z("暗視60'"))}],Og={templateType:Se.RACE,rarity:ke.COMMON,monsterType:Le.MONSTROSITY},eI=[{...Og,name:"ハーピー",enhancer:ue(z("飛行40ft"),z("誘い寄せの歌"),z("共通語"))},{...Og,name:"メデューサ",enhancer:ue(z("石化の凝視"),z("暗視60フィート"),z("共通語"))}],$i={rarity:ke.COMMON,templateType:Se.RACE,monsterType:Le.BEAST},tI=[{...$i,name:"アウル",enhancer:ue(z("かすめ飛び"),z("飛行60ft"))},{...$i,name:"イーグル",enhancer:ue(z("かすめ飛び"),z("飛行60ft"))},{...$i,name:"ヴァルチャー",enhancer:ue(z("連携戦闘"),z("飛行60ft"))},{...$i,name:"ウィーゼル",enhancer:ue(z("敏捷＋＋"),z("筋力ー"))},{...$i,name:"アロサウルス",enhancer:ue(z("飛びかかり"),z("噛みつき"))},{...$i,name:"アンキロサウルス",enhancer:ue(z("尾の打撃"))}],hh=[...zS,...qS,...GS,...YS,...XS,...JS,...ZS,...eI,...tI];var bg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},nI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},y_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let y=(l&15)<<2|h>>6,T=h&63;u||(T=64,o||(y=64)),r.push(n[f],n[p],n[y],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(g_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||p==null)throw new rI;const y=s<<2|l>>4;if(r.push(y),h!==64){const T=l<<4&240|h>>2;if(r.push(T),p!==64){const P=h<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iI=function(t){const e=g_(t);return y_.encodeByteArray(e,!0)},vu=function(t){return iI(t).replace(/\./g,"")},sI=function(t){try{return y_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=()=>oI().__FIREBASE_DEFAULTS__,lI=()=>{if(typeof process>"u"||typeof bg>"u")return;const t=bg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sI(t[1]);return e&&JSON.parse(e)},Gf=()=>{try{return aI()||lI()||uI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cI=t=>{var e,n;return(n=(e=Gf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hI=t=>{const e=cI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},v_=()=>{var t;return(t=Gf())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vu(JSON.stringify(n)),vu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mI(){var t;const e=(t=Gf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gI(){return!mI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yI(){try{return typeof indexedDB=="object"}catch{return!1}}function vI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="FirebaseError";class bs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_I,Object.setPrototypeOf(this,bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,__.prototype.create)}}class __{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?EI(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new bs(i,l,r)}}function EI(t,e){return t.replace(wI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const wI=/\{\$([^}]+)}/g;function wd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Lg(s)&&Lg(o)){if(!wd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Lg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t){return t&&t._delegate?t._delegate:t}class ra{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(II(e))try{this.getOrInitializeService({instanceIdentifier:ri})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ri){return this.instances.has(e)}getOptions(e=ri){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ri){return this.component?this.component.multipleInstances?e:ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SI(t){return t===ri?void 0:t}function II(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const CI={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},RI=se.INFO,PI={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},xI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=PI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class E_{constructor(e){this.name=e,this._logLevel=RI,this._logHandler=xI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const kI=(t,e)=>e.some(n=>t instanceof n);let Fg,$g;function NI(){return Fg||(Fg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DI(){return $g||($g=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const w_=new WeakMap,Td=new WeakMap,T_=new WeakMap,dh=new WeakMap,Yf=new WeakMap;function MI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n($r(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&w_.set(n,t)}).catch(()=>{}),Yf.set(e,t),e}function VI(t){if(Td.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Td.set(t,e)}let Sd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Td.get(t);if(e==="objectStoreNames")return t.objectStoreNames||T_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OI(t){Sd=t(Sd)}function bI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fh(this),e,...n);return T_.set(r,e.sort?e.sort():[e]),$r(r)}:DI().includes(t)?function(...e){return t.apply(fh(this),e),$r(w_.get(this))}:function(...e){return $r(t.apply(fh(this),e))}}function LI(t){return typeof t=="function"?bI(t):(t instanceof IDBTransaction&&VI(t),kI(t,NI())?new Proxy(t,Sd):t)}function $r(t){if(t instanceof IDBRequest)return MI(t);if(dh.has(t))return dh.get(t);const e=LI(t);return e!==t&&(dh.set(t,e),Yf.set(e,t)),e}const fh=t=>Yf.get(t);function FI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=$r(o);return r&&o.addEventListener("upgradeneeded",u=>{r($r(o.result),u.oldVersion,u.newVersion,$r(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const $I=["get","getKey","getAll","getAllKeys","count"],BI=["put","add","delete","clear"],ph=new Map;function Bg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ph.get(e))return ph.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=BI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$I.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return ph.set(e,s),s}OI(t=>({...t,get:(e,n,r)=>Bg(e,n)||t.get(e,n,r),has:(e,n)=>!!Bg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function UI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Id="@firebase/app",jg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new E_("@firebase/app"),zI="@firebase/app-compat",HI="@firebase/analytics-compat",WI="@firebase/analytics",qI="@firebase/app-check-compat",KI="@firebase/app-check",QI="@firebase/auth",GI="@firebase/auth-compat",YI="@firebase/database",XI="@firebase/data-connect",JI="@firebase/database-compat",ZI="@firebase/functions",eA="@firebase/functions-compat",tA="@firebase/installations",nA="@firebase/installations-compat",rA="@firebase/messaging",iA="@firebase/messaging-compat",sA="@firebase/performance",oA="@firebase/performance-compat",aA="@firebase/remote-config",lA="@firebase/remote-config-compat",uA="@firebase/storage",cA="@firebase/storage-compat",hA="@firebase/firestore",dA="@firebase/vertexai-preview",fA="@firebase/firestore-compat",pA="firebase",mA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="[DEFAULT]",gA={[Id]:"fire-core",[zI]:"fire-core-compat",[WI]:"fire-analytics",[HI]:"fire-analytics-compat",[KI]:"fire-app-check",[qI]:"fire-app-check-compat",[QI]:"fire-auth",[GI]:"fire-auth-compat",[YI]:"fire-rtdb",[XI]:"fire-data-connect",[JI]:"fire-rtdb-compat",[ZI]:"fire-fn",[eA]:"fire-fn-compat",[tA]:"fire-iid",[nA]:"fire-iid-compat",[rA]:"fire-fcm",[iA]:"fire-fcm-compat",[sA]:"fire-perf",[oA]:"fire-perf-compat",[aA]:"fire-rc",[lA]:"fire-rc-compat",[uA]:"fire-gcs",[cA]:"fire-gcs-compat",[hA]:"fire-fst",[fA]:"fire-fst-compat",[dA]:"fire-vertex","fire-js":"fire-js",[pA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=new Map,yA=new Map,Cd=new Map;function Ug(t,e){try{t.container.addComponent(e)}catch(n){or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Eu(t){const e=t.name;if(Cd.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;Cd.set(e,t);for(const n of _u.values())Ug(n,t);for(const n of yA.values())Ug(n,t);return!0}function vA(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new __("app","Firebase",_A);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=mA;function S_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ad,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Br.create("bad-app-name",{appName:String(i)});if(n||(n=v_()),!n)throw Br.create("no-options");const s=_u.get(i);if(s){if(wd(n,s.options)&&wd(r,s.config))return s;throw Br.create("duplicate-app",{appName:i})}const o=new AI(i);for(const u of Cd.values())o.addComponent(u);const l=new EA(n,r,o);return _u.set(i,l),l}function TA(t=Ad){const e=_u.get(t);if(!e&&t===Ad&&v_())return S_();if(!e)throw Br.create("no-app",{appName:t});return e}function cs(t,e,n){var r;let i=(r=gA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(l.join(" "));return}Eu(new ra(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="firebase-heartbeat-database",IA=1,ia="firebase-heartbeat-store";let mh=null;function I_(){return mh||(mh=FI(SA,IA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ia)}catch(n){console.warn(n)}}}}).catch(t=>{throw Br.create("idb-open",{originalErrorMessage:t.message})})),mh}async function AA(t){try{const n=(await I_()).transaction(ia),r=await n.objectStore(ia).get(A_(t));return await n.done,r}catch(e){if(e instanceof bs)or.warn(e.message);else{const n=Br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});or.warn(n.message)}}}async function zg(t,e){try{const r=(await I_()).transaction(ia,"readwrite");await r.objectStore(ia).put(e,A_(t)),await r.done}catch(n){if(n instanceof bs)or.warn(n.message);else{const r=Br.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});or.warn(r.message)}}}function A_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=1024,RA=30*24*60*60*1e3;class PA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Hg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=RA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Hg(),{heartbeatsToSend:r,unsentEntries:i}=xA(this._heartbeatsCache.heartbeats),s=vu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return or.warn(n),""}}}function Hg(){return new Date().toISOString().substring(0,10)}function xA(t,e=CA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Wg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class kA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yI()?vI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Wg(t){return vu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t){Eu(new ra("platform-logger",e=>new jI(e),"PRIVATE")),Eu(new ra("heartbeat",e=>new PA(e),"PRIVATE")),cs(Id,jg,t),cs(Id,jg,"esm2017"),cs("fire-js","")}NA("");var qg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var di,C_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,m){function w(){}w.prototype=m.prototype,v.D=m.prototype,v.prototype=new w,v.prototype.constructor=v,v.C=function(I,C,x){for(var A=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)A[Re-2]=arguments[Re];return m.prototype[C].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,m,w){w||(w=0);var I=Array(16);if(typeof m=="string")for(var C=0;16>C;++C)I[C]=m.charCodeAt(w++)|m.charCodeAt(w++)<<8|m.charCodeAt(w++)<<16|m.charCodeAt(w++)<<24;else for(C=0;16>C;++C)I[C]=m[w++]|m[w++]<<8|m[w++]<<16|m[w++]<<24;m=v.g[0],w=v.g[1],C=v.g[2];var x=v.g[3],A=m+(x^w&(C^x))+I[0]+3614090360&4294967295;m=w+(A<<7&4294967295|A>>>25),A=x+(C^m&(w^C))+I[1]+3905402710&4294967295,x=m+(A<<12&4294967295|A>>>20),A=C+(w^x&(m^w))+I[2]+606105819&4294967295,C=x+(A<<17&4294967295|A>>>15),A=w+(m^C&(x^m))+I[3]+3250441966&4294967295,w=C+(A<<22&4294967295|A>>>10),A=m+(x^w&(C^x))+I[4]+4118548399&4294967295,m=w+(A<<7&4294967295|A>>>25),A=x+(C^m&(w^C))+I[5]+1200080426&4294967295,x=m+(A<<12&4294967295|A>>>20),A=C+(w^x&(m^w))+I[6]+2821735955&4294967295,C=x+(A<<17&4294967295|A>>>15),A=w+(m^C&(x^m))+I[7]+4249261313&4294967295,w=C+(A<<22&4294967295|A>>>10),A=m+(x^w&(C^x))+I[8]+1770035416&4294967295,m=w+(A<<7&4294967295|A>>>25),A=x+(C^m&(w^C))+I[9]+2336552879&4294967295,x=m+(A<<12&4294967295|A>>>20),A=C+(w^x&(m^w))+I[10]+4294925233&4294967295,C=x+(A<<17&4294967295|A>>>15),A=w+(m^C&(x^m))+I[11]+2304563134&4294967295,w=C+(A<<22&4294967295|A>>>10),A=m+(x^w&(C^x))+I[12]+1804603682&4294967295,m=w+(A<<7&4294967295|A>>>25),A=x+(C^m&(w^C))+I[13]+4254626195&4294967295,x=m+(A<<12&4294967295|A>>>20),A=C+(w^x&(m^w))+I[14]+2792965006&4294967295,C=x+(A<<17&4294967295|A>>>15),A=w+(m^C&(x^m))+I[15]+1236535329&4294967295,w=C+(A<<22&4294967295|A>>>10),A=m+(C^x&(w^C))+I[1]+4129170786&4294967295,m=w+(A<<5&4294967295|A>>>27),A=x+(w^C&(m^w))+I[6]+3225465664&4294967295,x=m+(A<<9&4294967295|A>>>23),A=C+(m^w&(x^m))+I[11]+643717713&4294967295,C=x+(A<<14&4294967295|A>>>18),A=w+(x^m&(C^x))+I[0]+3921069994&4294967295,w=C+(A<<20&4294967295|A>>>12),A=m+(C^x&(w^C))+I[5]+3593408605&4294967295,m=w+(A<<5&4294967295|A>>>27),A=x+(w^C&(m^w))+I[10]+38016083&4294967295,x=m+(A<<9&4294967295|A>>>23),A=C+(m^w&(x^m))+I[15]+3634488961&4294967295,C=x+(A<<14&4294967295|A>>>18),A=w+(x^m&(C^x))+I[4]+3889429448&4294967295,w=C+(A<<20&4294967295|A>>>12),A=m+(C^x&(w^C))+I[9]+568446438&4294967295,m=w+(A<<5&4294967295|A>>>27),A=x+(w^C&(m^w))+I[14]+3275163606&4294967295,x=m+(A<<9&4294967295|A>>>23),A=C+(m^w&(x^m))+I[3]+4107603335&4294967295,C=x+(A<<14&4294967295|A>>>18),A=w+(x^m&(C^x))+I[8]+1163531501&4294967295,w=C+(A<<20&4294967295|A>>>12),A=m+(C^x&(w^C))+I[13]+2850285829&4294967295,m=w+(A<<5&4294967295|A>>>27),A=x+(w^C&(m^w))+I[2]+4243563512&4294967295,x=m+(A<<9&4294967295|A>>>23),A=C+(m^w&(x^m))+I[7]+1735328473&4294967295,C=x+(A<<14&4294967295|A>>>18),A=w+(x^m&(C^x))+I[12]+2368359562&4294967295,w=C+(A<<20&4294967295|A>>>12),A=m+(w^C^x)+I[5]+4294588738&4294967295,m=w+(A<<4&4294967295|A>>>28),A=x+(m^w^C)+I[8]+2272392833&4294967295,x=m+(A<<11&4294967295|A>>>21),A=C+(x^m^w)+I[11]+1839030562&4294967295,C=x+(A<<16&4294967295|A>>>16),A=w+(C^x^m)+I[14]+4259657740&4294967295,w=C+(A<<23&4294967295|A>>>9),A=m+(w^C^x)+I[1]+2763975236&4294967295,m=w+(A<<4&4294967295|A>>>28),A=x+(m^w^C)+I[4]+1272893353&4294967295,x=m+(A<<11&4294967295|A>>>21),A=C+(x^m^w)+I[7]+4139469664&4294967295,C=x+(A<<16&4294967295|A>>>16),A=w+(C^x^m)+I[10]+3200236656&4294967295,w=C+(A<<23&4294967295|A>>>9),A=m+(w^C^x)+I[13]+681279174&4294967295,m=w+(A<<4&4294967295|A>>>28),A=x+(m^w^C)+I[0]+3936430074&4294967295,x=m+(A<<11&4294967295|A>>>21),A=C+(x^m^w)+I[3]+3572445317&4294967295,C=x+(A<<16&4294967295|A>>>16),A=w+(C^x^m)+I[6]+76029189&4294967295,w=C+(A<<23&4294967295|A>>>9),A=m+(w^C^x)+I[9]+3654602809&4294967295,m=w+(A<<4&4294967295|A>>>28),A=x+(m^w^C)+I[12]+3873151461&4294967295,x=m+(A<<11&4294967295|A>>>21),A=C+(x^m^w)+I[15]+530742520&4294967295,C=x+(A<<16&4294967295|A>>>16),A=w+(C^x^m)+I[2]+3299628645&4294967295,w=C+(A<<23&4294967295|A>>>9),A=m+(C^(w|~x))+I[0]+4096336452&4294967295,m=w+(A<<6&4294967295|A>>>26),A=x+(w^(m|~C))+I[7]+1126891415&4294967295,x=m+(A<<10&4294967295|A>>>22),A=C+(m^(x|~w))+I[14]+2878612391&4294967295,C=x+(A<<15&4294967295|A>>>17),A=w+(x^(C|~m))+I[5]+4237533241&4294967295,w=C+(A<<21&4294967295|A>>>11),A=m+(C^(w|~x))+I[12]+1700485571&4294967295,m=w+(A<<6&4294967295|A>>>26),A=x+(w^(m|~C))+I[3]+2399980690&4294967295,x=m+(A<<10&4294967295|A>>>22),A=C+(m^(x|~w))+I[10]+4293915773&4294967295,C=x+(A<<15&4294967295|A>>>17),A=w+(x^(C|~m))+I[1]+2240044497&4294967295,w=C+(A<<21&4294967295|A>>>11),A=m+(C^(w|~x))+I[8]+1873313359&4294967295,m=w+(A<<6&4294967295|A>>>26),A=x+(w^(m|~C))+I[15]+4264355552&4294967295,x=m+(A<<10&4294967295|A>>>22),A=C+(m^(x|~w))+I[6]+2734768916&4294967295,C=x+(A<<15&4294967295|A>>>17),A=w+(x^(C|~m))+I[13]+1309151649&4294967295,w=C+(A<<21&4294967295|A>>>11),A=m+(C^(w|~x))+I[4]+4149444226&4294967295,m=w+(A<<6&4294967295|A>>>26),A=x+(w^(m|~C))+I[11]+3174756917&4294967295,x=m+(A<<10&4294967295|A>>>22),A=C+(m^(x|~w))+I[2]+718787259&4294967295,C=x+(A<<15&4294967295|A>>>17),A=w+(x^(C|~m))+I[9]+3951481745&4294967295,v.g[0]=v.g[0]+m&4294967295,v.g[1]=v.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,v.g[2]=v.g[2]+C&4294967295,v.g[3]=v.g[3]+x&4294967295}r.prototype.u=function(v,m){m===void 0&&(m=v.length);for(var w=m-this.blockSize,I=this.B,C=this.h,x=0;x<m;){if(C==0)for(;x<=w;)i(this,v,x),x+=this.blockSize;if(typeof v=="string"){for(;x<m;)if(I[C++]=v.charCodeAt(x++),C==this.blockSize){i(this,I),C=0;break}}else for(;x<m;)if(I[C++]=v[x++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=m},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var m=1;m<v.length-8;++m)v[m]=0;var w=8*this.o;for(m=v.length-8;m<v.length;++m)v[m]=w&255,w/=256;for(this.u(v),v=Array(16),m=w=0;4>m;++m)for(var I=0;32>I;I+=8)v[w++]=this.g[m]>>>I&255;return v};function s(v,m){var w=l;return Object.prototype.hasOwnProperty.call(w,v)?w[v]:w[v]=m(v)}function o(v,m){this.h=m;for(var w=[],I=!0,C=v.length-1;0<=C;C--){var x=v[C]|0;I&&x==m||(w[C]=x,I=!1)}this.g=w}var l={};function u(v){return-128<=v&&128>v?s(v,function(m){return new o([m|0],0>m?-1:0)}):new o([v|0],0>v?-1:0)}function h(v){if(isNaN(v)||!isFinite(v))return p;if(0>v)return D(h(-v));for(var m=[],w=1,I=0;v>=w;I++)m[I]=v/w|0,w*=4294967296;return new o(m,0)}function f(v,m){if(v.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(v.charAt(0)=="-")return D(f(v.substring(1),m));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=h(Math.pow(m,8)),I=p,C=0;C<v.length;C+=8){var x=Math.min(8,v.length-C),A=parseInt(v.substring(C,C+x),m);8>x?(x=h(Math.pow(m,x)),I=I.j(x).add(h(A))):(I=I.j(w),I=I.add(h(A)))}return I}var p=u(0),y=u(1),T=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-D(this).m();for(var v=0,m=1,w=0;w<this.g.length;w++){var I=this.i(w);v+=(0<=I?I:4294967296+I)*m,m*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(P(this))return"0";if(R(this))return"-"+D(this).toString(v);for(var m=h(Math.pow(v,6)),w=this,I="";;){var C=N(w,m).g;w=E(w,C.j(m));var x=((0<w.g.length?w.g[0]:w.h)>>>0).toString(v);if(w=C,P(w))return x+I;for(;6>x.length;)x="0"+x;I=x+I}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function P(v){if(v.h!=0)return!1;for(var m=0;m<v.g.length;m++)if(v.g[m]!=0)return!1;return!0}function R(v){return v.h==-1}t.l=function(v){return v=E(this,v),R(v)?-1:P(v)?0:1};function D(v){for(var m=v.g.length,w=[],I=0;I<m;I++)w[I]=~v.g[I];return new o(w,~v.h).add(y)}t.abs=function(){return R(this)?D(this):this},t.add=function(v){for(var m=Math.max(this.g.length,v.g.length),w=[],I=0,C=0;C<=m;C++){var x=I+(this.i(C)&65535)+(v.i(C)&65535),A=(x>>>16)+(this.i(C)>>>16)+(v.i(C)>>>16);I=A>>>16,x&=65535,A&=65535,w[C]=A<<16|x}return new o(w,w[w.length-1]&-2147483648?-1:0)};function E(v,m){return v.add(D(m))}t.j=function(v){if(P(this)||P(v))return p;if(R(this))return R(v)?D(this).j(D(v)):D(D(this).j(v));if(R(v))return D(this.j(D(v)));if(0>this.l(T)&&0>v.l(T))return h(this.m()*v.m());for(var m=this.g.length+v.g.length,w=[],I=0;I<2*m;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<v.g.length;C++){var x=this.i(I)>>>16,A=this.i(I)&65535,Re=v.i(C)>>>16,Zt=v.i(C)&65535;w[2*I+2*C]+=A*Zt,_(w,2*I+2*C),w[2*I+2*C+1]+=x*Zt,_(w,2*I+2*C+1),w[2*I+2*C+1]+=A*Re,_(w,2*I+2*C+1),w[2*I+2*C+2]+=x*Re,_(w,2*I+2*C+2)}for(I=0;I<m;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=m;I<2*m;I++)w[I]=0;return new o(w,0)};function _(v,m){for(;(v[m]&65535)!=v[m];)v[m+1]+=v[m]>>>16,v[m]&=65535,m++}function S(v,m){this.g=v,this.h=m}function N(v,m){if(P(m))throw Error("division by zero");if(P(v))return new S(p,p);if(R(v))return m=N(D(v),m),new S(D(m.g),D(m.h));if(R(m))return m=N(v,D(m)),new S(D(m.g),m.h);if(30<v.g.length){if(R(v)||R(m))throw Error("slowDivide_ only works with positive integers.");for(var w=y,I=m;0>=I.l(v);)w=O(w),I=O(I);var C=M(w,1),x=M(I,1);for(I=M(I,2),w=M(w,2);!P(I);){var A=x.add(I);0>=A.l(v)&&(C=C.add(w),x=A),I=M(I,1),w=M(w,1)}return m=E(v,C.j(m)),new S(C,m)}for(C=p;0<=v.l(m);){for(w=Math.max(1,Math.floor(v.m()/m.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),x=h(w),A=x.j(m);R(A)||0<A.l(v);)w-=I,x=h(w),A=x.j(m);P(x)&&(x=y),C=C.add(x),v=E(v,A)}return new S(C,v)}t.A=function(v){return N(this,v).h},t.and=function(v){for(var m=Math.max(this.g.length,v.g.length),w=[],I=0;I<m;I++)w[I]=this.i(I)&v.i(I);return new o(w,this.h&v.h)},t.or=function(v){for(var m=Math.max(this.g.length,v.g.length),w=[],I=0;I<m;I++)w[I]=this.i(I)|v.i(I);return new o(w,this.h|v.h)},t.xor=function(v){for(var m=Math.max(this.g.length,v.g.length),w=[],I=0;I<m;I++)w[I]=this.i(I)^v.i(I);return new o(w,this.h^v.h)};function O(v){for(var m=v.g.length+1,w=[],I=0;I<m;I++)w[I]=v.i(I)<<1|v.i(I-1)>>>31;return new o(w,v.h)}function M(v,m){var w=m>>5;m%=32;for(var I=v.g.length-w,C=[],x=0;x<I;x++)C[x]=0<m?v.i(x+w)>>>m|v.i(x+w+1)<<32-m:v.i(x+w);return new o(C,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,C_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,di=o}).apply(typeof qg<"u"?qg:typeof self<"u"?self:typeof window<"u"?window:{});var _l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R_,yo,P_,Ll,Rd,x_,k_,N_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,d){return a==Array.prototype||a==Object.prototype||(a[c]=d.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof _l=="object"&&_l];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var d=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var k=a[g];if(!(k in d))break e;d=d[k]}a=a[a.length-1],g=d[a],c=c(g),c!=g&&c!=null&&e(d,a,{configurable:!0,writable:!0,value:c})}}function s(a,c){a instanceof String&&(a+="");var d=0,g=!1,k={next:function(){if(!g&&d<a.length){var V=d++;return{value:c(V,a[V]),done:!1}}return g=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}i("Array.prototype.values",function(a){return a||function(){return s(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function h(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,d){return a.call.apply(a.bind,arguments)}function p(a,c,d){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,g),a.apply(c,k)}}return function(){return a.apply(c,arguments)}}function y(a,c,d){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function T(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function P(a,c){function d(){}d.prototype=c.prototype,a.aa=c.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(g,k,V){for(var j=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)j[ge-2]=arguments[ge];return c.prototype[k].apply(g,j)}}function R(a){const c=a.length;if(0<c){const d=Array(c);for(let g=0;g<c;g++)d[g]=a[g];return d}return[]}function D(a,c){for(let d=1;d<arguments.length;d++){const g=arguments[d];if(u(g)){const k=a.length||0,V=g.length||0;a.length=k+V;for(let j=0;j<V;j++)a[k+j]=g[j]}else a.push(g)}}class E{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function _(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function N(a){return N[" "](a),a}N[" "]=function(){};var O=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(a,c,d){for(const g in a)c.call(d,a[g],g,a)}function v(a,c){for(const d in a)c.call(void 0,a[d],d,a)}function m(a){const c={};for(const d in a)c[d]=a[d];return c}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,c){let d,g;for(let k=1;k<arguments.length;k++){g=arguments[k];for(d in g)a[d]=g[d];for(let V=0;V<w.length;V++)d=w[V],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function C(a){var c=1;a=a.split(":");const d=[];for(;0<c&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(":")),d}function x(a){l.setTimeout(()=>{throw a},0)}function A(){var a=K;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class Re{constructor(){this.h=this.g=null}add(c,d){const g=Zt.get();g.set(c,d),this.h?this.h.next=g:this.g=g,this.h=g}}var Zt=new E(()=>new Rn,a=>a.reset());class Rn{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Pe,U=!1,K=new Re,Y=()=>{const a=l.Promise.resolve(void 0);Pe=()=>{a.then(ae)}};var ae=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(d){x(d)}var c=Zt;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}U=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Je=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return a}();function st(a,c){if(he.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(O){e:{try{N(c.nodeName);var k=!0;break e}catch{}k=!1}k||(c=null)}}else d=="mouseover"?c=a.fromElement:d=="mouseout"&&(c=a.toElement);this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:me[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&st.aa.h.call(this)}}P(st,he);var me={2:"touch",3:"pen",4:"mouse"};st.prototype.h=function(){st.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ot="closure_listenable_"+(1e6*Math.random()|0),Pn=0;function en(a,c,d,g,k){this.listener=a,this.proxy=null,this.src=c,this.type=d,this.capture=!!g,this.ha=k,this.key=++Pn,this.da=this.fa=!1}function Ue(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ut(a){this.src=a,this.g={},this.h=0}Ut.prototype.add=function(a,c,d,g,k){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var j=xi(a,c,g,k);return-1<j?(c=a[j],d||(c.fa=!1)):(c=new en(c,this.src,V,!!g,k),c.fa=d,a.push(c)),c};function ze(a,c){var d=c.type;if(d in a.g){var g=a.g[d],k=Array.prototype.indexOf.call(g,c,void 0),V;(V=0<=k)&&Array.prototype.splice.call(g,k,1),V&&(Ue(c),a.g[d].length==0&&(delete a.g[d],a.h--))}}function xi(a,c,d,g){for(var k=0;k<a.length;++k){var V=a[k];if(!V.da&&V.listener==c&&V.capture==!!d&&V.ha==g)return k}return-1}var pn="closure_lm_"+(1e6*Math.random()|0),hr={};function zn(a,c,d,g,k){if(Array.isArray(c)){for(var V=0;V<c.length;V++)zn(a,c[V],d,g,k);return null}return d=Ma(d),a&&a[ot]?a.K(c,d,h(g)?!!g.capture:!!g,k):Na(a,c,d,!1,g,k)}function Na(a,c,d,g,k,V){if(!c)throw Error("Invalid event type");var j=h(k)?!!k.capture:!!k,ge=Di(a);if(ge||(a[pn]=ge=new Ut(a)),d=ge.add(c,d,g,j,V),d.proxy)return d;if(g=Da(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)Je||(k=j),k===void 0&&(k=!1),a.addEventListener(c.toString(),g,k);else if(a.attachEvent)a.attachEvent(Yr(c.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Da(){function a(d){return c.call(a.src,a.listener,d)}const c=Ni;return a}function ki(a,c,d,g,k){if(Array.isArray(c))for(var V=0;V<c.length;V++)ki(a,c[V],d,g,k);else g=h(g)?!!g.capture:!!g,d=Ma(d),a&&a[ot]?(a=a.i,c=String(c).toString(),c in a.g&&(V=a.g[c],d=xi(V,d,g,k),-1<d&&(Ue(V[d]),Array.prototype.splice.call(V,d,1),V.length==0&&(delete a.g[c],a.h--)))):a&&(a=Di(a))&&(c=a.g[c.toString()],a=-1,c&&(a=xi(c,d,g,k)),(d=-1<a?c[a]:null)&&tn(d))}function tn(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[ot])ze(c.i,a);else{var d=a.type,g=a.proxy;c.removeEventListener?c.removeEventListener(d,g,a.capture):c.detachEvent?c.detachEvent(Yr(d),g):c.addListener&&c.removeListener&&c.removeListener(g),(d=Di(c))?(ze(d,a),d.h==0&&(d.src=null,c[pn]=null)):Ue(a)}}}function Yr(a){return a in hr?hr[a]:hr[a]="on"+a}function Ni(a,c){if(a.da)a=!0;else{c=new st(c,this);var d=a.listener,g=a.ha||a.src;a.fa&&tn(a),a=d.call(g,c)}return a}function Di(a){return a=a[pn],a instanceof Ut?a:null}var Mi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ma(a){return typeof a=="function"?a:(a[Mi]||(a[Mi]=function(c){return a.handleEvent(c)}),a[Mi])}function Ze(){J.call(this),this.i=new Ut(this),this.M=this,this.F=null}P(Ze,J),Ze.prototype[ot]=!0,Ze.prototype.removeEventListener=function(a,c,d,g){ki(this,a,c,d,g)};function Oe(a,c){var d,g=a.F;if(g)for(d=[];g;g=g.F)d.push(g);if(a=a.M,g=c.type||c,typeof c=="string")c=new he(c,a);else if(c instanceof he)c.target=c.target||a;else{var k=c;c=new he(g,a),I(c,k)}if(k=!0,d)for(var V=d.length-1;0<=V;V--){var j=c.g=d[V];k=mn(j,g,!0,c)&&k}if(j=c.g=a,k=mn(j,g,!0,c)&&k,k=mn(j,g,!1,c)&&k,d)for(V=0;V<d.length;V++)j=c.g=d[V],k=mn(j,g,!1,c)&&k}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var d=a.g[c],g=0;g<d.length;g++)Ue(d[g]);delete a.g[c],a.h--}}this.F=null},Ze.prototype.K=function(a,c,d,g){return this.i.add(String(a),c,!1,d,g)},Ze.prototype.L=function(a,c,d,g){return this.i.add(String(a),c,!0,d,g)};function mn(a,c,d,g){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var k=!0,V=0;V<c.length;++V){var j=c[V];if(j&&!j.da&&j.capture==d){var ge=j.listener,ut=j.ha||j.src;j.fa&&ze(a.i,j),k=ge.call(ut,g)!==!1&&k}}return k&&!g.defaultPrevented}function dr(a,c,d){if(typeof a=="function")d&&(a=y(a,d));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function qs(a){a.g=dr(()=>{a.g=null,a.i&&(a.i=!1,qs(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class xn extends J{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:qs(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fr(a){J.call(this),this.h=a,this.g={}}P(fr,J);var Va=[];function Oa(a){M(a.g,function(c,d){this.g.hasOwnProperty(d)&&tn(c)},a),a.g={}}fr.prototype.N=function(){fr.aa.N.call(this),Oa(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vi=l.JSON.stringify,Ac=l.JSON.parse,ba=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ks(){}Ks.prototype.h=null;function La(a){return a.h||(a.h=a.i())}function Fa(){}var xe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function at(){he.call(this,"d")}P(at,he);function lt(){he.call(this,"c")}P(lt,he);var vt={},xt=null;function _t(){return xt=xt||new Ze}vt.La="serverreachability";function zt(a){he.call(this,vt.La,a)}P(zt,he);function nn(a){const c=_t();Oe(c,new zt(c))}vt.STAT_EVENT="statevent";function Vt(a,c){he.call(this,vt.STAT_EVENT,a),this.stat=c}P(Vt,he);function $e(a){const c=_t();Oe(c,new Vt(c,a))}vt.Ma="timingevent";function pr(a,c){he.call(this,vt.Ma,a),this.size=c}P(pr,he);function kn(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function $a(a,c,d,g,k,V){a.info(function(){if(a.g)if(V)for(var j="",ge=V.split("&"),ut=0;ut<ge.length;ut++){var le=ge[ut].split("=");if(1<le.length){var Et=le[0];le=le[1];var wt=Et.split("_");j=2<=wt.length&&wt[1]=="type"?j+(Et+"="+le+"&"):j+(Et+"=redacted&")}}else j=null;else j=V;return"XMLHTTP REQ ("+g+") [attempt "+k+"]: "+c+`
`+d+`
`+j})}function Xr(a,c,d,g,k,V,j){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+k+"]: "+c+`
`+d+`
`+V+" "+j})}function rn(a,c,d,g){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+bE(a,d)+(g?" "+g:"")})}function Qs(a,c){a.info(function(){return"TIMEOUT: "+c})}Nn.prototype.info=function(){};function bE(a,c){if(!a.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var g=d[a];if(!(2>g.length)){var k=g[1];if(Array.isArray(k)&&!(1>k.length)){var V=k[0];if(V!="noop"&&V!="stop"&&V!="close")for(var j=1;j<k.length;j++)k[j]=""}}}}return Vi(d)}catch{return c}}var Ba={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cc;function ja(){}P(ja,Ks),ja.prototype.g=function(){return new XMLHttpRequest},ja.prototype.i=function(){return{}},Cc=new ja;function mr(a,c,d,g){this.j=a,this.i=c,this.l=d,this.R=g||1,this.U=new fr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jp}function jp(){this.i=null,this.g="",this.h=!1}var Up={},Rc={};function Pc(a,c,d){a.L=1,a.v=Wa(Hn(c)),a.m=d,a.P=!0,zp(a,null)}function zp(a,c){a.F=Date.now(),Ua(a),a.A=Hn(a.v);var d=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),rm(d.i,"t",g),a.C=0,d=a.j.J,a.h=new jp,a.g=wm(a.j,d?c:null,!a.m),0<a.O&&(a.M=new xn(y(a.Y,a,a.g),a.O)),c=a.U,d=a.g,g=a.ca;var k="readystatechange";Array.isArray(k)||(k&&(Va[0]=k.toString()),k=Va);for(var V=0;V<k.length;V++){var j=zn(d,k[V],g||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),nn(),$a(a.i,a.u,a.A,a.l,a.R,a.m)}mr.prototype.ca=function(a){a=a.target;const c=this.M;c&&Wn(a)==3?c.j():this.Y(a)},mr.prototype.Y=function(a){try{if(a==this.g)e:{const wt=Wn(this.g);var c=this.g.Ba();const Li=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||cm(this.g)))){this.J||wt!=4||c==7||(c==8||0>=Li?nn(3):nn(2)),xc(this);var d=this.g.Z();this.X=d;t:if(Hp(this)){var g=cm(this.g);a="";var k=g.length,V=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jr(this),Gs(this);var j="";break t}this.h.i=new l.TextDecoder}for(c=0;c<k;c++)this.h.h=!0,a+=this.h.i.decode(g[c],{stream:!(V&&c==k-1)});g.length=0,this.h.g+=a,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=d==200,Xr(this.i,this.u,this.A,this.l,this.R,wt,d),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,ut=this.g;if((ge=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ge)){var le=ge;break t}}le=null}if(d=le)rn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kc(this,d);else{this.o=!1,this.s=3,$e(12),Jr(this),Gs(this);break e}}if(this.P){d=!0;let gn;for(;!this.J&&this.C<j.length;)if(gn=LE(this,j),gn==Rc){wt==4&&(this.s=4,$e(14),d=!1),rn(this.i,this.l,null,"[Incomplete Response]");break}else if(gn==Up){this.s=4,$e(15),rn(this.i,this.l,j,"[Invalid Chunk]"),d=!1;break}else rn(this.i,this.l,gn,null),kc(this,gn);if(Hp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||j.length!=0||this.h.h||(this.s=1,$e(16),d=!1),this.o=this.o&&d,!d)rn(this.i,this.l,j,"[Invalid Chunked Response]"),Jr(this),Gs(this);else if(0<j.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),bc(Et),Et.M=!0,$e(11))}}else rn(this.i,this.l,j,null),kc(this,j);wt==4&&Jr(this),this.o&&!this.J&&(wt==4?ym(this.j,this):(this.o=!1,Ua(this)))}else ew(this.g),d==400&&0<j.indexOf("Unknown SID")?(this.s=3,$e(12)):(this.s=0,$e(13)),Jr(this),Gs(this)}}}catch{}finally{}};function Hp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function LE(a,c){var d=a.C,g=c.indexOf(`
`,d);return g==-1?Rc:(d=Number(c.substring(d,g)),isNaN(d)?Up:(g+=1,g+d>c.length?Rc:(c=c.slice(g,g+d),a.C=g+d,c)))}mr.prototype.cancel=function(){this.J=!0,Jr(this)};function Ua(a){a.S=Date.now()+a.I,Wp(a,a.I)}function Wp(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=kn(y(a.ba,a),c)}function xc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}mr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Qs(this.i,this.A),this.L!=2&&(nn(),$e(17)),Jr(this),this.s=2,Gs(this)):Wp(this,this.S-a)};function Gs(a){a.j.G==0||a.J||ym(a.j,a)}function Jr(a){xc(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,Oa(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function kc(a,c){try{var d=a.j;if(d.G!=0&&(d.g==a||Nc(d.h,a))){if(!a.K&&Nc(d.h,a)&&d.G==3){try{var g=d.Da.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var k=g;if(k[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)Xa(d),Ga(d);else break e;Oc(d),$e(18)}}else d.za=k[1],0<d.za-d.T&&37500>k[2]&&d.F&&d.v==0&&!d.C&&(d.C=kn(y(d.Za,d),6e3));if(1>=Qp(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else ei(d,11)}else if((a.K||d.g==a)&&Xa(d),!_(c))for(k=d.Da.g.parse(c),c=0;c<k.length;c++){let le=k[c];if(d.T=le[0],le=le[1],d.G==2)if(le[0]=="c"){d.K=le[1],d.ia=le[2];const Et=le[3];Et!=null&&(d.la=Et,d.j.info("VER="+d.la));const wt=le[4];wt!=null&&(d.Aa=wt,d.j.info("SVER="+d.Aa));const Li=le[5];Li!=null&&typeof Li=="number"&&0<Li&&(g=1.5*Li,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const gn=a.g;if(gn){const Za=gn.g?gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Za){var V=g.h;V.g||Za.indexOf("spdy")==-1&&Za.indexOf("quic")==-1&&Za.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Dc(V,V.h),V.h=null))}if(g.D){const Lc=gn.g?gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Lc&&(g.ya=Lc,Ee(g.I,g.D,Lc))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var j=a;if(g.qa=Em(g,g.J?g.ia:null,g.W),j.K){Gp(g.h,j);var ge=j,ut=g.L;ut&&(ge.I=ut),ge.B&&(xc(ge),Ua(ge)),g.g=j}else mm(g);0<d.i.length&&Ya(d)}else le[0]!="stop"&&le[0]!="close"||ei(d,7);else d.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?ei(d,7):Vc(d):le[0]!="noop"&&d.l&&d.l.ta(le),d.v=0)}}nn(4)}catch{}}var FE=class{constructor(a,c){this.g=a,this.map=c}};function qp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Kp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Qp(a){return a.h?1:a.g?a.g.size:0}function Nc(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Dc(a,c){a.g?a.g.add(c):a.h=c}function Gp(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}qp.prototype.cancel=function(){if(this.i=Yp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Yp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const d of a.g.values())c=c.concat(d.D);return c}return R(a.i)}function $E(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],d=a.length,g=0;g<d;g++)c.push(a[g]);return c}c=[],d=0;for(g in a)c[d++]=a[g];return c}function BE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var d=0;d<a;d++)c.push(d);return c}c=[],d=0;for(const g in a)c[d++]=g;return c}}}function Xp(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var d=BE(a),g=$E(a),k=g.length,V=0;V<k;V++)c.call(void 0,g[V],d&&d[V],a)}var Jp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jE(a,c){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var g=a[d].indexOf("="),k=null;if(0<=g){var V=a[d].substring(0,g);k=a[d].substring(g+1)}else V=a[d];c(V,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Zr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Zr){this.h=a.h,za(this,a.j),this.o=a.o,this.g=a.g,Ha(this,a.s),this.l=a.l;var c=a.i,d=new Js;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),Zp(this,d),this.m=a.m}else a&&(c=String(a).match(Jp))?(this.h=!1,za(this,c[1]||"",!0),this.o=Ys(c[2]||""),this.g=Ys(c[3]||"",!0),Ha(this,c[4]),this.l=Ys(c[5]||"",!0),Zp(this,c[6]||"",!0),this.m=Ys(c[7]||"")):(this.h=!1,this.i=new Js(null,this.h))}Zr.prototype.toString=function(){var a=[],c=this.j;c&&a.push(Xs(c,em,!0),":");var d=this.g;return(d||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Xs(c,em,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Xs(d,d.charAt(0)=="/"?HE:zE,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Xs(d,qE)),a.join("")};function Hn(a){return new Zr(a)}function za(a,c,d){a.j=d?Ys(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Ha(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function Zp(a,c,d){c instanceof Js?(a.i=c,KE(a.i,a.h)):(d||(c=Xs(c,WE)),a.i=new Js(c,a.h))}function Ee(a,c,d){a.i.set(c,d)}function Wa(a){return Ee(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ys(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Xs(a,c,d){return typeof a=="string"?(a=encodeURI(a).replace(c,UE),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function UE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var em=/[#\/\?@]/g,zE=/[#\?:]/g,HE=/[#\?]/g,WE=/[#\?@]/g,qE=/#/g;function Js(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function gr(a){a.g||(a.g=new Map,a.h=0,a.i&&jE(a.i,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=Js.prototype,t.add=function(a,c){gr(this),this.i=null,a=Oi(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(c),this.h+=1,this};function tm(a,c){gr(a),c=Oi(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function nm(a,c){return gr(a),c=Oi(a,c),a.g.has(c)}t.forEach=function(a,c){gr(this),this.g.forEach(function(d,g){d.forEach(function(k){a.call(c,k,g,this)},this)},this)},t.na=function(){gr(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let g=0;g<c.length;g++){const k=a[g];for(let V=0;V<k.length;V++)d.push(c[g])}return d},t.V=function(a){gr(this);let c=[];if(typeof a=="string")nm(this,a)&&(c=c.concat(this.g.get(Oi(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)c=c.concat(a[d])}return c},t.set=function(a,c){return gr(this),this.i=null,a=Oi(this,a),nm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function rm(a,c,d){tm(a,c),0<d.length&&(a.i=null,a.g.set(Oi(a,c),R(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var g=c[d];const V=encodeURIComponent(String(g)),j=this.V(g);for(g=0;g<j.length;g++){var k=V;j[g]!==""&&(k+="="+encodeURIComponent(String(j[g]))),a.push(k)}}return this.i=a.join("&")};function Oi(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function KE(a,c){c&&!a.j&&(gr(a),a.i=null,a.g.forEach(function(d,g){var k=g.toLowerCase();g!=k&&(tm(this,g),rm(this,k,d))},a)),a.j=c}function QE(a,c){const d=new Nn;if(l.Image){const g=new Image;g.onload=T(yr,d,"TestLoadImage: loaded",!0,c,g),g.onerror=T(yr,d,"TestLoadImage: error",!1,c,g),g.onabort=T(yr,d,"TestLoadImage: abort",!1,c,g),g.ontimeout=T(yr,d,"TestLoadImage: timeout",!1,c,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else c(!1)}function GE(a,c){const d=new Nn,g=new AbortController,k=setTimeout(()=>{g.abort(),yr(d,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:g.signal}).then(V=>{clearTimeout(k),V.ok?yr(d,"TestPingServer: ok",!0,c):yr(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(k),yr(d,"TestPingServer: error",!1,c)})}function yr(a,c,d,g,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),g(d)}catch{}}function YE(){this.g=new ba}function XE(a,c,d){const g=d||"";try{Xp(a,function(k,V){let j=k;h(k)&&(j=Vi(k)),c.push(g+V+"="+encodeURIComponent(j))})}catch(k){throw c.push(g+"type="+encodeURIComponent("_badmap")),k}}function qa(a){this.l=a.Ub||null,this.j=a.eb||!1}P(qa,Ks),qa.prototype.g=function(){return new Ka(this.l,this.j)},qa.prototype.i=function(a){return function(){return a}}({});function Ka(a,c){Ze.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Ka,Ze),t=Ka.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,eo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zs(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,eo(this)),this.g&&(this.readyState=3,eo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;im(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function im(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?Zs(this):eo(this),this.readyState==3&&im(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Zs(this))},t.Qa=function(a){this.g&&(this.response=a,Zs(this))},t.ga=function(){this.g&&Zs(this)};function Zs(a){a.readyState=4,a.l=null,a.j=null,a.v=null,eo(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=c.next();return a.join(`\r
`)};function eo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function sm(a){let c="";return M(a,function(d,g){c+=g,c+=":",c+=d,c+=`\r
`}),c}function Mc(a,c,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=sm(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Ee(a,c,d))}function be(a){Ze.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(be,Ze);var JE=/^https?$/i,ZE=["POST","PUT"];t=be.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cc.g(),this.v=this.o?La(this.o):La(Cc),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(V){om(this,V);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var k in g)d.set(k,g[k]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const V of g.keys())d.set(V,g.get(V));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(V=>V.toLowerCase()=="content-type"),k=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(ZE,c,void 0))||g||k||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,j]of d)this.g.setRequestHeader(V,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{um(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){om(this,V)}};function om(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,am(a),Qa(a)}function am(a){a.A||(a.A=!0,Oe(a,"complete"),Oe(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Oe(this,"complete"),Oe(this,"abort"),Qa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qa(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?lm(this):this.bb())},t.bb=function(){lm(this)};function lm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Wn(a)!=4||a.Z()!=2)){if(a.u&&Wn(a)==4)dr(a.Ea,0,a);else if(Oe(a,"readystatechange"),Wn(a)==4){a.h=!1;try{const j=a.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var g;if(g=j===0){var k=String(a.D).match(Jp)[1]||null;!k&&l.self&&l.self.location&&(k=l.self.location.protocol.slice(0,-1)),g=!JE.test(k?k.toLowerCase():"")}d=g}if(d)Oe(a,"complete"),Oe(a,"success");else{a.m=6;try{var V=2<Wn(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",am(a)}}finally{Qa(a)}}}}function Qa(a,c){if(a.g){um(a);const d=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||Oe(a,"ready");try{d.onreadystatechange=g}catch{}}}function um(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Wn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),Ac(c)}};function cm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function ew(a){const c={};a=(a.g&&2<=Wn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(_(a[g]))continue;var d=C(a[g]);const k=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const V=c[k]||[];c[k]=V,V.push(d)}v(c,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function to(a,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||c}function hm(a){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=to("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=to("baseRetryDelayMs",5e3,a),this.cb=to("retryDelaySeedMs",1e4,a),this.Wa=to("forwardChannelMaxRetries",2,a),this.wa=to("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new qp(a&&a.concurrentRequestLimit),this.Da=new YE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hm.prototype,t.la=8,t.G=1,t.connect=function(a,c,d,g){$e(0),this.W=a,this.H=c||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=Em(this,null,this.W),Ya(this)};function Vc(a){if(dm(a),a.G==3){var c=a.U++,d=Hn(a.I);if(Ee(d,"SID",a.K),Ee(d,"RID",c),Ee(d,"TYPE","terminate"),no(a,d),c=new mr(a,a.j,c),c.L=2,c.v=Wa(Hn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=wm(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Ua(c)}_m(a)}function Ga(a){a.g&&(bc(a),a.g.cancel(),a.g=null)}function dm(a){Ga(a),a.u&&(l.clearTimeout(a.u),a.u=null),Xa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ya(a){if(!Kp(a.h)&&!a.s){a.s=!0;var c=a.Ga;Pe||Y(),U||(Pe(),U=!0),K.add(c,a),a.B=0}}function tw(a,c){return Qp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=kn(y(a.Ga,a,c),vm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const k=new mr(this,this.j,a);let V=this.o;if(this.S&&(V?(V=m(V),I(V,this.S)):V=this.S),this.m!==null||this.O||(k.H=V,V=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=pm(this,k,c),d=Hn(this.I),Ee(d,"RID",a),Ee(d,"CVER",22),this.D&&Ee(d,"X-HTTP-Session-Id",this.D),no(this,d),V&&(this.O?c="headers="+encodeURIComponent(String(sm(V)))+"&"+c:this.m&&Mc(d,this.m,V)),Dc(this.h,k),this.Ua&&Ee(d,"TYPE","init"),this.P?(Ee(d,"$req",c),Ee(d,"SID","null"),k.T=!0,Pc(k,d,null)):Pc(k,d,c),this.G=2}}else this.G==3&&(a?fm(this,a):this.i.length==0||Kp(this.h)||fm(this))};function fm(a,c){var d;c?d=c.l:d=a.U++;const g=Hn(a.I);Ee(g,"SID",a.K),Ee(g,"RID",d),Ee(g,"AID",a.T),no(a,g),a.m&&a.o&&Mc(g,a.m,a.o),d=new mr(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),c&&(a.i=c.D.concat(a.i)),c=pm(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Dc(a.h,d),Pc(d,g,c)}function no(a,c){a.H&&M(a.H,function(d,g){Ee(c,g,d)}),a.l&&Xp({},function(d,g){Ee(c,g,d)})}function pm(a,c,d){d=Math.min(a.i.length,d);var g=a.l?y(a.l.Na,a.l,a):null;e:{var k=a.i;let V=-1;for(;;){const j=["count="+d];V==-1?0<d?(V=k[0].g,j.push("ofs="+V)):V=0:j.push("ofs="+V);let ge=!0;for(let ut=0;ut<d;ut++){let le=k[ut].g;const Et=k[ut].map;if(le-=V,0>le)V=Math.max(0,k[ut].g-100),ge=!1;else try{XE(Et,j,"req"+le+"_")}catch{g&&g(Et)}}if(ge){g=j.join("&");break e}}}return a=a.i.splice(0,d),c.D=a,g}function mm(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;Pe||Y(),U||(Pe(),U=!0),K.add(c,a),a.v=0}}function Oc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=kn(y(a.Fa,a),vm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,gm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=kn(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$e(10),Ga(this),gm(this))};function bc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function gm(a){a.g=new mr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=Hn(a.qa);Ee(c,"RID","rpc"),Ee(c,"SID",a.K),Ee(c,"AID",a.T),Ee(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ee(c,"TO",a.ja),Ee(c,"TYPE","xmlhttp"),no(a,c),a.m&&a.o&&Mc(c,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Wa(Hn(c)),d.m=null,d.P=!0,zp(d,a)}t.Za=function(){this.C!=null&&(this.C=null,Ga(this),Oc(this),$e(19))};function Xa(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function ym(a,c){var d=null;if(a.g==c){Xa(a),bc(a),a.g=null;var g=2}else if(Nc(a.h,c))d=c.D,Gp(a.h,c),g=1;else return;if(a.G!=0){if(c.o)if(g==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var k=a.B;g=_t(),Oe(g,new pr(g,d)),Ya(a)}else mm(a);else if(k=c.s,k==3||k==0&&0<c.X||!(g==1&&tw(a,c)||g==2&&Oc(a)))switch(d&&0<d.length&&(c=a.h,c.i=c.i.concat(d)),k){case 1:ei(a,5);break;case 4:ei(a,10);break;case 3:ei(a,6);break;default:ei(a,2)}}}function vm(a,c){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*c}function ei(a,c){if(a.j.info("Error code "+c),c==2){var d=y(a.fb,a),g=a.Xa;const k=!g;g=new Zr(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||za(g,"https"),Wa(g),k?QE(g.toString(),d):GE(g.toString(),d)}else $e(2);a.G=0,a.l&&a.l.sa(c),_m(a),dm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),$e(2)):(this.j.info("Failed to ping google.com"),$e(1))};function _m(a){if(a.G=0,a.ka=[],a.l){const c=Yp(a.h);(c.length!=0||a.i.length!=0)&&(D(a.ka,c),D(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function Em(a,c,d){var g=d instanceof Zr?Hn(d):new Zr(d);if(g.g!="")c&&(g.g=c+"."+g.g),Ha(g,g.s);else{var k=l.location;g=k.protocol,c=c?c+"."+k.hostname:k.hostname,k=+k.port;var V=new Zr(null);g&&za(V,g),c&&(V.g=c),k&&Ha(V,k),d&&(V.l=d),g=V}return d=a.D,c=a.ya,d&&c&&Ee(g,d,c),Ee(g,"VER",a.la),no(a,g),g}function wm(a,c,d){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new be(new qa({eb:d})):new be(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tm(){}t=Tm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ja(){}Ja.prototype.g=function(a,c){return new Ht(a,c)};function Ht(a,c){Ze.call(this),this.g=new hm(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!_(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!_(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new bi(this)}P(Ht,Ze),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Vc(this.g)},Ht.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Vi(a),a=d);c.i.push(new FE(c.Ya++,a)),c.G==3&&Ya(c)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Vc(this.g),delete this.g,Ht.aa.N.call(this)};function Sm(a){at.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const d in c){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}P(Sm,at);function Im(){lt.call(this),this.status=1}P(Im,lt);function bi(a){this.g=a}P(bi,Tm),bi.prototype.ua=function(){Oe(this.g,"a")},bi.prototype.ta=function(a){Oe(this.g,new Sm(a))},bi.prototype.sa=function(a){Oe(this.g,new Im)},bi.prototype.ra=function(){Oe(this.g,"b")},Ja.prototype.createWebChannel=Ja.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,N_=function(){return new Ja},k_=function(){return _t()},x_=vt,Rd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ba.NO_ERROR=0,Ba.TIMEOUT=8,Ba.HTTP_ERROR=6,Ll=Ba,Bp.COMPLETE="complete",P_=Bp,Fa.EventType=xe,xe.OPEN="a",xe.CLOSE="b",xe.ERROR="c",xe.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,yo=Fa,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,R_=be}).apply(typeof _l<"u"?_l:typeof self<"u"?self:typeof window<"u"?window:{});const Kg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ls="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new E_("@firebase/firestore");function ho(){return Ti.logLevel}function q(t,...e){if(Ti.logLevel<=se.DEBUG){const n=e.map(Xf);Ti.debug(`Firestore (${Ls}): ${t}`,...n)}}function ar(t,...e){if(Ti.logLevel<=se.ERROR){const n=e.map(Xf);Ti.error(`Firestore (${Ls}): ${t}`,...n)}}function ws(t,...e){if(Ti.logLevel<=se.WARN){const n=e.map(Xf);Ti.warn(`Firestore (${Ls}): ${t}`,...n)}}function Xf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${Ls}) INTERNAL ASSERTION FAILED: `+t;throw ar(e),new Error(e)}function pe(t,e){t||X()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends bs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class MA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class VA{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string"),new D_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new At(e)}}class OA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class bA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new OA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pe(this.o===void 0);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string"),this.R=n.token,new LA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=$A(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function Ts(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Xe(0,0))}static max(){return new Z(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ce extends sa{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const BA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends sa{construct(e,n,r){return new ft(e,n,r)}static isValidIdentifier(e){return BA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ft(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Q($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Q($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(n)}static emptyPath(){return new ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Ce.fromString(e))}static fromName(e){return new G(Ce.fromString(e).popFirst(5))}static empty(){return new G(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Ce(e.slice()))}}function jA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Hr(i,G.empty(),e)}function UA(t){return new Hr(t.readTime,t.key,-1)}class Hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hr(Z.min(),G.empty(),-1)}static max(){return new Hr(Z.max(),G.empty(),-1)}}function zA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==HA)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function qA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jf.oe=-1;function nc(t){return t==null}function wu(t){return t===0&&1/t==-1/0}function KA(t){return typeof t=="number"&&Number.isInteger(t)&&!wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function V_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new El(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new El(this.root,e,this.comparator,!1)}getReverseIterator(){return new El(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new El(this.root,e,this.comparator,!0)}}class El{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ht.RED,this.left=i??ht.EMPTY,this.right=s??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ht(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gg(this.data.getIterator())}getIteratorFrom(e){return new Gg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class Gg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new wn([])}unionWith(e){let n=new mt(ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ts(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new O_("Invalid base64 string: "+s):s}}(e);return new yt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const QA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(t){if(pe(!!t),typeof t=="string"){let e=0;const n=QA.exec(t);if(pe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Si(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ep(t){const e=t.mapValue.fields.__previous_value__;return Zf(e)?ep(e):e}function oa(t){const e=Wr(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,n,r,i,s,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class aa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new aa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof aa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ii(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zf(t)?4:XA(t)?9007199254740991:YA(t)?10:11:X()}function jn(t,e){if(t===e)return!0;const n=Ii(t);if(n!==Ii(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oa(t).isEqual(oa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Wr(i.timestampValue),l=Wr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Si(i.bytesValue).isEqual(Si(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Be(i.geoPointValue.latitude)===Be(s.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Be(i.integerValue)===Be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Be(i.doubleValue),l=Be(s.doubleValue);return o===l?wu(o)===wu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ts(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Qg(o)!==Qg(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!jn(o[u],l[u])))return!1;return!0}(t,e);default:return X()}}function la(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function Ss(t,e){if(t===e)return 0;const n=Ii(t),r=Ii(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Be(s.integerValue||s.doubleValue),u=Be(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Yg(t.timestampValue,e.timestampValue);case 4:return Yg(oa(t),oa(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Si(s),u=Si(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=ce(l[h],u[h]);if(f!==0)return f}return ce(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ce(Be(s.latitude),Be(o.latitude));return l!==0?l:ce(Be(s.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Xg(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,h,f;const p=s.fields||{},y=o.fields||{},T=(l=p.value)===null||l===void 0?void 0:l.arrayValue,P=(u=y.value)===null||u===void 0?void 0:u.arrayValue,R=ce(((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0,((f=P==null?void 0:P.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:Xg(T,P)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===wl.mapValue&&o===wl.mapValue)return 0;if(s===wl.mapValue)return 1;if(o===wl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const y=ce(u[p],f[p]);if(y!==0)return y;const T=Ss(l[u[p]],h[f[p]]);if(T!==0)return T}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw X()}}function Yg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Wr(t),r=Wr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function Xg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ss(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function Is(t){return Pd(t)}function Pd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Si(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Pd(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Pd(n.fields[o])}`;return i+"}"}(t.mapValue):X()}function xd(t){return!!t&&"integerValue"in t}function tp(t){return!!t&&"arrayValue"in t}function Jg(t){return!!t&&"nullValue"in t}function Zg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fl(t){return!!t&&"mapValue"in t}function YA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function No(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=No(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=No(t.arrayValue.values[n]);return e}return Object.assign({},t)}function XA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=No(n)}setAll(e){let n=ft.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=No(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Fl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Fl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Fs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ln(No(this.value))}}function b_(t){const e=[];return Fs(t.fields,(n,r)=>{const i=new ft([n]);if(Fl(r)){const s=b_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Rt(e,0,Z.min(),Z.min(),Z.min(),ln.empty(),0)}static newFoundDocument(e,n,r,i){return new Rt(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new Rt(e,2,n,Z.min(),Z.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,Z.min(),Z.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n){this.position=e,this.inclusive=n}}function ey(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Ss(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ty(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n="asc"){this.field=e,this.dir=n}}function JA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{}class Ge extends L_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new eC(e,n,r):n==="array-contains"?new rC(e,r):n==="in"?new iC(e,r):n==="not-in"?new sC(e,r):n==="array-contains-any"?new oC(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tC(e,r):new nC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ss(n,this.value)):n!==null&&Ii(this.value)===Ii(n)&&this.matchesComparison(Ss(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Un extends L_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Un(e,n)}matches(e){return F_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function F_(t){return t.op==="and"}function $_(t){return ZA(t)&&F_(t)}function ZA(t){for(const e of t.filters)if(e instanceof Un)return!1;return!0}function kd(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+Is(t.value);if($_(t))return t.filters.map(e=>kd(e)).join(",");{const e=t.filters.map(n=>kd(n)).join(",");return`${t.op}(${e})`}}function B_(t,e){return t instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.field.isEqual(i.field)&&jn(r.value,i.value)}(t,e):t instanceof Un?function(r,i){return i instanceof Un&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&B_(o,i.filters[l]),!0):!1}(t,e):void X()}function j_(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${Is(n.value)}`}(t):t instanceof Un?function(n){return n.op.toString()+" {"+n.getFilters().map(j_).join(" ,")+"}"}(t):"Filter"}class eC extends Ge{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class tC extends Ge{constructor(e,n){super(e,"in",n),this.keys=U_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class nC extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=U_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function U_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class rC extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tp(n)&&la(n.arrayValue,this.value)}}class iC extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&la(this.value.arrayValue,n)}}class sC extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(la(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!la(this.value.arrayValue,n)}}class oC extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>la(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function ny(t,e=null,n=[],r=[],i=null,s=null,o=null){return new aC(t,e,n,r,i,s,o)}function np(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),nc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Is(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Is(r)).join(",")),e.ue=n}return e.ue}function rp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!JA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!B_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ty(t.startAt,e.startAt)&&ty(t.endAt,e.endAt)}function Nd(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function lC(t,e,n,r,i,s,o,l){return new rc(t,e,n,r,i,s,o,l)}function ip(t){return new rc(t)}function ry(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uC(t){return t.collectionGroup!==null}function Do(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new mt(ft.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Su(s,r))}),n.has(ft.keyField().canonicalString())||e.ce.push(new Su(ft.keyField(),r))}return e.ce}function Fn(t){const e=ee(t);return e.le||(e.le=cC(e,Do(t))),e.le}function cC(t,e){if(t.limitType==="F")return ny(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Su(i.field,s)});const n=t.endAt?new Tu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Tu(t.startAt.position,t.startAt.inclusive):null;return ny(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Dd(t,e,n){return new rc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ic(t,e){return rp(Fn(t),Fn(e))&&t.limitType===e.limitType}function z_(t){return`${np(Fn(t))}|lt:${t.limitType}`}function ji(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>j_(i)).join(", ")}]`),nc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Is(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Is(i)).join(",")),`Target(${r})`}(Fn(t))}; limitType=${t.limitType})`}function sc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Do(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=ey(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Do(r),i)||r.endAt&&!function(o,l,u){const h=ey(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Do(r),i))}(t,e)}function hC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function H_(t){return(e,n)=>{let r=!1;for(const i of Do(t)){const s=dC(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function dC(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ss(u,h):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return V_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new Ve(G.comparator);function lr(){return fC}const W_=new Ve(G.comparator);function vo(...t){let e=W_;for(const n of t)e=e.insert(n.key,n);return e}function q_(t){let e=W_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function li(){return Mo()}function K_(){return Mo()}function Mo(){return new $s(t=>t.toString(),(t,e)=>t.isEqual(e))}const pC=new Ve(G.comparator),mC=new mt(G.comparator);function re(...t){let e=mC;for(const n of t)e=e.add(n);return e}const gC=new mt(ce);function yC(){return gC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wu(e)?"-0":e}}function Q_(t){return{integerValue:""+t}}function vC(t,e){return KA(e)?Q_(e):sp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(){this._=void 0}}function _C(t,e,n){return t instanceof Iu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Zf(s)&&(s=ep(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ua?Y_(t,e):t instanceof ca?X_(t,e):function(i,s){const o=G_(i,s),l=iy(o)+iy(i.Pe);return xd(o)&&xd(i.Pe)?Q_(l):sp(i.serializer,l)}(t,e)}function EC(t,e,n){return t instanceof ua?Y_(t,e):t instanceof ca?X_(t,e):n}function G_(t,e){return t instanceof Au?function(r){return xd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Iu extends oc{}class ua extends oc{constructor(e){super(),this.elements=e}}function Y_(t,e){const n=J_(e);for(const r of t.elements)n.some(i=>jn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ca extends oc{constructor(e){super(),this.elements=e}}function X_(t,e){let n=J_(e);for(const r of t.elements)n=n.filter(i=>!jn(i,r));return{arrayValue:{values:n}}}class Au extends oc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function iy(t){return Be(t.integerValue||t.doubleValue)}function J_(t){return tp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function wC(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ua&&i instanceof ua||r instanceof ca&&i instanceof ca?Ts(r.elements,i.elements,jn):r instanceof Au&&i instanceof Au?jn(r.Pe,i.Pe):r instanceof Iu&&i instanceof Iu}(t.transform,e.transform)}class TC{constructor(e,n){this.version=e,this.transformResults=n}}class $n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $l(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ac{}function Z_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new op(t.key,$n.none()):new Ta(t.key,t.data,$n.none());{const n=t.data,r=ln.empty();let i=new mt(ft.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ri(t.key,r,new wn(i.toArray()),$n.none())}}function SC(t,e,n){t instanceof Ta?function(i,s,o){const l=i.value.clone(),u=oy(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ri?function(i,s,o){if(!$l(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=oy(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(e1(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Vo(t,e,n,r){return t instanceof Ta?function(s,o,l,u){if(!$l(s.precondition,o))return l;const h=s.value.clone(),f=ay(s.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ri?function(s,o,l,u){if(!$l(s.precondition,o))return l;const h=ay(s.fieldTransforms,u,o),f=o.data;return f.setAll(e1(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return $l(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function IC(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=G_(r.transform,i||null);s!=null&&(n===null&&(n=ln.empty()),n.set(r.field,s))}return n||null}function sy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ts(r,i,(s,o)=>wC(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ta extends ac{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ri extends ac{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function e1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function oy(t,e,n){const r=new Map;pe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,EC(o,l,n[i]))}return r}function ay(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,_C(s,o,e))}return r}class op extends ac{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AC extends ac{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&SC(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=K_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=Z_(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&Ts(this.mutations,e.mutations,(n,r)=>sy(n,r))&&Ts(this.baseMutations,e.baseMutations,(n,r)=>sy(n,r))}}class ap{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){pe(e.mutations.length===r.length);let i=function(){return pC}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ap(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,ie;function xC(t){switch(t){default:return X();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function t1(t){if(t===void 0)return ar("GRPC error has no .code"),$.UNKNOWN;switch(t){case He.OK:return $.OK;case He.CANCELLED:return $.CANCELLED;case He.UNKNOWN:return $.UNKNOWN;case He.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case He.INTERNAL:return $.INTERNAL;case He.UNAVAILABLE:return $.UNAVAILABLE;case He.UNAUTHENTICATED:return $.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case He.NOT_FOUND:return $.NOT_FOUND;case He.ALREADY_EXISTS:return $.ALREADY_EXISTS;case He.PERMISSION_DENIED:return $.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case He.ABORTED:return $.ABORTED;case He.OUT_OF_RANGE:return $.OUT_OF_RANGE;case He.UNIMPLEMENTED:return $.UNIMPLEMENTED;case He.DATA_LOSS:return $.DATA_LOSS;default:return X()}}(ie=He||(He={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new di([4294967295,4294967295],0);function ly(t){const e=kC().encode(t),n=new C_;return n.update(e),new Uint8Array(n.digest())}function uy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new di([n,r],0),new di([i,s],0)]}class lp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _o(`Invalid padding: ${n}`);if(r<0)throw new _o(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _o(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _o(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=di.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(di.fromNumber(r)));return i.compare(NC)===1&&(i=new di([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ly(e),[r,i]=uy(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new lp(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=ly(e),[r,i]=uy(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _o extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Sa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lc(Z.min(),i,new Ve(ce),lr(),re())}}class Sa{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sa(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class n1{constructor(e,n){this.targetId=e,this.me=n}}class r1{constructor(e,n,r=yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class cy{constructor(){this.fe=0,this.ge=dy(),this.pe=yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=re(),n=re(),r=re();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X()}}),new Sa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=dy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class DC{constructor(e){this.Le=e,this.Be=new Map,this.ke=lr(),this.qe=hy(),this.Qe=new Ve(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Nd(s))if(r===0){const o=new G(s.path);this.Ue(n,o,Rt.newNoDocument(o,Z.min()))}else pe(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Si(r).toUint8Array()}catch(u){if(u instanceof O_)return ws("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new lp(o,i,s)}catch(u){return ws(u instanceof _o?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Nd(l.target)){const u=new G(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Rt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=re();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new lc(e,n,this.Qe,this.ke,r);return this.ke=lr(),this.qe=hy(),this.Qe=new Ve(ce),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new cy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mt(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function hy(){return new Ve(G.comparator)}function dy(){return new Ve(G.comparator)}const MC={asc:"ASCENDING",desc:"DESCENDING"},VC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OC={and:"AND",or:"OR"};class bC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Md(t,e){return t.useProto3Json||nc(e)?e:{value:e}}function Cu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function i1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function LC(t,e){return Cu(t,e.toTimestamp())}function Bn(t){return pe(!!t),Z.fromTimestamp(function(n){const r=Wr(n);return new Xe(r.seconds,r.nanos)}(t))}function up(t,e){return Vd(t,e).canonicalString()}function Vd(t,e){const n=function(i){return new Ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function s1(t){const e=Ce.fromString(t);return pe(c1(e)),e}function Od(t,e){return up(t.databaseId,e.path)}function gh(t,e){const n=s1(e);if(n.get(1)!==t.databaseId.projectId)throw new Q($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(a1(n))}function o1(t,e){return up(t.databaseId,e)}function FC(t){const e=s1(t);return e.length===4?Ce.emptyPath():a1(e)}function bd(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function a1(t){return pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function fy(t,e,n){return{name:Od(t,e),fields:n.value.mapValue.fields}}function $C(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(pe(f===void 0||typeof f=="string"),yt.fromBase64String(f||"")):(pe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),yt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?$.UNKNOWN:t1(h.code);return new Q(f,h.message||"")}(o);n=new r1(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=gh(t,r.document.name),s=Bn(r.document.updateTime),o=r.document.createTime?Bn(r.document.createTime):Z.min(),l=new ln({mapValue:{fields:r.document.fields}}),u=Rt.newFoundDocument(i,s,o,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Bl(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=gh(t,r.document),s=r.readTime?Bn(r.readTime):Z.min(),o=Rt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Bl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=gh(t,r.document),s=r.removedTargetIds||[];n=new Bl([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new PC(i,s),l=r.targetId;n=new n1(l,o)}}return n}function BC(t,e){let n;if(e instanceof Ta)n={update:fy(t,e.key,e.value)};else if(e instanceof op)n={delete:Od(t,e.key)};else if(e instanceof Ri)n={update:fy(t,e.key,e.data),updateMask:GC(e.fieldMask)};else{if(!(e instanceof AC))return X();n={verify:Od(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Iu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ua)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ca)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Au)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:LC(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(t,e.precondition)),n}function jC(t,e){return t&&t.length>0?(pe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Bn(i.updateTime):Bn(s);return o.isEqual(Z.min())&&(o=Bn(s)),new TC(o,i.transformResults||[])}(n,e))):[]}function UC(t,e){return{documents:[o1(t,e.path)]}}function zC(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=o1(t,i);const s=function(h){if(h.length!==0)return u1(Un.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(f=>function(y){return{field:Ui(y.field),direction:qC(y.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Md(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function HC(t){let e=FC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){pe(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const y=l1(p);return y instanceof Un&&$_(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(y=>function(P){return new Su(zi(P.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(p){let y;return y=typeof p=="object"?p.value:p,nc(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){const y=!!p.before,T=p.values||[];return new Tu(T,y)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const y=!p.before,T=p.values||[];return new Tu(T,y)}(n.endAt)),lC(e,i,o,s,l,"F",u,h)}function WC(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function l1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zi(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zi(n.unaryFilter.field);return Ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zi(n.unaryFilter.field);return Ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zi(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(zi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Un.create(n.compositeFilter.filters.map(r=>l1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function qC(t){return MC[t]}function KC(t){return VC[t]}function QC(t){return OC[t]}function Ui(t){return{fieldPath:t.canonicalString()}}function zi(t){return ft.fromServerFormat(t.fieldPath)}function u1(t){return t instanceof Ge?function(n){if(n.op==="=="){if(Zg(n.value))return{unaryFilter:{field:Ui(n.field),op:"IS_NAN"}};if(Jg(n.value))return{unaryFilter:{field:Ui(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zg(n.value))return{unaryFilter:{field:Ui(n.field),op:"IS_NOT_NAN"}};if(Jg(n.value))return{unaryFilter:{field:Ui(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ui(n.field),op:KC(n.op),value:n.value}}}(t):t instanceof Un?function(n){const r=n.getFilters().map(i=>u1(i));return r.length===1?r[0]:{compositeFilter:{op:QC(n.op),filters:r}}}(t):X()}function GC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function c1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,r,i,s=Z.min(),o=Z.min(),l=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.ct=e}}function XC(t){const e=HC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.un=new ZC}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Hr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Hr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class ZC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new mt(Ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new As(0)}static kn(){return new As(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.changes=new $s(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Vo(r.mutation,i,wn.empty(),Xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const i=li();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=vo();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=li();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=lr();const o=Mo(),l=function(){return Mo()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof Ri)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Vo(f.mutation,h,f.mutation.getFieldMask(),Xe.now())):o.set(h.key,wn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var p;return l.set(h,new tR(f,(p=o.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Mo();let i=new Ve((o,l)=>o-l),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||wn.empty();f=l.applyToLocalView(h,f),r.set(u,f);const p=(i.get(l.batchId)||re()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,p=K_();f.forEach(y=>{if(!s.has(y)){const T=Z_(n.get(y),r.get(y));T!==null&&p.set(y,T),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(li());let l=-1,u=s;return o.next(h=>F.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,re())).next(f=>({batchId:l,changes:q_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=vo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=vo();return this.indexManager.getCollectionParents(e,s).next(l=>F.forEach(l,u=>{const h=function(p,y){return new rc(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Rt.newInvalidDocument(f)))});let l=vo();return o.forEach((u,h)=>{const f=s.get(u);f!==void 0&&Vo(f.mutation,h,wn.empty(),Xe.now()),sc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Bn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:XC(i.bundledQuery),readTime:Bn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.overlays=new Ve(G.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=li();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=li(),s=n.length+1,o=new G(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=li(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=li(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return F.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new RC(n,r));let s=this.Ir.get(n);s===void 0&&(s=re(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this.Tr=new mt(et.Er),this.dr=new mt(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new et(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new et(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new Ce([])),r=new et(n,e),i=new et(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new Ce([])),r=new et(n,e),i=new et(n,e+1);let s=re();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new et(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class et{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new mt(et.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new CC(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new et(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new et(n,0),i=new et(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mt(ce);return n.forEach(i=>{const s=new et(i,0),o=new et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new et(new G(s),0);let l=new mt(ce);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new et(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new et(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.Mr=e,this.docs=function(){return new Ve(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=lr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=lr();const o=n.path,l=new G(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||zA(UA(f),r)<=0||(i.has(f.key)||sc(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){X()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new lR(this)}getSize(e){return F.resolve(this.size)}}class lR extends eR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.persistence=e,this.Nr=new $s(n=>np(n),rp),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cp,this.targetCount=0,this.kr=As.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new As(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Jf(0),this.Kr=!1,this.Kr=!0,this.$r=new sR,this.referenceDelegate=e(this),this.Ur=new uR(this),this.indexManager=new JC,this.remoteDocumentCache=function(i){return new aR(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new YC(n),this.Gr=new rR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new iR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new oR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new hR(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class hR extends WA{constructor(e){super(),this.currentSequenceNumber=e}}class hp{constructor(e){this.persistence=e,this.Jr=new cp,this.Yr=null}static Zr(e){return new hp(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=G.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=re(),i=re();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new dp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return gI()?8:qA(pI())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new dR;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ho()<=se.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",ji(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(ho()<=se.DEBUG&&q("QueryEngine","Query:",ji(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ho()<=se.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",ji(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(n))):F.resolve())}Yi(e,n){if(ry(n))return F.resolve(null);let r=Fn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Dd(n,null,"F"),r=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=re(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Dd(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return ry(n)||i.isEqual(Z.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?F.resolve(null):(ho()<=se.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ji(n)),this.rs(e,o,n,jA(i,-1)).next(l=>l))})}ts(e,n){let r=new mt(H_(e));return n.forEach((i,s)=>{sc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ho()<=se.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",ji(n)),this.Ji.getDocumentsMatchingQuery(e,n,Hr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ve(ce),this._s=new $s(s=>np(s),rp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function mR(t,e,n,r){return new pR(t,e,n,r)}async function h1(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=re();for(const h of i){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of s){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function gR(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const p=h.batch,y=p.keys();let T=F.resolve();return y.forEach(P=>{T=T.next(()=>f.getEntry(u,P)).next(R=>{const D=h.docVersions.get(P);pe(D!==null),R.version.compareTo(D)<0&&(p.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),f.addEntry(R)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=re();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function d1(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function yR(t,e){const n=ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const y=i.get(p);if(!y)return;l.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,p)));let T=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?T=T.withResumeToken(yt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,r)),i=i.insert(p,T),function(R,D,E){return R.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(y,T,f)&&l.push(n.Ur.updateTargetData(s,T))});let u=lr(),h=re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(vR(s,o,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(Z.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.os=i,s))}function vR(t,e,n){let r=re(),i=re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=lr();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function _R(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ER(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Pr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ld(t,e,n){const r=ee(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!wa(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function py(t,e,n){const r=ee(t);let i=Z.min(),s=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const p=ee(u),y=p._s.get(f);return y!==void 0?F.resolve(p.os.get(y)):p.Ur.getTargetData(h,f)}(r,o,Fn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Z.min(),n?s:re())).next(l=>(wR(r,hC(e),l),{documents:l,Ts:s})))}function wR(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class my{constructor(){this.activeTargetIds=yC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TR{constructor(){this.so=new my,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new my,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl=null;function yh(){return Tl===null?Tl=function(){return 268435456+Math.round(2147483648*Math.random())}():Tl++,"0x"+Tl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class CR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=yh(),u=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,u,h,i).then(f=>(q("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw ws("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ls}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=IR[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=yh();return new Promise((o,l)=>{const u=new R_;u.setWithCredentials(!0),u.listenOnce(P_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ll.NO_ERROR:const f=u.getResponseJson();q(It,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ll.TIMEOUT:q(It,`RPC '${e}' ${s} timed out`),l(new Q($.DEADLINE_EXCEEDED,"Request time out"));break;case Ll.HTTP_ERROR:const p=u.getStatus();if(q(It,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const T=y==null?void 0:y.error;if(T&&T.status&&T.message){const P=function(D){const E=D.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(E)>=0?E:$.UNKNOWN}(T.status);l(new Q(P,T.message))}else l(new Q($.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Q($.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{q(It,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);q(It,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=yh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=N_(),l=k_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");q(It,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);let y=!1,T=!1;const P=new AR({Io:D=>{T?q(It,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(y||(q(It,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),q(It,`RPC '${e}' stream ${i} sending:`,D),p.send(D))},To:()=>p.close()}),R=(D,E,_)=>{D.listen(E,S=>{try{_(S)}catch(N){setTimeout(()=>{throw N},0)}})};return R(p,yo.EventType.OPEN,()=>{T||(q(It,`RPC '${e}' stream ${i} transport opened.`),P.yo())}),R(p,yo.EventType.CLOSE,()=>{T||(T=!0,q(It,`RPC '${e}' stream ${i} transport closed`),P.So())}),R(p,yo.EventType.ERROR,D=>{T||(T=!0,ws(It,`RPC '${e}' stream ${i} transport errored:`,D),P.So(new Q($.UNAVAILABLE,"The operation could not be completed")))}),R(p,yo.EventType.MESSAGE,D=>{var E;if(!T){const _=D.data[0];pe(!!_);const S=_,N=S.error||((E=S[0])===null||E===void 0?void 0:E.error);if(N){q(It,`RPC '${e}' stream ${i} received error:`,N);const O=N.status;let M=function(w){const I=He[w];if(I!==void 0)return t1(I)}(O),v=N.message;M===void 0&&(M=$.INTERNAL,v="Unknown error status: "+O+" with message "+N.message),T=!0,P.So(new Q(M,v)),p.close()}else q(It,`RPC '${e}' stream ${i} received:`,_),P.bo(_)}}),R(l,x_.STAT_EVENT,D=>{D.stat===Rd.PROXY?q(It,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===Rd.NOPROXY&&q(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function vh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t){return new bC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new f1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(ar(n.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Q($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RR extends p1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=$C(this.serializer,e),r=function(s){if(!("targetChange"in s))return Z.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?Bn(o.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=bd(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Nd(u)?{documents:UC(s,u)}:{query:zC(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=i1(s,o.resumeToken);const h=Md(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Z.min())>0){l.readTime=Cu(s,o.snapshotVersion.toTimestamp());const h=Md(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=WC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=bd(this.serializer),n.removeTarget=e,this.a_(n)}}class PR extends p1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=jC(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=bd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>BC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Q($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Vd(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q($.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Vd(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class kR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ar(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Pi(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=ee(u);h.L_.add(4),await Ia(h),h.q_.set("Unknown"),h.L_.delete(4),await cc(h)}(this))})}),this.q_=new kR(r,i)}}async function cc(t){if(Pi(t))for(const e of t.B_)await e(!0)}async function Ia(t){for(const e of t.B_)await e(!1)}function m1(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),gp(n)?mp(n):Bs(n).r_()&&pp(n,e))}function fp(t,e){const n=ee(t),r=Bs(n);n.N_.delete(e),r.r_()&&g1(n,e),n.N_.size===0&&(r.r_()?r.o_():Pi(n)&&n.q_.set("Unknown"))}function pp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bs(t).A_(e)}function g1(t,e){t.Q_.xe(e),Bs(t).R_(e)}function mp(t){t.Q_=new DC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Bs(t).start(),t.q_.v_()}function gp(t){return Pi(t)&&!Bs(t).n_()&&t.N_.size>0}function Pi(t){return ee(t).L_.size===0}function y1(t){t.Q_=void 0}async function DR(t){t.q_.set("Online")}async function MR(t){t.N_.forEach((e,n)=>{pp(t,e)})}async function VR(t,e){y1(t),gp(t)?(t.q_.M_(e),mp(t)):t.q_.set("Unknown")}async function OR(t,e,n){if(t.q_.set("Online"),e instanceof r1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ru(t,r)}else if(e instanceof Bl?t.Q_.Ke(e):e instanceof n1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const r=await d1(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(h);f&&s.N_.set(h,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(yt.EMPTY_BYTE_STRING,f.snapshotVersion)),g1(s,u);const p=new Pr(f.target,u,h,f.sequenceNumber);pp(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await Ru(t,r)}}async function Ru(t,e,n){if(!wa(e))throw e;t.L_.add(1),await Ia(t),t.q_.set("Offline"),n||(n=()=>d1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await cc(t)})}function v1(t,e){return e().catch(n=>Ru(t,n,e))}async function hc(t){const e=ee(t),n=qr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;bR(e);)try{const i=await _R(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,LR(e,i)}catch(i){await Ru(e,i)}_1(e)&&E1(e)}function bR(t){return Pi(t)&&t.O_.length<10}function LR(t,e){t.O_.push(e);const n=qr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function _1(t){return Pi(t)&&!qr(t).n_()&&t.O_.length>0}function E1(t){qr(t).start()}async function FR(t){qr(t).p_()}async function $R(t){const e=qr(t);for(const n of t.O_)e.m_(n.mutations)}async function BR(t,e,n){const r=t.O_.shift(),i=ap.from(r,e,n);await v1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await hc(t)}async function jR(t,e){e&&qr(t).V_&&await async function(r,i){if(function(o){return xC(o)&&o!==$.ABORTED}(i.code)){const s=r.O_.shift();qr(r).s_(),await v1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await hc(r)}}(t,e),_1(t)&&E1(t)}async function yy(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=Pi(n);n.L_.add(3),await Ia(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await cc(n)}async function UR(t,e){const n=ee(t);e?(n.L_.delete(2),await cc(n)):e||(n.L_.add(2),await Ia(n),n.q_.set("Unknown"))}function Bs(t){return t.K_||(t.K_=function(n,r,i){const s=ee(n);return s.w_(),new RR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:DR.bind(null,t),Ro:MR.bind(null,t),mo:VR.bind(null,t),d_:OR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),gp(t)?mp(t):t.q_.set("Unknown")):(await t.K_.stop(),y1(t))})),t.K_}function qr(t){return t.U_||(t.U_=function(n,r,i){const s=ee(n);return s.w_(),new PR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:FR.bind(null,t),mo:jR.bind(null,t),f_:$R.bind(null,t),g_:BR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await hc(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new yp(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vp(t,e){if(ar("AsyncQueue",`${e}: ${t}`),wa(t))return new Q($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=vo(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new hs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof hs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new hs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(){this.W_=new Ve(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Cs{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Cs(e,n,hs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class HR{constructor(){this.queries=_y(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ee(n),s=i.queries;i.queries=_y(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Q($.ABORTED,"Firestore shutting down"))}}function _y(){return new $s(t=>z_(t),ic)}async function WR(t,e){const n=ee(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new zR,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=vp(o,`Initialization of query '${ji(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&_p(n)}async function qR(t,e){const n=ee(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function KR(t,e){const n=ee(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&_p(n)}function QR(t,e,n){const r=ee(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function _p(t){t.Y_.forEach(e=>{e.next()})}var Fd,Ey;(Ey=Fd||(Fd={})).ea="default",Ey.Cache="cache";class GR{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Cs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Cs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.key=e}}class T1{constructor(e){this.key=e}}class YR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=re(),this.mutatedKeys=re(),this.Aa=H_(e),this.Ra=new hs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new vy,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const y=i.get(f),T=sc(this.query,p)?p:null,P=!!y&&this.mutatedKeys.has(y.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let D=!1;y&&T?y.data.isEqual(T.data)?P!==R&&(r.track({type:3,doc:T}),D=!0):this.ga(y,T)||(r.track({type:2,doc:T}),D=!0,(u&&this.Aa(T,u)>0||h&&this.Aa(T,h)<0)&&(l=!0)):!y&&T?(r.track({type:0,doc:T}),D=!0):y&&!T&&(r.track({type:1,doc:y}),D=!0,(u||h)&&(l=!0)),D&&(T?(o=o.add(T),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(T,P){const R=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return R(T)-R(P)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new Cs(this.query,e.Ra,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new T1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new w1(r))}),n}ba(e){this.Ta=e.Ts,this.da=re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Cs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class XR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class JR{constructor(e){this.key=e,this.va=!1}}class ZR{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new $s(l=>z_(l),ic),this.Ma=new Map,this.xa=new Set,this.Oa=new Ve(G.comparator),this.Na=new Map,this.La=new cp,this.Ba={},this.ka=new Map,this.qa=As.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function eP(t,e,n=!0){const r=P1(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await S1(r,e,n,!0),i}async function tP(t,e){const n=P1(t);await S1(n,e,!0,!1)}async function S1(t,e,n,r){const i=await ER(t.localStore,Fn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await nP(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&m1(t.remoteStore,i),l}async function nP(t,e,n,r,i){t.Ka=(p,y,T)=>async function(R,D,E,_){let S=D.view.ma(E);S.ns&&(S=await py(R.localStore,D.query,!1).then(({documents:v})=>D.view.ma(v,S)));const N=_&&_.targetChanges.get(D.targetId),O=_&&_.targetMismatches.get(D.targetId)!=null,M=D.view.applyChanges(S,R.isPrimaryClient,N,O);return Ty(R,D.targetId,M.wa),M.snapshot}(t,p,y,T);const s=await py(t.localStore,e,!0),o=new YR(e,s.Ts),l=o.ma(s.documents),u=Sa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);Ty(t,n,h.wa);const f=new XR(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function rP(t,e,n){const r=ee(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ic(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ld(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fp(r.remoteStore,i.targetId),$d(r,i.targetId)}).catch(Ea)):($d(r,i.targetId),await Ld(r.localStore,i.targetId,!0))}async function iP(t,e){const n=ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fp(n.remoteStore,r.targetId))}async function sP(t,e,n){const r=dP(t);try{const i=await function(o,l){const u=ee(o),h=Xe.now(),f=l.reduce((T,P)=>T.add(P.key),re());let p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let P=lr(),R=re();return u.cs.getEntries(T,f).next(D=>{P=D,P.forEach((E,_)=>{_.isValidDocument()||(R=R.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,P)).next(D=>{p=D;const E=[];for(const _ of l){const S=IC(_,p.get(_.key).overlayedDocument);S!=null&&E.push(new Ri(_.key,S,b_(S.value.mapValue),$n.exists(!0)))}return u.mutationQueue.addMutationBatch(T,h,E,l)}).next(D=>{y=D;const E=D.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(T,D.batchId,E)})}).then(()=>({batchId:y.batchId,changes:q_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Ve(ce)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await Aa(r,i.changes),await hc(r.remoteStore)}catch(i){const s=vp(i,"Failed to persist write");n.reject(s)}}async function I1(t,e){const n=ee(t);try{const r=await yR(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?pe(o.va):i.removedDocuments.size>0&&(pe(o.va),o.va=!1))}),await Aa(n,r,e)}catch(r){await Ea(r)}}function wy(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ee(o);u.onlineState=l;let h=!1;u.queries.forEach((f,p)=>{for(const y of p.j_)y.Z_(l)&&(h=!0)}),h&&_p(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function oP(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ve(G.comparator);o=o.insert(s,Rt.newNoDocument(s,Z.min()));const l=re().add(s),u=new lc(Z.min(),new Map,new Ve(ce),o,l);await I1(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Ep(r)}else await Ld(r.localStore,e,!1).then(()=>$d(r,e,n)).catch(Ea)}async function aP(t,e){const n=ee(t),r=e.batch.batchId;try{const i=await gR(n.localStore,e);C1(n,r,null),A1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Aa(n,i)}catch(i){await Ea(i)}}async function lP(t,e,n){const r=ee(t);try{const i=await function(o,l){const u=ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(pe(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);C1(r,e,n),A1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Aa(r,i)}catch(i){await Ea(i)}}function A1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function C1(t,e,n){const r=ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function $d(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||R1(t,r)})}function R1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(fp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ep(t))}function Ty(t,e,n){for(const r of n)r instanceof w1?(t.La.addReference(r.key,e),uP(t,r)):r instanceof T1?(q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||R1(t,r.key)):X()}function uP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ep(t))}function Ep(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(Ce.fromString(e)),r=t.qa.next();t.Na.set(r,new JR(n)),t.Oa=t.Oa.insert(n,r),m1(t.remoteStore,new Pr(Fn(ip(n.path)),r,"TargetPurposeLimboResolution",Jf.oe))}}async function Aa(t,e,n){const r=ee(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=dp.Wi(u.targetId,h);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,h){const f=ee(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(h,y=>F.forEach(y.$i,T=>f.persistence.referenceDelegate.addReference(p,y.targetId,T)).next(()=>F.forEach(y.Ui,T=>f.persistence.referenceDelegate.removeReference(p,y.targetId,T)))))}catch(p){if(!wa(p))throw p;q("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const y=p.targetId;if(!p.fromCache){const T=f.os.get(y),P=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(P);f.os=f.os.insert(y,R)}}}(r.localStore,s))}async function cP(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await h1(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new Q($.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Aa(n,r.hs)}}function hP(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return re().add(r.key);{let i=re();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function P1(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=I1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oP.bind(null,e),e.Ca.d_=KR.bind(null,e.eventManager),e.Ca.$a=QR.bind(null,e.eventManager),e}function dP(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lP.bind(null,e),e}class Pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return mR(this.persistence,new fR,e.initialUser,this.serializer)}Ga(e){return new cR(hp.Zr,this.serializer)}Wa(e){return new TR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pu.provider={build:()=>new Pu};class Bd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cP.bind(null,this.syncEngine),await UR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HR}()}createDatastore(e){const n=uc(e.databaseInfo.databaseId),r=function(s){return new CR(s)}(e.databaseInfo);return function(s,o,l,u){return new xR(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new NR(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>wy(this.syncEngine,n,0),function(){return gy.D()?new gy:new SR}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,f){const p=new ZR(i,s,o,l,u,h);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ee(i);q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ia(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Bd.provider={build:()=>new Bd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=At.UNAUTHENTICATED,this.clientId=M_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=vp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _h(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await h1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mP(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>yy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>yy(e.remoteStore,i)),t._onlineComponents=e}async function mP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await _h(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ws("Error using user provided cache. Falling back to memory cache: "+n),await _h(t,new Pu)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await _h(t,new Pu);return t._offlineComponents}async function x1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await Sy(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await Sy(t,new Bd))),t._onlineComponents}function gP(t){return x1(t).then(e=>e.syncEngine)}async function Iy(t){const e=await x1(t),n=e.eventManager;return n.onListen=eP.bind(null,e.syncEngine),n.onUnlisten=rP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=iP.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t,e,n){if(!n)throw new Q($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yP(t,e,n,r){if(e===!0&&r===!0)throw new Q($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Cy(t){if(!G.isDocumentKey(t))throw new Q($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ry(t){if(G.isDocumentKey(t))throw new Q($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function pi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wp(t);throw new Q($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=k1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Py({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Py(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new DA;switch(r.type){case"firstParty":return new bA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ay.get(n);r&&(q("ComponentProvider","Removing Datastore"),Ay.delete(n),r.terminate())}(this),Promise.resolve()}}function vP(t,e,n,r={}){var i;const s=(t=pi(t,dc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=At.MOCK_USER;else{l=fI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Q($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new At(h)}t._authCredentials=new MA(new D_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fc(this.firestore,e,this._query)}}class Gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}}class jr extends fc{constructor(e,n,r){super(e,n,ip(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new G(e))}withConverter(e){return new jr(this.firestore,e,this._path)}}function _P(t,e,...n){if(t=Es(t),N1("collection","path",e),t instanceof dc){const r=Ce.fromString(e,...n);return Ry(r),new jr(t,null,r)}{if(!(t instanceof Gt||t instanceof jr))throw new Q($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Ry(r),new jr(t.firestore,null,r)}}function xr(t,e,...n){if(t=Es(t),arguments.length===1&&(e=M_.newId()),N1("doc","path",e),t instanceof dc){const r=Ce.fromString(e,...n);return Cy(r),new Gt(t,null,new G(r))}{if(!(t instanceof Gt||t instanceof jr))throw new Q($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Cy(r),new Gt(t.firestore,t instanceof jr?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new f1(this,"async_queue_retry"),this.Vu=()=>{const r=vh();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=vh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=vh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new fi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!wa(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw ar("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=yp.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function ky(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class ha extends dc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new xy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xy(e),this._firestoreClient=void 0,await e}}}function EP(t,e){const n=typeof t=="object"?t:TA(),r=typeof t=="string"?t:"(default)",i=vA(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=hI("firestore");s&&vP(i,...s)}return i}function D1(t){if(t._terminated)throw new Q($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wP(t),t._firestoreClient}function wP(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,f){return new GA(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,k1(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new pP(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rs(yt.fromBase64String(e))}catch(n){throw new Q($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rs(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=/^__.*__$/;class SP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ri(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ta(e,this.data,n,this.fieldTransforms)}}function V1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class Ap{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ap(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return xu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(V1(this.Cu)&&TP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class IP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||uc(e)}Qu(e,n,r,i=!1){return new Ap({Cu:e,methodName:n,qu:r,path:ft.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function AP(t){const e=t._freezeSettings(),n=uc(t._databaseId);return new IP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function CP(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);F1("Data must be an object, but it was:",o,r);const l=b1(r,o);let u,h;if(s.merge)u=new wn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const y=RP(e,p,n);if(!o.contains(y))throw new Q($.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);xP(f,y)||f.push(y)}u=new wn(f),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new SP(new ln(l),u,h)}function O1(t,e){if(L1(t=Es(t)))return F1("Unsupported field value:",e,t),b1(t,e);if(t instanceof M1)return function(r,i){if(!V1(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=O1(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Es(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Xe.fromDate(r);return{timestampValue:Cu(i.serializer,s)}}if(r instanceof Xe){const s=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cu(i.serializer,s)}}if(r instanceof Sp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rs)return{bytesValue:i1(i.serializer,r._byteString)};if(r instanceof Gt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:up(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ip)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return sp(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${wp(r)}`)}(t,e)}function b1(t,e){const n={};return V_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(t,(r,i)=>{const s=O1(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function L1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Sp||t instanceof Rs||t instanceof Gt||t instanceof M1||t instanceof Ip)}function F1(t,e,n){if(!L1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=wp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function RP(t,e,n){if((e=Es(e))instanceof Tp)return e._internalPath;if(typeof e=="string")return $1(t,e);throw xu("Field path arguments must be of type string or ",t,!1,void 0,n)}const PP=new RegExp("[~\\*/\\[\\]]");function $1(t,e,n){if(e.search(PP)>=0)throw xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Tp(...e.split("."))._internalPath}catch{throw xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Q($.INVALID_ARGUMENT,l+t+u)}function xP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(j1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kP extends B1{data(){return super.data()}}function j1(t,e){return typeof e=="string"?$1(t,e):e instanceof Tp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class DP{convertValue(e,n="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Be(o.doubleValue));return new Ip(s)}convertGeoPoint(e){return new Sp(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ep(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(oa(e));default:return null}}convertTimestamp(e){const n=Wr(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);pe(c1(r));const i=new aa(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||ar(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class U1 extends B1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(j1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class jl extends U1{data(e={}){return super.data(e)}}class VP{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Eo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jl(this._firestore,this._userDataWriter,r.key,r,new Eo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new jl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Eo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new jl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Eo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:OP(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function OP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class z1 extends DP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}function Oo(t,e,n){t=pi(t,Gt);const r=pi(t.firestore,ha),i=MP(t.converter,e,n);return H1(r,[CP(AP(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,$n.none())])}function bP(t){return H1(pi(t.firestore,ha),[new op(t._key,$n.none())])}function Cp(t,...e){var n,r,i;t=Es(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ky(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ky(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,h,f;if(t instanceof Gt)h=pi(t.firestore,ha),f=ip(t._key.path),u={next:p=>{e[o]&&e[o](LP(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=pi(t,fc);h=pi(p.firestore,ha),f=p._query;const y=new z1(h);u={next:T=>{e[o]&&e[o](new VP(h,y,p,T))},error:e[o+1],complete:e[o+2]},NP(t._query)}return function(y,T,P,R){const D=new fP(R),E=new GR(T,D,P);return y.asyncQueue.enqueueAndForget(async()=>WR(await Iy(y),E)),()=>{D.Za(),y.asyncQueue.enqueueAndForget(async()=>qR(await Iy(y),E))}}(D1(h),f,l,u)}function H1(t,e){return function(r,i){const s=new fi;return r.asyncQueue.enqueueAndForget(async()=>sP(await gP(r),i,s)),s.promise}(D1(t),e)}function LP(t,e,n){const r=n.docs.get(e._key),i=new z1(t);return new U1(t,i,e._key,r,new Eo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ls=i})(wA),Eu(new ra("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new ha(new VA(r.getProvider("auth-internal")),new FA(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Q($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new aa(h.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),cs(Kg,"4.7.3",e),cs(Kg,"4.7.3","esm2017")})();var FP="firebase",$P="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cs(FP,$P,"app");const BP={apiKey:"AIzaSyAffBMfX9NHVgSg_w4a8ZKa55vmp0eHb2w",authDomain:"dd5tools.firebaseapp.com",databaseURL:"https://dd5tools.firebaseio.com",projectId:"dd5tools",storageBucket:"dd5tools.appspot.com",messagingSenderId:"1096592466642",appId:"1:1096592466642:web:f03ea81d304964f1f1030b"},jP=S_(BP),Yn=EP(jP),js={Monster:"Monster",Character:"Character"},er=50,ku=44,ns=1,UP=2,Ny=er-ns,Ca=16,pc=20,Rp=["##............##","#..............#","................","................","................","................","................","................","........####....","........####....","...####.........","...####.........","................",".............#..",".............#..",".............#..","................","................","...............#","..............##"],zP=t=>Math.floor(Math.random()*20)+1+W1(t),W1=t=>Math.floor((t.abilities[W.DEX]-10)/2),HP=()=>{for(;;){const t=Math.floor(Math.random()*Ca),e=Math.floor(Math.random()*10);if(Rp[e][t]===".")return{x:t,y:e}}},WP=(t,e)=>{const{x:n,y:r}=HP(),{hp:i,name:s}=t;return{id:`m${e}`,type:js.Monster,name:s,x:n,y:r,hp:i}},qP=t=>e=>({...e,move:[...e.move,t]}),KP=(t,e)=>n=>({...n,specialAbilities:[...n.specialAbilities,{label:t,text:e}]}),QP={name:"string",num:1,size:"中型",monsterType:"人型",ac:10,hp:1,save:1,move:[],skills:{},senses:[],languages:[],cr:"string",exp:-1,abilities:{[W.STR]:10,[W.DEX]:10,[W.CON]:10,[W.INT]:10,[W.WIS]:10,[W.CHA]:10},actions:[],specialAbilities:[],toHit:-1,damage:-1,diceNum:-1,damageMod:-1,baseBonus:-1,initiative:-1},q1={initiative:zP,dexMod:W1,unit:WP,empty:QP,moveEnhancer:qP,saEnhancer:KP},GP=t=>{const[e,n]=b.useState(0),[r,i]=b.useState(q1.empty);b.useEffect(()=>{Cp(xr(Yn,"monster","monster"),C=>{C.data()!=null&&i(C.data())})},[]);const{cr:s,num:o,exp:l}=b.useMemo(()=>yl(Object.keys(Vg).map(C=>{const x=Vg[C],A=Math.floor(t/x);return{cr:C,num:A,exp:x}}).filter(({num:C})=>1<=C&&C<=15)),[e]),u=b.useMemo(()=>yl(hh.filter(C=>C.templateType===Se.TYPE&&C.rarity===ke.COMMON)),[e]),h=b.useMemo(()=>yl(hh.filter(C=>C.templateType===Se.RACE&&C.monsterType===u.monsterType)),[e]),f=b.useMemo(()=>yl(hh.filter(C=>C.templateType===Se.CLASS)),[e]),{baseBonus:p,ac:y,hpMin:T,hpMax:P,atBonus:R,damageMin:D,damageMax:E,save:_}=MS[s],S=Math.floor((T+P)/2),N=Math.floor((D+E)/2),O=Math.floor(N/3.5),M=Math.floor(N-O*3.5),v=Math.floor(Math.random()*20)+p,m={name:h.name+f.name,num:o,size:VS.MEDIUM,monsterType:Le.HUMANOID,ac:y,hp:S,save:_,move:[],cr:s,exp:l,abilities:{[W.STR]:8+p,[W.DEX]:8+p,[W.CON]:8+p,[W.INT]:8+p,[W.WIS]:8+p,[W.CHA]:8+p},skills:{},senses:[],languages:[],specialAbilities:[],actions:[],toHit:R,damage:N,diceNum:O,damageMod:M,baseBonus:p,initiative:v},w=ue(h.enhancer,u.enhancer,f.enhancer)(m);return{monster:r,reRollMonster:()=>{n(Math.random()),Oo(xr(Yn,"monster","monster"),w).then()}}},YP=({settings:t,setLevel:e,setNumCharacters:n,setDifficulty:r})=>{const{level:i,numCharacters:s,difficulty:o}=t;return L.jsxs(L.Fragment,{children:[L.jsx("h3",{children:"設定"}),L.jsxs("select",{value:i,className:"form-select form-select-lg mb-3",onChange:l=>e(parseInt(l.target.value)),children:[L.jsx("option",{value:"",children:"レベルを選択してください"}),[...Array(20).keys()].map(l=>L.jsxs("option",{value:l+1,children:["キャラクターレベル ",l+1]},l))]}),L.jsxs("select",{value:s,className:"form-select form-select-lg mb-3",onChange:l=>n(parseInt(l.target.value)),children:[L.jsx("option",{value:"",children:"人数を選択してください"}),[...Array(6).keys()].map(l=>L.jsxs("option",{value:l+1,children:["人数 ",l+1]},l))]}),L.jsxs("select",{value:o,className:"form-select form-select-lg mb-3",onChange:l=>r(l.target.value),children:[L.jsx("option",{value:"",children:"難易度を選択してください"}),L.jsx("option",{value:Zn.EASY,children:"簡単"}),L.jsx("option",{value:Zn.NORMAL,children:"通常"}),L.jsx("option",{value:Zn.HARD,children:"困難"}),L.jsx("option",{value:Zn.HELL,children:"死地"})]})]})},ye={Setting:"Setting",Monster:"Monster",Room:"Room",HitPoint:"HitPoint",EditRoom:"EditRoom"},XP=t=>{const[e,n]=b.useState(ye.Room),r=b.useMemo(()=>{switch(e){case ye.Setting:return"モンスターを作成";case ye.Monster:return"モンスターを再作成";case ye.Room:return"ユニットを配置";case ye.HitPoint:return"ヒットポイントを初期化";case ye.EditRoom:return"壁をクリア";default:return""}},[e]);return{page:e,setPage:n,reRoll:()=>{t[e]()},reRollLabel:r}},JP=({page:t,setPage:e,reRoll:n,reRollLabel:r,isMaster:i,setIsMaster:s})=>L.jsx("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark mb-3",children:L.jsxs("div",{className:"container-fluid",children:[L.jsx("a",{className:"navbar-brand",onClick:n,children:"DD5eTool"}),L.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:L.jsx("span",{className:"navbar-toggler-icon"})}),L.jsxs("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[L.jsxs("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[i&&L.jsx("li",{className:"nav-item",children:L.jsx("a",{className:t===ye.Setting?"nav-link active":"nav-link",onClick:()=>e(ye.Setting),children:"設定"})}),i&&L.jsx("li",{className:"nav-item",children:L.jsx("a",{className:t===ye.Monster?"nav-link active":"nav-link",onClick:()=>e(ye.Monster),children:"モンスター"})}),L.jsx("li",{className:"nav-item",children:L.jsx("a",{className:t===ye.Room?"nav-link active":"nav-link",onClick:()=>e(ye.Room),children:"戦闘マップ"})}),i&&L.jsx("li",{className:"nav-item",children:L.jsx("a",{className:t===ye.HitPoint?"nav-link active":"nav-link",onClick:()=>e(ye.HitPoint),children:"ヒットポイント"})}),i&&L.jsx("li",{className:"nav-item",children:L.jsx("a",{className:t===ye.EditRoom?"nav-link active":"nav-link",onClick:()=>e(ye.EditRoom),children:"マップ編集"})})]}),L.jsxs("div",{className:"form-check form-switch me-4",children:[L.jsx("input",{className:"form-check-input",type:"checkbox",id:"isMaster",checked:i,onChange:o=>{console.log(`isMaster: ${o.target.checked}`),s(o.target.checked)}}),i?L.jsx("label",{className:"form-check-label text-white",htmlFor:"isMaster",children:"マスター：有効"}):L.jsx("label",{className:"form-check-label text-white",htmlFor:"isMaster",children:"マスター：無効"})]}),L.jsx("button",{className:"btn btn-secondary",onClick:n,children:L.jsx("i",{className:"bi bi-dice-5-fill",children:r})})]})]})}),ZP=()=>{const[t,e]=b.useState([]),n=_P(Yn,"units");return b.useEffect(()=>{Cp(n,l=>e(l.docs.map(u=>u.data())))},[]),{units:t,move:(l,u,h)=>{Oo(xr(Yn,"units",l),{x:u,y:h},{merge:!0}).then()},setUnit:l=>{Oo(xr(Yn,"units",l.id),l).then()},deleteUnit:l=>{bP(xr(Yn,"units",l)).then()},setHitPoint:(l,u)=>{Oo(xr(Yn,"units",l),{hp:u},{merge:!0}).then()}}},mc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Us(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Pp(t){return"nodeType"in t}function jt(t){var e,n;return t?Us(t)?t:Pp(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function xp(t){const{Document:e}=jt(t);return t instanceof e}function Ra(t){return Us(t)?!1:t instanceof jt(t).HTMLElement}function K1(t){return t instanceof jt(t).SVGElement}function zs(t){return t?Us(t)?t.document:Pp(t)?xp(t)?t:Ra(t)||K1(t)?t.ownerDocument:document:document:document}const ur=mc?b.useLayoutEffect:b.useEffect;function kp(t){const e=b.useRef(t);return ur(()=>{e.current=t}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function ex(){const t=b.useRef(null),e=b.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=b.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function da(t,e){e===void 0&&(e=[t]);const n=b.useRef(t);return ur(()=>{n.current!==t&&(n.current=t)},e),n}function Pa(t,e){const n=b.useRef();return b.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Nu(t){const e=kp(t),n=b.useRef(null),r=b.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function jd(t){const e=b.useRef();return b.useEffect(()=>{e.current=t},[t]),e.current}let Eh={};function gc(t,e){return b.useMemo(()=>{if(e)return e;const n=Eh[t]==null?0:Eh[t]+1;return Eh[t]=n,t+"-"+n},[t,e])}function Q1(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const l=Object.entries(o);for(const[u,h]of l){const f=s[u];f!=null&&(s[u]=f+t*h)}return s},{...e})}}const ds=Q1(1),Du=Q1(-1);function tx(t){return"clientX"in t&&"clientY"in t}function G1(t){if(!t)return!1;const{KeyboardEvent:e}=jt(t.target);return e&&t instanceof e}function nx(t){if(!t)return!1;const{TouchEvent:e}=jt(t.target);return e&&t instanceof e}function Ud(t){if(nx(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return tx(t)?{x:t.clientX,y:t.clientY}:null}const zd=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[zd.Translate.toString(t),zd.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Dy="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function rx(t){return t.matches(Dy)?t:t.querySelector(Dy)}const ix={display:"none"};function sx(t){let{id:e,value:n}=t;return dt.createElement("div",{id:e,style:ix},n)}function ox(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return dt.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function ax(){const[t,e]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Y1=b.createContext(null);function lx(t){const e=b.useContext(Y1);b.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function ux(){const[t]=b.useState(()=>new Set),e=b.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[b.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,s)})},[t]),e]}const cx={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},hx={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function dx(t){let{announcements:e=hx,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=cx}=t;const{announce:s,announcement:o}=ax(),l=gc("DndLiveRegion"),[u,h]=b.useState(!1);if(b.useEffect(()=>{h(!0)},[]),lx(b.useMemo(()=>({onDragStart(p){let{active:y}=p;s(e.onDragStart({active:y}))},onDragMove(p){let{active:y,over:T}=p;e.onDragMove&&s(e.onDragMove({active:y,over:T}))},onDragOver(p){let{active:y,over:T}=p;s(e.onDragOver({active:y,over:T}))},onDragEnd(p){let{active:y,over:T}=p;s(e.onDragEnd({active:y,over:T}))},onDragCancel(p){let{active:y,over:T}=p;s(e.onDragCancel({active:y,over:T}))}}),[s,e])),!u)return null;const f=dt.createElement(dt.Fragment,null,dt.createElement(sx,{id:r,value:i.draggable}),dt.createElement(ox,{id:l,announcement:o}));return n?ii.createPortal(f,n):f}var Qe;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Qe||(Qe={}));function Mu(){}const Cn=Object.freeze({x:0,y:0});function fx(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function px(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function mx(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,l=s-n;if(r<i&&n<s){const u=e.width*e.height,h=t.width*t.height,f=o*l,p=f/(u+h-f);return Number(p.toFixed(4))}return 0}const gx=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=mx(l,e);u>0&&i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(fx)};function yx(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function X1(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Cn}function vx(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const _x=vx(1);function Ex(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function wx(t,e,n){const r=Ex(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:l}=r,u=t.left-o-(1-i)*parseFloat(n),h=t.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),f=i?t.width/i:t.width,p=s?t.height/s:t.height;return{width:f,height:p,top:h,right:u+f,bottom:h+p,left:u}}const Tx={ignoreTransform:!1};function xa(t,e){e===void 0&&(e=Tx);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:f}=jt(t).getComputedStyle(t);h&&(n=wx(n,h,f))}const{top:r,left:i,width:s,height:o,bottom:l,right:u}=n;return{top:r,left:i,width:s,height:o,bottom:l,right:u}}function My(t){return xa(t,{ignoreTransform:!0})}function Sx(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Ix(t,e){return e===void 0&&(e=jt(t).getComputedStyle(t)),e.position==="fixed"}function Ax(t,e){e===void 0&&(e=jt(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function Np(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(xp(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Ra(i)||K1(i)||n.includes(i))return n;const s=jt(t).getComputedStyle(i);return i!==t&&Ax(i,s)&&n.push(i),Ix(i,s)?n:r(i.parentNode)}return t?r(t):n}function J1(t){const[e]=Np(t,1);return e??null}function wh(t){return!mc||!t?null:Us(t)?t:Pp(t)?xp(t)||t===zs(t).scrollingElement?window:Ra(t)?t:null:null}function Z1(t){return Us(t)?t.scrollX:t.scrollLeft}function eE(t){return Us(t)?t.scrollY:t.scrollTop}function Hd(t){return{x:Z1(t),y:eE(t)}}var nt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(nt||(nt={}));function tE(t){return!mc||!t?!1:t===document.scrollingElement}function nE(t){const e={x:0,y:0},n=tE(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const Cx={x:.2,y:.2};function Rx(t,e,n,r,i){let{top:s,left:o,right:l,bottom:u}=n;r===void 0&&(r=10),i===void 0&&(i=Cx);const{isTop:h,isBottom:f,isLeft:p,isRight:y}=nE(t),T={x:0,y:0},P={x:0,y:0},R={height:e.height*i.y,width:e.width*i.x};return!h&&s<=e.top+R.height?(T.y=nt.Backward,P.y=r*Math.abs((e.top+R.height-s)/R.height)):!f&&u>=e.bottom-R.height&&(T.y=nt.Forward,P.y=r*Math.abs((e.bottom-R.height-u)/R.height)),!y&&l>=e.right-R.width?(T.x=nt.Forward,P.x=r*Math.abs((e.right-R.width-l)/R.width)):!p&&o<=e.left+R.width&&(T.x=nt.Backward,P.x=r*Math.abs((e.left+R.width-o)/R.width)),{direction:T,speed:P}}function Px(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function rE(t){return t.reduce((e,n)=>ds(e,Hd(n)),Cn)}function xx(t){return t.reduce((e,n)=>e+Z1(n),0)}function kx(t){return t.reduce((e,n)=>e+eE(n),0)}function Nx(t,e){if(e===void 0&&(e=xa),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);J1(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Dx=[["x",["left","right"],xx],["y",["top","bottom"],kx]];class Dp{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Np(n),i=rE(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,l]of Dx)for(const u of o)Object.defineProperty(this,u,{get:()=>{const h=l(r),f=i[s]-h;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class bo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function Mx(t){const{EventTarget:e}=jt(t);return t instanceof e?t:zs(t)}function Th(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var sn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(sn||(sn={}));function Vy(t){t.preventDefault()}function Vx(t){t.stopPropagation()}var ve;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(ve||(ve={}));const iE={start:[ve.Space,ve.Enter],cancel:[ve.Esc],end:[ve.Space,ve.Enter]},Ox=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ve.Right:return{...n,x:n.x+25};case ve.Left:return{...n,x:n.x-25};case ve.Down:return{...n,y:n.y+25};case ve.Up:return{...n,y:n.y-25}}};class sE{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new bo(zs(n)),this.windowListeners=new bo(jt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(sn.Resize,this.handleCancel),this.windowListeners.add(sn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(sn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&Nx(r),n(Cn)}handleKeyDown(e){if(G1(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=iE,coordinateGetter:o=Ox,scrollBehavior:l="smooth"}=i,{code:u}=e;if(s.end.includes(u)){this.handleEnd(e);return}if(s.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:h}=r.current,f=h?{x:h.left,y:h.top}:Cn;this.referenceCoordinates||(this.referenceCoordinates=f);const p=o(e,{active:n,context:r.current,currentCoordinates:f});if(p){const y=Du(p,f),T={x:0,y:0},{scrollableAncestors:P}=r.current;for(const R of P){const D=e.code,{isTop:E,isRight:_,isLeft:S,isBottom:N,maxScroll:O,minScroll:M}=nE(R),v=Px(R),m={x:Math.min(D===ve.Right?v.right-v.width/2:v.right,Math.max(D===ve.Right?v.left:v.left+v.width/2,p.x)),y:Math.min(D===ve.Down?v.bottom-v.height/2:v.bottom,Math.max(D===ve.Down?v.top:v.top+v.height/2,p.y))},w=D===ve.Right&&!_||D===ve.Left&&!S,I=D===ve.Down&&!N||D===ve.Up&&!E;if(w&&m.x!==p.x){const C=R.scrollLeft+y.x,x=D===ve.Right&&C<=O.x||D===ve.Left&&C>=M.x;if(x&&!y.y){R.scrollTo({left:C,behavior:l});return}x?T.x=R.scrollLeft-C:T.x=D===ve.Right?R.scrollLeft-O.x:R.scrollLeft-M.x,T.x&&R.scrollBy({left:-T.x,behavior:l});break}else if(I&&m.y!==p.y){const C=R.scrollTop+y.y,x=D===ve.Down&&C<=O.y||D===ve.Up&&C>=M.y;if(x&&!y.x){R.scrollTo({top:C,behavior:l});return}x?T.y=R.scrollTop-C:T.y=D===ve.Down?R.scrollTop-O.y:R.scrollTop-M.y,T.y&&R.scrollBy({top:-T.y,behavior:l});break}}this.handleMove(e,ds(Du(p,this.referenceCoordinates),T))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}sE.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=iE,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=s.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function Oy(t){return!!(t&&"distance"in t)}function by(t){return!!(t&&"delay"in t)}class Mp{constructor(e,n,r){var i;r===void 0&&(r=Mx(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=zs(o),this.documentListeners=new bo(this.document),this.listeners=new bo(r),this.windowListeners=new bo(jt(o)),this.initialCoordinates=(i=Ud(s))!=null?i:Cn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(sn.Resize,this.handleCancel),this.windowListeners.add(sn.DragStart,Vy),this.windowListeners.add(sn.VisibilityChange,this.handleCancel),this.windowListeners.add(sn.ContextMenu,Vy),this.documentListeners.add(sn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(by(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(Oy(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(sn.Click,Vx,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(sn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:l}}=s;if(!i)return;const u=(n=Ud(e))!=null?n:Cn,h=Du(i,u);if(!r&&l){if(Oy(l)){if(l.tolerance!=null&&Th(h,l.tolerance))return this.handleCancel();if(Th(h,l.distance))return this.handleStart()}return by(l)&&Th(h,l.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===ve.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const bx={move:{name:"pointermove"},end:{name:"pointerup"}};class oE extends Mp{constructor(e){const{event:n}=e,r=zs(n.target);super(e,bx,r)}}oE.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Lx={move:{name:"mousemove"},end:{name:"mouseup"}};var Wd;(function(t){t[t.RightClick=2]="RightClick"})(Wd||(Wd={}));class Fx extends Mp{constructor(e){super(e,Lx,zs(e.event.target))}}Fx.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Wd.RightClick?!1:(r==null||r({event:n}),!0)}}];const Sh={move:{name:"touchmove"},end:{name:"touchend"}};class $x extends Mp{constructor(e){super(e,Sh)}static setup(){return window.addEventListener(Sh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Sh.move.name,e)};function e(){}}}$x.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Lo;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Lo||(Lo={}));var Vu;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Vu||(Vu={}));function Bx(t){let{acceleration:e,activator:n=Lo.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:l=Vu.TreeOrder,pointerCoordinates:u,scrollableAncestors:h,scrollableAncestorRects:f,delta:p,threshold:y}=t;const T=Ux({delta:p,disabled:!s}),[P,R]=ex(),D=b.useRef({x:0,y:0}),E=b.useRef({x:0,y:0}),_=b.useMemo(()=>{switch(n){case Lo.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Lo.DraggableRect:return i}},[n,i,u]),S=b.useRef(null),N=b.useCallback(()=>{const M=S.current;if(!M)return;const v=D.current.x*E.current.x,m=D.current.y*E.current.y;M.scrollBy(v,m)},[]),O=b.useMemo(()=>l===Vu.TreeOrder?[...h].reverse():h,[l,h]);b.useEffect(()=>{if(!s||!h.length||!_){R();return}for(const M of O){if((r==null?void 0:r(M))===!1)continue;const v=h.indexOf(M),m=f[v];if(!m)continue;const{direction:w,speed:I}=Rx(M,m,_,e,y);for(const C of["x","y"])T[C][w[C]]||(I[C]=0,w[C]=0);if(I.x>0||I.y>0){R(),S.current=M,P(N,o),D.current=I,E.current=w;return}}D.current={x:0,y:0},E.current={x:0,y:0},R()},[e,N,r,R,s,o,JSON.stringify(_),JSON.stringify(T),P,h,O,f,JSON.stringify(y)])}const jx={x:{[nt.Backward]:!1,[nt.Forward]:!1},y:{[nt.Backward]:!1,[nt.Forward]:!1}};function Ux(t){let{delta:e,disabled:n}=t;const r=jd(e);return Pa(i=>{if(n||!r||!i)return jx;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[nt.Backward]:i.x[nt.Backward]||s.x===-1,[nt.Forward]:i.x[nt.Forward]||s.x===1},y:{[nt.Backward]:i.y[nt.Backward]||s.y===-1,[nt.Forward]:i.y[nt.Forward]||s.y===1}}},[n,e,r])}function zx(t,e){const n=e!==null?t.get(e):void 0,r=n?n.node.current:null;return Pa(i=>{var s;return e===null?null:(s=r??i)!=null?s:null},[r,e])}function Hx(t,e){return b.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var fa;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(fa||(fa={}));var qd;(function(t){t.Optimized="optimized"})(qd||(qd={}));const Ly=new Map;function Wx(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=b.useState(null),{frequency:l,measure:u,strategy:h}=i,f=b.useRef(t),p=D(),y=da(p),T=b.useCallback(function(E){E===void 0&&(E=[]),!y.current&&o(_=>_===null?E:_.concat(E.filter(S=>!_.includes(S))))},[y]),P=b.useRef(null),R=Pa(E=>{if(p&&!n)return Ly;if(!E||E===Ly||f.current!==t||s!=null){const _=new Map;for(let S of t){if(!S)continue;if(s&&s.length>0&&!s.includes(S.id)&&S.rect.current){_.set(S.id,S.rect.current);continue}const N=S.node.current,O=N?new Dp(u(N),N):null;S.rect.current=O,O&&_.set(S.id,O)}return _}return E},[t,s,n,p,u]);return b.useEffect(()=>{f.current=t},[t]),b.useEffect(()=>{p||T()},[n,p]),b.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),b.useEffect(()=>{p||typeof l!="number"||P.current!==null||(P.current=setTimeout(()=>{T(),P.current=null},l))},[l,p,T,...r]),{droppableRects:R,measureDroppableContainers:T,measuringScheduled:s!=null};function D(){switch(h){case fa.Always:return!1;case fa.BeforeDragging:return n;default:return!n}}}function aE(t,e){return Pa(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function qx(t,e){return aE(t,e)}function Kx(t){let{callback:e,disabled:n}=t;const r=kp(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function yc(t){let{callback:e,disabled:n}=t;const r=kp(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Qx(t){return new Dp(xa(t),t)}function Fy(t,e,n){e===void 0&&(e=Qx);const[r,i]=b.useReducer(l,null),s=Kx({callback(u){if(t)for(const h of u){const{type:f,target:p}=h;if(f==="childList"&&p instanceof HTMLElement&&p.contains(t)){i();break}}}}),o=yc({callback:i});return ur(()=>{i(),t?(o==null||o.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[t]),r;function l(u){if(!t)return null;if(t.isConnected===!1){var h;return(h=u??n)!=null?h:null}const f=e(t);return JSON.stringify(u)===JSON.stringify(f)?u:f}}function Gx(t){const e=aE(t);return X1(t,e)}const $y=[];function Yx(t){const e=b.useRef(t),n=Pa(r=>t?r&&r!==$y&&t&&e.current&&t.parentNode===e.current.parentNode?r:Np(t):$y,[t]);return b.useEffect(()=>{e.current=t},[t]),n}function Xx(t){const[e,n]=b.useState(null),r=b.useRef(t),i=b.useCallback(s=>{const o=wh(s.target);o&&n(l=>l?(l.set(o,Hd(o)),new Map(l)):null)},[]);return b.useEffect(()=>{const s=r.current;if(t!==s){o(s);const l=t.map(u=>{const h=wh(u);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,Hd(h)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(s)};function o(l){l.forEach(u=>{const h=wh(u);h==null||h.removeEventListener("scroll",i)})}},[i,t]),b.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>ds(s,o),Cn):rE(t):Cn,[t,e])}function By(t,e){e===void 0&&(e=[]);const n=b.useRef(null);return b.useEffect(()=>{n.current=null},e),b.useEffect(()=>{const r=t!==Cn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Du(t,n.current):Cn}function Jx(t){b.useEffect(()=>{if(!mc)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function Zx(t,e){return b.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function lE(t){return b.useMemo(()=>t?Sx(t):null,[t])}const Ih=[];function ek(t,e){e===void 0&&(e=xa);const[n]=t,r=lE(n?jt(n):null),[i,s]=b.useReducer(l,Ih),o=yc({callback:s});return t.length>0&&i===Ih&&s(),ur(()=>{t.length?t.forEach(u=>o==null?void 0:o.observe(u)):(o==null||o.disconnect(),s())},[t]),i;function l(){return t.length?t.map(u=>tE(u)?r:new Dp(e(u),u)):Ih}}function tk(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Ra(e)?e:t}function nk(t){let{measure:e}=t;const[n,r]=b.useState(null),i=b.useCallback(h=>{for(const{target:f}of h)if(Ra(f)){r(p=>{const y=e(f);return p?{...p,width:y.width,height:y.height}:y});break}},[e]),s=yc({callback:i}),o=b.useCallback(h=>{const f=tk(h);s==null||s.disconnect(),f&&(s==null||s.observe(f)),r(f?e(f):null)},[e,s]),[l,u]=Nu(o);return b.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const rk=[{sensor:oE,options:{}},{sensor:sE,options:{}}],ik={current:{}},Ul={draggable:{measure:My},droppable:{measure:My,strategy:fa.WhileDragging,frequency:qd.Optimized},dragOverlay:{measure:xa}};class Fo extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const sk={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Fo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Mu},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ul,measureDroppableContainers:Mu,windowRect:null,measuringScheduled:!1},ok={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Mu,draggableNodes:new Map,over:null,measureDroppableContainers:Mu},vc=b.createContext(ok),ak=b.createContext(sk);function lk(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Fo}}}function uk(t,e){switch(e.type){case Qe.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Qe.DragMove:return t.draggable.active?{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}}:t;case Qe.DragEnd:case Qe.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Qe.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new Fo(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case Qe.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new Fo(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case Qe.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new Fo(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function ck(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=b.useContext(vc),s=jd(r),o=jd(n==null?void 0:n.id);return b.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!G1(s)||document.activeElement===s.target)return;const l=i.get(o);if(!l)return;const{activatorNode:u,node:h}=l;if(!u.current&&!h.current)return;requestAnimationFrame(()=>{for(const f of[u.current,h.current]){if(!f)continue;const p=rx(f);if(p){p.focus();break}}})}},[r,e,i,o,s]),null}function hk(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function dk(t){return b.useMemo(()=>({draggable:{...Ul.draggable,...t==null?void 0:t.draggable},droppable:{...Ul.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Ul.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function fk(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=b.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;ur(()=>{if(!o&&!l||!e){s.current=!1;return}if(s.current||!r)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const f=n(h),p=X1(f,r);if(o||(p.x=0),l||(p.y=0),s.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const y=J1(h);y&&y.scrollBy({top:p.y,left:p.x})}},[e,o,l,r,n])}const uE=b.createContext({...Cn,scaleX:1,scaleY:1});var Sr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Sr||(Sr={}));const pk=b.memo(function(e){var n,r,i,s;let{id:o,accessibility:l,autoScroll:u=!0,children:h,sensors:f=rk,collisionDetection:p=gx,measuring:y,modifiers:T,...P}=e;const R=b.useReducer(uk,void 0,lk),[D,E]=R,[_,S]=ux(),[N,O]=b.useState(Sr.Uninitialized),M=N===Sr.Initialized,{draggable:{active:v,nodes:m,translate:w},droppable:{containers:I}}=D,C=v?m.get(v):null,x=b.useRef({initial:null,translated:null}),A=b.useMemo(()=>{var xe;return v!=null?{id:v,data:(xe=C==null?void 0:C.data)!=null?xe:ik,rect:x}:null},[v,C]),Re=b.useRef(null),[Zt,Rn]=b.useState(null),[Pe,U]=b.useState(null),K=da(P,Object.values(P)),Y=gc("DndDescribedBy",o),ae=b.useMemo(()=>I.getEnabled(),[I]),J=dk(y),{droppableRects:he,measureDroppableContainers:Je,measuringScheduled:st}=Wx(ae,{dragging:M,dependencies:[w.x,w.y],config:J.droppable}),me=zx(m,v),ot=b.useMemo(()=>Pe?Ud(Pe):null,[Pe]),Pn=Fa(),en=qx(me,J.draggable.measure);fk({activeNode:v?m.get(v):null,config:Pn.layoutShiftCompensation,initialRect:en,measure:J.draggable.measure});const Ue=Fy(me,J.draggable.measure,en),Ut=Fy(me?me.parentElement:null),ze=b.useRef({activatorEvent:null,active:null,activeNode:me,collisionRect:null,collisions:null,droppableRects:he,draggableNodes:m,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),xi=I.getNodeFor((n=ze.current.over)==null?void 0:n.id),pn=nk({measure:J.dragOverlay.measure}),hr=(r=pn.nodeRef.current)!=null?r:me,zn=M?(i=pn.rect)!=null?i:Ue:null,Na=!!(pn.nodeRef.current&&pn.rect),Da=Gx(Na?null:Ue),ki=lE(hr?jt(hr):null),tn=Yx(M?xi??me:null),Yr=ek(tn),Ni=hk(T,{transform:{x:w.x-Da.x,y:w.y-Da.y,scaleX:1,scaleY:1},activatorEvent:Pe,active:A,activeNodeRect:Ue,containerNodeRect:Ut,draggingNodeRect:zn,over:ze.current.over,overlayNodeRect:pn.rect,scrollableAncestors:tn,scrollableAncestorRects:Yr,windowRect:ki}),Di=ot?ds(ot,w):null,Mi=Xx(tn),Ma=By(Mi),Ze=By(Mi,[Ue]),Oe=ds(Ni,Ma),mn=zn?_x(zn,Ni):null,dr=A&&mn?p({active:A,collisionRect:mn,droppableRects:he,droppableContainers:ae,pointerCoordinates:Di}):null,qs=px(dr,"id"),[xn,fr]=b.useState(null),Va=Na?Ni:ds(Ni,Ze),Oa=yx(Va,(s=xn==null?void 0:xn.rect)!=null?s:null,Ue),Vi=b.useCallback((xe,at)=>{let{sensor:lt,options:vt}=at;if(Re.current==null)return;const xt=m.get(Re.current);if(!xt)return;const _t=xe.nativeEvent,zt=new lt({active:Re.current,activeNode:xt,event:_t,options:vt,context:ze,onStart(Vt){const $e=Re.current;if($e==null)return;const pr=m.get($e);if(!pr)return;const{onDragStart:kn}=K.current,Nn={active:{id:$e,data:pr.data,rect:x}};ii.unstable_batchedUpdates(()=>{kn==null||kn(Nn),O(Sr.Initializing),E({type:Qe.DragStart,initialCoordinates:Vt,active:$e}),_({type:"onDragStart",event:Nn})})},onMove(Vt){E({type:Qe.DragMove,coordinates:Vt})},onEnd:nn(Qe.DragEnd),onCancel:nn(Qe.DragCancel)});ii.unstable_batchedUpdates(()=>{Rn(zt),U(xe.nativeEvent)});function nn(Vt){return async function(){const{active:pr,collisions:kn,over:Nn,scrollAdjustedTranslate:$a}=ze.current;let Xr=null;if(pr&&$a){const{cancelDrop:rn}=K.current;Xr={activatorEvent:_t,active:pr,collisions:kn,delta:$a,over:Nn},Vt===Qe.DragEnd&&typeof rn=="function"&&await Promise.resolve(rn(Xr))&&(Vt=Qe.DragCancel)}Re.current=null,ii.unstable_batchedUpdates(()=>{E({type:Vt}),O(Sr.Uninitialized),fr(null),Rn(null),U(null);const rn=Vt===Qe.DragEnd?"onDragEnd":"onDragCancel";if(Xr){const Qs=K.current[rn];Qs==null||Qs(Xr),_({type:rn,event:Xr})}})}}},[m]),Ac=b.useCallback((xe,at)=>(lt,vt)=>{const xt=lt.nativeEvent,_t=m.get(vt);if(Re.current!==null||!_t||xt.dndKit||xt.defaultPrevented)return;const zt={active:_t};xe(lt,at.options,zt)===!0&&(xt.dndKit={capturedBy:at.sensor},Re.current=vt,Vi(lt,at))},[m,Vi]),ba=Hx(f,Ac);Jx(f),ur(()=>{Ue&&N===Sr.Initializing&&O(Sr.Initialized)},[Ue,N]),b.useEffect(()=>{const{onDragMove:xe}=K.current,{active:at,activatorEvent:lt,collisions:vt,over:xt}=ze.current;if(!at||!lt)return;const _t={active:at,activatorEvent:lt,collisions:vt,delta:{x:Oe.x,y:Oe.y},over:xt};ii.unstable_batchedUpdates(()=>{xe==null||xe(_t),_({type:"onDragMove",event:_t})})},[Oe.x,Oe.y]),b.useEffect(()=>{const{active:xe,activatorEvent:at,collisions:lt,droppableContainers:vt,scrollAdjustedTranslate:xt}=ze.current;if(!xe||Re.current==null||!at||!xt)return;const{onDragOver:_t}=K.current,zt=vt.get(qs),nn=zt&&zt.rect.current?{id:zt.id,rect:zt.rect.current,data:zt.data,disabled:zt.disabled}:null,Vt={active:xe,activatorEvent:at,collisions:lt,delta:{x:xt.x,y:xt.y},over:nn};ii.unstable_batchedUpdates(()=>{fr(nn),_t==null||_t(Vt),_({type:"onDragOver",event:Vt})})},[qs]),ur(()=>{ze.current={activatorEvent:Pe,active:A,activeNode:me,collisionRect:mn,collisions:dr,droppableRects:he,draggableNodes:m,draggingNode:hr,draggingNodeRect:zn,droppableContainers:I,over:xn,scrollableAncestors:tn,scrollAdjustedTranslate:Oe},x.current={initial:zn,translated:mn}},[A,me,dr,mn,m,hr,zn,he,I,xn,tn,Oe]),Bx({...Pn,delta:w,draggingRect:mn,pointerCoordinates:Di,scrollableAncestors:tn,scrollableAncestorRects:Yr});const Ks=b.useMemo(()=>({active:A,activeNode:me,activeNodeRect:Ue,activatorEvent:Pe,collisions:dr,containerNodeRect:Ut,dragOverlay:pn,draggableNodes:m,droppableContainers:I,droppableRects:he,over:xn,measureDroppableContainers:Je,scrollableAncestors:tn,scrollableAncestorRects:Yr,measuringConfiguration:J,measuringScheduled:st,windowRect:ki}),[A,me,Ue,Pe,dr,Ut,pn,m,I,he,xn,Je,tn,Yr,J,st,ki]),La=b.useMemo(()=>({activatorEvent:Pe,activators:ba,active:A,activeNodeRect:Ue,ariaDescribedById:{draggable:Y},dispatch:E,draggableNodes:m,over:xn,measureDroppableContainers:Je}),[Pe,ba,A,Ue,E,Y,m,xn,Je]);return dt.createElement(Y1.Provider,{value:S},dt.createElement(vc.Provider,{value:La},dt.createElement(ak.Provider,{value:Ks},dt.createElement(uE.Provider,{value:Oa},h)),dt.createElement(ck,{disabled:(l==null?void 0:l.restoreFocus)===!1})),dt.createElement(dx,{...l,hiddenTextDescribedById:Y}));function Fa(){const xe=(Zt==null?void 0:Zt.autoScrollEnabled)===!1,at=typeof u=="object"?u.enabled===!1:u===!1,lt=M&&!xe&&!at;return typeof u=="object"?{...u,enabled:lt}:{enabled:lt}}}),mk=b.createContext(null),jy="button",gk="Droppable";function yk(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=gc(gk),{activators:o,activatorEvent:l,active:u,activeNodeRect:h,ariaDescribedById:f,draggableNodes:p,over:y}=b.useContext(vc),{role:T=jy,roleDescription:P="draggable",tabIndex:R=0}=i??{},D=(u==null?void 0:u.id)===e,E=b.useContext(D?uE:mk),[_,S]=Nu(),[N,O]=Nu(),M=Zx(o,e),v=da(n);ur(()=>(p.set(e,{id:e,key:s,node:_,activatorNode:N,data:v}),()=>{const w=p.get(e);w&&w.key===s&&p.delete(e)}),[p,e]);const m=b.useMemo(()=>({role:T,tabIndex:R,"aria-disabled":r,"aria-pressed":D&&T===jy?!0:void 0,"aria-roledescription":P,"aria-describedby":f.draggable}),[r,T,R,D,P,f.draggable]);return{active:u,activatorEvent:l,activeNodeRect:h,attributes:m,isDragging:D,listeners:r?void 0:M,node:_,over:y,setNodeRef:S,setActivatorNodeRef:O,transform:E}}const vk="Droppable",_k={timeout:25};function Ek(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=gc(vk),{active:o,dispatch:l,over:u,measureDroppableContainers:h}=b.useContext(vc),f=b.useRef({disabled:n}),p=b.useRef(!1),y=b.useRef(null),T=b.useRef(null),{disabled:P,updateMeasurementsFor:R,timeout:D}={..._k,...i},E=da(R??r),_=b.useCallback(()=>{if(!p.current){p.current=!0;return}T.current!=null&&clearTimeout(T.current),T.current=setTimeout(()=>{h(Array.isArray(E.current)?E.current:[E.current]),T.current=null},D)},[D]),S=yc({callback:_,disabled:P||!o}),N=b.useCallback((m,w)=>{S&&(w&&(S.unobserve(w),p.current=!1),m&&S.observe(m))},[S]),[O,M]=Nu(N),v=da(e);return b.useEffect(()=>{!S||!O.current||(S.disconnect(),p.current=!1,S.observe(O.current))},[O,S]),ur(()=>(l({type:Qe.RegisterDroppable,element:{id:r,key:s,disabled:n,node:O,rect:y,data:v}}),()=>l({type:Qe.UnregisterDroppable,key:s,id:r})),[r]),b.useEffect(()=>{n!==f.current.disabled&&(l({type:Qe.SetDroppableDisabled,id:r,key:s,disabled:n}),f.current.disabled=n)},[r,s,n,l]),{active:o,rect:y,isOver:(u==null?void 0:u.id)===r,node:O,over:u,setNodeRef:M}}var Lt=function(){return Lt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Lt.apply(this,arguments)};function Ou(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Te="-ms-",$o="-moz-",de="-webkit-",cE="comm",_c="rule",Vp="decl",wk="@import",hE="@keyframes",Tk="@layer",dE=Math.abs,Op=String.fromCharCode,Kd=Object.assign;function Sk(t,e){return rt(t,0)^45?(((e<<2^rt(t,0))<<2^rt(t,1))<<2^rt(t,2))<<2^rt(t,3):0}function fE(t){return t.trim()}function Qn(t,e){return(t=e.exec(t))?t[0]:t}function te(t,e,n){return t.replace(e,n)}function zl(t,e,n){return t.indexOf(e,n)}function rt(t,e){return t.charCodeAt(e)|0}function Ps(t,e,n){return t.slice(e,n)}function Vn(t){return t.length}function pE(t){return t.length}function wo(t,e){return e.push(t),t}function Ik(t,e){return t.map(e).join("")}function Uy(t,e){return t.filter(function(n){return!Qn(n,e)})}var Ec=1,xs=1,mE=0,fn=0,We=0,Hs="";function wc(t,e,n,r,i,s,o,l){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Ec,column:xs,length:o,return:"",siblings:l}}function Er(t,e){return Kd(wc("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function Bi(t){for(;t.root;)t=Er(t.root,{children:[t]});wo(t,t.siblings)}function Ak(){return We}function Ck(){return We=fn>0?rt(Hs,--fn):0,xs--,We===10&&(xs=1,Ec--),We}function In(){return We=fn<mE?rt(Hs,fn++):0,xs++,We===10&&(xs=1,Ec++),We}function mi(){return rt(Hs,fn)}function Hl(){return fn}function Tc(t,e){return Ps(Hs,t,e)}function Qd(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Rk(t){return Ec=xs=1,mE=Vn(Hs=t),fn=0,[]}function Pk(t){return Hs="",t}function Ah(t){return fE(Tc(fn-1,Gd(t===91?t+2:t===40?t+1:t)))}function xk(t){for(;(We=mi())&&We<33;)In();return Qd(t)>2||Qd(We)>3?"":" "}function kk(t,e){for(;--e&&In()&&!(We<48||We>102||We>57&&We<65||We>70&&We<97););return Tc(t,Hl()+(e<6&&mi()==32&&In()==32))}function Gd(t){for(;In();)switch(We){case t:return fn;case 34:case 39:t!==34&&t!==39&&Gd(We);break;case 40:t===41&&Gd(t);break;case 92:In();break}return fn}function Nk(t,e){for(;In()&&t+We!==57;)if(t+We===84&&mi()===47)break;return"/*"+Tc(e,fn-1)+"*"+Op(t===47?t:In())}function Dk(t){for(;!Qd(mi());)In();return Tc(t,fn)}function Mk(t){return Pk(Wl("",null,null,null,[""],t=Rk(t),0,[0],t))}function Wl(t,e,n,r,i,s,o,l,u){for(var h=0,f=0,p=o,y=0,T=0,P=0,R=1,D=1,E=1,_=0,S="",N=i,O=s,M=r,v=S;D;)switch(P=_,_=In()){case 40:if(P!=108&&rt(v,p-1)==58){zl(v+=te(Ah(_),"&","&\f"),"&\f",dE(h?l[h-1]:0))!=-1&&(E=-1);break}case 34:case 39:case 91:v+=Ah(_);break;case 9:case 10:case 13:case 32:v+=xk(P);break;case 92:v+=kk(Hl()-1,7);continue;case 47:switch(mi()){case 42:case 47:wo(Vk(Nk(In(),Hl()),e,n,u),u);break;default:v+="/"}break;case 123*R:l[h++]=Vn(v)*E;case 125*R:case 59:case 0:switch(_){case 0:case 125:D=0;case 59+f:E==-1&&(v=te(v,/\f/g,"")),T>0&&Vn(v)-p&&wo(T>32?Hy(v+";",r,n,p-1,u):Hy(te(v," ","")+";",r,n,p-2,u),u);break;case 59:v+=";";default:if(wo(M=zy(v,e,n,h,f,i,l,S,N=[],O=[],p,s),s),_===123)if(f===0)Wl(v,e,M,M,N,s,p,l,O);else switch(y===99&&rt(v,3)===110?100:y){case 100:case 108:case 109:case 115:Wl(t,M,M,r&&wo(zy(t,M,M,0,0,i,l,S,i,N=[],p,O),O),i,O,p,l,r?N:O);break;default:Wl(v,M,M,M,[""],O,0,l,O)}}h=f=T=0,R=E=1,S=v="",p=o;break;case 58:p=1+Vn(v),T=P;default:if(R<1){if(_==123)--R;else if(_==125&&R++==0&&Ck()==125)continue}switch(v+=Op(_),_*R){case 38:E=f>0?1:(v+="\f",-1);break;case 44:l[h++]=(Vn(v)-1)*E,E=1;break;case 64:mi()===45&&(v+=Ah(In())),y=mi(),f=p=Vn(S=v+=Dk(Hl())),_++;break;case 45:P===45&&Vn(v)==2&&(R=0)}}return s}function zy(t,e,n,r,i,s,o,l,u,h,f,p){for(var y=i-1,T=i===0?s:[""],P=pE(T),R=0,D=0,E=0;R<r;++R)for(var _=0,S=Ps(t,y+1,y=dE(D=o[R])),N=t;_<P;++_)(N=fE(D>0?T[_]+" "+S:te(S,/&\f/g,T[_])))&&(u[E++]=N);return wc(t,e,n,i===0?_c:l,u,h,f,p)}function Vk(t,e,n,r){return wc(t,e,n,cE,Op(Ak()),Ps(t,2,-2),0,r)}function Hy(t,e,n,r,i){return wc(t,e,n,Vp,Ps(t,0,r),Ps(t,r+1,-1),r,i)}function gE(t,e,n){switch(Sk(t,e)){case 5103:return de+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return de+t+t;case 4789:return $o+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return de+t+$o+t+Te+t+t;case 5936:switch(rt(t,e+11)){case 114:return de+t+Te+te(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return de+t+Te+te(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return de+t+Te+te(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return de+t+Te+t+t;case 6165:return de+t+Te+"flex-"+t+t;case 5187:return de+t+te(t,/(\w+).+(:[^]+)/,de+"box-$1$2"+Te+"flex-$1$2")+t;case 5443:return de+t+Te+"flex-item-"+te(t,/flex-|-self/g,"")+(Qn(t,/flex-|baseline/)?"":Te+"grid-row-"+te(t,/flex-|-self/g,""))+t;case 4675:return de+t+Te+"flex-line-pack"+te(t,/align-content|flex-|-self/g,"")+t;case 5548:return de+t+Te+te(t,"shrink","negative")+t;case 5292:return de+t+Te+te(t,"basis","preferred-size")+t;case 6060:return de+"box-"+te(t,"-grow","")+de+t+Te+te(t,"grow","positive")+t;case 4554:return de+te(t,/([^-])(transform)/g,"$1"+de+"$2")+t;case 6187:return te(te(te(t,/(zoom-|grab)/,de+"$1"),/(image-set)/,de+"$1"),t,"")+t;case 5495:case 3959:return te(t,/(image-set\([^]*)/,de+"$1$`$1");case 4968:return te(te(t,/(.+:)(flex-)?(.*)/,de+"box-pack:$3"+Te+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+de+t+t;case 4200:if(!Qn(t,/flex-|baseline/))return Te+"grid-column-align"+Ps(t,e)+t;break;case 2592:case 3360:return Te+te(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,i){return e=i,Qn(r.props,/grid-\w+-end/)})?~zl(t+(n=n[e].value),"span",0)?t:Te+te(t,"-start","")+t+Te+"grid-row-span:"+(~zl(n,"span",0)?Qn(n,/\d+/):+Qn(n,/\d+/)-+Qn(t,/\d+/))+";":Te+te(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return Qn(r.props,/grid-\w+-start/)})?t:Te+te(te(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return te(t,/(.+)-inline(.+)/,de+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Vn(t)-1-e>6)switch(rt(t,e+1)){case 109:if(rt(t,e+4)!==45)break;case 102:return te(t,/(.+:)(.+)-([^]+)/,"$1"+de+"$2-$3$1"+$o+(rt(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~zl(t,"stretch",0)?gE(te(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return te(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,s,o,l,u,h){return Te+i+":"+s+h+(o?Te+i+"-span:"+(l?u:+u-+s)+h:"")+t});case 4949:if(rt(t,e+6)===121)return te(t,":",":"+de)+t;break;case 6444:switch(rt(t,rt(t,14)===45?18:11)){case 120:return te(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+de+(rt(t,14)===45?"inline-":"")+"box$3$1"+de+"$2$3$1"+Te+"$2box$3")+t;case 100:return te(t,":",":"+Te)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return te(t,"scroll-","scroll-snap-")+t}return t}function bu(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function Ok(t,e,n,r){switch(t.type){case Tk:if(t.children.length)break;case wk:case Vp:return t.return=t.return||t.value;case cE:return"";case hE:return t.return=t.value+"{"+bu(t.children,r)+"}";case _c:if(!Vn(t.value=t.props.join(",")))return""}return Vn(n=bu(t.children,r))?t.return=t.value+"{"+n+"}":""}function bk(t){var e=pE(t);return function(n,r,i,s){for(var o="",l=0;l<e;l++)o+=t[l](n,r,i,s)||"";return o}}function Lk(t){return function(e){e.root||(e=e.return)&&t(e)}}function Fk(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case Vp:t.return=gE(t.value,t.length,n);return;case hE:return bu([Er(t,{value:te(t.value,"@","@"+de)})],r);case _c:if(t.length)return Ik(n=t.props,function(i){switch(Qn(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Bi(Er(t,{props:[te(i,/:(read-\w+)/,":"+$o+"$1")]})),Bi(Er(t,{props:[i]})),Kd(t,{props:Uy(n,r)});break;case"::placeholder":Bi(Er(t,{props:[te(i,/:(plac\w+)/,":"+de+"input-$1")]})),Bi(Er(t,{props:[te(i,/:(plac\w+)/,":"+$o+"$1")]})),Bi(Er(t,{props:[te(i,/:(plac\w+)/,Te+"input-$1")]})),Bi(Er(t,{props:[i]})),Kd(t,{props:Uy(n,r)});break}return""})}}var $k={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Wt={},ks=typeof process<"u"&&Wt!==void 0&&(Wt.REACT_APP_SC_ATTR||Wt.SC_ATTR)||"data-styled",yE="active",vE="data-styled-version",Sc="6.1.13",bp=`/*!sc*/
`,Lu=typeof window<"u"&&"HTMLElement"in window,Bk=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Wt!==void 0&&Wt.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Wt.REACT_APP_SC_DISABLE_SPEEDY!==""?Wt.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Wt.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Wt!==void 0&&Wt.SC_DISABLE_SPEEDY!==void 0&&Wt.SC_DISABLE_SPEEDY!==""&&Wt.SC_DISABLE_SPEEDY!=="false"&&Wt.SC_DISABLE_SPEEDY),Ic=Object.freeze([]),Ns=Object.freeze({});function jk(t,e,n){return n===void 0&&(n=Ns),t.theme!==n.theme&&t.theme||e||n.theme}var _E=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Uk=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,zk=/(^-|-$)/g;function Wy(t){return t.replace(Uk,"-").replace(zk,"")}var Hk=/(a)(d)/gi,Sl=52,qy=function(t){return String.fromCharCode(t+(t>25?39:97))};function Yd(t){var e,n="";for(e=Math.abs(t);e>Sl;e=e/Sl|0)n=qy(e%Sl)+n;return(qy(e%Sl)+n).replace(Hk,"$1-$2")}var Ch,EE=5381,rs=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},wE=function(t){return rs(EE,t)};function Wk(t){return Yd(wE(t)>>>0)}function qk(t){return t.displayName||t.name||"Component"}function Rh(t){return typeof t=="string"&&!0}var TE=typeof Symbol=="function"&&Symbol.for,SE=TE?Symbol.for("react.memo"):60115,Kk=TE?Symbol.for("react.forward_ref"):60112,Qk={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Gk={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},IE={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Yk=((Ch={})[Kk]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ch[SE]=IE,Ch);function Ky(t){return("type"in(e=t)&&e.type.$$typeof)===SE?IE:"$$typeof"in t?Yk[t.$$typeof]:Qk;var e}var Xk=Object.defineProperty,Jk=Object.getOwnPropertyNames,Qy=Object.getOwnPropertySymbols,Zk=Object.getOwnPropertyDescriptor,eN=Object.getPrototypeOf,Gy=Object.prototype;function AE(t,e,n){if(typeof e!="string"){if(Gy){var r=eN(e);r&&r!==Gy&&AE(t,r,n)}var i=Jk(e);Qy&&(i=i.concat(Qy(e)));for(var s=Ky(t),o=Ky(e),l=0;l<i.length;++l){var u=i[l];if(!(u in Gk||n&&n[u]||o&&u in o||s&&u in s)){var h=Zk(e,u);try{Xk(t,u,h)}catch{}}}}return t}function Ds(t){return typeof t=="function"}function Lp(t){return typeof t=="object"&&"styledComponentId"in t}function ui(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function Yy(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function pa(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function Xd(t,e,n){if(n===void 0&&(n=!1),!n&&!pa(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=Xd(t[r],e[r]);else if(pa(e))for(var r in e)t[r]=Xd(t[r],e[r]);return t}function Fp(t,e){Object.defineProperty(t,"toString",{value:e})}function ka(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var tN=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,s=i;e>=s;)if((s<<=1)<0)throw ka(16,"".concat(e));this.groupSizes=new Uint32Array(s),this.groupSizes.set(r),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var l=this.indexOfGroup(e+1),u=(o=0,n.length);o<u;o++)this.tag.insertRule(l,n[o])&&(this.groupSizes[e]++,l++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n;this.groupSizes[e]=0;for(var s=r;s<i;s++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),s=i+r,o=i;o<s;o++)n+="".concat(this.tag.getRule(o)).concat(bp);return n},t}(),ql=new Map,Fu=new Map,Kl=1,Il=function(t){if(ql.has(t))return ql.get(t);for(;Fu.has(Kl);)Kl++;var e=Kl++;return ql.set(t,e),Fu.set(e,t),e},nN=function(t,e){Kl=e+1,ql.set(t,e),Fu.set(e,t)},rN="style[".concat(ks,"][").concat(vE,'="').concat(Sc,'"]'),iN=new RegExp("^".concat(ks,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),sN=function(t,e,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&t.registerName(e,r)},oN=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(bp),i=[],s=0,o=r.length;s<o;s++){var l=r[s].trim();if(l){var u=l.match(iN);if(u){var h=0|parseInt(u[1],10),f=u[2];h!==0&&(nN(f,h),sN(t,f,u[3]),t.getTag().insertRules(h,i)),i.length=0}else i.push(l)}}},Xy=function(t){for(var e=document.querySelectorAll(rN),n=0,r=e.length;n<r;n++){var i=e[n];i&&i.getAttribute(ks)!==yE&&(oN(t,i),i.parentNode&&i.parentNode.removeChild(i))}};function aN(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var CE=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(l){var u=Array.from(l.querySelectorAll("style[".concat(ks,"]")));return u[u.length-1]}(n),s=i!==void 0?i.nextSibling:null;r.setAttribute(ks,yE),r.setAttribute(vE,Sc);var o=aN();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},lN=function(){function t(e){this.element=CE(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,i=0,s=r.length;i<s;i++){var o=r[i];if(o.ownerNode===n)return o}throw ka(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t}(),uN=function(){function t(e){this.element=CE(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),cN=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),Jy=Lu,hN={isServer:!Lu,useCSSOMInjection:!Bk},RE=function(){function t(e,n,r){e===void 0&&(e=Ns),n===void 0&&(n={});var i=this;this.options=Lt(Lt({},hN),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Lu&&Jy&&(Jy=!1,Xy(this)),Fp(this,function(){return function(s){for(var o=s.getTag(),l=o.length,u="",h=function(p){var y=function(E){return Fu.get(E)}(p);if(y===void 0)return"continue";var T=s.names.get(y),P=o.getGroup(p);if(T===void 0||!T.size||P.length===0)return"continue";var R="".concat(ks,".g").concat(p,'[id="').concat(y,'"]'),D="";T!==void 0&&T.forEach(function(E){E.length>0&&(D+="".concat(E,","))}),u+="".concat(P).concat(R,'{content:"').concat(D,'"}').concat(bp)},f=0;f<l;f++)h(f);return u}(i)})}return t.registerId=function(e){return Il(e)},t.prototype.rehydrate=function(){!this.server&&Lu&&Xy(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(Lt(Lt({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(n){var r=n.useCSSOMInjection,i=n.target;return n.isServer?new cN(i):r?new lN(i):new uN(i)}(this.options),new tN(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(Il(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(Il(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(Il(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),dN=/&/g,fN=/^\s*\/\/.*$/gm;function PE(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=PE(n.children,e)),n})}function pN(t){var e,n,r,i=Ns,s=i.options,o=s===void 0?Ns:s,l=i.plugins,u=l===void 0?Ic:l,h=function(y,T,P){return P.startsWith(n)&&P.endsWith(n)&&P.replaceAll(n,"").length>0?".".concat(e):y},f=u.slice();f.push(function(y){y.type===_c&&y.value.includes("&")&&(y.props[0]=y.props[0].replace(dN,n).replace(r,h))}),o.prefix&&f.push(Fk),f.push(Ok);var p=function(y,T,P,R){T===void 0&&(T=""),P===void 0&&(P=""),R===void 0&&(R="&"),e=R,n=T,r=new RegExp("\\".concat(n,"\\b"),"g");var D=y.replace(fN,""),E=Mk(P||T?"".concat(P," ").concat(T," { ").concat(D," }"):D);o.namespace&&(E=PE(E,o.namespace));var _=[];return bu(E,bk(f.concat(Lk(function(S){return _.push(S)})))),_};return p.hash=u.length?u.reduce(function(y,T){return T.name||ka(15),rs(y,T.name)},EE).toString():"",p}var mN=new RE,Jd=pN(),xE=dt.createContext({shouldForwardProp:void 0,styleSheet:mN,stylis:Jd});xE.Consumer;dt.createContext(void 0);function Zy(){return b.useContext(xE)}var gN=function(){function t(e,n){var r=this;this.inject=function(i,s){s===void 0&&(s=Jd);var o=r.name+s.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,s(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,Fp(this,function(){throw ka(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=Jd),this.name+e.hash},t}(),yN=function(t){return t>="A"&&t<="Z"};function ev(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;yN(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var kE=function(t){return t==null||t===!1||t===""},NE=function(t){var e,n,r=[];for(var i in t){var s=t[i];t.hasOwnProperty(i)&&!kE(s)&&(Array.isArray(s)&&s.isCss||Ds(s)?r.push("".concat(ev(i),":"),s,";"):pa(s)?r.push.apply(r,Ou(Ou(["".concat(i," {")],NE(s),!1),["}"],!1)):r.push("".concat(ev(i),": ").concat((e=i,(n=s)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in $k||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function gi(t,e,n,r){if(kE(t))return[];if(Lp(t))return[".".concat(t.styledComponentId)];if(Ds(t)){if(!Ds(s=t)||s.prototype&&s.prototype.isReactComponent||!e)return[t];var i=t(e);return gi(i,e,n,r)}var s;return t instanceof gN?n?(t.inject(n,r),[t.getName(r)]):[t]:pa(t)?NE(t):Array.isArray(t)?Array.prototype.concat.apply(Ic,t.map(function(o){return gi(o,e,n,r)})):[t.toString()]}function vN(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Ds(n)&&!Lp(n))return!1}return!0}var _N=wE(Sc),EN=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&vN(e),this.componentId=n,this.baseHash=rs(_N,n),this.baseStyle=r,RE.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=ui(i,this.staticRulesId);else{var s=Yy(gi(this.rules,e,n,r)),o=Yd(rs(this.baseHash,s)>>>0);if(!n.hasNameForId(this.componentId,o)){var l=r(s,".".concat(o),void 0,this.componentId);n.insertRules(this.componentId,o,l)}i=ui(i,o),this.staticRulesId=o}else{for(var u=rs(this.baseHash,r.hash),h="",f=0;f<this.rules.length;f++){var p=this.rules[f];if(typeof p=="string")h+=p;else if(p){var y=Yy(gi(p,e,n,r));u=rs(u,y+f),h+=y}}if(h){var T=Yd(u>>>0);n.hasNameForId(this.componentId,T)||n.insertRules(this.componentId,T,r(h,".".concat(T),void 0,this.componentId)),i=ui(i,T)}}return i},t}(),DE=dt.createContext(void 0);DE.Consumer;var Ph={};function wN(t,e,n){var r=Lp(t),i=t,s=!Rh(t),o=e.attrs,l=o===void 0?Ic:o,u=e.componentId,h=u===void 0?function(N,O){var M=typeof N!="string"?"sc":Wy(N);Ph[M]=(Ph[M]||0)+1;var v="".concat(M,"-").concat(Wk(Sc+M+Ph[M]));return O?"".concat(O,"-").concat(v):v}(e.displayName,e.parentComponentId):u,f=e.displayName,p=f===void 0?function(N){return Rh(N)?"styled.".concat(N):"Styled(".concat(qk(N),")")}(t):f,y=e.displayName&&e.componentId?"".concat(Wy(e.displayName),"-").concat(e.componentId):e.componentId||h,T=r&&i.attrs?i.attrs.concat(l).filter(Boolean):l,P=e.shouldForwardProp;if(r&&i.shouldForwardProp){var R=i.shouldForwardProp;if(e.shouldForwardProp){var D=e.shouldForwardProp;P=function(N,O){return R(N,O)&&D(N,O)}}else P=R}var E=new EN(n,y,r?i.componentStyle:void 0);function _(N,O){return function(M,v,m){var w=M.attrs,I=M.componentStyle,C=M.defaultProps,x=M.foldedComponentIds,A=M.styledComponentId,Re=M.target,Zt=dt.useContext(DE),Rn=Zy(),Pe=M.shouldForwardProp||Rn.shouldForwardProp,U=jk(v,Zt,C)||Ns,K=function(st,me,ot){for(var Pn,en=Lt(Lt({},me),{className:void 0,theme:ot}),Ue=0;Ue<st.length;Ue+=1){var Ut=Ds(Pn=st[Ue])?Pn(en):Pn;for(var ze in Ut)en[ze]=ze==="className"?ui(en[ze],Ut[ze]):ze==="style"?Lt(Lt({},en[ze]),Ut[ze]):Ut[ze]}return me.className&&(en.className=ui(en.className,me.className)),en}(w,v,U),Y=K.as||Re,ae={};for(var J in K)K[J]===void 0||J[0]==="$"||J==="as"||J==="theme"&&K.theme===U||(J==="forwardedAs"?ae.as=K.forwardedAs:Pe&&!Pe(J,Y)||(ae[J]=K[J]));var he=function(st,me){var ot=Zy(),Pn=st.generateAndInjectStyles(me,ot.styleSheet,ot.stylis);return Pn}(I,K),Je=ui(x,A);return he&&(Je+=" "+he),K.className&&(Je+=" "+K.className),ae[Rh(Y)&&!_E.has(Y)?"class":"className"]=Je,ae.ref=m,b.createElement(Y,ae)}(S,N,O)}_.displayName=p;var S=dt.forwardRef(_);return S.attrs=T,S.componentStyle=E,S.displayName=p,S.shouldForwardProp=P,S.foldedComponentIds=r?ui(i.foldedComponentIds,i.styledComponentId):"",S.styledComponentId=y,S.target=r?i.target:t,Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(N){this._foldedDefaultProps=r?function(O){for(var M=[],v=1;v<arguments.length;v++)M[v-1]=arguments[v];for(var m=0,w=M;m<w.length;m++)Xd(O,w[m],!0);return O}({},i.defaultProps,N):N}}),Fp(S,function(){return".".concat(S.styledComponentId)}),s&&AE(S,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),S}function tv(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n}var nv=function(t){return Object.assign(t,{isCss:!0})};function TN(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ds(t)||pa(t))return nv(gi(tv(Ic,Ou([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?gi(r):nv(gi(tv(r,e)))}function Zd(t,e,n){if(n===void 0&&(n=Ns),!e)throw ka(1,e);var r=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return t(e,n,TN.apply(void 0,Ou([i],s,!1)))};return r.attrs=function(i){return Zd(t,e,Lt(Lt({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return Zd(t,e,Lt(Lt({},n),i))},r}var ME=function(t){return Zd(wN,t)},Ws=ME;_E.forEach(function(t){Ws[t]=ME(t)});const $p=Ws.div.attrs(({x:t,y:e,$backgroundColor:n})=>({style:{left:`${t*Ny}px`,top:`${e*Ny}px`,backgroundColor:n}}))`
  position: absolute;
  width: ${er}px;
  height: ${er}px;
  border: ${ns}px solid darkgray;
`,SN=({x:t,y:e,id:n})=>{const{setNodeRef:r,isOver:i}=Ek({id:n,data:{x:t,y:e}}),s=i?"lightgreen":"white";return L.jsx($p,{ref:r,x:t,y:e,$backgroundColor:s})},$u=Ws.div`
  color: white;
  width: ${ku}px;
  height: ${ku}px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  background: ${t=>t.$isMonster?"crimson":"dodgerblue"};
  border-color: ${t=>t.$isMonster?"darkred":"darkblue"};
  border-width: ${UP}px;
  border-style: solid;
`,IN=Ws($u)`
  position: absolute;
  cursor: grab;
  touch-action: none;
  left: ${t=>t.$left}px;
  top: ${t=>t.$top}px;
`,AN=t=>{const{id:e,x:n,y:r,type:i}=t,{setNodeRef:s,listeners:o,attributes:l,transform:u}=yk({id:e}),h={transform:zd.Transform.toString(u)},f=n*(er-ns)+(er-ns-ku)/2,p=r*(er-ns)+(er-ns-ku)/2;return L.jsx(IN,{$left:f,$top:p,$isMonster:i===js.Monster,ref:s,style:h,...l,...o,children:e})},CN=({move:t,units:e,board:n})=>L.jsx(VE,{children:L.jsxs(pk,{onDragEnd:({over:r,active:i})=>{if(r&&r.data.current&&i){const{x:s,y:o}=r.data.current,l=i.id.toString();t(l,s,o)}},children:[Fr(pc).map(r=>Fr(Ca).map(i=>n[r][i]==="."?L.jsx(SN,{id:`${i}-${r}`,x:i,y:r},`${i}-${r}`):L.jsx($p,{x:i,y:r,$backgroundColor:"black"},`${i}-${r}`))),e.filter(r=>r.hp>0||r.type===js.Character).map(r=>L.jsx(AN,{...r},r.id))]})}),VE=Ws.div`
  position: relative;
  width: ${Ca*er}px;
  height: ${pc*er}px;
`,RN=t=>t.monsterType!==void 0,PN=({item:t})=>L.jsxs("div",{className:"d-flex flex-row mb-2 p-2 border rounded align-items-center",children:[RN(t)?L.jsx($u,{$isMonster:!0,children:"怪物"}):L.jsx($u,{$isMonster:!1,children:t.id}),L.jsx("div",{className:"flex-grow-1 p-2",children:t.name}),L.jsx("div",{className:"fs-5",children:t.initiative})]},t.name),_r={Fighter:"ファイター",Wizard:"ウィザード",Rogue:"ローグ",Cleric:"クレリック",Bard:"バード",Monk:"モンク",Paladin:"パラディン",Ranger:"レンジャー",Sorcerer:"ソーサラー",Warlock:"ウォーロック",Barbarian:"バーバリアン",Druid:"ドルイド"},OE={岩熊:{id:"岩熊",name:"ロックベアー",level:4,classLevel:{[_r.Barbarian]:2,[_r.Druid]:2},ac:18,hp:54,abilities:{[W.STR]:16,[W.DEX]:14,[W.CON]:16,[W.INT]:8,[W.WIS]:16,[W.CHA]:8},initiative:6},灰鼠:{id:"灰鼠",name:"グレイラット",level:4,classLevel:{[_r.Wizard]:2,[_r.Rogue]:2},ac:18,hp:36,abilities:{[W.STR]:16,[W.DEX]:14,[W.CON]:14,[W.INT]:10,[W.WIS]:10,[W.CHA]:10},initiative:17},エマ:{id:"エマ",name:"エマさん",level:4,classLevel:{[_r.Barbarian]:2,[_r.Ranger]:2},ac:16,hp:42,abilities:{[W.STR]:14,[W.DEX]:16,[W.CON]:14,[W.INT]:8,[W.WIS]:12,[W.CHA]:8},initiative:18},エド:{id:"エド",name:"先生",level:4,classLevel:{[_r.Rogue]:2,[_r.Ranger]:2},ac:15,hp:34,abilities:{[W.STR]:14,[W.DEX]:16,[W.CON]:12,[W.INT]:8,[W.WIS]:12,[W.CHA]:8},initiative:10}},xN=({monster:t})=>{const e=[t,...Object.values(OE)].sort((n,r)=>r.initiative-n.initiative);return L.jsxs("div",{className:"d-flex flex-column flex-grow-1",children:[L.jsx("h5",{className:"pb-2",children:"イニシアティブ"}),e.map(n=>L.jsx(PN,{item:n},n.name))]})},kN=t=>L.jsxs(NN,{children:[L.jsx(CN,{...t}),L.jsx(xN,{...t})]}),NN=Ws.div`
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  flex-wrap: wrap;
`,DN=()=>{for(;;){const t=Math.floor(Math.random()*Ca),e=Math.floor(Math.random()*4+pc-4);if(Rp[e][t]===".")return{x:t,y:e}}},MN=t=>{const{id:e,name:n,hp:r}=t,{x:i,y:s}=DN();return{id:e,type:js.Character,name:n,x:i,y:s,hp:r}},VN={unit:MN},ON=({unit:t,setHitPoint:e,monster:n})=>L.jsxs("div",{className:"d-flex flex-row mb-2 p-2 border rounded align-items-center",children:[L.jsx($u,{...t,$isMonster:t.type===js.Monster,children:t.id}),L.jsx("div",{className:"flex-grow-1 p-2",children:L.jsxs("div",{className:"fs-6",children:[L.jsx("span",{children:n.name}),t.hp<=0&&L.jsx("span",{className:"text-danger",children:"[撃破]"})]})}),L.jsx("div",{className:"fs-5 px-2",children:"hp"}),L.jsx("select",{value:t.hp,className:"form-select form-select-lg w-25",onChange:r=>e(t.id,parseInt(r.target.value)),children:Fr(n.hp+1).map(r=>L.jsx("option",{value:r,children:r},r))})]},t.name),bN=({units:t,setHitPoint:e,monster:n})=>L.jsxs("div",{children:[L.jsx("h5",{children:"ヒットポイント管理"}),t.filter(r=>r.type===js.Monster).map(r=>L.jsx(ON,{unit:r,setHitPoint:e,monster:n},r.name))]}),LN=t=>{const[e,n]=b.useState(t);return b.useEffect(()=>{Cp(xr(Yn,"board","board"),i=>{var s;n(((s=i.data())==null?void 0:s.board)??t)})},[]),{board:e,flipCell:(i,s)=>{const o=e.map((l,u)=>l.split("").map((h,f)=>f===i&&u===s?h==="#"?".":"#":h).join(""));Oo(xr(Yn,"board","board"),{board:o}).then()}}},FN=({board:t,flipCell:e})=>L.jsx(VE,{children:Fr(pc).map(n=>Fr(Ca).map(r=>L.jsx($p,{x:r,y:n,$backgroundColor:t[n][r]==="#"?"black":"white",onClick:()=>e(r,n)},`${r}-${n}`)))});function $N(){const{settings:t,setLevel:e,setNumCharacters:n,setDifficulty:r,totalExp:i}=xS(DS),{monster:s,reRollMonster:o}=GP(i),{units:l,move:u,setUnit:h,deleteUnit:f,setHitPoint:p}=ZP(),{board:y,flipCell:T}=LN(Rp),[P,R]=b.useState(!1),D={[ye.Setting]:()=>{o(),_(ye.Monster)},[ye.Monster]:o,[ye.Room]:()=>{Fr(s.num).forEach(O=>{const M=q1.unit(s,O);h(M)}),Fr(20-s.num).forEach(O=>{const M=`m${O+s.num}`;f(M)}),Object.values(OE).forEach(O=>{const M=VN.unit(O);h(M)})},[ye.HitPoint]:()=>{Fr(s.num).forEach(O=>{const M=`m${O}`;p(M,s.hp)})},[ye.EditRoom]:()=>{T(0,0)}},{page:E,setPage:_,reRollLabel:S,reRoll:N}=XP(D);return L.jsxs(L.Fragment,{children:[L.jsx(JP,{page:E,setPage:_,reRoll:N,reRollLabel:S,isMaster:P,setIsMaster:R}),L.jsxs("div",{className:"container-fluid",children:[E===ye.Setting&&L.jsx(YP,{settings:t,setLevel:e,setNumCharacters:n,setDifficulty:r}),E===ye.Monster&&L.jsx(NS,{monster:s}),E===ye.Room&&L.jsx(kN,{units:l,move:u,monster:s,board:y}),E===ye.HitPoint&&L.jsx(bN,{units:l,setHitPoint:p,monster:s}),E===ye.EditRoom&&L.jsx(FN,{board:y,flipCell:T})]})]})}m_(document.getElementById("root")).render(L.jsx(b.StrictMode,{children:L.jsx($N,{})}));
