(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function pw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mv={exports:{}},Hu={},gv={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _a=Symbol.for("react.element"),mw=Symbol.for("react.portal"),gw=Symbol.for("react.fragment"),yw=Symbol.for("react.strict_mode"),vw=Symbol.for("react.profiler"),_w=Symbol.for("react.provider"),Ew=Symbol.for("react.context"),ww=Symbol.for("react.forward_ref"),Tw=Symbol.for("react.suspense"),Sw=Symbol.for("react.memo"),Iw=Symbol.for("react.lazy"),bm=Symbol.iterator;function Aw(t){return t===null||typeof t!="object"?null:(t=bm&&t[bm]||t["@@iterator"],typeof t=="function"?t:null)}var yv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vv=Object.assign,_v={};function bs(t,e,n){this.props=t,this.context=e,this.refs=_v,this.updater=n||yv}bs.prototype.isReactComponent={};bs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ev(){}Ev.prototype=bs.prototype;function ff(t,e,n){this.props=t,this.context=e,this.refs=_v,this.updater=n||yv}var pf=ff.prototype=new Ev;pf.constructor=ff;vv(pf,bs.prototype);pf.isPureReactComponent=!0;var Lm=Array.isArray,wv=Object.prototype.hasOwnProperty,mf={current:null},Tv={key:!0,ref:!0,__self:!0,__source:!0};function Sv(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)wv.call(e,r)&&!Tv.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:_a,type:t,key:s,ref:o,props:i,_owner:mf.current}}function Cw(t,e){return{$$typeof:_a,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gf(t){return typeof t=="object"&&t!==null&&t.$$typeof===_a}function Rw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fm=/\/+/g;function zc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Rw(""+t.key):e.toString(36)}function kl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _a:case mw:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+zc(o,0):r,Lm(i)?(n="",t!=null&&(n=t.replace(Fm,"$&/")+"/"),kl(i,e,n,"",function(h){return h})):i!=null&&(gf(i)&&(i=Cw(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Fm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Lm(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+zc(s,l);o+=kl(s,e,n,u,i)}else if(u=Aw(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+zc(s,l++),o+=kl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function il(t,e,n){if(t==null)return t;var r=[],i=0;return kl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Pw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dt={current:null},Nl={transition:null},xw={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:Nl,ReactCurrentOwner:mf};function Iv(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:il,forEach:function(t,e,n){il(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return il(t,function(){e++}),e},toArray:function(t){return il(t,function(e){return e})||[]},only:function(t){if(!gf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=bs;re.Fragment=gw;re.Profiler=vw;re.PureComponent=ff;re.StrictMode=yw;re.Suspense=Tw;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xw;re.act=Iv;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=vv({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=mf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)wv.call(e,u)&&!Tv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:_a,type:t.type,key:i,ref:s,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:Ew,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_w,_context:t},t.Consumer=t};re.createElement=Sv;re.createFactory=function(t){var e=Sv.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:ww,render:t}};re.isValidElement=gf;re.lazy=function(t){return{$$typeof:Iw,_payload:{_status:-1,_result:t},_init:Pw}};re.memo=function(t,e){return{$$typeof:Sw,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Nl.transition;Nl.transition={};try{t()}finally{Nl.transition=e}};re.unstable_act=Iv;re.useCallback=function(t,e){return Dt.current.useCallback(t,e)};re.useContext=function(t){return Dt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return Dt.current.useDeferredValue(t)};re.useEffect=function(t,e){return Dt.current.useEffect(t,e)};re.useId=function(){return Dt.current.useId()};re.useImperativeHandle=function(t,e,n){return Dt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return Dt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return Dt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return Dt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return Dt.current.useReducer(t,e,n)};re.useRef=function(t){return Dt.current.useRef(t)};re.useState=function(t){return Dt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return Dt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return Dt.current.useTransition()};re.version="18.3.1";gv.exports=re;var b=gv.exports;const ht=pw(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw=b,Nw=Symbol.for("react.element"),Dw=Symbol.for("react.fragment"),Mw=Object.prototype.hasOwnProperty,Vw=kw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ow={key:!0,ref:!0,__self:!0,__source:!0};function Av(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Mw.call(e,r)&&!Ow.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Nw,type:t,key:s,ref:o,props:i,_owner:Vw.current}}Hu.Fragment=Dw;Hu.jsx=Av;Hu.jsxs=Av;mv.exports=Hu;var M=mv.exports,Cv={exports:{}},Jt={},Rv={exports:{}},Pv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,q){var Q=z.length;z.push(q);e:for(;0<Q;){var le=Q-1>>>1,J=z[le];if(0<i(J,q))z[le]=q,z[Q]=J,Q=le;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var q=z[0],Q=z.pop();if(Q!==q){z[0]=Q;e:for(var le=0,J=z.length,he=J>>>1;le<he;){var Ye=2*(le+1)-1,it=z[Ye],ye=Ye+1,st=z[ye];if(0>i(it,Q))ye<J&&0>i(st,it)?(z[le]=st,z[ye]=Q,le=ye):(z[le]=it,z[Ye]=Q,le=Ye);else if(ye<J&&0>i(st,Q))z[le]=st,z[ye]=Q,le=ye;else break e}}return q}function i(z,q){var Q=z.sortIndex-q.sortIndex;return Q!==0?Q:z.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,p=null,g=3,S=!1,x=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(z){for(var q=n(h);q!==null;){if(q.callback===null)r(h);else if(q.startTime<=z)r(h),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(h)}}function D(z){if(P=!1,I(z),!x)if(n(u)!==null)x=!0,xn(L);else{var q=n(h);q!==null&&Pe(D,q.startTime-z)}}function L(z,q){x=!1,P&&(P=!1,E(m),m=-1),S=!0;var Q=g;try{for(I(q),p=n(u);p!==null&&(!(p.expirationTime>q)||z&&!C());){var le=p.callback;if(typeof le=="function"){p.callback=null,g=p.priorityLevel;var J=le(p.expirationTime<=q);q=t.unstable_now(),typeof J=="function"?p.callback=J:p===n(u)&&r(u),I(q)}else r(u);p=n(u)}if(p!==null)var he=!0;else{var Ye=n(h);Ye!==null&&Pe(D,Ye.startTime-q),he=!1}return he}finally{p=null,g=Q,S=!1}}var V=!1,v=null,m=-1,w=5,T=-1;function C(){return!(t.unstable_now()-T<w)}function R(){if(v!==null){var z=t.unstable_now();T=z;var q=!0;try{q=v(!0,z)}finally{q?A():(V=!1,v=null)}}else V=!1}var A;if(typeof _=="function")A=function(){_(R)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,en=we.port2;we.port1.onmessage=R,A=function(){en.postMessage(null)}}else A=function(){N(R,0)};function xn(z){v=z,V||(V=!0,A())}function Pe(z,q){m=N(function(){z(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){x||S||(x=!0,xn(L))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var Q=g;g=q;try{return z()}finally{g=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=g;g=z;try{return q()}finally{g=Q}},t.unstable_scheduleCallback=function(z,q,Q){var le=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?le+Q:le):Q=le,z){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=Q+J,z={id:f++,callback:q,priorityLevel:z,startTime:Q,expirationTime:J,sortIndex:-1},Q>le?(z.sortIndex=Q,e(h,z),n(u)===null&&z===n(h)&&(P?(E(m),m=-1):P=!0,Pe(D,Q-le))):(z.sortIndex=J,e(u,z),x||S||(x=!0,xn(L))),z},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(z){var q=g;return function(){var Q=g;g=q;try{return z.apply(this,arguments)}finally{g=Q}}}})(Pv);Rv.exports=Pv;var bw=Rv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw=b,Xt=bw;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xv=new Set,zo={};function Ci(t,e){gs(t,e),gs(t+"Capture",e)}function gs(t,e){for(zo[t]=e,t=0;t<e.length;t++)xv.add(e[t])}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bh=Object.prototype.hasOwnProperty,Fw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$m={},jm={};function $w(t){return Bh.call(jm,t)?!0:Bh.call($m,t)?!1:Fw.test(t)?jm[t]=!0:($m[t]=!0,!1)}function jw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Bw(t,e,n,r){if(e===null||typeof e>"u"||jw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var yf=/[\-:]([a-z])/g;function vf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yf,vf);mt[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yf,vf);mt[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yf,vf);mt[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function _f(t,e,n,r){var i=mt.hasOwnProperty(e)?mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Bw(e,n,i,r)&&(n=null),r||i===null?$w(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fr=Lw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sl=Symbol.for("react.element"),Wi=Symbol.for("react.portal"),qi=Symbol.for("react.fragment"),Ef=Symbol.for("react.strict_mode"),Uh=Symbol.for("react.profiler"),kv=Symbol.for("react.provider"),Nv=Symbol.for("react.context"),wf=Symbol.for("react.forward_ref"),zh=Symbol.for("react.suspense"),Hh=Symbol.for("react.suspense_list"),Tf=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),Dv=Symbol.for("react.offscreen"),Bm=Symbol.iterator;function oo(t){return t===null||typeof t!="object"?null:(t=Bm&&t[Bm]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Hc;function go(t){if(Hc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hc=e&&e[1]||""}return`
`+Hc+t}var Wc=!1;function qc(t,e){if(!t||Wc)return"";Wc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Wc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?go(t):""}function Uw(t){switch(t.tag){case 5:return go(t.type);case 16:return go("Lazy");case 13:return go("Suspense");case 19:return go("SuspenseList");case 0:case 2:case 15:return t=qc(t.type,!1),t;case 11:return t=qc(t.type.render,!1),t;case 1:return t=qc(t.type,!0),t;default:return""}}function Wh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qi:return"Fragment";case Wi:return"Portal";case Uh:return"Profiler";case Ef:return"StrictMode";case zh:return"Suspense";case Hh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Nv:return(t.displayName||"Context")+".Consumer";case kv:return(t._context.displayName||"Context")+".Provider";case wf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tf:return e=t.displayName||null,e!==null?e:Wh(t.type)||"Memo";case Sr:e=t._payload,t=t._init;try{return Wh(t(e))}catch{}}return null}function zw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wh(e);case 8:return e===Ef?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Hw(t){var e=Mv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ol(t){t._valueTracker||(t._valueTracker=Hw(t))}function Vv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Mv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qh(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Um(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ov(t,e){e=e.checked,e!=null&&_f(t,"checked",e,!1)}function Kh(t,e){Ov(t,e);var n=Ur(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Gh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Gh(t,e.type,Ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Gh(t,e,n){(e!=="number"||Zl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yo=Array.isArray;function os(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ur(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Qh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(yo(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ur(n)}}function bv(t,e){var n=Ur(e.value),r=Ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Lv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Lv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var al,Fv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(al=al||document.createElement("div"),al.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=al.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ho(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Co={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ww=["Webkit","ms","Moz","O"];Object.keys(Co).forEach(function(t){Ww.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Co[e]=Co[t]})});function $v(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Co.hasOwnProperty(t)&&Co[t]?(""+e).trim():e+"px"}function jv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=$v(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var qw=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xh(t,e){if(e){if(qw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function Jh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zh=null;function Sf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ed=null,as=null,ls=null;function qm(t){if(t=Ta(t)){if(typeof ed!="function")throw Error(j(280));var e=t.stateNode;e&&(e=Qu(e),ed(t.stateNode,t.type,e))}}function Bv(t){as?ls?ls.push(t):ls=[t]:as=t}function Uv(){if(as){var t=as,e=ls;if(ls=as=null,qm(t),e)for(t=0;t<e.length;t++)qm(e[t])}}function zv(t,e){return t(e)}function Hv(){}var Kc=!1;function Wv(t,e,n){if(Kc)return t(e,n);Kc=!0;try{return zv(t,e,n)}finally{Kc=!1,(as!==null||ls!==null)&&(Hv(),Uv())}}function Wo(t,e){var n=t.stateNode;if(n===null)return null;var r=Qu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var td=!1;if(sr)try{var ao={};Object.defineProperty(ao,"passive",{get:function(){td=!0}}),window.addEventListener("test",ao,ao),window.removeEventListener("test",ao,ao)}catch{td=!1}function Kw(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Ro=!1,eu=null,tu=!1,nd=null,Gw={onError:function(t){Ro=!0,eu=t}};function Qw(t,e,n,r,i,s,o,l,u){Ro=!1,eu=null,Kw.apply(Gw,arguments)}function Yw(t,e,n,r,i,s,o,l,u){if(Qw.apply(this,arguments),Ro){if(Ro){var h=eu;Ro=!1,eu=null}else throw Error(j(198));tu||(tu=!0,nd=h)}}function Ri(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Km(t){if(Ri(t)!==t)throw Error(j(188))}function Xw(t){var e=t.alternate;if(!e){if(e=Ri(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Km(i),t;if(s===r)return Km(i),e;s=s.sibling}throw Error(j(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function Kv(t){return t=Xw(t),t!==null?Gv(t):null}function Gv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gv(t);if(e!==null)return e;t=t.sibling}return null}var Qv=Xt.unstable_scheduleCallback,Gm=Xt.unstable_cancelCallback,Jw=Xt.unstable_shouldYield,Zw=Xt.unstable_requestPaint,$e=Xt.unstable_now,eT=Xt.unstable_getCurrentPriorityLevel,If=Xt.unstable_ImmediatePriority,Yv=Xt.unstable_UserBlockingPriority,nu=Xt.unstable_NormalPriority,tT=Xt.unstable_LowPriority,Xv=Xt.unstable_IdlePriority,Wu=null,Fn=null;function nT(t){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(Wu,t,void 0,(t.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:sT,rT=Math.log,iT=Math.LN2;function sT(t){return t>>>=0,t===0?32:31-(rT(t)/iT|0)|0}var ll=64,ul=4194304;function vo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ru(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=vo(l):(s&=o,s!==0&&(r=vo(s)))}else o=n&~i,o!==0?r=vo(o):s!==0&&(r=vo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-In(e),i=1<<n,r|=t[n],e&=~i;return r}function oT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-In(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=oT(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function rd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jv(){var t=ll;return ll<<=1,!(ll&4194240)&&(ll=64),t}function Gc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ea(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-In(e),t[e]=n}function lT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-In(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Af(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-In(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var pe=0;function Zv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var e0,Cf,t0,n0,r0,id=!1,cl=[],Nr=null,Dr=null,Mr=null,qo=new Map,Ko=new Map,Cr=[],uT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qm(t,e){switch(t){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":qo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ko.delete(e.pointerId)}}function lo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ta(e),e!==null&&Cf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function cT(t,e,n,r,i){switch(e){case"focusin":return Nr=lo(Nr,t,e,n,r,i),!0;case"dragenter":return Dr=lo(Dr,t,e,n,r,i),!0;case"mouseover":return Mr=lo(Mr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return qo.set(s,lo(qo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ko.set(s,lo(Ko.get(s)||null,t,e,n,r,i)),!0}return!1}function i0(t){var e=oi(t.target);if(e!==null){var n=Ri(e);if(n!==null){if(e=n.tag,e===13){if(e=qv(n),e!==null){t.blockedOn=e,r0(t.priority,function(){t0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zh=r,n.target.dispatchEvent(r),Zh=null}else return e=Ta(n),e!==null&&Cf(e),t.blockedOn=n,!1;e.shift()}return!0}function Ym(t,e,n){Dl(t)&&n.delete(e)}function hT(){id=!1,Nr!==null&&Dl(Nr)&&(Nr=null),Dr!==null&&Dl(Dr)&&(Dr=null),Mr!==null&&Dl(Mr)&&(Mr=null),qo.forEach(Ym),Ko.forEach(Ym)}function uo(t,e){t.blockedOn===e&&(t.blockedOn=null,id||(id=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,hT)))}function Go(t){function e(i){return uo(i,t)}if(0<cl.length){uo(cl[0],t);for(var n=1;n<cl.length;n++){var r=cl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nr!==null&&uo(Nr,t),Dr!==null&&uo(Dr,t),Mr!==null&&uo(Mr,t),qo.forEach(e),Ko.forEach(e),n=0;n<Cr.length;n++)r=Cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cr.length&&(n=Cr[0],n.blockedOn===null);)i0(n),n.blockedOn===null&&Cr.shift()}var us=fr.ReactCurrentBatchConfig,iu=!0;function dT(t,e,n,r){var i=pe,s=us.transition;us.transition=null;try{pe=1,Rf(t,e,n,r)}finally{pe=i,us.transition=s}}function fT(t,e,n,r){var i=pe,s=us.transition;us.transition=null;try{pe=4,Rf(t,e,n,r)}finally{pe=i,us.transition=s}}function Rf(t,e,n,r){if(iu){var i=sd(t,e,n,r);if(i===null)ih(t,e,r,su,n),Qm(t,r);else if(cT(i,t,e,n,r))r.stopPropagation();else if(Qm(t,r),e&4&&-1<uT.indexOf(t)){for(;i!==null;){var s=Ta(i);if(s!==null&&e0(s),s=sd(t,e,n,r),s===null&&ih(t,e,r,su,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ih(t,e,r,null,n)}}var su=null;function sd(t,e,n,r){if(su=null,t=Sf(r),t=oi(t),t!==null)if(e=Ri(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return su=t,null}function s0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eT()){case If:return 1;case Yv:return 4;case nu:case tT:return 16;case Xv:return 536870912;default:return 16}default:return 16}}var Pr=null,Pf=null,Ml=null;function o0(){if(Ml)return Ml;var t,e=Pf,n=e.length,r,i="value"in Pr?Pr.value:Pr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ml=i.slice(t,1<r?1-r:void 0)}function Vl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hl(){return!0}function Xm(){return!1}function Zt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hl:Xm,this.isPropagationStopped=Xm,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),e}var Ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xf=Zt(Ls),wa=De({},Ls,{view:0,detail:0}),pT=Zt(wa),Qc,Yc,co,qu=De({},wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==co&&(co&&t.type==="mousemove"?(Qc=t.screenX-co.screenX,Yc=t.screenY-co.screenY):Yc=Qc=0,co=t),Qc)},movementY:function(t){return"movementY"in t?t.movementY:Yc}}),Jm=Zt(qu),mT=De({},qu,{dataTransfer:0}),gT=Zt(mT),yT=De({},wa,{relatedTarget:0}),Xc=Zt(yT),vT=De({},Ls,{animationName:0,elapsedTime:0,pseudoElement:0}),_T=Zt(vT),ET=De({},Ls,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wT=Zt(ET),TT=De({},Ls,{data:0}),Zm=Zt(TT),ST={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=AT[t])?!!e[t]:!1}function kf(){return CT}var RT=De({},wa,{key:function(t){if(t.key){var e=ST[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kf,charCode:function(t){return t.type==="keypress"?Vl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),PT=Zt(RT),xT=De({},qu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eg=Zt(xT),kT=De({},wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kf}),NT=Zt(kT),DT=De({},Ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),MT=Zt(DT),VT=De({},qu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),OT=Zt(VT),bT=[9,13,27,32],Nf=sr&&"CompositionEvent"in window,Po=null;sr&&"documentMode"in document&&(Po=document.documentMode);var LT=sr&&"TextEvent"in window&&!Po,a0=sr&&(!Nf||Po&&8<Po&&11>=Po),tg=" ",ng=!1;function l0(t,e){switch(t){case"keyup":return bT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ki=!1;function FT(t,e){switch(t){case"compositionend":return u0(e);case"keypress":return e.which!==32?null:(ng=!0,tg);case"textInput":return t=e.data,t===tg&&ng?null:t;default:return null}}function $T(t,e){if(Ki)return t==="compositionend"||!Nf&&l0(t,e)?(t=o0(),Ml=Pf=Pr=null,Ki=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return a0&&e.locale!=="ko"?null:e.data;default:return null}}var jT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jT[t.type]:e==="textarea"}function c0(t,e,n,r){Bv(r),e=ou(e,"onChange"),0<e.length&&(n=new xf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xo=null,Qo=null;function BT(t){w0(t,0)}function Ku(t){var e=Yi(t);if(Vv(e))return t}function UT(t,e){if(t==="change")return e}var h0=!1;if(sr){var Jc;if(sr){var Zc="oninput"in document;if(!Zc){var ig=document.createElement("div");ig.setAttribute("oninput","return;"),Zc=typeof ig.oninput=="function"}Jc=Zc}else Jc=!1;h0=Jc&&(!document.documentMode||9<document.documentMode)}function sg(){xo&&(xo.detachEvent("onpropertychange",d0),Qo=xo=null)}function d0(t){if(t.propertyName==="value"&&Ku(Qo)){var e=[];c0(e,Qo,t,Sf(t)),Wv(BT,e)}}function zT(t,e,n){t==="focusin"?(sg(),xo=e,Qo=n,xo.attachEvent("onpropertychange",d0)):t==="focusout"&&sg()}function HT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ku(Qo)}function WT(t,e){if(t==="click")return Ku(e)}function qT(t,e){if(t==="input"||t==="change")return Ku(e)}function KT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rn=typeof Object.is=="function"?Object.is:KT;function Yo(t,e){if(Rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Bh.call(e,i)||!Rn(t[i],e[i]))return!1}return!0}function og(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ag(t,e){var n=og(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=og(n)}}function f0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?f0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function p0(){for(var t=window,e=Zl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zl(t.document)}return e}function Df(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GT(t){var e=p0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&f0(n.ownerDocument.documentElement,n)){if(r!==null&&Df(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ag(n,s);var o=ag(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var QT=sr&&"documentMode"in document&&11>=document.documentMode,Gi=null,od=null,ko=null,ad=!1;function lg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ad||Gi==null||Gi!==Zl(r)||(r=Gi,"selectionStart"in r&&Df(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ko&&Yo(ko,r)||(ko=r,r=ou(od,"onSelect"),0<r.length&&(e=new xf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gi)))}function dl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qi={animationend:dl("Animation","AnimationEnd"),animationiteration:dl("Animation","AnimationIteration"),animationstart:dl("Animation","AnimationStart"),transitionend:dl("Transition","TransitionEnd")},eh={},m0={};sr&&(m0=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function Gu(t){if(eh[t])return eh[t];if(!Qi[t])return t;var e=Qi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in m0)return eh[t]=e[n];return t}var g0=Gu("animationend"),y0=Gu("animationiteration"),v0=Gu("animationstart"),_0=Gu("transitionend"),E0=new Map,ug="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(t,e){E0.set(t,e),Ci(e,[t])}for(var th=0;th<ug.length;th++){var nh=ug[th],YT=nh.toLowerCase(),XT=nh[0].toUpperCase()+nh.slice(1);Kr(YT,"on"+XT)}Kr(g0,"onAnimationEnd");Kr(y0,"onAnimationIteration");Kr(v0,"onAnimationStart");Kr("dblclick","onDoubleClick");Kr("focusin","onFocus");Kr("focusout","onBlur");Kr(_0,"onTransitionEnd");gs("onMouseEnter",["mouseout","mouseover"]);gs("onMouseLeave",["mouseout","mouseover"]);gs("onPointerEnter",["pointerout","pointerover"]);gs("onPointerLeave",["pointerout","pointerover"]);Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JT=new Set("cancel close invalid load scroll toggle".split(" ").concat(_o));function cg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Yw(r,e,void 0,t),t.currentTarget=null}function w0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;cg(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;cg(i,l,h),s=u}}}if(tu)throw t=nd,tu=!1,nd=null,t}function Se(t,e){var n=e[dd];n===void 0&&(n=e[dd]=new Set);var r=t+"__bubble";n.has(r)||(T0(e,t,2,!1),n.add(r))}function rh(t,e,n){var r=0;e&&(r|=4),T0(n,t,r,e)}var fl="_reactListening"+Math.random().toString(36).slice(2);function Xo(t){if(!t[fl]){t[fl]=!0,xv.forEach(function(n){n!=="selectionchange"&&(JT.has(n)||rh(n,!1,t),rh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fl]||(e[fl]=!0,rh("selectionchange",!1,e))}}function T0(t,e,n,r){switch(s0(e)){case 1:var i=dT;break;case 4:i=fT;break;default:i=Rf}n=i.bind(null,e,n,t),i=void 0,!td||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ih(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=oi(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Wv(function(){var h=s,f=Sf(n),p=[];e:{var g=E0.get(t);if(g!==void 0){var S=xf,x=t;switch(t){case"keypress":if(Vl(n)===0)break e;case"keydown":case"keyup":S=PT;break;case"focusin":x="focus",S=Xc;break;case"focusout":x="blur",S=Xc;break;case"beforeblur":case"afterblur":S=Xc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Jm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=gT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=NT;break;case g0:case y0:case v0:S=_T;break;case _0:S=MT;break;case"scroll":S=pT;break;case"wheel":S=OT;break;case"copy":case"cut":case"paste":S=wT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=eg}var P=(e&4)!==0,N=!P&&t==="scroll",E=P?g!==null?g+"Capture":null:g;P=[];for(var _=h,I;_!==null;){I=_;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,E!==null&&(D=Wo(_,E),D!=null&&P.push(Jo(_,D,I)))),N)break;_=_.return}0<P.length&&(g=new S(g,x,null,n,f),p.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",g&&n!==Zh&&(x=n.relatedTarget||n.fromElement)&&(oi(x)||x[or]))break e;if((S||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,S?(x=n.relatedTarget||n.toElement,S=h,x=x?oi(x):null,x!==null&&(N=Ri(x),x!==N||x.tag!==5&&x.tag!==6)&&(x=null)):(S=null,x=h),S!==x)){if(P=Jm,D="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(P=eg,D="onPointerLeave",E="onPointerEnter",_="pointer"),N=S==null?g:Yi(S),I=x==null?g:Yi(x),g=new P(D,_+"leave",S,n,f),g.target=N,g.relatedTarget=I,D=null,oi(f)===h&&(P=new P(E,_+"enter",x,n,f),P.target=I,P.relatedTarget=N,D=P),N=D,S&&x)t:{for(P=S,E=x,_=0,I=P;I;I=$i(I))_++;for(I=0,D=E;D;D=$i(D))I++;for(;0<_-I;)P=$i(P),_--;for(;0<I-_;)E=$i(E),I--;for(;_--;){if(P===E||E!==null&&P===E.alternate)break t;P=$i(P),E=$i(E)}P=null}else P=null;S!==null&&hg(p,g,S,P,!1),x!==null&&N!==null&&hg(p,N,x,P,!0)}}e:{if(g=h?Yi(h):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var L=UT;else if(rg(g))if(h0)L=qT;else{L=HT;var V=zT}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=WT);if(L&&(L=L(t,h))){c0(p,L,n,f);break e}V&&V(t,g,h),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&Gh(g,"number",g.value)}switch(V=h?Yi(h):window,t){case"focusin":(rg(V)||V.contentEditable==="true")&&(Gi=V,od=h,ko=null);break;case"focusout":ko=od=Gi=null;break;case"mousedown":ad=!0;break;case"contextmenu":case"mouseup":case"dragend":ad=!1,lg(p,n,f);break;case"selectionchange":if(QT)break;case"keydown":case"keyup":lg(p,n,f)}var v;if(Nf)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Ki?l0(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(a0&&n.locale!=="ko"&&(Ki||m!=="onCompositionStart"?m==="onCompositionEnd"&&Ki&&(v=o0()):(Pr=f,Pf="value"in Pr?Pr.value:Pr.textContent,Ki=!0)),V=ou(h,m),0<V.length&&(m=new Zm(m,t,null,n,f),p.push({event:m,listeners:V}),v?m.data=v:(v=u0(n),v!==null&&(m.data=v)))),(v=LT?FT(t,n):$T(t,n))&&(h=ou(h,"onBeforeInput"),0<h.length&&(f=new Zm("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:h}),f.data=v))}w0(p,e)})}function Jo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ou(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Wo(t,n),s!=null&&r.unshift(Jo(t,s,i)),s=Wo(t,e),s!=null&&r.push(Jo(t,s,i))),t=t.return}return r}function $i(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Wo(n,s),u!=null&&o.unshift(Jo(n,u,l))):i||(u=Wo(n,s),u!=null&&o.push(Jo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ZT=/\r\n?/g,eS=/\u0000|\uFFFD/g;function dg(t){return(typeof t=="string"?t:""+t).replace(ZT,`
`).replace(eS,"")}function pl(t,e,n){if(e=dg(e),dg(t)!==e&&n)throw Error(j(425))}function au(){}var ld=null,ud=null;function cd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hd=typeof setTimeout=="function"?setTimeout:void 0,tS=typeof clearTimeout=="function"?clearTimeout:void 0,fg=typeof Promise=="function"?Promise:void 0,nS=typeof queueMicrotask=="function"?queueMicrotask:typeof fg<"u"?function(t){return fg.resolve(null).then(t).catch(rS)}:hd;function rS(t){setTimeout(function(){throw t})}function sh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Go(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Go(e)}function Vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fs=Math.random().toString(36).slice(2),Ln="__reactFiber$"+Fs,Zo="__reactProps$"+Fs,or="__reactContainer$"+Fs,dd="__reactEvents$"+Fs,iS="__reactListeners$"+Fs,sS="__reactHandles$"+Fs;function oi(t){var e=t[Ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[or]||n[Ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pg(t);t!==null;){if(n=t[Ln])return n;t=pg(t)}return e}t=n,n=t.parentNode}return null}function Ta(t){return t=t[Ln]||t[or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function Qu(t){return t[Zo]||null}var fd=[],Xi=-1;function Gr(t){return{current:t}}function Ae(t){0>Xi||(t.current=fd[Xi],fd[Xi]=null,Xi--)}function Ee(t,e){Xi++,fd[Xi]=t.current,t.current=e}var zr={},Pt=Gr(zr),$t=Gr(!1),vi=zr;function ys(t,e){var n=t.type.contextTypes;if(!n)return zr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function jt(t){return t=t.childContextTypes,t!=null}function lu(){Ae($t),Ae(Pt)}function mg(t,e,n){if(Pt.current!==zr)throw Error(j(168));Ee(Pt,e),Ee($t,n)}function S0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(j(108,zw(t)||"Unknown",i));return De({},n,r)}function uu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zr,vi=Pt.current,Ee(Pt,t),Ee($t,$t.current),!0}function gg(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=S0(t,e,vi),r.__reactInternalMemoizedMergedChildContext=t,Ae($t),Ae(Pt),Ee(Pt,t)):Ae($t),Ee($t,n)}var Jn=null,Yu=!1,oh=!1;function I0(t){Jn===null?Jn=[t]:Jn.push(t)}function oS(t){Yu=!0,I0(t)}function Qr(){if(!oh&&Jn!==null){oh=!0;var t=0,e=pe;try{var n=Jn;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Jn=null,Yu=!1}catch(i){throw Jn!==null&&(Jn=Jn.slice(t+1)),Qv(If,Qr),i}finally{pe=e,oh=!1}}return null}var Ji=[],Zi=0,cu=null,hu=0,an=[],ln=0,_i=null,Zn=1,er="";function ti(t,e){Ji[Zi++]=hu,Ji[Zi++]=cu,cu=t,hu=e}function A0(t,e,n){an[ln++]=Zn,an[ln++]=er,an[ln++]=_i,_i=t;var r=Zn;t=er;var i=32-In(r)-1;r&=~(1<<i),n+=1;var s=32-In(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zn=1<<32-In(e)+i|n<<i|r,er=s+t}else Zn=1<<s|n<<i|r,er=t}function Mf(t){t.return!==null&&(ti(t,1),A0(t,1,0))}function Vf(t){for(;t===cu;)cu=Ji[--Zi],Ji[Zi]=null,hu=Ji[--Zi],Ji[Zi]=null;for(;t===_i;)_i=an[--ln],an[ln]=null,er=an[--ln],an[ln]=null,Zn=an[--ln],an[ln]=null}var Qt=null,Gt=null,Ce=!1,wn=null;function C0(t,e){var n=cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Gt=Vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_i!==null?{id:Zn,overflow:er}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Gt=null,!0):!1;default:return!1}}function pd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function md(t){if(Ce){var e=Gt;if(e){var n=e;if(!yg(t,e)){if(pd(t))throw Error(j(418));e=Vr(n.nextSibling);var r=Qt;e&&yg(t,e)?C0(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Qt=t)}}else{if(pd(t))throw Error(j(418));t.flags=t.flags&-4097|2,Ce=!1,Qt=t}}}function vg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function ml(t){if(t!==Qt)return!1;if(!Ce)return vg(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cd(t.type,t.memoizedProps)),e&&(e=Gt)){if(pd(t))throw R0(),Error(j(418));for(;e;)C0(t,e),e=Vr(e.nextSibling)}if(vg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gt=Vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gt=null}}else Gt=Qt?Vr(t.stateNode.nextSibling):null;return!0}function R0(){for(var t=Gt;t;)t=Vr(t.nextSibling)}function vs(){Gt=Qt=null,Ce=!1}function Of(t){wn===null?wn=[t]:wn.push(t)}var aS=fr.ReactCurrentBatchConfig;function ho(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function gl(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _g(t){var e=t._init;return e(t._payload)}function P0(t){function e(E,_){if(t){var I=E.deletions;I===null?(E.deletions=[_],E.flags|=16):I.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function i(E,_){return E=Fr(E,_),E.index=0,E.sibling=null,E}function s(E,_,I){return E.index=I,t?(I=E.alternate,I!==null?(I=I.index,I<_?(E.flags|=2,_):I):(E.flags|=2,_)):(E.flags|=1048576,_)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,_,I,D){return _===null||_.tag!==6?(_=fh(I,E.mode,D),_.return=E,_):(_=i(_,I),_.return=E,_)}function u(E,_,I,D){var L=I.type;return L===qi?f(E,_,I.props.children,D,I.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Sr&&_g(L)===_.type)?(D=i(_,I.props),D.ref=ho(E,_,I),D.return=E,D):(D=Bl(I.type,I.key,I.props,null,E.mode,D),D.ref=ho(E,_,I),D.return=E,D)}function h(E,_,I,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=ph(I,E.mode,D),_.return=E,_):(_=i(_,I.children||[]),_.return=E,_)}function f(E,_,I,D,L){return _===null||_.tag!==7?(_=di(I,E.mode,D,L),_.return=E,_):(_=i(_,I),_.return=E,_)}function p(E,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=fh(""+_,E.mode,I),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case sl:return I=Bl(_.type,_.key,_.props,null,E.mode,I),I.ref=ho(E,null,_),I.return=E,I;case Wi:return _=ph(_,E.mode,I),_.return=E,_;case Sr:var D=_._init;return p(E,D(_._payload),I)}if(yo(_)||oo(_))return _=di(_,E.mode,I,null),_.return=E,_;gl(E,_)}return null}function g(E,_,I,D){var L=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return L!==null?null:l(E,_,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case sl:return I.key===L?u(E,_,I,D):null;case Wi:return I.key===L?h(E,_,I,D):null;case Sr:return L=I._init,g(E,_,L(I._payload),D)}if(yo(I)||oo(I))return L!==null?null:f(E,_,I,D,null);gl(E,I)}return null}function S(E,_,I,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return E=E.get(I)||null,l(_,E,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case sl:return E=E.get(D.key===null?I:D.key)||null,u(_,E,D,L);case Wi:return E=E.get(D.key===null?I:D.key)||null,h(_,E,D,L);case Sr:var V=D._init;return S(E,_,I,V(D._payload),L)}if(yo(D)||oo(D))return E=E.get(I)||null,f(_,E,D,L,null);gl(_,D)}return null}function x(E,_,I,D){for(var L=null,V=null,v=_,m=_=0,w=null;v!==null&&m<I.length;m++){v.index>m?(w=v,v=null):w=v.sibling;var T=g(E,v,I[m],D);if(T===null){v===null&&(v=w);break}t&&v&&T.alternate===null&&e(E,v),_=s(T,_,m),V===null?L=T:V.sibling=T,V=T,v=w}if(m===I.length)return n(E,v),Ce&&ti(E,m),L;if(v===null){for(;m<I.length;m++)v=p(E,I[m],D),v!==null&&(_=s(v,_,m),V===null?L=v:V.sibling=v,V=v);return Ce&&ti(E,m),L}for(v=r(E,v);m<I.length;m++)w=S(v,E,m,I[m],D),w!==null&&(t&&w.alternate!==null&&v.delete(w.key===null?m:w.key),_=s(w,_,m),V===null?L=w:V.sibling=w,V=w);return t&&v.forEach(function(C){return e(E,C)}),Ce&&ti(E,m),L}function P(E,_,I,D){var L=oo(I);if(typeof L!="function")throw Error(j(150));if(I=L.call(I),I==null)throw Error(j(151));for(var V=L=null,v=_,m=_=0,w=null,T=I.next();v!==null&&!T.done;m++,T=I.next()){v.index>m?(w=v,v=null):w=v.sibling;var C=g(E,v,T.value,D);if(C===null){v===null&&(v=w);break}t&&v&&C.alternate===null&&e(E,v),_=s(C,_,m),V===null?L=C:V.sibling=C,V=C,v=w}if(T.done)return n(E,v),Ce&&ti(E,m),L;if(v===null){for(;!T.done;m++,T=I.next())T=p(E,T.value,D),T!==null&&(_=s(T,_,m),V===null?L=T:V.sibling=T,V=T);return Ce&&ti(E,m),L}for(v=r(E,v);!T.done;m++,T=I.next())T=S(v,E,m,T.value,D),T!==null&&(t&&T.alternate!==null&&v.delete(T.key===null?m:T.key),_=s(T,_,m),V===null?L=T:V.sibling=T,V=T);return t&&v.forEach(function(R){return e(E,R)}),Ce&&ti(E,m),L}function N(E,_,I,D){if(typeof I=="object"&&I!==null&&I.type===qi&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case sl:e:{for(var L=I.key,V=_;V!==null;){if(V.key===L){if(L=I.type,L===qi){if(V.tag===7){n(E,V.sibling),_=i(V,I.props.children),_.return=E,E=_;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Sr&&_g(L)===V.type){n(E,V.sibling),_=i(V,I.props),_.ref=ho(E,V,I),_.return=E,E=_;break e}n(E,V);break}else e(E,V);V=V.sibling}I.type===qi?(_=di(I.props.children,E.mode,D,I.key),_.return=E,E=_):(D=Bl(I.type,I.key,I.props,null,E.mode,D),D.ref=ho(E,_,I),D.return=E,E=D)}return o(E);case Wi:e:{for(V=I.key;_!==null;){if(_.key===V)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(E,_.sibling),_=i(_,I.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=ph(I,E.mode,D),_.return=E,E=_}return o(E);case Sr:return V=I._init,N(E,_,V(I._payload),D)}if(yo(I))return x(E,_,I,D);if(oo(I))return P(E,_,I,D);gl(E,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(E,_.sibling),_=i(_,I),_.return=E,E=_):(n(E,_),_=fh(I,E.mode,D),_.return=E,E=_),o(E)):n(E,_)}return N}var _s=P0(!0),x0=P0(!1),du=Gr(null),fu=null,es=null,bf=null;function Lf(){bf=es=fu=null}function Ff(t){var e=du.current;Ae(du),t._currentValue=e}function gd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function cs(t,e){fu=t,bf=es=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function dn(t){var e=t._currentValue;if(bf!==t)if(t={context:t,memoizedValue:e,next:null},es===null){if(fu===null)throw Error(j(308));es=t,fu.dependencies={lanes:0,firstContext:t}}else es=es.next=t;return e}var ai=null;function $f(t){ai===null?ai=[t]:ai.push(t)}function k0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,$f(e)):(n.next=i.next,i.next=n),e.interleaved=n,ar(t,r)}function ar(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ir=!1;function jf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function N0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ar(t,n)}return i=r.interleaved,i===null?(e.next=e,$f(r)):(e.next=i.next,i.next=e),r.interleaved=e,ar(t,n)}function Ol(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}function Eg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pu(t,e,n,r){var i=t.updateQueue;Ir=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,f=h=u=null,l=s;do{var g=l.lane,S=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,P=l;switch(g=e,S=n,P.tag){case 1:if(x=P.payload,typeof x=="function"){p=x.call(S,p,g);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=P.payload,g=typeof x=="function"?x.call(S,p,g):x,g==null)break e;p=De({},p,g);break e;case 2:Ir=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=S,u=p):f=f.next=S,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);wi|=o,t.lanes=o,t.memoizedState=p}}function wg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(j(191,i));i.call(r)}}}var Sa={},$n=Gr(Sa),ea=Gr(Sa),ta=Gr(Sa);function li(t){if(t===Sa)throw Error(j(174));return t}function Bf(t,e){switch(Ee(ta,e),Ee(ea,t),Ee($n,Sa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yh(e,t)}Ae($n),Ee($n,e)}function Es(){Ae($n),Ae(ea),Ae(ta)}function D0(t){li(ta.current);var e=li($n.current),n=Yh(e,t.type);e!==n&&(Ee(ea,t),Ee($n,n))}function Uf(t){ea.current===t&&(Ae($n),Ae(ea))}var ke=Gr(0);function mu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ah=[];function zf(){for(var t=0;t<ah.length;t++)ah[t]._workInProgressVersionPrimary=null;ah.length=0}var bl=fr.ReactCurrentDispatcher,lh=fr.ReactCurrentBatchConfig,Ei=0,Ne=null,We=null,Ze=null,gu=!1,No=!1,na=0,lS=0;function Tt(){throw Error(j(321))}function Hf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rn(t[n],e[n]))return!1;return!0}function Wf(t,e,n,r,i,s){if(Ei=s,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bl.current=t===null||t.memoizedState===null?dS:fS,t=n(r,i),No){s=0;do{if(No=!1,na=0,25<=s)throw Error(j(301));s+=1,Ze=We=null,e.updateQueue=null,bl.current=pS,t=n(r,i)}while(No)}if(bl.current=yu,e=We!==null&&We.next!==null,Ei=0,Ze=We=Ne=null,gu=!1,e)throw Error(j(300));return t}function qf(){var t=na!==0;return na=0,t}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Ne.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function fn(){if(We===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Ze===null?Ne.memoizedState:Ze.next;if(e!==null)Ze=e,We=t;else{if(t===null)throw Error(j(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ze===null?Ne.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function ra(t,e){return typeof e=="function"?e(t):e}function uh(t){var e=fn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=We,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var f=h.lane;if((Ei&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Ne.lanes|=f,wi|=f}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,Rn(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ne.lanes|=s,wi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ch(t){var e=fn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Rn(s,e.memoizedState)||(Lt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function M0(){}function V0(t,e){var n=Ne,r=fn(),i=e(),s=!Rn(r.memoizedState,i);if(s&&(r.memoizedState=i,Lt=!0),r=r.queue,Kf(L0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,ia(9,b0.bind(null,n,r,i,e),void 0,null),nt===null)throw Error(j(349));Ei&30||O0(n,e,i)}return i}function O0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function b0(t,e,n,r){e.value=n,e.getSnapshot=r,F0(e)&&$0(t)}function L0(t,e,n){return n(function(){F0(e)&&$0(t)})}function F0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rn(t,n)}catch{return!0}}function $0(t){var e=ar(t,1);e!==null&&An(e,t,1,-1)}function Tg(t){var e=On();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:t},e.queue=t,t=t.dispatch=hS.bind(null,Ne,t),[e.memoizedState,t]}function ia(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function j0(){return fn().memoizedState}function Ll(t,e,n,r){var i=On();Ne.flags|=t,i.memoizedState=ia(1|e,n,void 0,r===void 0?null:r)}function Xu(t,e,n,r){var i=fn();r=r===void 0?null:r;var s=void 0;if(We!==null){var o=We.memoizedState;if(s=o.destroy,r!==null&&Hf(r,o.deps)){i.memoizedState=ia(e,n,s,r);return}}Ne.flags|=t,i.memoizedState=ia(1|e,n,s,r)}function Sg(t,e){return Ll(8390656,8,t,e)}function Kf(t,e){return Xu(2048,8,t,e)}function B0(t,e){return Xu(4,2,t,e)}function U0(t,e){return Xu(4,4,t,e)}function z0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function H0(t,e,n){return n=n!=null?n.concat([t]):null,Xu(4,4,z0.bind(null,e,t),n)}function Gf(){}function W0(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function q0(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function K0(t,e,n){return Ei&21?(Rn(n,e)||(n=Jv(),Ne.lanes|=n,wi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=n)}function uS(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=lh.transition;lh.transition={};try{t(!1),e()}finally{pe=n,lh.transition=r}}function G0(){return fn().memoizedState}function cS(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Q0(t))Y0(e,n);else if(n=k0(t,e,n,r),n!==null){var i=Nt();An(n,t,r,i),X0(n,e,r)}}function hS(t,e,n){var r=Lr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Q0(t))Y0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Rn(l,o)){var u=e.interleaved;u===null?(i.next=i,$f(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=k0(t,e,i,r),n!==null&&(i=Nt(),An(n,t,r,i),X0(n,e,r))}}function Q0(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Y0(t,e){No=gu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function X0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}var yu={readContext:dn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},dS={readContext:dn,useCallback:function(t,e){return On().memoizedState=[t,e===void 0?null:e],t},useContext:dn,useEffect:Sg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ll(4194308,4,z0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ll(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ll(4,2,t,e)},useMemo:function(t,e){var n=On();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=On();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cS.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=On();return t={current:t},e.memoizedState=t},useState:Tg,useDebugValue:Gf,useDeferredValue:function(t){return On().memoizedState=t},useTransition:function(){var t=Tg(!1),e=t[0];return t=uS.bind(null,t[1]),On().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,i=On();if(Ce){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),nt===null)throw Error(j(349));Ei&30||O0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Sg(L0.bind(null,r,s,t),[t]),r.flags|=2048,ia(9,b0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=On(),e=nt.identifierPrefix;if(Ce){var n=er,r=Zn;n=(r&~(1<<32-In(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=na++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=lS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fS={readContext:dn,useCallback:W0,useContext:dn,useEffect:Kf,useImperativeHandle:H0,useInsertionEffect:B0,useLayoutEffect:U0,useMemo:q0,useReducer:uh,useRef:j0,useState:function(){return uh(ra)},useDebugValue:Gf,useDeferredValue:function(t){var e=fn();return K0(e,We.memoizedState,t)},useTransition:function(){var t=uh(ra)[0],e=fn().memoizedState;return[t,e]},useMutableSource:M0,useSyncExternalStore:V0,useId:G0,unstable_isNewReconciler:!1},pS={readContext:dn,useCallback:W0,useContext:dn,useEffect:Kf,useImperativeHandle:H0,useInsertionEffect:B0,useLayoutEffect:U0,useMemo:q0,useReducer:ch,useRef:j0,useState:function(){return ch(ra)},useDebugValue:Gf,useDeferredValue:function(t){var e=fn();return We===null?e.memoizedState=t:K0(e,We.memoizedState,t)},useTransition:function(){var t=ch(ra)[0],e=fn().memoizedState;return[t,e]},useMutableSource:M0,useSyncExternalStore:V0,useId:G0,unstable_isNewReconciler:!1};function _n(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ju={isMounted:function(t){return(t=t._reactInternals)?Ri(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=Lr(t),s=ir(r,i);s.payload=e,n!=null&&(s.callback=n),e=Or(t,s,i),e!==null&&(An(e,t,i,r),Ol(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=Lr(t),s=ir(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Or(t,s,i),e!==null&&(An(e,t,i,r),Ol(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=Lr(t),i=ir(n,r);i.tag=2,e!=null&&(i.callback=e),e=Or(t,i,r),e!==null&&(An(e,t,r,n),Ol(e,t,r))}};function Ig(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Yo(n,r)||!Yo(i,s):!0}function J0(t,e,n){var r=!1,i=zr,s=e.contextType;return typeof s=="object"&&s!==null?s=dn(s):(i=jt(e)?vi:Pt.current,r=e.contextTypes,s=(r=r!=null)?ys(t,i):zr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ju,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ag(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ju.enqueueReplaceState(e,e.state,null)}function vd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},jf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=dn(s):(s=jt(e)?vi:Pt.current,i.context=ys(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(yd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ju.enqueueReplaceState(i,i.state,null),pu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ws(t,e){try{var n="",r=e;do n+=Uw(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function hh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _d(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mS=typeof WeakMap=="function"?WeakMap:Map;function Z0(t,e,n){n=ir(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_u||(_u=!0,xd=r),_d(t,e)},n}function e_(t,e,n){n=ir(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){_d(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){_d(t,e),typeof r!="function"&&(br===null?br=new Set([this]):br.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Cg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=xS.bind(null,t,e,n),e.then(t,t))}function Rg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ir(-1,1),e.tag=2,Or(n,e,1))),n.lanes|=1),t)}var gS=fr.ReactCurrentOwner,Lt=!1;function kt(t,e,n,r){e.child=t===null?x0(e,null,n,r):_s(e,t.child,n,r)}function xg(t,e,n,r,i){n=n.render;var s=e.ref;return cs(e,i),r=Wf(t,e,n,r,s,i),n=qf(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lr(t,e,i)):(Ce&&n&&Mf(e),e.flags|=1,kt(t,e,r,i),e.child)}function kg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!np(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,t_(t,e,s,r,i)):(t=Bl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Yo,n(o,r)&&t.ref===e.ref)return lr(t,e,i)}return e.flags|=1,t=Fr(s,r),t.ref=e.ref,t.return=e,e.child=t}function t_(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Yo(s,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,lr(t,e,i)}return Ed(t,e,n,r,i)}function n_(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(ns,Kt),Kt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(ns,Kt),Kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ee(ns,Kt),Kt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ee(ns,Kt),Kt|=r;return kt(t,e,i,n),e.child}function r_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ed(t,e,n,r,i){var s=jt(n)?vi:Pt.current;return s=ys(e,s),cs(e,i),n=Wf(t,e,n,r,s,i),r=qf(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lr(t,e,i)):(Ce&&r&&Mf(e),e.flags|=1,kt(t,e,n,i),e.child)}function Ng(t,e,n,r,i){if(jt(n)){var s=!0;uu(e)}else s=!1;if(cs(e,i),e.stateNode===null)Fl(t,e),J0(e,n,r),vd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=dn(h):(h=jt(n)?vi:Pt.current,h=ys(e,h));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Ag(e,o,r,h),Ir=!1;var g=e.memoizedState;o.state=g,pu(e,r,o,i),u=e.memoizedState,l!==r||g!==u||$t.current||Ir?(typeof f=="function"&&(yd(e,n,f,r),u=e.memoizedState),(l=Ir||Ig(e,n,l,r,g,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,N0(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:_n(e.type,l),o.props=h,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=dn(u):(u=jt(n)?vi:Pt.current,u=ys(e,u));var S=n.getDerivedStateFromProps;(f=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&Ag(e,o,r,u),Ir=!1,g=e.memoizedState,o.state=g,pu(e,r,o,i);var x=e.memoizedState;l!==p||g!==x||$t.current||Ir?(typeof S=="function"&&(yd(e,n,S,r),x=e.memoizedState),(h=Ir||Ig(e,n,h,r,g,x,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return wd(t,e,n,r,s,i)}function wd(t,e,n,r,i,s){r_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&gg(e,n,!1),lr(t,e,s);r=e.stateNode,gS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_s(e,t.child,null,s),e.child=_s(e,null,l,s)):kt(t,e,l,s),e.memoizedState=r.state,i&&gg(e,n,!0),e.child}function i_(t){var e=t.stateNode;e.pendingContext?mg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mg(t,e.context,!1),Bf(t,e.containerInfo)}function Dg(t,e,n,r,i){return vs(),Of(i),e.flags|=256,kt(t,e,n,r),e.child}var Td={dehydrated:null,treeContext:null,retryLane:0};function Sd(t){return{baseLanes:t,cachePool:null,transitions:null}}function s_(t,e,n){var r=e.pendingProps,i=ke.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ee(ke,i&1),t===null)return md(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=tc(o,r,0,null),t=di(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Sd(n),e.memoizedState=Td,t):Qf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return yS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Fr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Fr(l,s):(s=di(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Sd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Td,r}return s=t.child,t=s.sibling,r=Fr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Qf(t,e){return e=tc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yl(t,e,n,r){return r!==null&&Of(r),_s(e,t.child,null,n),t=Qf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=hh(Error(j(422))),yl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=tc({mode:"visible",children:r.children},i,0,null),s=di(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&_s(e,t.child,null,o),e.child.memoizedState=Sd(o),e.memoizedState=Td,s);if(!(e.mode&1))return yl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(j(419)),r=hh(s,r,void 0),yl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Lt||l){if(r=nt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ar(t,i),An(r,t,i,-1))}return tp(),r=hh(Error(j(421))),yl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=kS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Gt=Vr(i.nextSibling),Qt=e,Ce=!0,wn=null,t!==null&&(an[ln++]=Zn,an[ln++]=er,an[ln++]=_i,Zn=t.id,er=t.overflow,_i=e),e=Qf(e,r.children),e.flags|=4096,e)}function Mg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gd(t.return,e,n)}function dh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function o_(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(kt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mg(t,n,e);else if(t.tag===19)Mg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&mu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),dh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&mu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}dh(e,!0,n,null,s);break;case"together":dh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vS(t,e,n){switch(e.tag){case 3:i_(e),vs();break;case 5:D0(e);break;case 1:jt(e.type)&&uu(e);break;case 4:Bf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ee(du,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?s_(t,e,n):(Ee(ke,ke.current&1),t=lr(t,e,n),t!==null?t.sibling:null);Ee(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return o_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ee(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,n_(t,e,n)}return lr(t,e,n)}var a_,Id,l_,u_;a_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Id=function(){};l_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,li($n.current);var s=null;switch(n){case"input":i=qh(t,i),r=qh(t,r),s=[];break;case"select":i=De({},i,{value:void 0}),r=De({},r,{value:void 0}),s=[];break;case"textarea":i=Qh(t,i),r=Qh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=au)}Xh(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(zo.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(zo.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Se("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};u_=function(t,e,n,r){n!==r&&(e.flags|=4)};function fo(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _S(t,e,n){var r=e.pendingProps;switch(Vf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return jt(e.type)&&lu(),St(e),null;case 3:return r=e.stateNode,Es(),Ae($t),Ae(Pt),zf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ml(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wn!==null&&(Dd(wn),wn=null))),Id(t,e),St(e),null;case 5:Uf(e);var i=li(ta.current);if(n=e.type,t!==null&&e.stateNode!=null)l_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return St(e),null}if(t=li($n.current),ml(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ln]=e,r[Zo]=s,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<_o.length;i++)Se(_o[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":Um(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":Hm(r,s),Se("invalid",r)}Xh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&pl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&pl(r.textContent,l,t),i=["children",""+l]):zo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":ol(r),zm(r,s,!0);break;case"textarea":ol(r),Wm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=au)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Lv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ln]=e,t[Zo]=r,a_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Jh(n,r),n){case"dialog":Se("cancel",t),Se("close",t),i=r;break;case"iframe":case"object":case"embed":Se("load",t),i=r;break;case"video":case"audio":for(i=0;i<_o.length;i++)Se(_o[i],t);i=r;break;case"source":Se("error",t),i=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),i=r;break;case"details":Se("toggle",t),i=r;break;case"input":Um(t,r),i=qh(t,r),Se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=De({},r,{value:void 0}),Se("invalid",t);break;case"textarea":Hm(t,r),i=Qh(t,r),Se("invalid",t);break;default:i=r}Xh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?jv(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Fv(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ho(t,u):typeof u=="number"&&Ho(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Se("scroll",t):u!=null&&_f(t,s,u,o))}switch(n){case"input":ol(t),zm(t,r,!1);break;case"textarea":ol(t),Wm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ur(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?os(t,!!r.multiple,s,!1):r.defaultValue!=null&&os(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=au)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)u_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=li(ta.current),li($n.current),ml(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ln]=e,(s=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:pl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ln]=e,e.stateNode=r}return St(e),null;case 13:if(Ae(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Gt!==null&&e.mode&1&&!(e.flags&128))R0(),vs(),e.flags|=98560,s=!1;else if(s=ml(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(j(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[Ln]=e}else vs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),s=!1}else wn!==null&&(Dd(wn),wn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?Ge===0&&(Ge=3):tp())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return Es(),Id(t,e),t===null&&Xo(e.stateNode.containerInfo),St(e),null;case 10:return Ff(e.type._context),St(e),null;case 17:return jt(e.type)&&lu(),St(e),null;case 19:if(Ae(ke),s=e.memoizedState,s===null)return St(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)fo(s,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=mu(t),o!==null){for(e.flags|=128,fo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(ke,ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&$e()>Ts&&(e.flags|=128,r=!0,fo(s,!1),e.lanes=4194304)}else{if(!r)if(t=mu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ce)return St(e),null}else 2*$e()-s.renderingStartTime>Ts&&n!==1073741824&&(e.flags|=128,r=!0,fo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$e(),e.sibling=null,n=ke.current,Ee(ke,r?n&1|2:n&1),e):(St(e),null);case 22:case 23:return ep(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kt&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function ES(t,e){switch(Vf(e),e.tag){case 1:return jt(e.type)&&lu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Es(),Ae($t),Ae(Pt),zf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Uf(e),null;case 13:if(Ae(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));vs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(ke),null;case 4:return Es(),null;case 10:return Ff(e.type._context),null;case 22:case 23:return ep(),null;case 24:return null;default:return null}}var vl=!1,Ct=!1,wS=typeof WeakSet=="function"?WeakSet:Set,H=null;function ts(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function Ad(t,e,n){try{n()}catch(r){be(t,e,r)}}var Vg=!1;function TS(t,e){if(ld=iu,t=p0(),Df(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,f=0,p=t,g=null;t:for(;;){for(var S;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(S=p.firstChild)!==null;)g=p,p=S;for(;;){if(p===t)break t;if(g===n&&++h===i&&(l=o),g===s&&++f===r&&(u=o),(S=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ud={focusedElem:t,selectionRange:n},iu=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var P=x.memoizedProps,N=x.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?P:_n(e.type,P),N);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(D){be(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return x=Vg,Vg=!1,x}function Do(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ad(e,n,s)}i=i.next}while(i!==r)}}function Zu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Cd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function c_(t){var e=t.alternate;e!==null&&(t.alternate=null,c_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ln],delete e[Zo],delete e[dd],delete e[iS],delete e[sS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function h_(t){return t.tag===5||t.tag===3||t.tag===4}function Og(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=au));else if(r!==4&&(t=t.child,t!==null))for(Rd(t,e,n),t=t.sibling;t!==null;)Rd(t,e,n),t=t.sibling}function Pd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Pd(t,e,n),t=t.sibling;t!==null;)Pd(t,e,n),t=t.sibling}var ut=null,En=!1;function wr(t,e,n){for(n=n.child;n!==null;)d_(t,e,n),n=n.sibling}function d_(t,e,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(Wu,n)}catch{}switch(n.tag){case 5:Ct||ts(n,e);case 6:var r=ut,i=En;ut=null,wr(t,e,n),ut=r,En=i,ut!==null&&(En?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(En?(t=ut,n=n.stateNode,t.nodeType===8?sh(t.parentNode,n):t.nodeType===1&&sh(t,n),Go(t)):sh(ut,n.stateNode));break;case 4:r=ut,i=En,ut=n.stateNode.containerInfo,En=!0,wr(t,e,n),ut=r,En=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ad(n,e,o),i=i.next}while(i!==r)}wr(t,e,n);break;case 1:if(!Ct&&(ts(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){be(n,e,l)}wr(t,e,n);break;case 21:wr(t,e,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,wr(t,e,n),Ct=r):wr(t,e,n);break;default:wr(t,e,n)}}function bg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wS),e.forEach(function(r){var i=NS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ut=l.stateNode,En=!1;break e;case 3:ut=l.stateNode.containerInfo,En=!0;break e;case 4:ut=l.stateNode.containerInfo,En=!0;break e}l=l.return}if(ut===null)throw Error(j(160));d_(s,o,i),ut=null,En=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){be(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)f_(e,t),e=e.sibling}function f_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vn(e,t),Vn(t),r&4){try{Do(3,t,t.return),Zu(3,t)}catch(P){be(t,t.return,P)}try{Do(5,t,t.return)}catch(P){be(t,t.return,P)}}break;case 1:vn(e,t),Vn(t),r&512&&n!==null&&ts(n,n.return);break;case 5:if(vn(e,t),Vn(t),r&512&&n!==null&&ts(n,n.return),t.flags&32){var i=t.stateNode;try{Ho(i,"")}catch(P){be(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Ov(i,s),Jh(l,o);var h=Jh(l,s);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?jv(i,p):f==="dangerouslySetInnerHTML"?Fv(i,p):f==="children"?Ho(i,p):_f(i,f,p,h)}switch(l){case"input":Kh(i,s);break;case"textarea":bv(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var S=s.value;S!=null?os(i,!!s.multiple,S,!1):g!==!!s.multiple&&(s.defaultValue!=null?os(i,!!s.multiple,s.defaultValue,!0):os(i,!!s.multiple,s.multiple?[]:"",!1))}i[Zo]=s}catch(P){be(t,t.return,P)}}break;case 6:if(vn(e,t),Vn(t),r&4){if(t.stateNode===null)throw Error(j(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){be(t,t.return,P)}}break;case 3:if(vn(e,t),Vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Go(e.containerInfo)}catch(P){be(t,t.return,P)}break;case 4:vn(e,t),Vn(t);break;case 13:vn(e,t),Vn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Jf=$e())),r&4&&bg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(h=Ct)||f,vn(e,t),Ct=h):vn(e,t),Vn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(p=H=f;H!==null;){switch(g=H,S=g.child,g.tag){case 0:case 11:case 14:case 15:Do(4,g,g.return);break;case 1:ts(g,g.return);var x=g.stateNode;if(typeof x.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(P){be(r,n,P)}}break;case 5:ts(g,g.return);break;case 22:if(g.memoizedState!==null){Fg(p);continue}}S!==null?(S.return=g,H=S):Fg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=$v("display",o))}catch(P){be(t,t.return,P)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(P){be(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:vn(e,t),Vn(t),r&4&&bg(t);break;case 21:break;default:vn(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(h_(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ho(i,""),r.flags&=-33);var s=Og(t);Pd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Og(t);Rd(t,l,o);break;default:throw Error(j(161))}}catch(u){be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SS(t,e,n){H=t,p_(t)}function p_(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var i=H,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||vl;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Ct;l=vl;var h=Ct;if(vl=o,(Ct=u)&&!h)for(H=i;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?$g(i):u!==null?(u.return=o,H=u):$g(i);for(;s!==null;)H=s,p_(s),s=s.sibling;H=i,vl=l,Ct=h}Lg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,H=s):Lg(t)}}function Lg(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||Zu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:_n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&wg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Go(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}Ct||e.flags&512&&Cd(e)}catch(g){be(e,e.return,g)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Fg(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function $g(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zu(4,e)}catch(u){be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){be(e,i,u)}}var s=e.return;try{Cd(e)}catch(u){be(e,s,u)}break;case 5:var o=e.return;try{Cd(e)}catch(u){be(e,o,u)}}}catch(u){be(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var IS=Math.ceil,vu=fr.ReactCurrentDispatcher,Yf=fr.ReactCurrentOwner,hn=fr.ReactCurrentBatchConfig,ae=0,nt=null,He=null,ft=0,Kt=0,ns=Gr(0),Ge=0,sa=null,wi=0,ec=0,Xf=0,Mo=null,bt=null,Jf=0,Ts=1/0,Yn=null,_u=!1,xd=null,br=null,_l=!1,xr=null,Eu=0,Vo=0,kd=null,$l=-1,jl=0;function Nt(){return ae&6?$e():$l!==-1?$l:$l=$e()}function Lr(t){return t.mode&1?ae&2&&ft!==0?ft&-ft:aS.transition!==null?(jl===0&&(jl=Jv()),jl):(t=pe,t!==0||(t=window.event,t=t===void 0?16:s0(t.type)),t):1}function An(t,e,n,r){if(50<Vo)throw Vo=0,kd=null,Error(j(185));Ea(t,n,r),(!(ae&2)||t!==nt)&&(t===nt&&(!(ae&2)&&(ec|=n),Ge===4&&Rr(t,ft)),Bt(t,r),n===1&&ae===0&&!(e.mode&1)&&(Ts=$e()+500,Yu&&Qr()))}function Bt(t,e){var n=t.callbackNode;aT(t,e);var r=ru(t,t===nt?ft:0);if(r===0)n!==null&&Gm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Gm(n),e===1)t.tag===0?oS(jg.bind(null,t)):I0(jg.bind(null,t)),nS(function(){!(ae&6)&&Qr()}),n=null;else{switch(Zv(r)){case 1:n=If;break;case 4:n=Yv;break;case 16:n=nu;break;case 536870912:n=Xv;break;default:n=nu}n=T_(n,m_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function m_(t,e){if($l=-1,jl=0,ae&6)throw Error(j(327));var n=t.callbackNode;if(hs()&&t.callbackNode!==n)return null;var r=ru(t,t===nt?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=wu(t,r);else{e=r;var i=ae;ae|=2;var s=y_();(nt!==t||ft!==e)&&(Yn=null,Ts=$e()+500,hi(t,e));do try{RS();break}catch(l){g_(t,l)}while(!0);Lf(),vu.current=s,ae=i,He!==null?e=0:(nt=null,ft=0,e=Ge)}if(e!==0){if(e===2&&(i=rd(t),i!==0&&(r=i,e=Nd(t,i))),e===1)throw n=sa,hi(t,0),Rr(t,r),Bt(t,$e()),n;if(e===6)Rr(t,r);else{if(i=t.current.alternate,!(r&30)&&!AS(i)&&(e=wu(t,r),e===2&&(s=rd(t),s!==0&&(r=s,e=Nd(t,s))),e===1))throw n=sa,hi(t,0),Rr(t,r),Bt(t,$e()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:ni(t,bt,Yn);break;case 3:if(Rr(t,r),(r&130023424)===r&&(e=Jf+500-$e(),10<e)){if(ru(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=hd(ni.bind(null,t,bt,Yn),e);break}ni(t,bt,Yn);break;case 4:if(Rr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-In(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IS(r/1960))-r,10<r){t.timeoutHandle=hd(ni.bind(null,t,bt,Yn),r);break}ni(t,bt,Yn);break;case 5:ni(t,bt,Yn);break;default:throw Error(j(329))}}}return Bt(t,$e()),t.callbackNode===n?m_.bind(null,t):null}function Nd(t,e){var n=Mo;return t.current.memoizedState.isDehydrated&&(hi(t,e).flags|=256),t=wu(t,e),t!==2&&(e=bt,bt=n,e!==null&&Dd(e)),t}function Dd(t){bt===null?bt=t:bt.push.apply(bt,t)}function AS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Rn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rr(t,e){for(e&=~Xf,e&=~ec,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-In(e),r=1<<n;t[n]=-1,e&=~r}}function jg(t){if(ae&6)throw Error(j(327));hs();var e=ru(t,0);if(!(e&1))return Bt(t,$e()),null;var n=wu(t,e);if(t.tag!==0&&n===2){var r=rd(t);r!==0&&(e=r,n=Nd(t,r))}if(n===1)throw n=sa,hi(t,0),Rr(t,e),Bt(t,$e()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ni(t,bt,Yn),Bt(t,$e()),null}function Zf(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(Ts=$e()+500,Yu&&Qr())}}function Ti(t){xr!==null&&xr.tag===0&&!(ae&6)&&hs();var e=ae;ae|=1;var n=hn.transition,r=pe;try{if(hn.transition=null,pe=1,t)return t()}finally{pe=r,hn.transition=n,ae=e,!(ae&6)&&Qr()}}function ep(){Kt=ns.current,Ae(ns)}function hi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tS(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Vf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lu();break;case 3:Es(),Ae($t),Ae(Pt),zf();break;case 5:Uf(r);break;case 4:Es();break;case 13:Ae(ke);break;case 19:Ae(ke);break;case 10:Ff(r.type._context);break;case 22:case 23:ep()}n=n.return}if(nt=t,He=t=Fr(t.current,null),ft=Kt=e,Ge=0,sa=null,Xf=ec=wi=0,bt=Mo=null,ai!==null){for(e=0;e<ai.length;e++)if(n=ai[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ai=null}return t}function g_(t,e){do{var n=He;try{if(Lf(),bl.current=yu,gu){for(var r=Ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gu=!1}if(Ei=0,Ze=We=Ne=null,No=!1,na=0,Yf.current=null,n===null||n.return===null){Ge=1,sa=e,He=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=ft,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var S=Rg(o);if(S!==null){S.flags&=-257,Pg(S,o,l,s,e),S.mode&1&&Cg(s,h,e),e=S,u=h;var x=e.updateQueue;if(x===null){var P=new Set;P.add(u),e.updateQueue=P}else x.add(u);break e}else{if(!(e&1)){Cg(s,h,e),tp();break e}u=Error(j(426))}}else if(Ce&&l.mode&1){var N=Rg(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Pg(N,o,l,s,e),Of(ws(u,l));break e}}s=u=ws(u,l),Ge!==4&&(Ge=2),Mo===null?Mo=[s]:Mo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=Z0(s,u,e);Eg(s,E);break e;case 1:l=u;var _=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(br===null||!br.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=e_(s,l,e);Eg(s,D);break e}}s=s.return}while(s!==null)}__(n)}catch(L){e=L,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function y_(){var t=vu.current;return vu.current=yu,t===null?yu:t}function tp(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),nt===null||!(wi&268435455)&&!(ec&268435455)||Rr(nt,ft)}function wu(t,e){var n=ae;ae|=2;var r=y_();(nt!==t||ft!==e)&&(Yn=null,hi(t,e));do try{CS();break}catch(i){g_(t,i)}while(!0);if(Lf(),ae=n,vu.current=r,He!==null)throw Error(j(261));return nt=null,ft=0,Ge}function CS(){for(;He!==null;)v_(He)}function RS(){for(;He!==null&&!Jw();)v_(He)}function v_(t){var e=w_(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,e===null?__(t):He=e,Yf.current=null}function __(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ES(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,He=null;return}}else if(n=_S(n,e,Kt),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Ge===0&&(Ge=5)}function ni(t,e,n){var r=pe,i=hn.transition;try{hn.transition=null,pe=1,PS(t,e,n,r)}finally{hn.transition=i,pe=r}return null}function PS(t,e,n,r){do hs();while(xr!==null);if(ae&6)throw Error(j(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(lT(t,s),t===nt&&(He=nt=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_l||(_l=!0,T_(nu,function(){return hs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hn.transition,hn.transition=null;var o=pe;pe=1;var l=ae;ae|=4,Yf.current=null,TS(t,n),f_(n,t),GT(ud),iu=!!ld,ud=ld=null,t.current=n,SS(n),Zw(),ae=l,pe=o,hn.transition=s}else t.current=n;if(_l&&(_l=!1,xr=t,Eu=i),s=t.pendingLanes,s===0&&(br=null),nT(n.stateNode),Bt(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_u)throw _u=!1,t=xd,xd=null,t;return Eu&1&&t.tag!==0&&hs(),s=t.pendingLanes,s&1?t===kd?Vo++:(Vo=0,kd=t):Vo=0,Qr(),null}function hs(){if(xr!==null){var t=Zv(Eu),e=hn.transition,n=pe;try{if(hn.transition=null,pe=16>t?16:t,xr===null)var r=!1;else{if(t=xr,xr=null,Eu=0,ae&6)throw Error(j(331));var i=ae;for(ae|=4,H=t.current;H!==null;){var s=H,o=s.child;if(H.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(H=h;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:Do(8,f,s)}var p=f.child;if(p!==null)p.return=f,H=p;else for(;H!==null;){f=H;var g=f.sibling,S=f.return;if(c_(f),f===h){H=null;break}if(g!==null){g.return=S,H=g;break}H=S}}}var x=s.alternate;if(x!==null){var P=x.child;if(P!==null){x.child=null;do{var N=P.sibling;P.sibling=null,P=N}while(P!==null)}}H=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,H=o;else e:for(;H!==null;){if(s=H,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Do(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,H=E;break e}H=s.return}}var _=t.current;for(H=_;H!==null;){o=H;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,H=I;else e:for(o=_;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Zu(9,l)}}catch(L){be(l,l.return,L)}if(l===o){H=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,H=D;break e}H=l.return}}if(ae=i,Qr(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(Wu,t)}catch{}r=!0}return r}finally{pe=n,hn.transition=e}}return!1}function Bg(t,e,n){e=ws(n,e),e=Z0(t,e,1),t=Or(t,e,1),e=Nt(),t!==null&&(Ea(t,1,e),Bt(t,e))}function be(t,e,n){if(t.tag===3)Bg(t,t,n);else for(;e!==null;){if(e.tag===3){Bg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(br===null||!br.has(r))){t=ws(n,t),t=e_(e,t,1),e=Or(e,t,1),t=Nt(),e!==null&&(Ea(e,1,t),Bt(e,t));break}}e=e.return}}function xS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(ft&n)===n&&(Ge===4||Ge===3&&(ft&130023424)===ft&&500>$e()-Jf?hi(t,0):Xf|=n),Bt(t,e)}function E_(t,e){e===0&&(t.mode&1?(e=ul,ul<<=1,!(ul&130023424)&&(ul=4194304)):e=1);var n=Nt();t=ar(t,e),t!==null&&(Ea(t,e,n),Bt(t,n))}function kS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),E_(t,n)}function NS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),E_(t,n)}var w_;w_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$t.current)Lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lt=!1,vS(t,e,n);Lt=!!(t.flags&131072)}else Lt=!1,Ce&&e.flags&1048576&&A0(e,hu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fl(t,e),t=e.pendingProps;var i=ys(e,Pt.current);cs(e,n),i=Wf(null,e,r,t,i,n);var s=qf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(s=!0,uu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jf(e),i.updater=Ju,e.stateNode=i,i._reactInternals=e,vd(e,r,t,n),e=wd(null,e,r,!0,s,n)):(e.tag=0,Ce&&s&&Mf(e),kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=MS(r),t=_n(r,t),i){case 0:e=Ed(null,e,r,t,n);break e;case 1:e=Ng(null,e,r,t,n);break e;case 11:e=xg(null,e,r,t,n);break e;case 14:e=kg(null,e,r,_n(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Ed(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Ng(t,e,r,i,n);case 3:e:{if(i_(e),t===null)throw Error(j(387));r=e.pendingProps,s=e.memoizedState,i=s.element,N0(t,e),pu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ws(Error(j(423)),e),e=Dg(t,e,r,n,i);break e}else if(r!==i){i=ws(Error(j(424)),e),e=Dg(t,e,r,n,i);break e}else for(Gt=Vr(e.stateNode.containerInfo.firstChild),Qt=e,Ce=!0,wn=null,n=x0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vs(),r===i){e=lr(t,e,n);break e}kt(t,e,r,n)}e=e.child}return e;case 5:return D0(e),t===null&&md(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,cd(r,i)?o=null:s!==null&&cd(r,s)&&(e.flags|=32),r_(t,e),kt(t,e,o,n),e.child;case 6:return t===null&&md(e),null;case 13:return s_(t,e,n);case 4:return Bf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_s(e,null,r,n):kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),xg(t,e,r,i,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ee(du,r._currentValue),r._currentValue=o,s!==null)if(Rn(s.value,o)){if(s.children===i.children&&!$t.current){e=lr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=ir(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),gd(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(j(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),gd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,cs(e,n),i=dn(i),r=r(i),e.flags|=1,kt(t,e,r,n),e.child;case 14:return r=e.type,i=_n(r,e.pendingProps),i=_n(r.type,i),kg(t,e,r,i,n);case 15:return t_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Fl(t,e),e.tag=1,jt(r)?(t=!0,uu(e)):t=!1,cs(e,n),J0(e,r,i),vd(e,r,i,n),wd(null,e,r,!0,t,n);case 19:return o_(t,e,n);case 22:return n_(t,e,n)}throw Error(j(156,e.tag))};function T_(t,e){return Qv(t,e)}function DS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,e,n,r){return new DS(t,e,n,r)}function np(t){return t=t.prototype,!(!t||!t.isReactComponent)}function MS(t){if(typeof t=="function")return np(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wf)return 11;if(t===Tf)return 14}return 2}function Fr(t,e){var n=t.alternate;return n===null?(n=cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")np(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qi:return di(n.children,i,s,e);case Ef:o=8,i|=8;break;case Uh:return t=cn(12,n,e,i|2),t.elementType=Uh,t.lanes=s,t;case zh:return t=cn(13,n,e,i),t.elementType=zh,t.lanes=s,t;case Hh:return t=cn(19,n,e,i),t.elementType=Hh,t.lanes=s,t;case Dv:return tc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kv:o=10;break e;case Nv:o=9;break e;case wf:o=11;break e;case Tf:o=14;break e;case Sr:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=cn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function di(t,e,n,r){return t=cn(7,t,r,e),t.lanes=n,t}function tc(t,e,n,r){return t=cn(22,t,r,e),t.elementType=Dv,t.lanes=n,t.stateNode={isHidden:!1},t}function fh(t,e,n){return t=cn(6,t,null,e),t.lanes=n,t}function ph(t,e,n){return e=cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function VS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gc(0),this.expirationTimes=Gc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rp(t,e,n,r,i,s,o,l,u){return t=new VS(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=cn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jf(s),t}function OS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function S_(t){if(!t)return zr;t=t._reactInternals;e:{if(Ri(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(jt(n))return S0(t,n,e)}return e}function I_(t,e,n,r,i,s,o,l,u){return t=rp(n,r,!0,t,i,s,o,l,u),t.context=S_(null),n=t.current,r=Nt(),i=Lr(n),s=ir(r,i),s.callback=e??null,Or(n,s,i),t.current.lanes=i,Ea(t,i,r),Bt(t,r),t}function nc(t,e,n,r){var i=e.current,s=Nt(),o=Lr(i);return n=S_(n),e.context===null?e.context=n:e.pendingContext=n,e=ir(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Or(i,e,o),t!==null&&(An(t,i,o,s),Ol(t,i,o)),o}function Tu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ug(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ip(t,e){Ug(t,e),(t=t.alternate)&&Ug(t,e)}function bS(){return null}var A_=typeof reportError=="function"?reportError:function(t){console.error(t)};function sp(t){this._internalRoot=t}rc.prototype.render=sp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));nc(t,e,null,null)};rc.prototype.unmount=sp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ti(function(){nc(null,t,null,null)}),e[or]=null}};function rc(t){this._internalRoot=t}rc.prototype.unstable_scheduleHydration=function(t){if(t){var e=n0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cr.length&&e!==0&&e<Cr[n].priority;n++);Cr.splice(n,0,t),n===0&&i0(t)}};function op(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ic(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zg(){}function LS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Tu(o);s.call(h)}}var o=I_(e,r,t,0,null,!1,!1,"",zg);return t._reactRootContainer=o,t[or]=o.current,Xo(t.nodeType===8?t.parentNode:t),Ti(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Tu(u);l.call(h)}}var u=rp(t,0,!1,null,null,!1,!1,"",zg);return t._reactRootContainer=u,t[or]=u.current,Xo(t.nodeType===8?t.parentNode:t),Ti(function(){nc(e,u,n,r)}),u}function sc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=Tu(o);l.call(u)}}nc(e,o,t,i)}else o=LS(n,e,t,i,r);return Tu(o)}e0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vo(e.pendingLanes);n!==0&&(Af(e,n|1),Bt(e,$e()),!(ae&6)&&(Ts=$e()+500,Qr()))}break;case 13:Ti(function(){var r=ar(t,1);if(r!==null){var i=Nt();An(r,t,1,i)}}),ip(t,1)}};Cf=function(t){if(t.tag===13){var e=ar(t,134217728);if(e!==null){var n=Nt();An(e,t,134217728,n)}ip(t,134217728)}};t0=function(t){if(t.tag===13){var e=Lr(t),n=ar(t,e);if(n!==null){var r=Nt();An(n,t,e,r)}ip(t,e)}};n0=function(){return pe};r0=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};ed=function(t,e,n){switch(e){case"input":if(Kh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Qu(r);if(!i)throw Error(j(90));Vv(r),Kh(r,i)}}}break;case"textarea":bv(t,n);break;case"select":e=n.value,e!=null&&os(t,!!n.multiple,e,!1)}};zv=Zf;Hv=Ti;var FS={usingClientEntryPoint:!1,Events:[Ta,Yi,Qu,Bv,Uv,Zf]},po={findFiberByHostInstance:oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$S={bundleType:po.bundleType,version:po.version,rendererPackageName:po.rendererPackageName,rendererConfig:po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Kv(t),t===null?null:t.stateNode},findFiberByHostInstance:po.findFiberByHostInstance||bS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var El=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!El.isDisabled&&El.supportsFiber)try{Wu=El.inject($S),Fn=El}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FS;Jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!op(e))throw Error(j(200));return OS(t,e,null,n)};Jt.createRoot=function(t,e){if(!op(t))throw Error(j(299));var n=!1,r="",i=A_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=rp(t,1,!1,null,null,n,!1,r,i),t[or]=e.current,Xo(t.nodeType===8?t.parentNode:t),new sp(e)};Jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=Kv(e),t=t===null?null:t.stateNode,t};Jt.flushSync=function(t){return Ti(t)};Jt.hydrate=function(t,e,n){if(!ic(e))throw Error(j(200));return sc(null,t,e,!0,n)};Jt.hydrateRoot=function(t,e,n){if(!op(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=A_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=I_(e,null,t,1,n??null,i,!1,s,o),t[or]=e.current,Xo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new rc(e)};Jt.render=function(t,e,n){if(!ic(e))throw Error(j(200));return sc(null,t,e,!1,n)};Jt.unmountComponentAtNode=function(t){if(!ic(t))throw Error(j(40));return t._reactRootContainer?(Ti(function(){sc(null,null,t,!1,function(){t._reactRootContainer=null,t[or]=null})}),!0):!1};Jt.unstable_batchedUpdates=Zf;Jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ic(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return sc(t,e,n,!1,r)};Jt.version="18.3.1-next-f1338f8080-20240426";function C_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C_)}catch(t){console.error(t)}}C_(),Cv.exports=Jt;var si=Cv.exports,R_,Hg=si;R_=Hg.createRoot,Hg.hydrateRoot;const tr={EASY:"",NORMAL:"",HARD:"",HELL:""},jS={[tr.EASY]:[25,50,75,125,250,300,350,450,550,600,800,1e3,1100,1250,1400,1600,2e3,2100,2400,2800],[tr.NORMAL]:[50,100,150,250,500,600,750,900,1100,1200,1600,2e3,2200,2500,2800,3200,3900,4200,4900,5700],[tr.HARD]:[75,150,225,375,750,900,1100,1400,1600,1900,2400,3e3,3400,3800,4300,4800,5900,6300,7300,8500],[tr.HELL]:[100,200,400,500,1100,1400,1700,2100,2400,2800,3600,4500,5100,5700,6400,7200,8800,9500,10900,12700]},BS=t=>{const[e,n]=b.useState(t),r=b.useMemo(()=>{const{level:l,numCharacters:u,difficulty:h}=e;return jS[h][l-1]*u},[e]);return{settings:e,setLevel:l=>{n({...e,level:l})},setNumCharacters:l=>{n({...e,numCharacters:l})},setDifficulty:l=>{n({...e,difficulty:l})},totalExp:r}},mh=()=>M.jsx("hr",{className:"my-1"}),Qn=({label:t,text:e})=>M.jsxs("p",{className:"card-text my-0",children:[M.jsx("b",{children:t}),"",e]}),te={STR:"",DEX:"",CON:"",INT:"",WIS:"",CHA:""},US=({label:t,value:e})=>{const n=Math.floor((e-10)/2),r=n>=0?`+${n}`:n.toString();return M.jsxs("div",{className:"col px-0",children:[M.jsx("p",{className:"my-0",children:M.jsx("b",{children:t})}),M.jsxs("p",{className:"my-0",children:[e,"(",r,")"]})]})},zS=({monster:t})=>{const{name:e,num:n,size:r,monsterType:i,ac:s,hp:o,move:l,cr:u,exp:h,abilities:f,actions:p,skills:g,senses:S,languages:x,specialAbilities:P}=t;return M.jsxs("div",{className:"card",children:[M.jsxs("div",{className:"card-header d-flex",children:[M.jsx("h5",{className:"card-title mb-0",children:e}),M.jsxs("span",{className:"ms-auto",children:[n,""]})]}),M.jsxs("div",{className:"card-body py-2",children:[M.jsxs("p",{className:"card-text my-0",children:[r,"",i,""]}),M.jsx(mh,{}),M.jsx(Qn,{label:"AC",text:s}),M.jsx(Qn,{label:"hp",text:o}),M.jsx(Qn,{label:"",text:l.join("")}),M.jsx(mh,{}),Object.keys(g).length>0&&M.jsx(Qn,{label:"",text:Object.entries(g).map(([N,E])=>`${N}+${E}`).join("")}),M.jsx(Qn,{label:"",text:S.join("")}),Object.keys(x).length>0&&M.jsx(Qn,{label:"",text:x.join("")}),M.jsx(Qn,{label:"",text:`${u}(${h}exp)`}),M.jsx(mh,{}),M.jsx("div",{className:"row text-center",children:Object.values(te).map(N=>M.jsx(US,{label:N,value:f[N]},N))}),M.jsx("hr",{className:"my-1"}),M.jsx("h6",{className:"card-title mt-2",children:""}),p.map(({label:N,text:E})=>M.jsx(Qn,{label:N,text:E},N)),M.jsx("hr",{className:"my-1"}),P.map(({label:N,text:E})=>M.jsx(Qn,{label:N,text:E},N))]})]})},HS={level:4,numCharacters:4,difficulty:tr.NORMAL},Eo=t=>t[Math.floor(Math.random()*t.length)],jn=t=>[...Array(t).keys()],Wg={"1/8":25,"1/4":50,"1/2":100,1:200,2:450,3:700,4:1100,5:1800,6:2300,7:2900,8:3900,9:5e3,10:5900,11:7200,12:8400,13:1e4,14:11500,15:13e3,16:15e3,17:18e3,18:2e4,19:22e3,20:25e3,21:33e3,22:41e3,23:5e4,24:62e3,25:75e3,26:9e4,27:105e3,28:12e4,29:135e3,30:155e3},WS={"1/8":{baseBonus:2,ac:13,hpMin:7,hpMax:35,atBonus:3,damageMin:2,damageMax:3,save:13},"1/4":{baseBonus:2,ac:13,hpMin:36,hpMax:49,atBonus:3,damageMin:4,damageMax:5,save:13},"1/2":{baseBonus:2,ac:13,hpMin:50,hpMax:70,atBonus:3,damageMin:6,damageMax:8,save:13},1:{baseBonus:2,ac:13,hpMin:71,hpMax:85,atBonus:3,damageMin:9,damageMax:14,save:13},2:{baseBonus:2,ac:13,hpMin:86,hpMax:100,atBonus:3,damageMin:15,damageMax:20,save:13},3:{baseBonus:2,ac:13,hpMin:101,hpMax:115,atBonus:3,damageMin:21,damageMax:26,save:13},4:{baseBonus:2,ac:14,hpMin:116,hpMax:130,atBonus:4,damageMin:27,damageMax:32,save:14},5:{baseBonus:3,ac:15,hpMin:131,hpMax:145,atBonus:5,damageMin:33,damageMax:38,save:15},6:{baseBonus:3,ac:15,hpMin:146,hpMax:160,atBonus:5,damageMin:39,damageMax:44,save:15},7:{baseBonus:3,ac:15,hpMin:161,hpMax:175,atBonus:5,damageMin:45,damageMax:50,save:15},8:{baseBonus:3,ac:16,hpMin:176,hpMax:190,atBonus:5,damageMin:51,damageMax:56,save:16},9:{baseBonus:4,ac:16,hpMin:191,hpMax:205,atBonus:6,damageMin:57,damageMax:62,save:16},10:{baseBonus:4,ac:17,hpMin:206,hpMax:220,atBonus:6,damageMin:63,damageMax:68,save:17},11:{baseBonus:4,ac:17,hpMin:221,hpMax:235,atBonus:6,damageMin:69,damageMax:74,save:17},12:{baseBonus:4,ac:17,hpMin:236,hpMax:250,atBonus:6,damageMin:75,damageMax:80,save:17},13:{baseBonus:5,ac:18,hpMin:251,hpMax:265,atBonus:7,damageMin:81,damageMax:86,save:18},14:{baseBonus:5,ac:18,hpMin:266,hpMax:280,atBonus:7,damageMin:87,damageMax:92,save:18},15:{baseBonus:5,ac:18,hpMin:281,hpMax:295,atBonus:7,damageMin:93,damageMax:98,save:18},16:{baseBonus:5,ac:18,hpMin:296,hpMax:310,atBonus:7,damageMin:99,damageMax:104,save:18},17:{baseBonus:6,ac:19,hpMin:311,hpMax:325,atBonus:8,damageMin:105,damageMax:110,save:19},18:{baseBonus:6,ac:19,hpMin:326,hpMax:340,atBonus:8,damageMin:111,damageMax:116,save:19},19:{baseBonus:6,ac:19,hpMin:341,hpMax:355,atBonus:8,damageMin:117,damageMax:122,save:19},20:{baseBonus:6,ac:19,hpMin:356,hpMax:400,atBonus:8,damageMin:123,damageMax:140,save:19},21:{baseBonus:7,ac:19,hpMin:401,hpMax:445,atBonus:9,damageMin:141,damageMax:158,save:19},22:{baseBonus:7,ac:19,hpMin:446,hpMax:490,atBonus:9,damageMin:159,damageMax:176,save:19},23:{baseBonus:7,ac:19,hpMin:491,hpMax:535,atBonus:9,damageMin:177,damageMax:194,save:19},24:{baseBonus:7,ac:19,hpMin:536,hpMax:580,atBonus:9,damageMin:195,damageMax:212,save:19},25:{baseBonus:8,ac:19,hpMin:581,hpMax:625,atBonus:10,damageMin:213,damageMax:230,save:19},26:{baseBonus:8,ac:19,hpMin:626,hpMax:670,atBonus:10,damageMin:231,damageMax:248,save:19},27:{baseBonus:8,ac:19,hpMin:671,hpMax:715,atBonus:10,damageMin:249,damageMax:266,save:19},28:{baseBonus:8,ac:19,hpMin:716,hpMax:760,atBonus:10,damageMin:267,damageMax:284,save:19},29:{baseBonus:9,ac:19,hpMin:761,hpMax:805,atBonus:11,damageMin:285,damageMax:302,save:19},30:{baseBonus:9,ac:19,hpMin:806,hpMax:850,atBonus:11,damageMin:303,damageMax:320,save:19}},ri={TINY:"",SMALL:"",MEDIUM:"",LARGE:"",HUGE:"",GARGANTUAN:""},ge={ABERRATION:"",BEAST:"",CELESTIAL:"",CONSTRUCT:"",DRAGON:"",ELEMENTAL:"",FEY:"",FIEND:"",GIANT:"",HUMANOID:"",MONSTROSITY:"",OOZE:"",PLANT:"",UNDEAD:""},$s={Monster:"Monster",Character:"Character"},nr=50,Su=44,rs=1,qS=2,qg=nr-rs,Ia=16,oc=20,ap=["##............##","#..............#","................","................","................","................","................","................","........####....","........####....","...####.........","...####.........","................",".............#..",".............#..",".............#..","................","................","...............#","..............##"],KS=t=>Math.floor(Math.random()*20)+1+P_(t),P_=t=>Math.floor((t.abilities[te.DEX]-10)/2),GS=()=>{for(;;){const t=Math.floor(Math.random()*Ia),e=Math.floor(Math.random()*10);if(ap[e][t]===".")return{x:t,y:e}}},QS=(t,e)=>{const{x:n,y:r}=GS(),{hp:i,name:s}=t;return{id:`m${e}`,type:$s.Monster,name:s,x:n,y:r,hp:i}},YS=t=>e=>({...e,move:[...e.move,t]}),XS=(t,e)=>n=>({...n,specialAbilities:[...n.specialAbilities,{label:t,text:e}]}),JS=t=>{const e=Math.floor(t),n=Eo([4,6,8,10,12]),r=(n+1)/2,i=Math.max(1,Math.floor(e/r)),s=Math.floor(e-i*r),o=s===0?"":s>0?`+${s}`:`${s}`;return`${e}(${i}d${n}${o})`},ZS={name:"string",num:1,size:"",monsterType:"",ac:10,hp:1,save:1,move:[],skills:{},senses:[],languages:[],cr:"string",exp:-1,abilities:{[te.STR]:10,[te.DEX]:10,[te.CON]:10,[te.INT]:10,[te.WIS]:10,[te.CHA]:10},actions:[],specialAbilities:[],toHit:-1,damage:-1,diceNum:-1,damageMod:-1,baseBonus:-1,initiative:-1},Ot={initiative:KS,dexMod:P_,unit:QS,empty:ZS,moveEnhancer:YS,saEnhancer:XS,toDmDice:JS},eI=(t,e)=>n=>({...n,actions:[...n.actions,{label:t,text:e}]}),tI=(t,e)=>n=>({...n,specialAbilities:[...n.specialAbilities,{label:t,text:e}]}),nI=t=>e=>({...e,move:[...e.move,t]}),rI=t=>e=>({...e,senses:[...e.senses,t]}),iI=t=>e=>({...e,languages:[...e.languages,t]}),sI=(t,e)=>n=>({...n,abilities:{...n.abilities,[t]:n.abilities[t]+e}}),oI=t=>e=>({...e,size:t}),B=t=>e=>{const n={:`+${e.toHit}51:${Ot.toDmDice(e.damage)}[]`,:`+${e.toHit}51:${Ot.toDmDice(e.damage)}[]`,:`+${e.toHit}51:${Ot.toDmDice(e.damage)}[]`,:`+${e.toHit}601:${Ot.toDmDice(e.damage)}[]`,:`+${e.toHit}601:${Ot.toDmDice(e.damage)}[]`,:`603:${Ot.toDmDice(Math.floor(e.damage/6))}[]`};for(const[o,l]of Object.entries(n))if(t===o)return eI(t,l)(e);const r={:"",:"",:"",:"20",:"",:"",:"",:"[][][]",:`${e.save}1`,:`${e.save}[]`,:"[][][][]",:":[][]",:"[]0+51",:`(6)30ft${e.save}hp1${Ot.toDmDice(e.damage/4)}[]`,:`[][]${Math.floor(e.hp/5)+1}`,:`30ft${e.save-5}${e.save}`,"":`(5-6)1${Ot.toDmDice(e.hp/5)}hp`,:"30ft",:"",:`20ft${e.save}[]`,:`${e.save}[]`,:`${e.save}[]`,:`(5-6)30ft${e.save}[]${e.damage}[]`,:`(5-6)60ft${e.save}[]${Ot.toDmDice(e.damage/2)}[]`,:`(5-6)30ft3${e.save}[]${Ot.toDmDice(e.damage/3)}[]`,:"",:`(4-6)${e.save}[]${Ot.toDmDice(e.damage/2)}[]${e.save}`,:`130ft${Ot.toDmDice(e.damage/2)}[]`};for(const[o,l]of Object.entries(r))if(t===o)return tI(t,l)(e);if(t.endsWith("ft"))return nI(t)(e);if(t.startsWith(""))return rI(t)(e);if(t.endsWith(""))return iI(t)(e);const i={"+":[te.STR,4],"++":[te.STR,8],"-":[te.STR,-4],"--":[te.STR,-8],"+":[te.DEX,4],"++":[te.DEX,8],"-":[te.DEX,-4],"--":[te.DEX,-8],"+":[te.CON,4],"++":[te.CON,8],"-":[te.CON,-4],"--":[te.CON,-8],"+":[te.INT,4],"++":[te.INT,8],"-":[te.INT,-4],"--":[te.INT,-8],"+":[te.WIS,4],"++":[te.WIS,8],"-":[te.WIS,-4],"--":[te.WIS,-8],"+":[te.CHA,4],"++":[te.CHA,8],"-":[te.CHA,-4],"--":[te.CHA,-8]};if(t in i){const[o,l]=i[t];return sI(o,l)(e)}const s={:ri.TINY,:ri.SMALL,:ri.MEDIUM,:ri.LARGE,:ri.HUGE,:ri.GARGANTUAN};if(t in s)return oI(s[t])(e);throw new Error(`Unknown label: ${t}`)},X=(...t)=>e=>t.reduce((n,r)=>r(n),e),rt={TYPE:"type",TERRAIN:"terrain",RACE:"race",CLASS:"class"},gt={COMMON:"common",UNCOMMON:"uncommon",RARE:"rare",MYTHIC:"mythic"},gh={rarity:gt.COMMON,monsterType:ge.HUMANOID,templateType:rt.RACE},aI=[{...gh,name:"",enhancer:X(B(""))},{...gh,name:"",enhancer:X(B(""))},{...gh,name:"",enhancer:X(B(""))}],lI={rarity:gt.UNCOMMON,monsterType:ge.HUMANOID,templateType:rt.RACE},uI={:[""],:[""],:[""],:["30ft"],:["30ft"],:["30ft"],:["30ft"],:[""],:[""],:[""]},cI=Object.entries(uI).map(([t,e])=>({...lI,name:t,enhancer:X(...e.map(n=>B(n)))})),yh={rarity:gt.COMMON,templateType:rt.RACE,monsterType:ge.UNDEAD},hI=[{...yh,name:"",enhancer:X(B(""))},{...yh,name:"",enhancer:X(B(""))},{...yh,name:"",enhancer:X(B(""))}],dI=[{name:"",rarity:gt.RARE,templateType:rt.RACE,monsterType:ge.UNDEAD,enhancer:X(B("40ft"),B(""))}],fI=[{name:"",templateType:rt.RACE,rarity:gt.UNCOMMON,monsterType:ge.GIANT,enhancer:X(B(""))}],wl={rarity:gt.COMMON,templateType:rt.CLASS},pI=[{...wl,name:"",enhancer:X(B(""),B(""),B("+"))},{...wl,name:"",enhancer:X(B(""),B(""),B("+"))},{...wl,name:"",enhancer:X(B(""),B(""),B("+"))},{...wl,name:"",enhancer:X(B(""),B(""),B("+"))}],Kg={templateType:rt.RACE,rarity:gt.COMMON,monsterType:ge.MONSTROSITY},mI=[{...Kg,name:"",enhancer:X(B("40ft"),B(""),B(""))},{...Kg,name:"",enhancer:X(B(""),B("60"),B(""))}],ji={rarity:gt.COMMON,templateType:rt.RACE,monsterType:ge.BEAST},gI=[{...ji,name:"",enhancer:X(B(""),B("60ft"))},{...ji,name:"",enhancer:X(B(""),B("60ft"))},{...ji,name:"",enhancer:X(B(""),B("60ft"))},{...ji,name:"",enhancer:X(B("++"),B("-"))},{...ji,name:"",enhancer:X(B(""),B(""))},{...ji,name:"",enhancer:X(B(""))}],vh={rarity:gt.COMMON,templateType:rt.TYPE},yI=[{...vh,name:ge.UNDEAD,monsterType:ge.UNDEAD,enhancer:X(B("20ft"),B(""),B("60'"))},{...vh,name:ge.HUMANOID,monsterType:ge.HUMANOID,enhancer:X(B("30ft"),B(""))},{...vh,name:ge.BEAST,monsterType:ge.BEAST,enhancer:X(B("40ft"),B("60'"))}],Tl={rarity:gt.UNCOMMON,templateType:rt.TYPE},vI=[{...Tl,name:"",monsterType:ge.GIANT,enhancer:X(B("40ft"),B(""),B("--"),B("--"),B(""))},{...Tl,name:"",monsterType:ge.MONSTROSITY,enhancer:X(B("30ft"),B("60'"))},{...Tl,name:"",monsterType:ge.PLANT,enhancer:X(B("30ft"),B("60'"),B("--"))},{...Tl,name:"",monsterType:ge.OOZE,enhancer:X(B("20ft"),B(""),B("60'"),B("--"))}],Sl={rarity:gt.RARE,templateType:rt.TYPE},_I=[{...Sl,name:"",monsterType:ge.FEY,enhancer:X(B("30ft"),B("60'"),B("++"),B(""))},{...Sl,name:"",monsterType:ge.ELEMENTAL,enhancer:X(B("30ft"),B("60'"))},{...Sl,name:"",monsterType:ge.ABERRATION,enhancer:X(B("30ft"),B("60'"))},{...Sl,name:"",monsterType:ge.CONSTRUCT,enhancer:X(B("20ft"),B(""),B("60'"))}],_h={templateType:rt.TYPE,rarity:gt.MYTHIC},EI=[{..._h,name:"",monsterType:ge.FIEND,enhancer:X(B("60ft"),B("++"),B("++"))},{..._h,name:"",monsterType:ge.CELESTIAL,enhancer:X(B("60ft"),B("++"))},{..._h,name:"",monsterType:ge.DRAGON,enhancer:X(B("60ft"))}],Eh={rarity:gt.COMMON,templateType:rt.RACE,monsterType:ge.PLANT},wI=[{...Eh,name:"",enhancer:X(B(""))},{...Eh,name:"",enhancer:X(B(""))},{...Eh,name:"",enhancer:X(B(""))}],wh={rarity:gt.COMMON,templateType:rt.RACE,monsterType:ge.OOZE},TI=[{...wh,name:"",enhancer:X(B(""))},{...wh,name:"",enhancer:X(B(""))},{...wh,name:"",enhancer:X(B(""))}],Th={rarity:gt.COMMON,templateType:rt.RACE,monsterType:ge.FEY},SI=[{...Th,name:"",enhancer:X(B(""),B(""))},{...Th,name:"",enhancer:X(B("30ft"),B(""))},{...Th,name:"",enhancer:X(B(""))}],Sh=[...aI,...cI,...hI,...dI,...fI,...pI,...mI,...gI,...yI,...vI,..._I,...EI,...wI,...TI,...SI];var Gg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},II=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},k_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let g=(l&15)<<2|h>>6,S=h&63;u||(S=64,o||(g=64)),r.push(n[f],n[p],n[g],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(x_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):II(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||p==null)throw new AI;const g=s<<2|l>>4;if(r.push(g),h!==64){const S=l<<4&240|h>>2;if(r.push(S),p!==64){const x=h<<6&192|p;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CI=function(t){const e=x_(t);return k_.encodeByteArray(e,!0)},Iu=function(t){return CI(t).replace(/\./g,"")},RI=function(t){try{return k_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=()=>PI().__FIREBASE_DEFAULTS__,kI=()=>{if(typeof process>"u"||typeof Gg>"u")return;const t=Gg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RI(t[1]);return e&&JSON.parse(e)},lp=()=>{try{return xI()||kI()||NI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DI=t=>{var e,n;return(n=(e=lp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},MI=t=>{const e=DI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},N_=()=>{var t;return(t=lp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Iu(JSON.stringify(n)),Iu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LI(){var t;const e=(t=lp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FI(){return!LI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $I(){try{return typeof indexedDB=="object"}catch{return!1}}function jI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="FirebaseError";class js extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BI,Object.setPrototypeOf(this,js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D_.prototype.create)}}class D_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?UI(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new js(i,l,r)}}function UI(t,e){return t.replace(zI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const zI=/\{\$([^}]+)}/g;function Md(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Qg(s)&&Qg(o)){if(!Md(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t){return t&&t._delegate?t._delegate:t}class oa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qI(e))try{this.getOrInitializeService({instanceIdentifier:ii})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ii){return this.instances.has(e)}getOptions(e=ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ii){return this.component?this.component.multipleInstances?e:ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WI(t){return t===ii?void 0:t}function qI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const GI={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},QI=oe.INFO,YI={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},XI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=YI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class M_{constructor(e){this.name=e,this._logLevel=QI,this._logHandler=XI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const JI=(t,e)=>e.some(n=>t instanceof n);let Yg,Xg;function ZI(){return Yg||(Yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eA(){return Xg||(Xg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const V_=new WeakMap,Vd=new WeakMap,O_=new WeakMap,Ih=new WeakMap,up=new WeakMap;function tA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n($r(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&V_.set(n,t)}).catch(()=>{}),up.set(e,t),e}function nA(t){if(Vd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Vd.set(t,e)}let Od={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||O_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $r(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rA(t){Od=t(Od)}function iA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ah(this),e,...n);return O_.set(r,e.sort?e.sort():[e]),$r(r)}:eA().includes(t)?function(...e){return t.apply(Ah(this),e),$r(V_.get(this))}:function(...e){return $r(t.apply(Ah(this),e))}}function sA(t){return typeof t=="function"?iA(t):(t instanceof IDBTransaction&&nA(t),JI(t,ZI())?new Proxy(t,Od):t)}function $r(t){if(t instanceof IDBRequest)return tA(t);if(Ih.has(t))return Ih.get(t);const e=sA(t);return e!==t&&(Ih.set(t,e),up.set(e,t)),e}const Ah=t=>up.get(t);function oA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=$r(o);return r&&o.addEventListener("upgradeneeded",u=>{r($r(o.result),u.oldVersion,u.newVersion,$r(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const aA=["get","getKey","getAll","getAllKeys","count"],lA=["put","add","delete","clear"],Ch=new Map;function Jg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ch.get(e))return Ch.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=lA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aA.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Ch.set(e,s),s}rA(t=>({...t,get:(e,n,r)=>Jg(e,n)||t.get(e,n,r),has:(e,n)=>!!Jg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bd="@firebase/app",Zg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new M_("@firebase/app"),hA="@firebase/app-compat",dA="@firebase/analytics-compat",fA="@firebase/analytics",pA="@firebase/app-check-compat",mA="@firebase/app-check",gA="@firebase/auth",yA="@firebase/auth-compat",vA="@firebase/database",_A="@firebase/data-connect",EA="@firebase/database-compat",wA="@firebase/functions",TA="@firebase/functions-compat",SA="@firebase/installations",IA="@firebase/installations-compat",AA="@firebase/messaging",CA="@firebase/messaging-compat",RA="@firebase/performance",PA="@firebase/performance-compat",xA="@firebase/remote-config",kA="@firebase/remote-config-compat",NA="@firebase/storage",DA="@firebase/storage-compat",MA="@firebase/firestore",VA="@firebase/vertexai-preview",OA="@firebase/firestore-compat",bA="firebase",LA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="[DEFAULT]",FA={[bd]:"fire-core",[hA]:"fire-core-compat",[fA]:"fire-analytics",[dA]:"fire-analytics-compat",[mA]:"fire-app-check",[pA]:"fire-app-check-compat",[gA]:"fire-auth",[yA]:"fire-auth-compat",[vA]:"fire-rtdb",[_A]:"fire-data-connect",[EA]:"fire-rtdb-compat",[wA]:"fire-fn",[TA]:"fire-fn-compat",[SA]:"fire-iid",[IA]:"fire-iid-compat",[AA]:"fire-fcm",[CA]:"fire-fcm-compat",[RA]:"fire-perf",[PA]:"fire-perf-compat",[xA]:"fire-rc",[kA]:"fire-rc-compat",[NA]:"fire-gcs",[DA]:"fire-gcs-compat",[MA]:"fire-fst",[OA]:"fire-fst-compat",[VA]:"fire-vertex","fire-js":"fire-js",[bA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=new Map,$A=new Map,Fd=new Map;function ey(t,e){try{t.container.addComponent(e)}catch(n){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Cu(t){const e=t.name;if(Fd.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;Fd.set(e,t);for(const n of Au.values())ey(n,t);for(const n of $A.values())ey(n,t);return!0}function jA(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new D_("app","Firebase",BA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=LA;function b_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ld,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw jr.create("bad-app-name",{appName:String(i)});if(n||(n=N_()),!n)throw jr.create("no-options");const s=Au.get(i);if(s){if(Md(n,s.options)&&Md(r,s.config))return s;throw jr.create("duplicate-app",{appName:i})}const o=new KI(i);for(const u of Fd.values())o.addComponent(u);const l=new UA(n,r,o);return Au.set(i,l),l}function HA(t=Ld){const e=Au.get(t);if(!e&&t===Ld&&N_())return b_();if(!e)throw jr.create("no-app",{appName:t});return e}function ds(t,e,n){var r;let i=(r=FA[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(l.join(" "));return}Cu(new oa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="firebase-heartbeat-database",qA=1,aa="firebase-heartbeat-store";let Rh=null;function L_(){return Rh||(Rh=oA(WA,qA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(aa)}catch(n){console.warn(n)}}}}).catch(t=>{throw jr.create("idb-open",{originalErrorMessage:t.message})})),Rh}async function KA(t){try{const n=(await L_()).transaction(aa),r=await n.objectStore(aa).get(F_(t));return await n.done,r}catch(e){if(e instanceof js)ur.warn(e.message);else{const n=jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ur.warn(n.message)}}}async function ty(t,e){try{const r=(await L_()).transaction(aa,"readwrite");await r.objectStore(aa).put(e,F_(t)),await r.done}catch(n){if(n instanceof js)ur.warn(n.message);else{const r=jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ur.warn(r.message)}}}function F_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=1024,QA=30*24*60*60*1e3;class YA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ny();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=QA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ny(),{heartbeatsToSend:r,unsentEntries:i}=XA(this._heartbeatsCache.heartbeats),s=Iu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ur.warn(n),""}}}function ny(){return new Date().toISOString().substring(0,10)}function XA(t,e=GA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ry(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ry(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $I()?jI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ty(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ty(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ry(t){return Iu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){Cu(new oa("platform-logger",e=>new uA(e),"PRIVATE")),Cu(new oa("heartbeat",e=>new YA(e),"PRIVATE")),ds(bd,Zg,t),ds(bd,Zg,"esm2017"),ds("fire-js","")}ZA("");var iy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fi,$_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,m){function w(){}w.prototype=m.prototype,v.D=m.prototype,v.prototype=new w,v.prototype.constructor=v,v.C=function(T,C,R){for(var A=Array(arguments.length-2),we=2;we<arguments.length;we++)A[we-2]=arguments[we];return m.prototype[C].apply(T,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,m,w){w||(w=0);var T=Array(16);if(typeof m=="string")for(var C=0;16>C;++C)T[C]=m.charCodeAt(w++)|m.charCodeAt(w++)<<8|m.charCodeAt(w++)<<16|m.charCodeAt(w++)<<24;else for(C=0;16>C;++C)T[C]=m[w++]|m[w++]<<8|m[w++]<<16|m[w++]<<24;m=v.g[0],w=v.g[1],C=v.g[2];var R=v.g[3],A=m+(R^w&(C^R))+T[0]+3614090360&4294967295;m=w+(A<<7&4294967295|A>>>25),A=R+(C^m&(w^C))+T[1]+3905402710&4294967295,R=m+(A<<12&4294967295|A>>>20),A=C+(w^R&(m^w))+T[2]+606105819&4294967295,C=R+(A<<17&4294967295|A>>>15),A=w+(m^C&(R^m))+T[3]+3250441966&4294967295,w=C+(A<<22&4294967295|A>>>10),A=m+(R^w&(C^R))+T[4]+4118548399&4294967295,m=w+(A<<7&4294967295|A>>>25),A=R+(C^m&(w^C))+T[5]+1200080426&4294967295,R=m+(A<<12&4294967295|A>>>20),A=C+(w^R&(m^w))+T[6]+2821735955&4294967295,C=R+(A<<17&4294967295|A>>>15),A=w+(m^C&(R^m))+T[7]+4249261313&4294967295,w=C+(A<<22&4294967295|A>>>10),A=m+(R^w&(C^R))+T[8]+1770035416&4294967295,m=w+(A<<7&4294967295|A>>>25),A=R+(C^m&(w^C))+T[9]+2336552879&4294967295,R=m+(A<<12&4294967295|A>>>20),A=C+(w^R&(m^w))+T[10]+4294925233&4294967295,C=R+(A<<17&4294967295|A>>>15),A=w+(m^C&(R^m))+T[11]+2304563134&4294967295,w=C+(A<<22&4294967295|A>>>10),A=m+(R^w&(C^R))+T[12]+1804603682&4294967295,m=w+(A<<7&4294967295|A>>>25),A=R+(C^m&(w^C))+T[13]+4254626195&4294967295,R=m+(A<<12&4294967295|A>>>20),A=C+(w^R&(m^w))+T[14]+2792965006&4294967295,C=R+(A<<17&4294967295|A>>>15),A=w+(m^C&(R^m))+T[15]+1236535329&4294967295,w=C+(A<<22&4294967295|A>>>10),A=m+(C^R&(w^C))+T[1]+4129170786&4294967295,m=w+(A<<5&4294967295|A>>>27),A=R+(w^C&(m^w))+T[6]+3225465664&4294967295,R=m+(A<<9&4294967295|A>>>23),A=C+(m^w&(R^m))+T[11]+643717713&4294967295,C=R+(A<<14&4294967295|A>>>18),A=w+(R^m&(C^R))+T[0]+3921069994&4294967295,w=C+(A<<20&4294967295|A>>>12),A=m+(C^R&(w^C))+T[5]+3593408605&4294967295,m=w+(A<<5&4294967295|A>>>27),A=R+(w^C&(m^w))+T[10]+38016083&4294967295,R=m+(A<<9&4294967295|A>>>23),A=C+(m^w&(R^m))+T[15]+3634488961&4294967295,C=R+(A<<14&4294967295|A>>>18),A=w+(R^m&(C^R))+T[4]+3889429448&4294967295,w=C+(A<<20&4294967295|A>>>12),A=m+(C^R&(w^C))+T[9]+568446438&4294967295,m=w+(A<<5&4294967295|A>>>27),A=R+(w^C&(m^w))+T[14]+3275163606&4294967295,R=m+(A<<9&4294967295|A>>>23),A=C+(m^w&(R^m))+T[3]+4107603335&4294967295,C=R+(A<<14&4294967295|A>>>18),A=w+(R^m&(C^R))+T[8]+1163531501&4294967295,w=C+(A<<20&4294967295|A>>>12),A=m+(C^R&(w^C))+T[13]+2850285829&4294967295,m=w+(A<<5&4294967295|A>>>27),A=R+(w^C&(m^w))+T[2]+4243563512&4294967295,R=m+(A<<9&4294967295|A>>>23),A=C+(m^w&(R^m))+T[7]+1735328473&4294967295,C=R+(A<<14&4294967295|A>>>18),A=w+(R^m&(C^R))+T[12]+2368359562&4294967295,w=C+(A<<20&4294967295|A>>>12),A=m+(w^C^R)+T[5]+4294588738&4294967295,m=w+(A<<4&4294967295|A>>>28),A=R+(m^w^C)+T[8]+2272392833&4294967295,R=m+(A<<11&4294967295|A>>>21),A=C+(R^m^w)+T[11]+1839030562&4294967295,C=R+(A<<16&4294967295|A>>>16),A=w+(C^R^m)+T[14]+4259657740&4294967295,w=C+(A<<23&4294967295|A>>>9),A=m+(w^C^R)+T[1]+2763975236&4294967295,m=w+(A<<4&4294967295|A>>>28),A=R+(m^w^C)+T[4]+1272893353&4294967295,R=m+(A<<11&4294967295|A>>>21),A=C+(R^m^w)+T[7]+4139469664&4294967295,C=R+(A<<16&4294967295|A>>>16),A=w+(C^R^m)+T[10]+3200236656&4294967295,w=C+(A<<23&4294967295|A>>>9),A=m+(w^C^R)+T[13]+681279174&4294967295,m=w+(A<<4&4294967295|A>>>28),A=R+(m^w^C)+T[0]+3936430074&4294967295,R=m+(A<<11&4294967295|A>>>21),A=C+(R^m^w)+T[3]+3572445317&4294967295,C=R+(A<<16&4294967295|A>>>16),A=w+(C^R^m)+T[6]+76029189&4294967295,w=C+(A<<23&4294967295|A>>>9),A=m+(w^C^R)+T[9]+3654602809&4294967295,m=w+(A<<4&4294967295|A>>>28),A=R+(m^w^C)+T[12]+3873151461&4294967295,R=m+(A<<11&4294967295|A>>>21),A=C+(R^m^w)+T[15]+530742520&4294967295,C=R+(A<<16&4294967295|A>>>16),A=w+(C^R^m)+T[2]+3299628645&4294967295,w=C+(A<<23&4294967295|A>>>9),A=m+(C^(w|~R))+T[0]+4096336452&4294967295,m=w+(A<<6&4294967295|A>>>26),A=R+(w^(m|~C))+T[7]+1126891415&4294967295,R=m+(A<<10&4294967295|A>>>22),A=C+(m^(R|~w))+T[14]+2878612391&4294967295,C=R+(A<<15&4294967295|A>>>17),A=w+(R^(C|~m))+T[5]+4237533241&4294967295,w=C+(A<<21&4294967295|A>>>11),A=m+(C^(w|~R))+T[12]+1700485571&4294967295,m=w+(A<<6&4294967295|A>>>26),A=R+(w^(m|~C))+T[3]+2399980690&4294967295,R=m+(A<<10&4294967295|A>>>22),A=C+(m^(R|~w))+T[10]+4293915773&4294967295,C=R+(A<<15&4294967295|A>>>17),A=w+(R^(C|~m))+T[1]+2240044497&4294967295,w=C+(A<<21&4294967295|A>>>11),A=m+(C^(w|~R))+T[8]+1873313359&4294967295,m=w+(A<<6&4294967295|A>>>26),A=R+(w^(m|~C))+T[15]+4264355552&4294967295,R=m+(A<<10&4294967295|A>>>22),A=C+(m^(R|~w))+T[6]+2734768916&4294967295,C=R+(A<<15&4294967295|A>>>17),A=w+(R^(C|~m))+T[13]+1309151649&4294967295,w=C+(A<<21&4294967295|A>>>11),A=m+(C^(w|~R))+T[4]+4149444226&4294967295,m=w+(A<<6&4294967295|A>>>26),A=R+(w^(m|~C))+T[11]+3174756917&4294967295,R=m+(A<<10&4294967295|A>>>22),A=C+(m^(R|~w))+T[2]+718787259&4294967295,C=R+(A<<15&4294967295|A>>>17),A=w+(R^(C|~m))+T[9]+3951481745&4294967295,v.g[0]=v.g[0]+m&4294967295,v.g[1]=v.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,v.g[2]=v.g[2]+C&4294967295,v.g[3]=v.g[3]+R&4294967295}r.prototype.u=function(v,m){m===void 0&&(m=v.length);for(var w=m-this.blockSize,T=this.B,C=this.h,R=0;R<m;){if(C==0)for(;R<=w;)i(this,v,R),R+=this.blockSize;if(typeof v=="string"){for(;R<m;)if(T[C++]=v.charCodeAt(R++),C==this.blockSize){i(this,T),C=0;break}}else for(;R<m;)if(T[C++]=v[R++],C==this.blockSize){i(this,T),C=0;break}}this.h=C,this.o+=m},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var m=1;m<v.length-8;++m)v[m]=0;var w=8*this.o;for(m=v.length-8;m<v.length;++m)v[m]=w&255,w/=256;for(this.u(v),v=Array(16),m=w=0;4>m;++m)for(var T=0;32>T;T+=8)v[w++]=this.g[m]>>>T&255;return v};function s(v,m){var w=l;return Object.prototype.hasOwnProperty.call(w,v)?w[v]:w[v]=m(v)}function o(v,m){this.h=m;for(var w=[],T=!0,C=v.length-1;0<=C;C--){var R=v[C]|0;T&&R==m||(w[C]=R,T=!1)}this.g=w}var l={};function u(v){return-128<=v&&128>v?s(v,function(m){return new o([m|0],0>m?-1:0)}):new o([v|0],0>v?-1:0)}function h(v){if(isNaN(v)||!isFinite(v))return p;if(0>v)return N(h(-v));for(var m=[],w=1,T=0;v>=w;T++)m[T]=v/w|0,w*=4294967296;return new o(m,0)}function f(v,m){if(v.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(v.charAt(0)=="-")return N(f(v.substring(1),m));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=h(Math.pow(m,8)),T=p,C=0;C<v.length;C+=8){var R=Math.min(8,v.length-C),A=parseInt(v.substring(C,C+R),m);8>R?(R=h(Math.pow(m,R)),T=T.j(R).add(h(A))):(T=T.j(w),T=T.add(h(A)))}return T}var p=u(0),g=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-N(this).m();for(var v=0,m=1,w=0;w<this.g.length;w++){var T=this.i(w);v+=(0<=T?T:4294967296+T)*m,m*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(x(this))return"0";if(P(this))return"-"+N(this).toString(v);for(var m=h(Math.pow(v,6)),w=this,T="";;){var C=D(w,m).g;w=E(w,C.j(m));var R=((0<w.g.length?w.g[0]:w.h)>>>0).toString(v);if(w=C,x(w))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function x(v){if(v.h!=0)return!1;for(var m=0;m<v.g.length;m++)if(v.g[m]!=0)return!1;return!0}function P(v){return v.h==-1}t.l=function(v){return v=E(this,v),P(v)?-1:x(v)?0:1};function N(v){for(var m=v.g.length,w=[],T=0;T<m;T++)w[T]=~v.g[T];return new o(w,~v.h).add(g)}t.abs=function(){return P(this)?N(this):this},t.add=function(v){for(var m=Math.max(this.g.length,v.g.length),w=[],T=0,C=0;C<=m;C++){var R=T+(this.i(C)&65535)+(v.i(C)&65535),A=(R>>>16)+(this.i(C)>>>16)+(v.i(C)>>>16);T=A>>>16,R&=65535,A&=65535,w[C]=A<<16|R}return new o(w,w[w.length-1]&-2147483648?-1:0)};function E(v,m){return v.add(N(m))}t.j=function(v){if(x(this)||x(v))return p;if(P(this))return P(v)?N(this).j(N(v)):N(N(this).j(v));if(P(v))return N(this.j(N(v)));if(0>this.l(S)&&0>v.l(S))return h(this.m()*v.m());for(var m=this.g.length+v.g.length,w=[],T=0;T<2*m;T++)w[T]=0;for(T=0;T<this.g.length;T++)for(var C=0;C<v.g.length;C++){var R=this.i(T)>>>16,A=this.i(T)&65535,we=v.i(C)>>>16,en=v.i(C)&65535;w[2*T+2*C]+=A*en,_(w,2*T+2*C),w[2*T+2*C+1]+=R*en,_(w,2*T+2*C+1),w[2*T+2*C+1]+=A*we,_(w,2*T+2*C+1),w[2*T+2*C+2]+=R*we,_(w,2*T+2*C+2)}for(T=0;T<m;T++)w[T]=w[2*T+1]<<16|w[2*T];for(T=m;T<2*m;T++)w[T]=0;return new o(w,0)};function _(v,m){for(;(v[m]&65535)!=v[m];)v[m+1]+=v[m]>>>16,v[m]&=65535,m++}function I(v,m){this.g=v,this.h=m}function D(v,m){if(x(m))throw Error("division by zero");if(x(v))return new I(p,p);if(P(v))return m=D(N(v),m),new I(N(m.g),N(m.h));if(P(m))return m=D(v,N(m)),new I(N(m.g),m.h);if(30<v.g.length){if(P(v)||P(m))throw Error("slowDivide_ only works with positive integers.");for(var w=g,T=m;0>=T.l(v);)w=L(w),T=L(T);var C=V(w,1),R=V(T,1);for(T=V(T,2),w=V(w,2);!x(T);){var A=R.add(T);0>=A.l(v)&&(C=C.add(w),R=A),T=V(T,1),w=V(w,1)}return m=E(v,C.j(m)),new I(C,m)}for(C=p;0<=v.l(m);){for(w=Math.max(1,Math.floor(v.m()/m.m())),T=Math.ceil(Math.log(w)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=h(w),A=R.j(m);P(A)||0<A.l(v);)w-=T,R=h(w),A=R.j(m);x(R)&&(R=g),C=C.add(R),v=E(v,A)}return new I(C,v)}t.A=function(v){return D(this,v).h},t.and=function(v){for(var m=Math.max(this.g.length,v.g.length),w=[],T=0;T<m;T++)w[T]=this.i(T)&v.i(T);return new o(w,this.h&v.h)},t.or=function(v){for(var m=Math.max(this.g.length,v.g.length),w=[],T=0;T<m;T++)w[T]=this.i(T)|v.i(T);return new o(w,this.h|v.h)},t.xor=function(v){for(var m=Math.max(this.g.length,v.g.length),w=[],T=0;T<m;T++)w[T]=this.i(T)^v.i(T);return new o(w,this.h^v.h)};function L(v){for(var m=v.g.length+1,w=[],T=0;T<m;T++)w[T]=v.i(T)<<1|v.i(T-1)>>>31;return new o(w,v.h)}function V(v,m){var w=m>>5;m%=32;for(var T=v.g.length-w,C=[],R=0;R<T;R++)C[R]=0<m?v.i(R+w)>>>m|v.i(R+w+1)<<32-m:v.i(R+w);return new o(C,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,fi=o}).apply(typeof iy<"u"?iy:typeof self<"u"?self:typeof window<"u"?window:{});var Il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j_,wo,B_,Ul,$d,U_,z_,H_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,d){return a==Array.prototype||a==Object.prototype||(a[c]=d.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Il=="object"&&Il];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var d=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var k=a[y];if(!(k in d))break e;d=d[k]}a=a[a.length-1],y=d[a],c=c(y),c!=y&&c!=null&&e(d,a,{configurable:!0,writable:!0,value:c})}}function s(a,c){a instanceof String&&(a+="");var d=0,y=!1,k={next:function(){if(!y&&d<a.length){var O=d++;return{value:c(O,a[O]),done:!1}}return y=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}i("Array.prototype.values",function(a){return a||function(){return s(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function h(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,d){return a.call.apply(a.bind,arguments)}function p(a,c,d){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,y),a.apply(c,k)}}return function(){return a.apply(c,arguments)}}function g(a,c,d){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function S(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var y=d.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function x(a,c){function d(){}d.prototype=c.prototype,a.aa=c.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(y,k,O){for(var U=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)U[ve-2]=arguments[ve];return c.prototype[k].apply(y,U)}}function P(a){const c=a.length;if(0<c){const d=Array(c);for(let y=0;y<c;y++)d[y]=a[y];return d}return[]}function N(a,c){for(let d=1;d<arguments.length;d++){const y=arguments[d];if(u(y)){const k=a.length||0,O=y.length||0;a.length=k+O;for(let U=0;U<O;U++)a[k+U]=y[U]}else a.push(y)}}class E{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function _(a){return/^[\s\xa0]*$/.test(a)}function I(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var L=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function V(a,c,d){for(const y in a)c.call(d,a[y],y,a)}function v(a,c){for(const d in a)c.call(void 0,a[d],d,a)}function m(a){const c={};for(const d in a)c[d]=a[d];return c}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,c){let d,y;for(let k=1;k<arguments.length;k++){y=arguments[k];for(d in y)a[d]=y[d];for(let O=0;O<w.length;O++)d=w[O],Object.prototype.hasOwnProperty.call(y,d)&&(a[d]=y[d])}}function C(a){var c=1;a=a.split(":");const d=[];for(;0<c&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(":")),d}function R(a){l.setTimeout(()=>{throw a},0)}function A(){var a=q;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class we{constructor(){this.h=this.g=null}add(c,d){const y=en.get();y.set(c,d),this.h?this.h.next=y:this.g=y,this.h=y}}var en=new E(()=>new xn,a=>a.reset());class xn{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Pe,z=!1,q=new we,Q=()=>{const a=l.Promise.resolve(void 0);Pe=()=>{a.then(le)}};var le=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(d){R(d)}var c=en;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}z=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function he(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}he.prototype.h=function(){this.defaultPrevented=!0};var Ye=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return a}();function it(a,c){if(he.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(L){e:{try{D(c.nodeName);var k=!0;break e}catch{}k=!1}k||(c=null)}}else d=="mouseover"?c=a.fromElement:d=="mouseout"&&(c=a.toElement);this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ye[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&it.aa.h.call(this)}}x(it,he);var ye={2:"touch",3:"pen",4:"mouse"};it.prototype.h=function(){it.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),kn=0;function tn(a,c,d,y,k){this.listener=a,this.proxy=null,this.src=c,this.type=d,this.capture=!!y,this.ha=k,this.key=++kn,this.da=this.fa=!1}function je(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function zt(a){this.src=a,this.g={},this.h=0}zt.prototype.add=function(a,c,d,y,k){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var U=ki(a,c,y,k);return-1<U?(c=a[U],d||(c.fa=!1)):(c=new tn(c,this.src,O,!!y,k),c.fa=d,a.push(c)),c};function Be(a,c){var d=c.type;if(d in a.g){var y=a.g[d],k=Array.prototype.indexOf.call(y,c,void 0),O;(O=0<=k)&&Array.prototype.splice.call(y,k,1),O&&(je(c),a.g[d].length==0&&(delete a.g[d],a.h--))}}function ki(a,c,d,y){for(var k=0;k<a.length;++k){var O=a[k];if(!O.da&&O.listener==c&&O.capture==!!d&&O.ha==y)return k}return-1}var mn="closure_lm_"+(1e6*Math.random()|0),pr={};function qn(a,c,d,y,k){if(Array.isArray(c)){for(var O=0;O<c.length;O++)qn(a,c[O],d,y,k);return null}return d=La(d),a&&a[st]?a.K(c,d,h(y)?!!y.capture:!!y,k):Oa(a,c,d,!1,y,k)}function Oa(a,c,d,y,k,O){if(!c)throw Error("Invalid event type");var U=h(k)?!!k.capture:!!k,ve=Mi(a);if(ve||(a[mn]=ve=new zt(a)),d=ve.add(c,d,y,U,O),d.proxy)return d;if(y=ba(),d.proxy=y,y.src=a,y.listener=d,a.addEventListener)Ye||(k=U),k===void 0&&(k=!1),a.addEventListener(c.toString(),y,k);else if(a.attachEvent)a.attachEvent(Yr(c.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return d}function ba(){function a(d){return c.call(a.src,a.listener,d)}const c=Di;return a}function Ni(a,c,d,y,k){if(Array.isArray(c))for(var O=0;O<c.length;O++)Ni(a,c[O],d,y,k);else y=h(y)?!!y.capture:!!y,d=La(d),a&&a[st]?(a=a.i,c=String(c).toString(),c in a.g&&(O=a.g[c],d=ki(O,d,y,k),-1<d&&(je(O[d]),Array.prototype.splice.call(O,d,1),O.length==0&&(delete a.g[c],a.h--)))):a&&(a=Mi(a))&&(c=a.g[c.toString()],a=-1,c&&(a=ki(c,d,y,k)),(d=-1<a?c[a]:null)&&nn(d))}function nn(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[st])Be(c.i,a);else{var d=a.type,y=a.proxy;c.removeEventListener?c.removeEventListener(d,y,a.capture):c.detachEvent?c.detachEvent(Yr(d),y):c.addListener&&c.removeListener&&c.removeListener(y),(d=Mi(c))?(Be(d,a),d.h==0&&(d.src=null,c[mn]=null)):je(a)}}}function Yr(a){return a in pr?pr[a]:pr[a]="on"+a}function Di(a,c){if(a.da)a=!0;else{c=new it(c,this);var d=a.listener,y=a.ha||a.src;a.fa&&nn(a),a=d.call(y,c)}return a}function Mi(a){return a=a[mn],a instanceof zt?a:null}var Vi="__closure_events_fn_"+(1e9*Math.random()>>>0);function La(a){return typeof a=="function"?a:(a[Vi]||(a[Vi]=function(c){return a.handleEvent(c)}),a[Vi])}function Xe(){J.call(this),this.i=new zt(this),this.M=this,this.F=null}x(Xe,J),Xe.prototype[st]=!0,Xe.prototype.removeEventListener=function(a,c,d,y){Ni(this,a,c,d,y)};function Ve(a,c){var d,y=a.F;if(y)for(d=[];y;y=y.F)d.push(y);if(a=a.M,y=c.type||c,typeof c=="string")c=new he(c,a);else if(c instanceof he)c.target=c.target||a;else{var k=c;c=new he(y,a),T(c,k)}if(k=!0,d)for(var O=d.length-1;0<=O;O--){var U=c.g=d[O];k=gn(U,y,!0,c)&&k}if(U=c.g=a,k=gn(U,y,!0,c)&&k,k=gn(U,y,!1,c)&&k,d)for(O=0;O<d.length;O++)U=c.g=d[O],k=gn(U,y,!1,c)&&k}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var d=a.g[c],y=0;y<d.length;y++)je(d[y]);delete a.g[c],a.h--}}this.F=null},Xe.prototype.K=function(a,c,d,y){return this.i.add(String(a),c,!1,d,y)},Xe.prototype.L=function(a,c,d,y){return this.i.add(String(a),c,!0,d,y)};function gn(a,c,d,y){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var k=!0,O=0;O<c.length;++O){var U=c[O];if(U&&!U.da&&U.capture==d){var ve=U.listener,lt=U.ha||U.src;U.fa&&Be(a.i,U),k=ve.call(lt,y)!==!1&&k}}return k&&!y.defaultPrevented}function mr(a,c,d){if(typeof a=="function")d&&(a=g(a,d));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function Qs(a){a.g=mr(()=>{a.g=null,a.i&&(a.i=!1,Qs(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class Nn extends J{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Qs(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(a){J.call(this),this.h=a,this.g={}}x(gr,J);var Fa=[];function $a(a){V(a.g,function(c,d){this.g.hasOwnProperty(d)&&nn(c)},a),a.g={}}gr.prototype.N=function(){gr.aa.N.call(this),$a(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oi=l.JSON.stringify,kc=l.JSON.parse,ja=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ys(){}Ys.prototype.h=null;function Ba(a){return a.h||(a.h=a.i())}function Ua(){}var xe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ot(){he.call(this,"d")}x(ot,he);function at(){he.call(this,"c")}x(at,he);var vt={},xt=null;function _t(){return xt=xt||new Xe}vt.La="serverreachability";function Ht(a){he.call(this,vt.La,a)}x(Ht,he);function rn(a){const c=_t();Ve(c,new Ht(c))}vt.STAT_EVENT="statevent";function Vt(a,c){he.call(this,vt.STAT_EVENT,a),this.stat=c}x(Vt,he);function Le(a){const c=_t();Ve(c,new Vt(c,a))}vt.Ma="timingevent";function yr(a,c){he.call(this,vt.Ma,a),this.size=c}x(yr,he);function Dn(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function Mn(){this.g=!0}Mn.prototype.xa=function(){this.g=!1};function za(a,c,d,y,k,O){a.info(function(){if(a.g)if(O)for(var U="",ve=O.split("&"),lt=0;lt<ve.length;lt++){var ue=ve[lt].split("=");if(1<ue.length){var Et=ue[0];ue=ue[1];var wt=Et.split("_");U=2<=wt.length&&wt[1]=="type"?U+(Et+"="+ue+"&"):U+(Et+"=redacted&")}}else U=null;else U=O;return"XMLHTTP REQ ("+y+") [attempt "+k+"]: "+c+`
`+d+`
`+U})}function Xr(a,c,d,y,k,O,U){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+k+"]: "+c+`
`+d+`
`+O+" "+U})}function sn(a,c,d,y){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+GE(a,d)+(y?" "+y:"")})}function Xs(a,c){a.info(function(){return"TIMEOUT: "+c})}Mn.prototype.info=function(){};function GE(a,c){if(!a.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var y=d[a];if(!(2>y.length)){var k=y[1];if(Array.isArray(k)&&!(1>k.length)){var O=k[0];if(O!="noop"&&O!="stop"&&O!="close")for(var U=1;U<k.length;U++)k[U]=""}}}}return Oi(d)}catch{return c}}var Ha={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nc;function Wa(){}x(Wa,Ys),Wa.prototype.g=function(){return new XMLHttpRequest},Wa.prototype.i=function(){return{}},Nc=new Wa;function vr(a,c,d,y){this.j=a,this.i=c,this.l=d,this.R=y||1,this.U=new gr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jp}function Jp(){this.i=null,this.g="",this.h=!1}var Zp={},Dc={};function Mc(a,c,d){a.L=1,a.v=Qa(Kn(c)),a.m=d,a.P=!0,em(a,null)}function em(a,c){a.F=Date.now(),qa(a),a.A=Kn(a.v);var d=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),pm(d.i,"t",y),a.C=0,d=a.j.J,a.h=new Jp,a.g=Dm(a.j,d?c:null,!a.m),0<a.O&&(a.M=new Nn(g(a.Y,a,a.g),a.O)),c=a.U,d=a.g,y=a.ca;var k="readystatechange";Array.isArray(k)||(k&&(Fa[0]=k.toString()),k=Fa);for(var O=0;O<k.length;O++){var U=qn(d,k[O],y||c.handleEvent,!1,c.h||c);if(!U)break;c.g[U.key]=U}c=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),rn(),za(a.i,a.u,a.A,a.l,a.R,a.m)}vr.prototype.ca=function(a){a=a.target;const c=this.M;c&&Gn(a)==3?c.j():this.Y(a)},vr.prototype.Y=function(a){try{if(a==this.g)e:{const wt=Gn(this.g);var c=this.g.Ba();const Fi=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||wm(this.g)))){this.J||wt!=4||c==7||(c==8||0>=Fi?rn(3):rn(2)),Vc(this);var d=this.g.Z();this.X=d;t:if(tm(this)){var y=wm(this.g);a="";var k=y.length,O=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jr(this),Js(this);var U="";break t}this.h.i=new l.TextDecoder}for(c=0;c<k;c++)this.h.h=!0,a+=this.h.i.decode(y[c],{stream:!(O&&c==k-1)});y.length=0,this.h.g+=a,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=d==200,Xr(this.i,this.u,this.A,this.l,this.R,wt,d),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,lt=this.g;if((ve=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ve)){var ue=ve;break t}}ue=null}if(d=ue)sn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oc(this,d);else{this.o=!1,this.s=3,Le(12),Jr(this),Js(this);break e}}if(this.P){d=!0;let yn;for(;!this.J&&this.C<U.length;)if(yn=QE(this,U),yn==Dc){wt==4&&(this.s=4,Le(14),d=!1),sn(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Zp){this.s=4,Le(15),sn(this.i,this.l,U,"[Invalid Chunk]"),d=!1;break}else sn(this.i,this.l,yn,null),Oc(this,yn);if(tm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||U.length!=0||this.h.h||(this.s=1,Le(16),d=!1),this.o=this.o&&d,!d)sn(this.i,this.l,U,"[Invalid Chunked Response]"),Jr(this),Js(this);else if(0<U.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Bc(Et),Et.M=!0,Le(11))}}else sn(this.i,this.l,U,null),Oc(this,U);wt==4&&Jr(this),this.o&&!this.J&&(wt==4?Pm(this.j,this):(this.o=!1,qa(this)))}else dw(this.g),d==400&&0<U.indexOf("Unknown SID")?(this.s=3,Le(12)):(this.s=0,Le(13)),Jr(this),Js(this)}}}catch{}finally{}};function tm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function QE(a,c){var d=a.C,y=c.indexOf(`
`,d);return y==-1?Dc:(d=Number(c.substring(d,y)),isNaN(d)?Zp:(y+=1,y+d>c.length?Dc:(c=c.slice(y,y+d),a.C=y+d,c)))}vr.prototype.cancel=function(){this.J=!0,Jr(this)};function qa(a){a.S=Date.now()+a.I,nm(a,a.I)}function nm(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Dn(g(a.ba,a),c)}function Vc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}vr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Xs(this.i,this.A),this.L!=2&&(rn(),Le(17)),Jr(this),this.s=2,Js(this)):nm(this,this.S-a)};function Js(a){a.j.G==0||a.J||Pm(a.j,a)}function Jr(a){Vc(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,$a(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function Oc(a,c){try{var d=a.j;if(d.G!=0&&(d.g==a||bc(d.h,a))){if(!a.K&&bc(d.h,a)&&d.G==3){try{var y=d.Da.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var k=y;if(k[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)tl(d),Za(d);else break e;jc(d),Le(18)}}else d.za=k[1],0<d.za-d.T&&37500>k[2]&&d.F&&d.v==0&&!d.C&&(d.C=Dn(g(d.Za,d),6e3));if(1>=sm(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else ei(d,11)}else if((a.K||d.g==a)&&tl(d),!_(c))for(k=d.Da.g.parse(c),c=0;c<k.length;c++){let ue=k[c];if(d.T=ue[0],ue=ue[1],d.G==2)if(ue[0]=="c"){d.K=ue[1],d.ia=ue[2];const Et=ue[3];Et!=null&&(d.la=Et,d.j.info("VER="+d.la));const wt=ue[4];wt!=null&&(d.Aa=wt,d.j.info("SVER="+d.Aa));const Fi=ue[5];Fi!=null&&typeof Fi=="number"&&0<Fi&&(y=1.5*Fi,d.L=y,d.j.info("backChannelRequestTimeoutMs_="+y)),y=d;const yn=a.g;if(yn){const rl=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rl){var O=y.h;O.g||rl.indexOf("spdy")==-1&&rl.indexOf("quic")==-1&&rl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Lc(O,O.h),O.h=null))}if(y.D){const Uc=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Uc&&(y.ya=Uc,Te(y.I,y.D,Uc))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),y=d;var U=a;if(y.qa=Nm(y,y.J?y.ia:null,y.W),U.K){om(y.h,U);var ve=U,lt=y.L;lt&&(ve.I=lt),ve.B&&(Vc(ve),qa(ve)),y.g=U}else Cm(y);0<d.i.length&&el(d)}else ue[0]!="stop"&&ue[0]!="close"||ei(d,7);else d.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?ei(d,7):$c(d):ue[0]!="noop"&&d.l&&d.l.ta(ue),d.v=0)}}rn(4)}catch{}}var YE=class{constructor(a,c){this.g=a,this.map=c}};function rm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function im(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function sm(a){return a.h?1:a.g?a.g.size:0}function bc(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Lc(a,c){a.g?a.g.add(c):a.h=c}function om(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}rm.prototype.cancel=function(){if(this.i=am(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function am(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const d of a.g.values())c=c.concat(d.D);return c}return P(a.i)}function XE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],d=a.length,y=0;y<d;y++)c.push(a[y]);return c}c=[],d=0;for(y in a)c[d++]=a[y];return c}function JE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var d=0;d<a;d++)c.push(d);return c}c=[],d=0;for(const y in a)c[d++]=y;return c}}}function lm(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var d=JE(a),y=XE(a),k=y.length,O=0;O<k;O++)c.call(void 0,y[O],d&&d[O],a)}var um=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZE(a,c){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var y=a[d].indexOf("="),k=null;if(0<=y){var O=a[d].substring(0,y);k=a[d].substring(y+1)}else O=a[d];c(O,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Zr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Zr){this.h=a.h,Ka(this,a.j),this.o=a.o,this.g=a.g,Ga(this,a.s),this.l=a.l;var c=a.i,d=new to;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),cm(this,d),this.m=a.m}else a&&(c=String(a).match(um))?(this.h=!1,Ka(this,c[1]||"",!0),this.o=Zs(c[2]||""),this.g=Zs(c[3]||"",!0),Ga(this,c[4]),this.l=Zs(c[5]||"",!0),cm(this,c[6]||"",!0),this.m=Zs(c[7]||"")):(this.h=!1,this.i=new to(null,this.h))}Zr.prototype.toString=function(){var a=[],c=this.j;c&&a.push(eo(c,hm,!0),":");var d=this.g;return(d||c=="file")&&(a.push("//"),(c=this.o)&&a.push(eo(c,hm,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(eo(d,d.charAt(0)=="/"?nw:tw,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",eo(d,iw)),a.join("")};function Kn(a){return new Zr(a)}function Ka(a,c,d){a.j=d?Zs(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Ga(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function cm(a,c,d){c instanceof to?(a.i=c,sw(a.i,a.h)):(d||(c=eo(c,rw)),a.i=new to(c,a.h))}function Te(a,c,d){a.i.set(c,d)}function Qa(a){return Te(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Zs(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function eo(a,c,d){return typeof a=="string"?(a=encodeURI(a).replace(c,ew),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ew(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var hm=/[#\/\?@]/g,tw=/[#\?:]/g,nw=/[#\?]/g,rw=/[#\?@]/g,iw=/#/g;function to(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function _r(a){a.g||(a.g=new Map,a.h=0,a.i&&ZE(a.i,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=to.prototype,t.add=function(a,c){_r(this),this.i=null,a=bi(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(c),this.h+=1,this};function dm(a,c){_r(a),c=bi(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function fm(a,c){return _r(a),c=bi(a,c),a.g.has(c)}t.forEach=function(a,c){_r(this),this.g.forEach(function(d,y){d.forEach(function(k){a.call(c,k,y,this)},this)},this)},t.na=function(){_r(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let y=0;y<c.length;y++){const k=a[y];for(let O=0;O<k.length;O++)d.push(c[y])}return d},t.V=function(a){_r(this);let c=[];if(typeof a=="string")fm(this,a)&&(c=c.concat(this.g.get(bi(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)c=c.concat(a[d])}return c},t.set=function(a,c){return _r(this),this.i=null,a=bi(this,a),fm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function pm(a,c,d){dm(a,c),0<d.length&&(a.i=null,a.g.set(bi(a,c),P(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var y=c[d];const O=encodeURIComponent(String(y)),U=this.V(y);for(y=0;y<U.length;y++){var k=O;U[y]!==""&&(k+="="+encodeURIComponent(String(U[y]))),a.push(k)}}return this.i=a.join("&")};function bi(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function sw(a,c){c&&!a.j&&(_r(a),a.i=null,a.g.forEach(function(d,y){var k=y.toLowerCase();y!=k&&(dm(this,y),pm(this,k,d))},a)),a.j=c}function ow(a,c){const d=new Mn;if(l.Image){const y=new Image;y.onload=S(Er,d,"TestLoadImage: loaded",!0,c,y),y.onerror=S(Er,d,"TestLoadImage: error",!1,c,y),y.onabort=S(Er,d,"TestLoadImage: abort",!1,c,y),y.ontimeout=S(Er,d,"TestLoadImage: timeout",!1,c,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else c(!1)}function aw(a,c){const d=new Mn,y=new AbortController,k=setTimeout(()=>{y.abort(),Er(d,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:y.signal}).then(O=>{clearTimeout(k),O.ok?Er(d,"TestPingServer: ok",!0,c):Er(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(k),Er(d,"TestPingServer: error",!1,c)})}function Er(a,c,d,y,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),y(d)}catch{}}function lw(){this.g=new ja}function uw(a,c,d){const y=d||"";try{lm(a,function(k,O){let U=k;h(k)&&(U=Oi(k)),c.push(y+O+"="+encodeURIComponent(U))})}catch(k){throw c.push(y+"type="+encodeURIComponent("_badmap")),k}}function Ya(a){this.l=a.Ub||null,this.j=a.eb||!1}x(Ya,Ys),Ya.prototype.g=function(){return new Xa(this.l,this.j)},Ya.prototype.i=function(a){return function(){return a}}({});function Xa(a,c){Xe.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Xa,Xe),t=Xa.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,ro(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,no(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ro(this)),this.g&&(this.readyState=3,ro(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function mm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?no(this):ro(this),this.readyState==3&&mm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,no(this))},t.Qa=function(a){this.g&&(this.response=a,no(this))},t.ga=function(){this.g&&no(this)};function no(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ro(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=c.next();return a.join(`\r
`)};function ro(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Xa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function gm(a){let c="";return V(a,function(d,y){c+=y,c+=":",c+=d,c+=`\r
`}),c}function Fc(a,c,d){e:{for(y in d){var y=!1;break e}y=!0}y||(d=gm(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Te(a,c,d))}function Oe(a){Xe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Oe,Xe);var cw=/^https?$/i,hw=["POST","PUT"];t=Oe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,d,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nc.g(),this.v=this.o?Ba(this.o):Ba(Nc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(O){ym(this,O);return}if(a=d||"",d=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var k in y)d.set(k,y[k]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const O of y.keys())d.set(O,y.get(O));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(d.keys()).find(O=>O.toLowerCase()=="content-type"),k=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(hw,c,void 0))||y||k||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,U]of d)this.g.setRequestHeader(O,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Em(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){ym(this,O)}};function ym(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,vm(a),Ja(a)}function vm(a){a.A||(a.A=!0,Ve(a,"complete"),Ve(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ve(this,"complete"),Ve(this,"abort"),Ja(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ja(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?_m(this):this.bb())},t.bb=function(){_m(this)};function _m(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Gn(a)!=4||a.Z()!=2)){if(a.u&&Gn(a)==4)mr(a.Ea,0,a);else if(Ve(a,"readystatechange"),Gn(a)==4){a.h=!1;try{const U=a.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var y;if(y=U===0){var k=String(a.D).match(um)[1]||null;!k&&l.self&&l.self.location&&(k=l.self.location.protocol.slice(0,-1)),y=!cw.test(k?k.toLowerCase():"")}d=y}if(d)Ve(a,"complete"),Ve(a,"success");else{a.m=6;try{var O=2<Gn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",vm(a)}}finally{Ja(a)}}}}function Ja(a,c){if(a.g){Em(a);const d=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||Ve(a,"ready");try{d.onreadystatechange=y}catch{}}}function Em(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Gn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),kc(c)}};function wm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function dw(a){const c={};a=(a.g&&2<=Gn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(_(a[y]))continue;var d=C(a[y]);const k=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const O=c[k]||[];c[k]=O,O.push(d)}v(c,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function io(a,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||c}function Tm(a){this.Aa=0,this.i=[],this.j=new Mn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=io("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=io("baseRetryDelayMs",5e3,a),this.cb=io("retryDelaySeedMs",1e4,a),this.Wa=io("forwardChannelMaxRetries",2,a),this.wa=io("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new rm(a&&a.concurrentRequestLimit),this.Da=new lw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tm.prototype,t.la=8,t.G=1,t.connect=function(a,c,d,y){Le(0),this.W=a,this.H=c||{},d&&y!==void 0&&(this.H.OSID=d,this.H.OAID=y),this.F=this.X,this.I=Nm(this,null,this.W),el(this)};function $c(a){if(Sm(a),a.G==3){var c=a.U++,d=Kn(a.I);if(Te(d,"SID",a.K),Te(d,"RID",c),Te(d,"TYPE","terminate"),so(a,d),c=new vr(a,a.j,c),c.L=2,c.v=Qa(Kn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Dm(c.j,null),c.g.ea(c.v)),c.F=Date.now(),qa(c)}km(a)}function Za(a){a.g&&(Bc(a),a.g.cancel(),a.g=null)}function Sm(a){Za(a),a.u&&(l.clearTimeout(a.u),a.u=null),tl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function el(a){if(!im(a.h)&&!a.s){a.s=!0;var c=a.Ga;Pe||Q(),z||(Pe(),z=!0),q.add(c,a),a.B=0}}function fw(a,c){return sm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Dn(g(a.Ga,a,c),xm(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const k=new vr(this,this.j,a);let O=this.o;if(this.S&&(O?(O=m(O),T(O,this.S)):O=this.S),this.m!==null||this.O||(k.H=O,O=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var y=this.i[d];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Am(this,k,c),d=Kn(this.I),Te(d,"RID",a),Te(d,"CVER",22),this.D&&Te(d,"X-HTTP-Session-Id",this.D),so(this,d),O&&(this.O?c="headers="+encodeURIComponent(String(gm(O)))+"&"+c:this.m&&Fc(d,this.m,O)),Lc(this.h,k),this.Ua&&Te(d,"TYPE","init"),this.P?(Te(d,"$req",c),Te(d,"SID","null"),k.T=!0,Mc(k,d,null)):Mc(k,d,c),this.G=2}}else this.G==3&&(a?Im(this,a):this.i.length==0||im(this.h)||Im(this))};function Im(a,c){var d;c?d=c.l:d=a.U++;const y=Kn(a.I);Te(y,"SID",a.K),Te(y,"RID",d),Te(y,"AID",a.T),so(a,y),a.m&&a.o&&Fc(y,a.m,a.o),d=new vr(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),c&&(a.i=c.D.concat(a.i)),c=Am(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Lc(a.h,d),Mc(d,y,c)}function so(a,c){a.H&&V(a.H,function(d,y){Te(c,y,d)}),a.l&&lm({},function(d,y){Te(c,y,d)})}function Am(a,c,d){d=Math.min(a.i.length,d);var y=a.l?g(a.l.Na,a.l,a):null;e:{var k=a.i;let O=-1;for(;;){const U=["count="+d];O==-1?0<d?(O=k[0].g,U.push("ofs="+O)):O=0:U.push("ofs="+O);let ve=!0;for(let lt=0;lt<d;lt++){let ue=k[lt].g;const Et=k[lt].map;if(ue-=O,0>ue)O=Math.max(0,k[lt].g-100),ve=!1;else try{uw(Et,U,"req"+ue+"_")}catch{y&&y(Et)}}if(ve){y=U.join("&");break e}}}return a=a.i.splice(0,d),c.D=a,y}function Cm(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;Pe||Q(),z||(Pe(),z=!0),q.add(c,a),a.v=0}}function jc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Dn(g(a.Fa,a),xm(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Rm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Dn(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Le(10),Za(this),Rm(this))};function Bc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Rm(a){a.g=new vr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=Kn(a.qa);Te(c,"RID","rpc"),Te(c,"SID",a.K),Te(c,"AID",a.T),Te(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&Te(c,"TO",a.ja),Te(c,"TYPE","xmlhttp"),so(a,c),a.m&&a.o&&Fc(c,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Qa(Kn(c)),d.m=null,d.P=!0,em(d,a)}t.Za=function(){this.C!=null&&(this.C=null,Za(this),jc(this),Le(19))};function tl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Pm(a,c){var d=null;if(a.g==c){tl(a),Bc(a),a.g=null;var y=2}else if(bc(a.h,c))d=c.D,om(a.h,c),y=1;else return;if(a.G!=0){if(c.o)if(y==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var k=a.B;y=_t(),Ve(y,new yr(y,d)),el(a)}else Cm(a);else if(k=c.s,k==3||k==0&&0<c.X||!(y==1&&fw(a,c)||y==2&&jc(a)))switch(d&&0<d.length&&(c=a.h,c.i=c.i.concat(d)),k){case 1:ei(a,5);break;case 4:ei(a,10);break;case 3:ei(a,6);break;default:ei(a,2)}}}function xm(a,c){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*c}function ei(a,c){if(a.j.info("Error code "+c),c==2){var d=g(a.fb,a),y=a.Xa;const k=!y;y=new Zr(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ka(y,"https"),Qa(y),k?ow(y.toString(),d):aw(y.toString(),d)}else Le(2);a.G=0,a.l&&a.l.sa(c),km(a),Sm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function km(a){if(a.G=0,a.ka=[],a.l){const c=am(a.h);(c.length!=0||a.i.length!=0)&&(N(a.ka,c),N(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Nm(a,c,d){var y=d instanceof Zr?Kn(d):new Zr(d);if(y.g!="")c&&(y.g=c+"."+y.g),Ga(y,y.s);else{var k=l.location;y=k.protocol,c=c?c+"."+k.hostname:k.hostname,k=+k.port;var O=new Zr(null);y&&Ka(O,y),c&&(O.g=c),k&&Ga(O,k),d&&(O.l=d),y=O}return d=a.D,c=a.ya,d&&c&&Te(y,d,c),Te(y,"VER",a.la),so(a,y),y}function Dm(a,c,d){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new Oe(new Ya({eb:d})):new Oe(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mm(){}t=Mm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nl(){}nl.prototype.g=function(a,c){return new Wt(a,c)};function Wt(a,c){Xe.call(this),this.g=new Tm(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!_(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!_(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Li(this)}x(Wt,Xe),Wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){$c(this.g)},Wt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Oi(a),a=d);c.i.push(new YE(c.Ya++,a)),c.G==3&&el(c)},Wt.prototype.N=function(){this.g.l=null,delete this.j,$c(this.g),delete this.g,Wt.aa.N.call(this)};function Vm(a){ot.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const d in c){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}x(Vm,ot);function Om(){at.call(this),this.status=1}x(Om,at);function Li(a){this.g=a}x(Li,Mm),Li.prototype.ua=function(){Ve(this.g,"a")},Li.prototype.ta=function(a){Ve(this.g,new Vm(a))},Li.prototype.sa=function(a){Ve(this.g,new Om)},Li.prototype.ra=function(){Ve(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,H_=function(){return new nl},z_=function(){return _t()},U_=vt,$d={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ha.NO_ERROR=0,Ha.TIMEOUT=8,Ha.HTTP_ERROR=6,Ul=Ha,Xp.COMPLETE="complete",B_=Xp,Ua.EventType=xe,xe.OPEN="a",xe.CLOSE="b",xe.ERROR="c",xe.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,wo=Ua,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,j_=Oe}).apply(typeof Il<"u"?Il:typeof self<"u"?self:typeof window<"u"?window:{});const sy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new M_("@firebase/firestore");function mo(){return Si.logLevel}function W(t,...e){if(Si.logLevel<=oe.DEBUG){const n=e.map(cp);Si.debug(`Firestore (${Bs}): ${t}`,...n)}}function cr(t,...e){if(Si.logLevel<=oe.ERROR){const n=e.map(cp);Si.error(`Firestore (${Bs}): ${t}`,...n)}}function Is(t,...e){if(Si.logLevel<=oe.WARN){const n=e.map(cp);Si.warn(`Firestore (${Bs}): ${t}`,...n)}}function cp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Bs}) INTERNAL ASSERTION FAILED: `+t;throw cr(e),new Error(e)}function me(t,e){t||Y()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends js{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class tC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nC{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new W_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new At(e)}}class rC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new rC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){me(this.o===void 0);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new sC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=aC(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function As(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Qe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Qe(0,0))}static max(){return new Z(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return la.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof la?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends la{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const lC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends la{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return lC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new K($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new K($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new K($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Re.fromString(e))}static fromName(e){return new G(Re.fromString(e).popFirst(5))}static empty(){return new G(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Re(e.slice()))}}function uC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new Hr(i,G.empty(),e)}function cC(t){return new Hr(t.readTime,t.key,-1)}class Hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hr(Z.min(),G.empty(),-1)}static max(){return new Hr(Z.max(),G.empty(),-1)}}function hC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==dC)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function pC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ca(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}hp.oe=-1;function ac(t){return t==null}function Ru(t){return t===0&&1/t==-1/0}function mC(t){return typeof t=="number"&&Number.isInteger(t)&&!Ru(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Us(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function K_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Al(this.root,e,this.comparator,!1)}getReverseIterator(){return new Al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Al(this.root,e,this.comparator,!0)}}class Al{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ct.RED,this.left=i??ct.EMPTY,this.right=s??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ct(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ct.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ay(this.data.getIterator())}getIteratorFrom(e){return new ay(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class ay{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Sn([])}unionWith(e){let n=new pt(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return As(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new G_("Invalid base64 string: "+s):s}}(e);return new yt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yt.EMPTY_BYTE_STRING=new yt("");const gC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(t){if(me(!!t),typeof t=="string"){let e=0;const n=gC.exec(t);if(me(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ii(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function fp(t){const e=t.mapValue.fields.__previous_value__;return dp(e)?fp(e):e}function ua(t){const e=Wr(t.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n,r,i,s,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class ca{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ca("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ca&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ai(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dp(t)?4:_C(t)?9007199254740991:vC(t)?10:11:Y()}function Hn(t,e){if(t===e)return!0;const n=Ai(t);if(n!==Ai(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ua(t).isEqual(ua(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Wr(i.timestampValue),l=Wr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ii(i.bytesValue).isEqual(Ii(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Fe(i.geoPointValue.latitude)===Fe(s.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Fe(i.integerValue)===Fe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Fe(i.doubleValue),l=Fe(s.doubleValue);return o===l?Ru(o)===Ru(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return As(t.arrayValue.values||[],e.arrayValue.values||[],Hn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(oy(o)!==oy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Hn(o[u],l[u])))return!1;return!0}(t,e);default:return Y()}}function ha(t,e){return(t.values||[]).find(n=>Hn(n,e))!==void 0}function Cs(t,e){if(t===e)return 0;const n=Ai(t),r=Ai(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Fe(s.integerValue||s.doubleValue),u=Fe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return ly(t.timestampValue,e.timestampValue);case 4:return ly(ua(t),ua(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Ii(s),u=Ii(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=ce(l[h],u[h]);if(f!==0)return f}return ce(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ce(Fe(s.latitude),Fe(o.latitude));return l!==0?l:ce(Fe(s.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return uy(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,h,f;const p=s.fields||{},g=o.fields||{},S=(l=p.value)===null||l===void 0?void 0:l.arrayValue,x=(u=g.value)===null||u===void 0?void 0:u.arrayValue,P=ce(((h=S==null?void 0:S.values)===null||h===void 0?void 0:h.length)||0,((f=x==null?void 0:x.values)===null||f===void 0?void 0:f.length)||0);return P!==0?P:uy(S,x)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Cl.mapValue&&o===Cl.mapValue)return 0;if(s===Cl.mapValue)return 1;if(o===Cl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=ce(u[p],f[p]);if(g!==0)return g;const S=Cs(l[u[p]],h[f[p]]);if(S!==0)return S}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Y()}}function ly(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Wr(t),r=Wr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function uy(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Cs(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function Rs(t){return jd(t)}function jd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ii(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=jd(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${jd(n.fields[o])}`;return i+"}"}(t.mapValue):Y()}function Bd(t){return!!t&&"integerValue"in t}function pp(t){return!!t&&"arrayValue"in t}function cy(t){return!!t&&"nullValue"in t}function hy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zl(t){return!!t&&"mapValue"in t}function vC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Oo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Us(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Oo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _C(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oo(n)}setAll(e){let n=dt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Oo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());zl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];zl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Us(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new un(Oo(this.value))}}function Q_(t){const e=[];return Us(t.fields,(n,r)=>{const i=new dt([n]);if(zl(r)){const s=Q_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Rt(e,0,Z.min(),Z.min(),Z.min(),un.empty(),0)}static newFoundDocument(e,n,r,i){return new Rt(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new Rt(e,2,n,Z.min(),Z.min(),un.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,Z.min(),Z.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n){this.position=e,this.inclusive=n}}function dy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Cs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function fy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n="asc"){this.field=e,this.dir=n}}function EC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{}class Ke extends Y_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new TC(e,n,r):n==="array-contains"?new AC(e,r):n==="in"?new CC(e,r):n==="not-in"?new RC(e,r):n==="array-contains-any"?new PC(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new SC(e,r):new IC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Cs(n,this.value)):n!==null&&Ai(this.value)===Ai(n)&&this.matchesComparison(Cs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends Y_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Wn(e,n)}matches(e){return X_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function X_(t){return t.op==="and"}function J_(t){return wC(t)&&X_(t)}function wC(t){for(const e of t.filters)if(e instanceof Wn)return!1;return!0}function Ud(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+Rs(t.value);if(J_(t))return t.filters.map(e=>Ud(e)).join(",");{const e=t.filters.map(n=>Ud(n)).join(",");return`${t.op}(${e})`}}function Z_(t,e){return t instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&Hn(r.value,i.value)}(t,e):t instanceof Wn?function(r,i){return i instanceof Wn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&Z_(o,i.filters[l]),!0):!1}(t,e):void Y()}function e1(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${Rs(n.value)}`}(t):t instanceof Wn?function(n){return n.op.toString()+" {"+n.getFilters().map(e1).join(" ,")+"}"}(t):"Filter"}class TC extends Ke{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class SC extends Ke{constructor(e,n){super(e,"in",n),this.keys=t1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class IC extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=t1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function t1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class AC extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pp(n)&&ha(n.arrayValue,this.value)}}class CC extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ha(this.value.arrayValue,n)}}class RC extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(ha(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ha(this.value.arrayValue,n)}}class PC extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ha(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function py(t,e=null,n=[],r=[],i=null,s=null,o=null){return new xC(t,e,n,r,i,s,o)}function mp(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ud(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ac(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Rs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Rs(r)).join(",")),e.ue=n}return e.ue}function gp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!EC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Z_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fy(t.startAt,e.startAt)&&fy(t.endAt,e.endAt)}function zd(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function kC(t,e,n,r,i,s,o,l){return new lc(t,e,n,r,i,s,o,l)}function yp(t){return new lc(t)}function my(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NC(t){return t.collectionGroup!==null}function bo(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new pt(dt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new xu(s,r))}),n.has(dt.keyField().canonicalString())||e.ce.push(new xu(dt.keyField(),r))}return e.ce}function Bn(t){const e=ee(t);return e.le||(e.le=DC(e,bo(t))),e.le}function DC(t,e){if(t.limitType==="F")return py(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new xu(i.field,s)});const n=t.endAt?new Pu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pu(t.startAt.position,t.startAt.inclusive):null;return py(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Hd(t,e,n){return new lc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function uc(t,e){return gp(Bn(t),Bn(e))&&t.limitType===e.limitType}function n1(t){return`${mp(Bn(t))}|lt:${t.limitType}`}function Ui(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>e1(i)).join(", ")}]`),ac(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Rs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Rs(i)).join(",")),`Target(${r})`}(Bn(t))}; limitType=${t.limitType})`}function cc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of bo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=dy(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,bo(r),i)||r.endAt&&!function(o,l,u){const h=dy(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,bo(r),i))}(t,e)}function MC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function r1(t){return(e,n)=>{let r=!1;for(const i of bo(t)){const s=VC(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function VC(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Cs(u,h):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return K_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new Me(G.comparator);function hr(){return OC}const i1=new Me(G.comparator);function To(...t){let e=i1;for(const n of t)e=e.insert(n.key,n);return e}function s1(t){let e=i1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ui(){return Lo()}function o1(){return Lo()}function Lo(){return new zs(t=>t.toString(),(t,e)=>t.isEqual(e))}const bC=new Me(G.comparator),LC=new pt(G.comparator);function ie(...t){let e=LC;for(const n of t)e=e.add(n);return e}const FC=new pt(ce);function $C(){return FC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ru(e)?"-0":e}}function a1(t){return{integerValue:""+t}}function jC(t,e){return mC(e)?a1(e):vp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(){this._=void 0}}function BC(t,e,n){return t instanceof ku?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dp(s)&&(s=fp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof da?u1(t,e):t instanceof fa?c1(t,e):function(i,s){const o=l1(i,s),l=gy(o)+gy(i.Pe);return Bd(o)&&Bd(i.Pe)?a1(l):vp(i.serializer,l)}(t,e)}function UC(t,e,n){return t instanceof da?u1(t,e):t instanceof fa?c1(t,e):n}function l1(t,e){return t instanceof Nu?function(r){return Bd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ku extends hc{}class da extends hc{constructor(e){super(),this.elements=e}}function u1(t,e){const n=h1(e);for(const r of t.elements)n.some(i=>Hn(i,r))||n.push(r);return{arrayValue:{values:n}}}class fa extends hc{constructor(e){super(),this.elements=e}}function c1(t,e){let n=h1(e);for(const r of t.elements)n=n.filter(i=>!Hn(i,r));return{arrayValue:{values:n}}}class Nu extends hc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function gy(t){return Fe(t.integerValue||t.doubleValue)}function h1(t){return pp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function zC(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof da&&i instanceof da||r instanceof fa&&i instanceof fa?As(r.elements,i.elements,Hn):r instanceof Nu&&i instanceof Nu?Hn(r.Pe,i.Pe):r instanceof ku&&i instanceof ku}(t.transform,e.transform)}class HC{constructor(e,n){this.version=e,this.transformResults=n}}class Un{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dc{}function d1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _p(t.key,Un.none()):new Ra(t.key,t.data,Un.none());{const n=t.data,r=un.empty();let i=new pt(dt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Pi(t.key,r,new Sn(i.toArray()),Un.none())}}function WC(t,e,n){t instanceof Ra?function(i,s,o){const l=i.value.clone(),u=vy(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Pi?function(i,s,o){if(!Hl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=vy(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(f1(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fo(t,e,n,r){return t instanceof Ra?function(s,o,l,u){if(!Hl(s.precondition,o))return l;const h=s.value.clone(),f=_y(s.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Pi?function(s,o,l,u){if(!Hl(s.precondition,o))return l;const h=_y(s.fieldTransforms,u,o),f=o.data;return f.setAll(f1(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return Hl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function qC(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=l1(r.transform,i||null);s!=null&&(n===null&&(n=un.empty()),n.set(r.field,s))}return n||null}function yy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&As(r,i,(s,o)=>zC(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ra extends dc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Pi extends dc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function f1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function vy(t,e,n){const r=new Map;me(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,UC(o,l,n[i]))}return r}function _y(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,BC(s,o,e))}return r}class _p extends dc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KC extends dc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&WC(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=o1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=d1(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&As(this.mutations,e.mutations,(n,r)=>yy(n,r))&&As(this.baseMutations,e.baseMutations,(n,r)=>yy(n,r))}}class Ep{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){me(e.mutations.length===r.length);let i=function(){return bC}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ep(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,se;function XC(t){switch(t){default:return Y();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function p1(t){if(t===void 0)return cr("GRPC error has no .code"),$.UNKNOWN;switch(t){case Ue.OK:return $.OK;case Ue.CANCELLED:return $.CANCELLED;case Ue.UNKNOWN:return $.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return $.INTERNAL;case Ue.UNAVAILABLE:return $.UNAVAILABLE;case Ue.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ue.NOT_FOUND:return $.NOT_FOUND;case Ue.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ue.ABORTED:return $.ABORTED;case Ue.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ue.DATA_LOSS:return $.DATA_LOSS;default:return Y()}}(se=Ue||(Ue={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=new fi([4294967295,4294967295],0);function Ey(t){const e=JC().encode(t),n=new $_;return n.update(e),new Uint8Array(n.digest())}function wy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fi([n,r],0),new fi([i,s],0)]}class wp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new So(`Invalid padding: ${n}`);if(r<0)throw new So(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new So(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new So(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=fi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(fi.fromNumber(r)));return i.compare(ZC)===1&&(i=new fi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ey(e),[r,i]=wy(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new wp(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Ey(e),[r,i]=wy(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class So extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Pa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fc(Z.min(),i,new Me(ce),hr(),ie())}}class Pa{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Pa(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class m1{constructor(e,n){this.targetId=e,this.me=n}}class g1{constructor(e,n,r=yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Ty{constructor(){this.fe=0,this.ge=Iy(),this.pe=yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new Pa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Iy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class eR{constructor(e){this.Le=e,this.Be=new Map,this.ke=hr(),this.qe=Sy(),this.Qe=new Me(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(zd(s))if(r===0){const o=new G(s.path);this.Ue(n,o,Rt.newNoDocument(o,Z.min()))}else me(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Ii(r).toUint8Array()}catch(u){if(u instanceof G_)return Is("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new wp(o,i,s)}catch(u){return Is(u instanceof So?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&zd(l.target)){const u=new G(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Rt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ie();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new fc(e,n,this.Qe,this.ke,r);return this.ke=hr(),this.qe=Sy(),this.Qe=new Me(ce),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ty,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new pt(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ty),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Sy(){return new Me(G.comparator)}function Iy(){return new Me(G.comparator)}const tR={asc:"ASCENDING",desc:"DESCENDING"},nR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rR={and:"AND",or:"OR"};class iR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wd(t,e){return t.useProto3Json||ac(e)?e:{value:e}}function Du(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function y1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sR(t,e){return Du(t,e.toTimestamp())}function zn(t){return me(!!t),Z.fromTimestamp(function(n){const r=Wr(n);return new Qe(r.seconds,r.nanos)}(t))}function Tp(t,e){return qd(t,e).canonicalString()}function qd(t,e){const n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function v1(t){const e=Re.fromString(t);return me(S1(e)),e}function Kd(t,e){return Tp(t.databaseId,e.path)}function Ph(t,e){const n=v1(e);if(n.get(1)!==t.databaseId.projectId)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(E1(n))}function _1(t,e){return Tp(t.databaseId,e)}function oR(t){const e=v1(t);return e.length===4?Re.emptyPath():E1(e)}function Gd(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function E1(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ay(t,e,n){return{name:Kd(t,e),fields:n.value.mapValue.fields}}function aR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(me(f===void 0||typeof f=="string"),yt.fromBase64String(f||"")):(me(f===void 0||f instanceof Buffer||f instanceof Uint8Array),yt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?$.UNKNOWN:p1(h.code);return new K(f,h.message||"")}(o);n=new g1(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ph(t,r.document.name),s=zn(r.document.updateTime),o=r.document.createTime?zn(r.document.createTime):Z.min(),l=new un({mapValue:{fields:r.document.fields}}),u=Rt.newFoundDocument(i,s,o,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Wl(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ph(t,r.document),s=r.readTime?zn(r.readTime):Z.min(),o=Rt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Wl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ph(t,r.document),s=r.removedTargetIds||[];n=new Wl([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new YC(i,s),l=r.targetId;n=new m1(l,o)}}return n}function lR(t,e){let n;if(e instanceof Ra)n={update:Ay(t,e.key,e.value)};else if(e instanceof _p)n={delete:Kd(t,e.key)};else if(e instanceof Pi)n={update:Ay(t,e.key,e.data),updateMask:yR(e.fieldMask)};else{if(!(e instanceof KC))return Y();n={verify:Kd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof ku)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof da)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Nu)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:sR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(t,e.precondition)),n}function uR(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?zn(i.updateTime):zn(s);return o.isEqual(Z.min())&&(o=zn(s)),new HC(o,i.transformResults||[])}(n,e))):[]}function cR(t,e){return{documents:[_1(t,e.path)]}}function hR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_1(t,i);const s=function(h){if(h.length!==0)return T1(Wn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(f=>function(g){return{field:zi(g.field),direction:pR(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Wd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function dR(t){let e=oR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){me(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const g=w1(p);return g instanceof Wn&&J_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(x){return new xu(Hi(x.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,ac(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,S=p.values||[];return new Pu(S,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,S=p.values||[];return new Pu(S,g)}(n.endAt)),kC(e,i,o,s,l,"F",u,h)}function fR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function w1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hi(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hi(n.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Hi(n.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Hi(n.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(Hi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Wn.create(n.compositeFilter.filters.map(r=>w1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function pR(t){return tR[t]}function mR(t){return nR[t]}function gR(t){return rR[t]}function zi(t){return{fieldPath:t.canonicalString()}}function Hi(t){return dt.fromServerFormat(t.fieldPath)}function T1(t){return t instanceof Ke?function(n){if(n.op==="=="){if(hy(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NAN"}};if(cy(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hy(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NOT_NAN"}};if(cy(n.value))return{unaryFilter:{field:zi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zi(n.field),op:mR(n.op),value:n.value}}}(t):t instanceof Wn?function(n){const r=n.getFilters().map(i=>T1(i));return r.length===1?r[0]:{compositeFilter:{op:gR(n.op),filters:r}}}(t):Y()}function yR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function S1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,r,i,s=Z.min(),o=Z.min(),l=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.ct=e}}function _R(t){const e=dR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this.un=new wR}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Hr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Hr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class wR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pt(Re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pt(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ps(0)}static kn(){return new Ps(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.changes=new zs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fo(r.mutation,i,Sn.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const i=ui();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=To();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ui();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=hr();const o=Lo(),l=function(){return Lo()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof Pi)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Fo(f.mutation,h,f.mutation.getFieldMask(),Qe.now())):o.set(h.key,Sn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var p;return l.set(h,new SR(f,(p=o.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Lo();let i=new Me((o,l)=>o-l),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||Sn.empty();f=l.applyToLocalView(h,f),r.set(u,f);const p=(i.get(l.batchId)||ie()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,p=o1();f.forEach(g=>{if(!s.has(g)){const S=d1(n.get(g),r.get(g));S!==null&&p.set(g,S),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(ui());let l=-1,u=s;return o.next(h=>F.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ie())).next(f=>({batchId:l,changes:s1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=To();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=To();return this.indexManager.getCollectionParents(e,s).next(l=>F.forEach(l,u=>{const h=function(p,g){return new lc(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Rt.newInvalidDocument(f)))});let l=To();return o.forEach((u,h)=>{const f=s.get(u);f!==void 0&&Fo(f.mutation,h,Sn.empty(),Qe.now()),cc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:zn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:_R(i.bundledQuery),readTime:zn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.overlays=new Me(G.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ui();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=ui(),s=n.length+1,o=new G(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Me((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=ui(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=ui(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return F.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new QC(n,r));let s=this.Ir.get(n);s===void 0&&(s=ie(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this.Tr=new pt(Je.Er),this.dr=new pt(Je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Je(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new Re([])),r=new Je(n,e),i=new Je(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new Re([])),r=new Je(n,e),i=new Je(n,e+1);let s=ie();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Je(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new pt(Je.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new GC(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Je(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),i=new Je(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(ce);return n.forEach(i=>{const s=new Je(i,0),o=new Je(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new Je(new G(s),0);let l=new pt(ce);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new Je(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Je(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.Mr=e,this.docs=function(){return new Me(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=hr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hr();const o=n.path,l=new G(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||hC(cC(f),r)<=0||(i.has(f.key)||cc(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Y()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kR(this)}getSize(e){return F.resolve(this.size)}}class kR extends TR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.persistence=e,this.Nr=new zs(n=>mp(n),gp),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Sp,this.targetCount=0,this.kr=Ps.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ps(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new hp(0),this.Kr=!1,this.Kr=!0,this.$r=new RR,this.referenceDelegate=e(this),this.Ur=new NR(this),this.indexManager=new ER,this.remoteDocumentCache=function(i){return new xR(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new vR(n),this.Gr=new AR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new PR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new MR(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class MR extends fC{constructor(e){super(),this.currentSequenceNumber=e}}class Ip{constructor(e){this.persistence=e,this.Jr=new Sp,this.Yr=null}static Zr(e){return new Ip(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=G.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ie(),i=ie();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ap(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return FI()?8:pC(bI())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new VR;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(mo()<=oe.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ui(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(mo()<=oe.DEBUG&&W("QueryEngine","Query:",Ui(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(mo()<=oe.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ui(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(n))):F.resolve())}Yi(e,n){if(my(n))return F.resolve(null);let r=Bn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Hd(n,null,"F"),r=Bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ie(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Hd(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return my(n)||i.isEqual(Z.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?F.resolve(null):(mo()<=oe.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ui(n)),this.rs(e,o,n,uC(i,-1)).next(l=>l))})}ts(e,n){let r=new pt(r1(e));return n.forEach((i,s)=>{cc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return mo()<=oe.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ui(n)),this.Ji.getDocumentsMatchingQuery(e,n,Hr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Me(ce),this._s=new zs(s=>mp(s),gp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function LR(t,e,n,r){return new bR(t,e,n,r)}async function I1(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ie();for(const h of i){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of s){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function FR(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const p=h.batch,g=p.keys();let S=F.resolve();return g.forEach(x=>{S=S.next(()=>f.getEntry(u,x)).next(P=>{const N=h.docVersions.get(x);me(N!==null),P.version.compareTo(N)<0&&(p.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),f.addEntry(P)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ie();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function A1(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function $R(t,e){const n=ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;l.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,p)));let S=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?S=S.withResumeToken(yt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,r)),i=i.insert(p,S),function(P,N,E){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,S,f)&&l.push(n.Ur.updateTargetData(s,S))});let u=hr(),h=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(jR(s,o,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(Z.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.os=i,s))}function jR(t,e,n){let r=ie(),i=ie();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=hr();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function BR(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function UR(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new kr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Qd(t,e,n){const r=ee(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ca(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Cy(t,e,n){const r=ee(t);let i=Z.min(),s=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const p=ee(u),g=p._s.get(f);return g!==void 0?F.resolve(p.os.get(g)):p.Ur.getTargetData(h,f)}(r,o,Bn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Z.min(),n?s:ie())).next(l=>(zR(r,MC(e),l),{documents:l,Ts:s})))}function zR(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Ry{constructor(){this.activeTargetIds=$C()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HR{constructor(){this.so=new Ry,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ry,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl=null;function xh(){return Rl===null?Rl=function(){return 268435456+Math.round(2147483648*Math.random())}():Rl++,"0x"+Rl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class GR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=xh(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,u,h,i).then(f=>(W("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Is("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=qR[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=xh();return new Promise((o,l)=>{const u=new j_;u.setWithCredentials(!0),u.listenOnce(B_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ul.NO_ERROR:const f=u.getResponseJson();W(It,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ul.TIMEOUT:W(It,`RPC '${e}' ${s} timed out`),l(new K($.DEADLINE_EXCEEDED,"Request time out"));break;case Ul.HTTP_ERROR:const p=u.getStatus();if(W(It,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const S=g==null?void 0:g.error;if(S&&S.status&&S.message){const x=function(N){const E=N.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(E)>=0?E:$.UNKNOWN}(S.status);l(new K(x,S.message))}else l(new K($.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new K($.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{W(It,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);W(It,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=xh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=H_(),l=z_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");W(It,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,S=!1;const x=new KR({Io:N=>{S?W(It,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(W(It,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),W(It,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),P=(N,E,_)=>{N.listen(E,I=>{try{_(I)}catch(D){setTimeout(()=>{throw D},0)}})};return P(p,wo.EventType.OPEN,()=>{S||(W(It,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),P(p,wo.EventType.CLOSE,()=>{S||(S=!0,W(It,`RPC '${e}' stream ${i} transport closed`),x.So())}),P(p,wo.EventType.ERROR,N=>{S||(S=!0,Is(It,`RPC '${e}' stream ${i} transport errored:`,N),x.So(new K($.UNAVAILABLE,"The operation could not be completed")))}),P(p,wo.EventType.MESSAGE,N=>{var E;if(!S){const _=N.data[0];me(!!_);const I=_,D=I.error||((E=I[0])===null||E===void 0?void 0:E.error);if(D){W(It,`RPC '${e}' stream ${i} received error:`,D);const L=D.status;let V=function(w){const T=Ue[w];if(T!==void 0)return p1(T)}(L),v=D.message;V===void 0&&(V=$.INTERNAL,v="Unknown error status: "+L+" with message "+D.message),S=!0,x.So(new K(V,v)),p.close()}else W(It,`RPC '${e}' stream ${i} received:`,_),x.bo(_)}}),P(l,U_.STAT_EVENT,N=>{N.stat===$d.PROXY?W(It,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===$d.NOPROXY&&W(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function kh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){return new iR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new C1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new K($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QR extends R1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=aR(this.serializer,e),r=function(s){if(!("targetChange"in s))return Z.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?zn(o.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Gd(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=zd(u)?{documents:cR(s,u)}:{query:hR(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=y1(s,o.resumeToken);const h=Wd(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Z.min())>0){l.readTime=Du(s,o.snapshotVersion.toTimestamp());const h=Wd(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=fR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Gd(this.serializer),n.removeTarget=e,this.a_(n)}}class YR extends R1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=uR(e.writeResults,e.commitTime),r=zn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Gd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,qd(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K($.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,qd(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class JR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cr(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{xi(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=ee(u);h.L_.add(4),await xa(h),h.q_.set("Unknown"),h.L_.delete(4),await mc(h)}(this))})}),this.q_=new JR(r,i)}}async function mc(t){if(xi(t))for(const e of t.B_)await e(!0)}async function xa(t){for(const e of t.B_)await e(!1)}function P1(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xp(n)?Pp(n):Hs(n).r_()&&Rp(n,e))}function Cp(t,e){const n=ee(t),r=Hs(n);n.N_.delete(e),r.r_()&&x1(n,e),n.N_.size===0&&(r.r_()?r.o_():xi(n)&&n.q_.set("Unknown"))}function Rp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hs(t).A_(e)}function x1(t,e){t.Q_.xe(e),Hs(t).R_(e)}function Pp(t){t.Q_=new eR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Hs(t).start(),t.q_.v_()}function xp(t){return xi(t)&&!Hs(t).n_()&&t.N_.size>0}function xi(t){return ee(t).L_.size===0}function k1(t){t.Q_=void 0}async function eP(t){t.q_.set("Online")}async function tP(t){t.N_.forEach((e,n)=>{Rp(t,e)})}async function nP(t,e){k1(t),xp(t)?(t.q_.M_(e),Pp(t)):t.q_.set("Unknown")}async function rP(t,e,n){if(t.q_.set("Online"),e instanceof g1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mu(t,r)}else if(e instanceof Wl?t.Q_.Ke(e):e instanceof m1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const r=await A1(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(h);f&&s.N_.set(h,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(yt.EMPTY_BYTE_STRING,f.snapshotVersion)),x1(s,u);const p=new kr(f.target,u,h,f.sequenceNumber);Rp(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Mu(t,r)}}async function Mu(t,e,n){if(!Ca(e))throw e;t.L_.add(1),await xa(t),t.q_.set("Offline"),n||(n=()=>A1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await mc(t)})}function N1(t,e){return e().catch(n=>Mu(t,n,e))}async function gc(t){const e=ee(t),n=qr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;iP(e);)try{const i=await BR(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,sP(e,i)}catch(i){await Mu(e,i)}D1(e)&&M1(e)}function iP(t){return xi(t)&&t.O_.length<10}function sP(t,e){t.O_.push(e);const n=qr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function D1(t){return xi(t)&&!qr(t).n_()&&t.O_.length>0}function M1(t){qr(t).start()}async function oP(t){qr(t).p_()}async function aP(t){const e=qr(t);for(const n of t.O_)e.m_(n.mutations)}async function lP(t,e,n){const r=t.O_.shift(),i=Ep.from(r,e,n);await N1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await gc(t)}async function uP(t,e){e&&qr(t).V_&&await async function(r,i){if(function(o){return XC(o)&&o!==$.ABORTED}(i.code)){const s=r.O_.shift();qr(r).s_(),await N1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await gc(r)}}(t,e),D1(t)&&M1(t)}async function xy(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=xi(n);n.L_.add(3),await xa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await mc(n)}async function cP(t,e){const n=ee(t);e?(n.L_.delete(2),await mc(n)):e||(n.L_.add(2),await xa(n),n.q_.set("Unknown"))}function Hs(t){return t.K_||(t.K_=function(n,r,i){const s=ee(n);return s.w_(),new QR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:eP.bind(null,t),Ro:tP.bind(null,t),mo:nP.bind(null,t),d_:rP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xp(t)?Pp(t):t.q_.set("Unknown")):(await t.K_.stop(),k1(t))})),t.K_}function qr(t){return t.U_||(t.U_=function(n,r,i){const s=ee(n);return s.w_(),new YR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oP.bind(null,t),mo:uP.bind(null,t),f_:aP.bind(null,t),g_:lP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await gc(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new kp(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Np(t,e){if(cr("AsyncQueue",`${e}: ${t}`),Ca(t))return new K($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=To(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new fs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this.W_=new Me(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class xs{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new xs(e,n,fs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class dP{constructor(){this.queries=Ny(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ee(n),s=i.queries;i.queries=Ny(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new K($.ABORTED,"Firestore shutting down"))}}function Ny(){return new zs(t=>n1(t),uc)}async function fP(t,e){const n=ee(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new hP,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Np(o,`Initialization of query '${Ui(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Dp(n)}async function pP(t,e){const n=ee(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function mP(t,e){const n=ee(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&Dp(n)}function gP(t,e,n){const r=ee(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Dp(t){t.Y_.forEach(e=>{e.next()})}var Yd,Dy;(Dy=Yd||(Yd={})).ea="default",Dy.Cache="cache";class yP{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new xs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=xs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Yd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.key=e}}class O1{constructor(e){this.key=e}}class vP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=r1(e),this.Ra=new fs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new ky,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),S=cc(this.query,p)?p:null,x=!!g&&this.mutatedKeys.has(g.key),P=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let N=!1;g&&S?g.data.isEqual(S.data)?x!==P&&(r.track({type:3,doc:S}),N=!0):this.ga(g,S)||(r.track({type:2,doc:S}),N=!0,(u&&this.Aa(S,u)>0||h&&this.Aa(S,h)<0)&&(l=!0)):!g&&S?(r.track({type:0,doc:S}),N=!0):g&&!S&&(r.track({type:1,doc:g}),N=!0,(u||h)&&(l=!0)),N&&(S?(o=o.add(S),s=P?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(S,x){const P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return P(S)-P(x)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new xs(this.query,e.Ra,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ky,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new O1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new V1(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return xs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class _P{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class EP{constructor(e){this.key=e,this.va=!1}}class wP{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new zs(l=>n1(l),uc),this.Ma=new Map,this.xa=new Set,this.Oa=new Me(G.comparator),this.Na=new Map,this.La=new Sp,this.Ba={},this.ka=new Map,this.qa=Ps.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function TP(t,e,n=!0){const r=B1(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await b1(r,e,n,!0),i}async function SP(t,e){const n=B1(t);await b1(n,e,!0,!1)}async function b1(t,e,n,r){const i=await UR(t.localStore,Bn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await IP(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&P1(t.remoteStore,i),l}async function IP(t,e,n,r,i){t.Ka=(p,g,S)=>async function(P,N,E,_){let I=N.view.ma(E);I.ns&&(I=await Cy(P.localStore,N.query,!1).then(({documents:v})=>N.view.ma(v,I)));const D=_&&_.targetChanges.get(N.targetId),L=_&&_.targetMismatches.get(N.targetId)!=null,V=N.view.applyChanges(I,P.isPrimaryClient,D,L);return Vy(P,N.targetId,V.wa),V.snapshot}(t,p,g,S);const s=await Cy(t.localStore,e,!0),o=new vP(e,s.Ts),l=o.ma(s.documents),u=Pa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);Vy(t,n,h.wa);const f=new _P(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function AP(t,e,n){const r=ee(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!uc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Qd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Cp(r.remoteStore,i.targetId),Xd(r,i.targetId)}).catch(Aa)):(Xd(r,i.targetId),await Qd(r.localStore,i.targetId,!0))}async function CP(t,e){const n=ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cp(n.remoteStore,r.targetId))}async function RP(t,e,n){const r=VP(t);try{const i=await function(o,l){const u=ee(o),h=Qe.now(),f=l.reduce((S,x)=>S.add(x.key),ie());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let x=hr(),P=ie();return u.cs.getEntries(S,f).next(N=>{x=N,x.forEach((E,_)=>{_.isValidDocument()||(P=P.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,x)).next(N=>{p=N;const E=[];for(const _ of l){const I=qC(_,p.get(_.key).overlayedDocument);I!=null&&E.push(new Pi(_.key,I,Q_(I.value.mapValue),Un.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,E,l)}).next(N=>{g=N;const E=N.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(S,N.batchId,E)})}).then(()=>({batchId:g.batchId,changes:s1(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Me(ce)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await ka(r,i.changes),await gc(r.remoteStore)}catch(i){const s=Np(i,"Failed to persist write");n.reject(s)}}async function L1(t,e){const n=ee(t);try{const r=await $R(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?me(o.va):i.removedDocuments.size>0&&(me(o.va),o.va=!1))}),await ka(n,r,e)}catch(r){await Aa(r)}}function My(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ee(o);u.onlineState=l;let h=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(l)&&(h=!0)}),h&&Dp(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function PP(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Me(G.comparator);o=o.insert(s,Rt.newNoDocument(s,Z.min()));const l=ie().add(s),u=new fc(Z.min(),new Map,new Me(ce),o,l);await L1(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Mp(r)}else await Qd(r.localStore,e,!1).then(()=>Xd(r,e,n)).catch(Aa)}async function xP(t,e){const n=ee(t),r=e.batch.batchId;try{const i=await FR(n.localStore,e);$1(n,r,null),F1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ka(n,i)}catch(i){await Aa(i)}}async function kP(t,e,n){const r=ee(t);try{const i=await function(o,l){const u=ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(me(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);$1(r,e,n),F1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ka(r,i)}catch(i){await Aa(i)}}function F1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function $1(t,e,n){const r=ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Xd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||j1(t,r)})}function j1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Cp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Mp(t))}function Vy(t,e,n){for(const r of n)r instanceof V1?(t.La.addReference(r.key,e),NP(t,r)):r instanceof O1?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||j1(t,r.key)):Y()}function NP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),Mp(t))}function Mp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(Re.fromString(e)),r=t.qa.next();t.Na.set(r,new EP(n)),t.Oa=t.Oa.insert(n,r),P1(t.remoteStore,new kr(Bn(yp(n.path)),r,"TargetPurposeLimboResolution",hp.oe))}}async function ka(t,e,n){const r=ee(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Ap.Wi(u.targetId,h);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,h){const f=ee(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(h,g=>F.forEach(g.$i,S=>f.persistence.referenceDelegate.addReference(p,g.targetId,S)).next(()=>F.forEach(g.Ui,S=>f.persistence.referenceDelegate.removeReference(p,g.targetId,S)))))}catch(p){if(!Ca(p))throw p;W("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const S=f.os.get(g),x=S.snapshotVersion,P=S.withLastLimboFreeSnapshotVersion(x);f.os=f.os.insert(g,P)}}}(r.localStore,s))}async function DP(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await I1(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new K($.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ka(n,r.hs)}}function MP(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function B1(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=L1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PP.bind(null,e),e.Ca.d_=mP.bind(null,e.eventManager),e.Ca.$a=gP.bind(null,e.eventManager),e}function VP(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kP.bind(null,e),e}class Vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return LR(this.persistence,new OR,e.initialUser,this.serializer)}Ga(e){return new DR(Ip.Zr,this.serializer)}Wa(e){return new HR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vu.provider={build:()=>new Vu};class Jd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>My(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DP.bind(null,this.syncEngine),await cP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dP}()}createDatastore(e){const n=pc(e.databaseInfo.databaseId),r=function(s){return new GR(s)}(e.databaseInfo);return function(s,o,l,u){return new XR(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new ZR(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>My(this.syncEngine,n,0),function(){return Py.D()?new Py:new WR}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,f){const p=new wP(i,s,o,l,u,h);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ee(i);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await xa(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jd.provider={build:()=>new Jd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=At.UNAUTHENTICATED,this.clientId=q_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Np(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Nh(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await I1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Oy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await LP(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>xy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>xy(e.remoteStore,i)),t._onlineComponents=e}async function LP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await Nh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Is("Error using user provided cache. Falling back to memory cache: "+n),await Nh(t,new Vu)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await Nh(t,new Vu);return t._offlineComponents}async function U1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Oy(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Oy(t,new Jd))),t._onlineComponents}function FP(t){return U1(t).then(e=>e.syncEngine)}async function by(t){const e=await U1(t),n=e.eventManager;return n.onListen=TP.bind(null,e.syncEngine),n.onUnlisten=AP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=SP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CP.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t,e,n){if(!n)throw new K($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $P(t,e,n,r){if(e===!0&&r===!0)throw new K($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Fy(t){if(!G.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $y(t){if(G.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function mi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vp(t);throw new K($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$P("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=z1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eC;switch(r.type){case"firstParty":return new iC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ly.get(n);r&&(W("ComponentProvider","Removing Datastore"),Ly.delete(n),r.terminate())}(this),Promise.resolve()}}function jP(t,e,n,r={}){var i;const s=(t=mi(t,yc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Is("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=At.MOCK_USER;else{l=OI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new K($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new At(h)}t._authCredentials=new tC(new W_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vc(this.firestore,e,this._query)}}class Yt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}}class Br extends vc{constructor(e,n,r){super(e,n,yp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new G(e))}withConverter(e){return new Br(this.firestore,e,this._path)}}function W1(t,e,...n){if(t=Ss(t),H1("collection","path",e),t instanceof yc){const r=Re.fromString(e,...n);return $y(r),new Br(t,null,r)}{if(!(t instanceof Yt||t instanceof Br))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return $y(r),new Br(t.firestore,null,r)}}function rr(t,e,...n){if(t=Ss(t),arguments.length===1&&(e=q_.newId()),H1("doc","path",e),t instanceof yc){const r=Re.fromString(e,...n);return Fy(r),new Yt(t,null,new G(r))}{if(!(t instanceof Yt||t instanceof Br))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return Fy(r),new Yt(t.firestore,t instanceof Br?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new C1(this,"async_queue_retry"),this.Vu=()=>{const r=kh();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=kh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=kh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new pi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ca(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw cr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=kp.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Uy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class pa extends yc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new By,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new By(e),this._firestoreClient=void 0,await e}}}function BP(t,e){const n=typeof t=="object"?t:HA(),r=typeof t=="string"?t:"(default)",i=jA(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=MI("firestore");s&&jP(i,...s)}return i}function q1(t){if(t._terminated)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UP(t),t._firestoreClient}function UP(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,f){return new yC(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,z1(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new bP(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ks(yt.fromBase64String(e))}catch(n){throw new K($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ks(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=/^__.*__$/;class HP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ra(e,this.data,n,this.fieldTransforms)}}function G1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Fp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Fp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ou(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(G1(this.Cu)&&zP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class WP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pc(e)}Qu(e,n,r,i=!1){return new Fp({Cu:e,methodName:n,qu:r,path:dt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qP(t){const e=t._freezeSettings(),n=pc(t._databaseId);return new WP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function KP(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);J1("Data must be an object, but it was:",o,r);const l=Y1(r,o);let u,h;if(s.merge)u=new Sn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const g=GP(e,p,n);if(!o.contains(g))throw new K($.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);YP(f,g)||f.push(g)}u=new Sn(f),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new HP(new un(l),u,h)}function Q1(t,e){if(X1(t=Ss(t)))return J1("Unsupported field value:",e,t),Y1(t,e);if(t instanceof K1)return function(r,i){if(!G1(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Q1(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ss(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Qe.fromDate(r);return{timestampValue:Du(i.serializer,s)}}if(r instanceof Qe){const s=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Du(i.serializer,s)}}if(r instanceof bp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ks)return{bytesValue:y1(i.serializer,r._byteString)};if(r instanceof Yt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Tp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Lp)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return vp(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Vp(r)}`)}(t,e)}function Y1(t,e){const n={};return K_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Us(t,(r,i)=>{const s=Q1(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function X1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof bp||t instanceof ks||t instanceof Yt||t instanceof K1||t instanceof Lp)}function J1(t,e,n){if(!X1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Vp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function GP(t,e,n){if((e=Ss(e))instanceof Op)return e._internalPath;if(typeof e=="string")return Z1(t,e);throw Ou("Field path arguments must be of type string or ",t,!1,void 0,n)}const QP=new RegExp("[~\\*/\\[\\]]");function Z1(t,e,n){if(e.search(QP)>=0)throw Ou(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Op(...e.split("."))._internalPath}catch{throw Ou(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ou(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new K($.INVALID_ARGUMENT,l+t+u)}function YP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XP extends eE{data(){return super.data()}}function tE(t,e){return typeof e=="string"?Z1(t,e):e instanceof Op?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZP{convertValue(e,n="none"){switch(Ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Us(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Fe(o.doubleValue));return new Lp(s)}convertGeoPoint(e){return new bp(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=fp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ua(e));default:return null}}convertTimestamp(e){const n=Wr(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);me(S1(r));const i=new ca(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||cr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nE extends eE{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ql(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(tE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ql extends nE{data(e={}){return super.data(e)}}class tx{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Io(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ql(this._firestore,this._userDataWriter,r.key,r,new Io(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new ql(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Io(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new ql(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Io(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:nx(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nx(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}class rE extends ZP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}function ps(t,e,n){t=mi(t,Yt);const r=mi(t.firestore,pa),i=ex(t.converter,e,n);return iE(r,[KP(qP(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Un.none())])}function rx(t){return iE(mi(t.firestore,pa),[new _p(t._key,Un.none())])}function _c(t,...e){var n,r,i;t=Ss(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Uy(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Uy(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,h,f;if(t instanceof Yt)h=mi(t.firestore,pa),f=yp(t._key.path),u={next:p=>{e[o]&&e[o](ix(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=mi(t,vc);h=mi(p.firestore,pa),f=p._query;const g=new rE(h);u={next:S=>{e[o]&&e[o](new tx(h,g,p,S))},error:e[o+1],complete:e[o+2]},JP(t._query)}return function(g,S,x,P){const N=new OP(P),E=new yP(S,N,x);return g.asyncQueue.enqueueAndForget(async()=>fP(await by(g),E)),()=>{N.Za(),g.asyncQueue.enqueueAndForget(async()=>pP(await by(g),E))}}(q1(h),f,l,u)}function iE(t,e){return function(r,i){const s=new pi;return r.asyncQueue.enqueueAndForget(async()=>RP(await FP(r),i,s)),s.promise}(q1(t),e)}function ix(t,e,n){const r=n.docs.get(e._key),i=new rE(t);return new nE(t,i,e._key,r,new Io(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Bs=i})(zA),Cu(new oa("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new pa(new nC(r.getProvider("auth-internal")),new oC(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new K($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ca(h.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),ds(sy,"4.7.3",e),ds(sy,"4.7.3","esm2017")})();var sx="firebase",ox="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ds(sx,ox,"app");const ax={apiKey:"AIzaSyAffBMfX9NHVgSg_w4a8ZKa55vmp0eHb2w",authDomain:"dd5tools.firebaseapp.com",databaseURL:"https://dd5tools.firebaseio.com",projectId:"dd5tools",storageBucket:"dd5tools.appspot.com",messagingSenderId:"1096592466642",appId:"1:1096592466642:web:f03ea81d304964f1f1030b"},lx=b_(ax),Tn=BP(lx),ux=t=>{const[e,n]=b.useState(0),[r,i]=b.useState(Ot.empty);b.useEffect(()=>{_c(rr(Tn,"monster","monster"),R=>{R.data()!=null&&i(R.data())})},[]);const{cr:s,num:o,exp:l}=b.useMemo(()=>Eo(Object.keys(Wg).map(R=>{const A=Wg[R],we=Math.floor(t/A);return{cr:R,num:we,exp:A}}).filter(({num:R})=>1<=R&&R<=15)),[e]),u=new Set([gt.COMMON]);Math.random()<.5&&u.add(gt.UNCOMMON);const h=b.useMemo(()=>Eo(Sh.filter(R=>R.templateType===rt.TYPE&&u.has(R.rarity))),[e]),f=b.useMemo(()=>Eo(Sh.filter(R=>R.templateType===rt.RACE&&R.monsterType===h.monsterType&&u.has(R.rarity))),[e]),p=b.useMemo(()=>Eo(Sh.filter(R=>R.templateType===rt.CLASS&&u.has(R.rarity))),[e]);console.log(`monsterType: ${h.name}`),console.log(`monsterRace: ${f.name}`),console.log(`monsterClass: ${p.name}`);const{baseBonus:g,ac:S,hpMin:x,hpMax:P,atBonus:N,damageMin:E,damageMax:_,save:I}=WS[s],D=Math.floor((x+P)/2),L=Math.floor((E+_)/2),V=Math.floor(L/3.5),v=Math.floor(L-V*3.5),m=Math.floor(Math.random()*20)+g,w={name:f.name+p.name,num:o,size:ri.MEDIUM,monsterType:h.monsterType??ge.HUMANOID,ac:S,hp:D,save:I,move:[],cr:s,exp:l,abilities:{[te.STR]:8+g,[te.DEX]:8+g,[te.CON]:8+g,[te.INT]:8+g,[te.WIS]:8+g,[te.CHA]:8+g},skills:{},senses:[],languages:[],specialAbilities:[],actions:[],toHit:N,damage:L,diceNum:V,damageMod:v,baseBonus:g,initiative:m},T=X(f.enhancer,h.enhancer,p.enhancer)(w);return{monster:r,reRollMonster:()=>{n(Math.random()),ps(rr(Tn,"monster","monster"),T).then()}}},cx=({settings:t,setLevel:e,setNumCharacters:n,setDifficulty:r})=>{const{level:i,numCharacters:s,difficulty:o}=t;return M.jsxs(M.Fragment,{children:[M.jsx("h3",{children:""}),M.jsxs("select",{value:i,className:"form-select form-select-lg mb-3",onChange:l=>e(parseInt(l.target.value)),children:[M.jsx("option",{value:"",children:""}),[...Array(20).keys()].map(l=>M.jsxs("option",{value:l+1,children:[" ",l+1]},l))]}),M.jsxs("select",{value:s,className:"form-select form-select-lg mb-3",onChange:l=>n(parseInt(l.target.value)),children:[M.jsx("option",{value:"",children:""}),[...Array(6).keys()].map(l=>M.jsxs("option",{value:l+1,children:[" ",l+1]},l))]}),M.jsxs("select",{value:o,className:"form-select form-select-lg mb-3",onChange:l=>r(l.target.value),children:[M.jsx("option",{value:"",children:""}),M.jsx("option",{value:tr.EASY,children:""}),M.jsx("option",{value:tr.NORMAL,children:""}),M.jsx("option",{value:tr.HARD,children:""}),M.jsx("option",{value:tr.HELL,children:""})]})]})},de={Setting:"Setting",Character:"Character",Monster:"Monster",Room:"Room",HitPoint:"HitPoint",EditRoom:"EditRoom"},hx=t=>{const[e,n]=b.useState(de.Room),r=b.useMemo(()=>{switch(e){case de.Setting:return"";case de.Monster:return"";case de.Room:return"";case de.HitPoint:return"";case de.EditRoom:return"";default:return""}},[e]);return{page:e,setPage:n,reRoll:()=>{t[e]()},reRollLabel:r}},dx=({page:t,setPage:e,reRoll:n,reRollLabel:r,isMaster:i,setIsMaster:s})=>M.jsx("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark mb-3",children:M.jsxs("div",{className:"container-fluid",children:[M.jsx("a",{className:"navbar-brand",onClick:n,children:"DD5eTool"}),M.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:M.jsx("span",{className:"navbar-toggler-icon"})}),M.jsxs("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[M.jsxs("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[i&&M.jsx("li",{className:"nav-item",children:M.jsx("a",{className:t===de.Setting?"nav-link active":"nav-link",onClick:()=>e(de.Setting),children:""})}),M.jsx("li",{className:"nav-item",children:M.jsx("a",{className:t===de.Character?"nav-link active":"nav-link",onClick:()=>e(de.Character),children:""})}),i&&M.jsx("li",{className:"nav-item",children:M.jsx("a",{className:t===de.Monster?"nav-link active":"nav-link",onClick:()=>e(de.Monster),children:""})}),M.jsx("li",{className:"nav-item",children:M.jsx("a",{className:t===de.Room?"nav-link active":"nav-link",onClick:()=>e(de.Room),children:""})}),i&&M.jsx("li",{className:"nav-item",children:M.jsx("a",{className:t===de.HitPoint?"nav-link active":"nav-link",onClick:()=>e(de.HitPoint),children:""})}),i&&M.jsx("li",{className:"nav-item",children:M.jsx("a",{className:t===de.EditRoom?"nav-link active":"nav-link",onClick:()=>e(de.EditRoom),children:""})})]}),M.jsxs("div",{className:"form-check form-switch me-4",children:[M.jsx("input",{className:"form-check-input",type:"checkbox",id:"isMaster",checked:i,onChange:o=>{s(o.target.checked)}}),i?M.jsx("label",{className:"form-check-label text-white",htmlFor:"isMaster",children:""}):M.jsx("label",{className:"form-check-label text-white",htmlFor:"isMaster",children:""})]}),M.jsx("button",{className:"btn btn-secondary",onClick:n,children:M.jsx("i",{className:"bi bi-dice-5-fill",children:r})})]})]})}),fx=()=>{const[t,e]=b.useState([]),n=W1(Tn,"units");return b.useEffect(()=>{_c(n,l=>e(l.docs.map(u=>u.data())))},[]),{units:t,move:(l,u,h)=>{ps(rr(Tn,"units",l),{x:u,y:h},{merge:!0}).then()},setUnit:l=>{ps(rr(Tn,"units",l.id),l).then()},deleteUnit:l=>{rx(rr(Tn,"units",l)).then()},setHitPoint:(l,u)=>{ps(rr(Tn,"units",l),{hp:u},{merge:!0}).then()}}},Ec=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ws(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function $p(t){return"nodeType"in t}function Ut(t){var e,n;return t?Ws(t)?t:$p(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function jp(t){const{Document:e}=Ut(t);return t instanceof e}function Na(t){return Ws(t)?!1:t instanceof Ut(t).HTMLElement}function sE(t){return t instanceof Ut(t).SVGElement}function qs(t){return t?Ws(t)?t.document:$p(t)?jp(t)?t:Na(t)||sE(t)?t.ownerDocument:document:document:document}const dr=Ec?b.useLayoutEffect:b.useEffect;function Bp(t){const e=b.useRef(t);return dr(()=>{e.current=t}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function px(){const t=b.useRef(null),e=b.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=b.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function ma(t,e){e===void 0&&(e=[t]);const n=b.useRef(t);return dr(()=>{n.current!==t&&(n.current=t)},e),n}function Da(t,e){const n=b.useRef();return b.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function bu(t){const e=Bp(t),n=b.useRef(null),r=b.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function Zd(t){const e=b.useRef();return b.useEffect(()=>{e.current=t},[t]),e.current}let Dh={};function wc(t,e){return b.useMemo(()=>{if(e)return e;const n=Dh[t]==null?0:Dh[t]+1;return Dh[t]=n,t+"-"+n},[t,e])}function oE(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const l=Object.entries(o);for(const[u,h]of l){const f=s[u];f!=null&&(s[u]=f+t*h)}return s},{...e})}}const ms=oE(1),Lu=oE(-1);function mx(t){return"clientX"in t&&"clientY"in t}function aE(t){if(!t)return!1;const{KeyboardEvent:e}=Ut(t.target);return e&&t instanceof e}function gx(t){if(!t)return!1;const{TouchEvent:e}=Ut(t.target);return e&&t instanceof e}function ef(t){if(gx(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return mx(t)?{x:t.clientX,y:t.clientY}:null}const tf=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[tf.Translate.toString(t),tf.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),zy="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function yx(t){return t.matches(zy)?t:t.querySelector(zy)}const vx={display:"none"};function _x(t){let{id:e,value:n}=t;return ht.createElement("div",{id:e,style:vx},n)}function Ex(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ht.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function wx(){const[t,e]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const lE=b.createContext(null);function Tx(t){const e=b.useContext(lE);b.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Sx(){const[t]=b.useState(()=>new Set),e=b.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[b.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,s)})},[t]),e]}const Ix={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Ax={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Cx(t){let{announcements:e=Ax,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=Ix}=t;const{announce:s,announcement:o}=wx(),l=wc("DndLiveRegion"),[u,h]=b.useState(!1);if(b.useEffect(()=>{h(!0)},[]),Tx(b.useMemo(()=>({onDragStart(p){let{active:g}=p;s(e.onDragStart({active:g}))},onDragMove(p){let{active:g,over:S}=p;e.onDragMove&&s(e.onDragMove({active:g,over:S}))},onDragOver(p){let{active:g,over:S}=p;s(e.onDragOver({active:g,over:S}))},onDragEnd(p){let{active:g,over:S}=p;s(e.onDragEnd({active:g,over:S}))},onDragCancel(p){let{active:g,over:S}=p;s(e.onDragCancel({active:g,over:S}))}}),[s,e])),!u)return null;const f=ht.createElement(ht.Fragment,null,ht.createElement(_x,{id:r,value:i.draggable}),ht.createElement(Ex,{id:l,announcement:o}));return n?si.createPortal(f,n):f}var qe;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(qe||(qe={}));function Fu(){}const Pn=Object.freeze({x:0,y:0});function Rx(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function Px(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function xx(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,l=s-n;if(r<i&&n<s){const u=e.width*e.height,h=t.width*t.height,f=o*l,p=f/(u+h-f);return Number(p.toFixed(4))}return 0}const kx=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=xx(l,e);u>0&&i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(Rx)};function Nx(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function uE(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Pn}function Dx(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const Mx=Dx(1);function Vx(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Ox(t,e,n){const r=Vx(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:l}=r,u=t.left-o-(1-i)*parseFloat(n),h=t.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),f=i?t.width/i:t.width,p=s?t.height/s:t.height;return{width:f,height:p,top:h,right:u+f,bottom:h+p,left:u}}const bx={ignoreTransform:!1};function Ma(t,e){e===void 0&&(e=bx);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:f}=Ut(t).getComputedStyle(t);h&&(n=Ox(n,h,f))}const{top:r,left:i,width:s,height:o,bottom:l,right:u}=n;return{top:r,left:i,width:s,height:o,bottom:l,right:u}}function Hy(t){return Ma(t,{ignoreTransform:!0})}function Lx(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Fx(t,e){return e===void 0&&(e=Ut(t).getComputedStyle(t)),e.position==="fixed"}function $x(t,e){e===void 0&&(e=Ut(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function Up(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(jp(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Na(i)||sE(i)||n.includes(i))return n;const s=Ut(t).getComputedStyle(i);return i!==t&&$x(i,s)&&n.push(i),Fx(i,s)?n:r(i.parentNode)}return t?r(t):n}function cE(t){const[e]=Up(t,1);return e??null}function Mh(t){return!Ec||!t?null:Ws(t)?t:$p(t)?jp(t)||t===qs(t).scrollingElement?window:Na(t)?t:null:null}function hE(t){return Ws(t)?t.scrollX:t.scrollLeft}function dE(t){return Ws(t)?t.scrollY:t.scrollTop}function nf(t){return{x:hE(t),y:dE(t)}}var et;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(et||(et={}));function fE(t){return!Ec||!t?!1:t===document.scrollingElement}function pE(t){const e={x:0,y:0},n=fE(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const jx={x:.2,y:.2};function Bx(t,e,n,r,i){let{top:s,left:o,right:l,bottom:u}=n;r===void 0&&(r=10),i===void 0&&(i=jx);const{isTop:h,isBottom:f,isLeft:p,isRight:g}=pE(t),S={x:0,y:0},x={x:0,y:0},P={height:e.height*i.y,width:e.width*i.x};return!h&&s<=e.top+P.height?(S.y=et.Backward,x.y=r*Math.abs((e.top+P.height-s)/P.height)):!f&&u>=e.bottom-P.height&&(S.y=et.Forward,x.y=r*Math.abs((e.bottom-P.height-u)/P.height)),!g&&l>=e.right-P.width?(S.x=et.Forward,x.x=r*Math.abs((e.right-P.width-l)/P.width)):!p&&o<=e.left+P.width&&(S.x=et.Backward,x.x=r*Math.abs((e.left+P.width-o)/P.width)),{direction:S,speed:x}}function Ux(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function mE(t){return t.reduce((e,n)=>ms(e,nf(n)),Pn)}function zx(t){return t.reduce((e,n)=>e+hE(n),0)}function Hx(t){return t.reduce((e,n)=>e+dE(n),0)}function Wx(t,e){if(e===void 0&&(e=Ma),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);cE(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const qx=[["x",["left","right"],zx],["y",["top","bottom"],Hx]];class zp{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Up(n),i=mE(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,l]of qx)for(const u of o)Object.defineProperty(this,u,{get:()=>{const h=l(r),f=i[s]-h;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class $o{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function Kx(t){const{EventTarget:e}=Ut(t);return t instanceof e?t:qs(t)}function Vh(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var on;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(on||(on={}));function Wy(t){t.preventDefault()}function Gx(t){t.stopPropagation()}var _e;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(_e||(_e={}));const gE={start:[_e.Space,_e.Enter],cancel:[_e.Esc],end:[_e.Space,_e.Enter]},Qx=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case _e.Right:return{...n,x:n.x+25};case _e.Left:return{...n,x:n.x-25};case _e.Down:return{...n,y:n.y+25};case _e.Up:return{...n,y:n.y-25}}};class yE{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new $o(qs(n)),this.windowListeners=new $o(Ut(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(on.Resize,this.handleCancel),this.windowListeners.add(on.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(on.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&Wx(r),n(Pn)}handleKeyDown(e){if(aE(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=gE,coordinateGetter:o=Qx,scrollBehavior:l="smooth"}=i,{code:u}=e;if(s.end.includes(u)){this.handleEnd(e);return}if(s.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:h}=r.current,f=h?{x:h.left,y:h.top}:Pn;this.referenceCoordinates||(this.referenceCoordinates=f);const p=o(e,{active:n,context:r.current,currentCoordinates:f});if(p){const g=Lu(p,f),S={x:0,y:0},{scrollableAncestors:x}=r.current;for(const P of x){const N=e.code,{isTop:E,isRight:_,isLeft:I,isBottom:D,maxScroll:L,minScroll:V}=pE(P),v=Ux(P),m={x:Math.min(N===_e.Right?v.right-v.width/2:v.right,Math.max(N===_e.Right?v.left:v.left+v.width/2,p.x)),y:Math.min(N===_e.Down?v.bottom-v.height/2:v.bottom,Math.max(N===_e.Down?v.top:v.top+v.height/2,p.y))},w=N===_e.Right&&!_||N===_e.Left&&!I,T=N===_e.Down&&!D||N===_e.Up&&!E;if(w&&m.x!==p.x){const C=P.scrollLeft+g.x,R=N===_e.Right&&C<=L.x||N===_e.Left&&C>=V.x;if(R&&!g.y){P.scrollTo({left:C,behavior:l});return}R?S.x=P.scrollLeft-C:S.x=N===_e.Right?P.scrollLeft-L.x:P.scrollLeft-V.x,S.x&&P.scrollBy({left:-S.x,behavior:l});break}else if(T&&m.y!==p.y){const C=P.scrollTop+g.y,R=N===_e.Down&&C<=L.y||N===_e.Up&&C>=V.y;if(R&&!g.x){P.scrollTo({top:C,behavior:l});return}R?S.y=P.scrollTop-C:S.y=N===_e.Down?P.scrollTop-L.y:P.scrollTop-V.y,S.y&&P.scrollBy({top:-S.y,behavior:l});break}}this.handleMove(e,ms(Lu(p,this.referenceCoordinates),S))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}yE.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=gE,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=s.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function qy(t){return!!(t&&"distance"in t)}function Ky(t){return!!(t&&"delay"in t)}class Hp{constructor(e,n,r){var i;r===void 0&&(r=Kx(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=qs(o),this.documentListeners=new $o(this.document),this.listeners=new $o(r),this.windowListeners=new $o(Ut(o)),this.initialCoordinates=(i=ef(s))!=null?i:Pn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(on.Resize,this.handleCancel),this.windowListeners.add(on.DragStart,Wy),this.windowListeners.add(on.VisibilityChange,this.handleCancel),this.windowListeners.add(on.ContextMenu,Wy),this.documentListeners.add(on.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ky(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(qy(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(on.Click,Gx,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(on.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:l}}=s;if(!i)return;const u=(n=ef(e))!=null?n:Pn,h=Lu(i,u);if(!r&&l){if(qy(l)){if(l.tolerance!=null&&Vh(h,l.tolerance))return this.handleCancel();if(Vh(h,l.distance))return this.handleStart()}return Ky(l)&&Vh(h,l.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===_e.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Yx={move:{name:"pointermove"},end:{name:"pointerup"}};class vE extends Hp{constructor(e){const{event:n}=e,r=qs(n.target);super(e,Yx,r)}}vE.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Xx={move:{name:"mousemove"},end:{name:"mouseup"}};var rf;(function(t){t[t.RightClick=2]="RightClick"})(rf||(rf={}));class Jx extends Hp{constructor(e){super(e,Xx,qs(e.event.target))}}Jx.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===rf.RightClick?!1:(r==null||r({event:n}),!0)}}];const Oh={move:{name:"touchmove"},end:{name:"touchend"}};class Zx extends Hp{constructor(e){super(e,Oh)}static setup(){return window.addEventListener(Oh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Oh.move.name,e)};function e(){}}}Zx.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var jo;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(jo||(jo={}));var $u;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})($u||($u={}));function ek(t){let{acceleration:e,activator:n=jo.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:l=$u.TreeOrder,pointerCoordinates:u,scrollableAncestors:h,scrollableAncestorRects:f,delta:p,threshold:g}=t;const S=nk({delta:p,disabled:!s}),[x,P]=px(),N=b.useRef({x:0,y:0}),E=b.useRef({x:0,y:0}),_=b.useMemo(()=>{switch(n){case jo.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case jo.DraggableRect:return i}},[n,i,u]),I=b.useRef(null),D=b.useCallback(()=>{const V=I.current;if(!V)return;const v=N.current.x*E.current.x,m=N.current.y*E.current.y;V.scrollBy(v,m)},[]),L=b.useMemo(()=>l===$u.TreeOrder?[...h].reverse():h,[l,h]);b.useEffect(()=>{if(!s||!h.length||!_){P();return}for(const V of L){if((r==null?void 0:r(V))===!1)continue;const v=h.indexOf(V),m=f[v];if(!m)continue;const{direction:w,speed:T}=Bx(V,m,_,e,g);for(const C of["x","y"])S[C][w[C]]||(T[C]=0,w[C]=0);if(T.x>0||T.y>0){P(),I.current=V,x(D,o),N.current=T,E.current=w;return}}N.current={x:0,y:0},E.current={x:0,y:0},P()},[e,D,r,P,s,o,JSON.stringify(_),JSON.stringify(S),x,h,L,f,JSON.stringify(g)])}const tk={x:{[et.Backward]:!1,[et.Forward]:!1},y:{[et.Backward]:!1,[et.Forward]:!1}};function nk(t){let{delta:e,disabled:n}=t;const r=Zd(e);return Da(i=>{if(n||!r||!i)return tk;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[et.Backward]:i.x[et.Backward]||s.x===-1,[et.Forward]:i.x[et.Forward]||s.x===1},y:{[et.Backward]:i.y[et.Backward]||s.y===-1,[et.Forward]:i.y[et.Forward]||s.y===1}}},[n,e,r])}function rk(t,e){const n=e!==null?t.get(e):void 0,r=n?n.node.current:null;return Da(i=>{var s;return e===null?null:(s=r??i)!=null?s:null},[r,e])}function ik(t,e){return b.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var ga;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ga||(ga={}));var sf;(function(t){t.Optimized="optimized"})(sf||(sf={}));const Gy=new Map;function sk(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=b.useState(null),{frequency:l,measure:u,strategy:h}=i,f=b.useRef(t),p=N(),g=ma(p),S=b.useCallback(function(E){E===void 0&&(E=[]),!g.current&&o(_=>_===null?E:_.concat(E.filter(I=>!_.includes(I))))},[g]),x=b.useRef(null),P=Da(E=>{if(p&&!n)return Gy;if(!E||E===Gy||f.current!==t||s!=null){const _=new Map;for(let I of t){if(!I)continue;if(s&&s.length>0&&!s.includes(I.id)&&I.rect.current){_.set(I.id,I.rect.current);continue}const D=I.node.current,L=D?new zp(u(D),D):null;I.rect.current=L,L&&_.set(I.id,L)}return _}return E},[t,s,n,p,u]);return b.useEffect(()=>{f.current=t},[t]),b.useEffect(()=>{p||S()},[n,p]),b.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),b.useEffect(()=>{p||typeof l!="number"||x.current!==null||(x.current=setTimeout(()=>{S(),x.current=null},l))},[l,p,S,...r]),{droppableRects:P,measureDroppableContainers:S,measuringScheduled:s!=null};function N(){switch(h){case ga.Always:return!1;case ga.BeforeDragging:return n;default:return!n}}}function _E(t,e){return Da(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function ok(t,e){return _E(t,e)}function ak(t){let{callback:e,disabled:n}=t;const r=Bp(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Tc(t){let{callback:e,disabled:n}=t;const r=Bp(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function lk(t){return new zp(Ma(t),t)}function Qy(t,e,n){e===void 0&&(e=lk);const[r,i]=b.useReducer(l,null),s=ak({callback(u){if(t)for(const h of u){const{type:f,target:p}=h;if(f==="childList"&&p instanceof HTMLElement&&p.contains(t)){i();break}}}}),o=Tc({callback:i});return dr(()=>{i(),t?(o==null||o.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[t]),r;function l(u){if(!t)return null;if(t.isConnected===!1){var h;return(h=u??n)!=null?h:null}const f=e(t);return JSON.stringify(u)===JSON.stringify(f)?u:f}}function uk(t){const e=_E(t);return uE(t,e)}const Yy=[];function ck(t){const e=b.useRef(t),n=Da(r=>t?r&&r!==Yy&&t&&e.current&&t.parentNode===e.current.parentNode?r:Up(t):Yy,[t]);return b.useEffect(()=>{e.current=t},[t]),n}function hk(t){const[e,n]=b.useState(null),r=b.useRef(t),i=b.useCallback(s=>{const o=Mh(s.target);o&&n(l=>l?(l.set(o,nf(o)),new Map(l)):null)},[]);return b.useEffect(()=>{const s=r.current;if(t!==s){o(s);const l=t.map(u=>{const h=Mh(u);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,nf(h)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(s)};function o(l){l.forEach(u=>{const h=Mh(u);h==null||h.removeEventListener("scroll",i)})}},[i,t]),b.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>ms(s,o),Pn):mE(t):Pn,[t,e])}function Xy(t,e){e===void 0&&(e=[]);const n=b.useRef(null);return b.useEffect(()=>{n.current=null},e),b.useEffect(()=>{const r=t!==Pn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Lu(t,n.current):Pn}function dk(t){b.useEffect(()=>{if(!Ec)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function fk(t,e){return b.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function EE(t){return b.useMemo(()=>t?Lx(t):null,[t])}const bh=[];function pk(t,e){e===void 0&&(e=Ma);const[n]=t,r=EE(n?Ut(n):null),[i,s]=b.useReducer(l,bh),o=Tc({callback:s});return t.length>0&&i===bh&&s(),dr(()=>{t.length?t.forEach(u=>o==null?void 0:o.observe(u)):(o==null||o.disconnect(),s())},[t]),i;function l(){return t.length?t.map(u=>fE(u)?r:new zp(e(u),u)):bh}}function mk(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Na(e)?e:t}function gk(t){let{measure:e}=t;const[n,r]=b.useState(null),i=b.useCallback(h=>{for(const{target:f}of h)if(Na(f)){r(p=>{const g=e(f);return p?{...p,width:g.width,height:g.height}:g});break}},[e]),s=Tc({callback:i}),o=b.useCallback(h=>{const f=mk(h);s==null||s.disconnect(),f&&(s==null||s.observe(f)),r(f?e(f):null)},[e,s]),[l,u]=bu(o);return b.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const yk=[{sensor:vE,options:{}},{sensor:yE,options:{}}],vk={current:{}},Kl={draggable:{measure:Hy},droppable:{measure:Hy,strategy:ga.WhileDragging,frequency:sf.Optimized},dragOverlay:{measure:Ma}};class Bo extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const _k={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Bo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Fu},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Kl,measureDroppableContainers:Fu,windowRect:null,measuringScheduled:!1},Ek={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Fu,draggableNodes:new Map,over:null,measureDroppableContainers:Fu},Sc=b.createContext(Ek),wk=b.createContext(_k);function Tk(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Bo}}}function Sk(t,e){switch(e.type){case qe.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case qe.DragMove:return t.draggable.active?{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}}:t;case qe.DragEnd:case qe.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case qe.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new Bo(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case qe.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new Bo(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case qe.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new Bo(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function Ik(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=b.useContext(Sc),s=Zd(r),o=Zd(n==null?void 0:n.id);return b.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!aE(s)||document.activeElement===s.target)return;const l=i.get(o);if(!l)return;const{activatorNode:u,node:h}=l;if(!u.current&&!h.current)return;requestAnimationFrame(()=>{for(const f of[u.current,h.current]){if(!f)continue;const p=yx(f);if(p){p.focus();break}}})}},[r,e,i,o,s]),null}function Ak(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function Ck(t){return b.useMemo(()=>({draggable:{...Kl.draggable,...t==null?void 0:t.draggable},droppable:{...Kl.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Kl.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Rk(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=b.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;dr(()=>{if(!o&&!l||!e){s.current=!1;return}if(s.current||!r)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const f=n(h),p=uE(f,r);if(o||(p.x=0),l||(p.y=0),s.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const g=cE(h);g&&g.scrollBy({top:p.y,left:p.x})}},[e,o,l,r,n])}const wE=b.createContext({...Pn,scaleX:1,scaleY:1});var Ar;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ar||(Ar={}));const Pk=b.memo(function(e){var n,r,i,s;let{id:o,accessibility:l,autoScroll:u=!0,children:h,sensors:f=yk,collisionDetection:p=kx,measuring:g,modifiers:S,...x}=e;const P=b.useReducer(Sk,void 0,Tk),[N,E]=P,[_,I]=Sx(),[D,L]=b.useState(Ar.Uninitialized),V=D===Ar.Initialized,{draggable:{active:v,nodes:m,translate:w},droppable:{containers:T}}=N,C=v?m.get(v):null,R=b.useRef({initial:null,translated:null}),A=b.useMemo(()=>{var xe;return v!=null?{id:v,data:(xe=C==null?void 0:C.data)!=null?xe:vk,rect:R}:null},[v,C]),we=b.useRef(null),[en,xn]=b.useState(null),[Pe,z]=b.useState(null),q=ma(x,Object.values(x)),Q=wc("DndDescribedBy",o),le=b.useMemo(()=>T.getEnabled(),[T]),J=Ck(g),{droppableRects:he,measureDroppableContainers:Ye,measuringScheduled:it}=sk(le,{dragging:V,dependencies:[w.x,w.y],config:J.droppable}),ye=rk(m,v),st=b.useMemo(()=>Pe?ef(Pe):null,[Pe]),kn=Ua(),tn=ok(ye,J.draggable.measure);Rk({activeNode:v?m.get(v):null,config:kn.layoutShiftCompensation,initialRect:tn,measure:J.draggable.measure});const je=Qy(ye,J.draggable.measure,tn),zt=Qy(ye?ye.parentElement:null),Be=b.useRef({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:he,draggableNodes:m,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ki=T.getNodeFor((n=Be.current.over)==null?void 0:n.id),mn=gk({measure:J.dragOverlay.measure}),pr=(r=mn.nodeRef.current)!=null?r:ye,qn=V?(i=mn.rect)!=null?i:je:null,Oa=!!(mn.nodeRef.current&&mn.rect),ba=uk(Oa?null:je),Ni=EE(pr?Ut(pr):null),nn=ck(V?ki??ye:null),Yr=pk(nn),Di=Ak(S,{transform:{x:w.x-ba.x,y:w.y-ba.y,scaleX:1,scaleY:1},activatorEvent:Pe,active:A,activeNodeRect:je,containerNodeRect:zt,draggingNodeRect:qn,over:Be.current.over,overlayNodeRect:mn.rect,scrollableAncestors:nn,scrollableAncestorRects:Yr,windowRect:Ni}),Mi=st?ms(st,w):null,Vi=hk(nn),La=Xy(Vi),Xe=Xy(Vi,[je]),Ve=ms(Di,La),gn=qn?Mx(qn,Di):null,mr=A&&gn?p({active:A,collisionRect:gn,droppableRects:he,droppableContainers:le,pointerCoordinates:Mi}):null,Qs=Px(mr,"id"),[Nn,gr]=b.useState(null),Fa=Oa?Di:ms(Di,Xe),$a=Nx(Fa,(s=Nn==null?void 0:Nn.rect)!=null?s:null,je),Oi=b.useCallback((xe,ot)=>{let{sensor:at,options:vt}=ot;if(we.current==null)return;const xt=m.get(we.current);if(!xt)return;const _t=xe.nativeEvent,Ht=new at({active:we.current,activeNode:xt,event:_t,options:vt,context:Be,onStart(Vt){const Le=we.current;if(Le==null)return;const yr=m.get(Le);if(!yr)return;const{onDragStart:Dn}=q.current,Mn={active:{id:Le,data:yr.data,rect:R}};si.unstable_batchedUpdates(()=>{Dn==null||Dn(Mn),L(Ar.Initializing),E({type:qe.DragStart,initialCoordinates:Vt,active:Le}),_({type:"onDragStart",event:Mn})})},onMove(Vt){E({type:qe.DragMove,coordinates:Vt})},onEnd:rn(qe.DragEnd),onCancel:rn(qe.DragCancel)});si.unstable_batchedUpdates(()=>{xn(Ht),z(xe.nativeEvent)});function rn(Vt){return async function(){const{active:yr,collisions:Dn,over:Mn,scrollAdjustedTranslate:za}=Be.current;let Xr=null;if(yr&&za){const{cancelDrop:sn}=q.current;Xr={activatorEvent:_t,active:yr,collisions:Dn,delta:za,over:Mn},Vt===qe.DragEnd&&typeof sn=="function"&&await Promise.resolve(sn(Xr))&&(Vt=qe.DragCancel)}we.current=null,si.unstable_batchedUpdates(()=>{E({type:Vt}),L(Ar.Uninitialized),gr(null),xn(null),z(null);const sn=Vt===qe.DragEnd?"onDragEnd":"onDragCancel";if(Xr){const Xs=q.current[sn];Xs==null||Xs(Xr),_({type:sn,event:Xr})}})}}},[m]),kc=b.useCallback((xe,ot)=>(at,vt)=>{const xt=at.nativeEvent,_t=m.get(vt);if(we.current!==null||!_t||xt.dndKit||xt.defaultPrevented)return;const Ht={active:_t};xe(at,ot.options,Ht)===!0&&(xt.dndKit={capturedBy:ot.sensor},we.current=vt,Oi(at,ot))},[m,Oi]),ja=ik(f,kc);dk(f),dr(()=>{je&&D===Ar.Initializing&&L(Ar.Initialized)},[je,D]),b.useEffect(()=>{const{onDragMove:xe}=q.current,{active:ot,activatorEvent:at,collisions:vt,over:xt}=Be.current;if(!ot||!at)return;const _t={active:ot,activatorEvent:at,collisions:vt,delta:{x:Ve.x,y:Ve.y},over:xt};si.unstable_batchedUpdates(()=>{xe==null||xe(_t),_({type:"onDragMove",event:_t})})},[Ve.x,Ve.y]),b.useEffect(()=>{const{active:xe,activatorEvent:ot,collisions:at,droppableContainers:vt,scrollAdjustedTranslate:xt}=Be.current;if(!xe||we.current==null||!ot||!xt)return;const{onDragOver:_t}=q.current,Ht=vt.get(Qs),rn=Ht&&Ht.rect.current?{id:Ht.id,rect:Ht.rect.current,data:Ht.data,disabled:Ht.disabled}:null,Vt={active:xe,activatorEvent:ot,collisions:at,delta:{x:xt.x,y:xt.y},over:rn};si.unstable_batchedUpdates(()=>{gr(rn),_t==null||_t(Vt),_({type:"onDragOver",event:Vt})})},[Qs]),dr(()=>{Be.current={activatorEvent:Pe,active:A,activeNode:ye,collisionRect:gn,collisions:mr,droppableRects:he,draggableNodes:m,draggingNode:pr,draggingNodeRect:qn,droppableContainers:T,over:Nn,scrollableAncestors:nn,scrollAdjustedTranslate:Ve},R.current={initial:qn,translated:gn}},[A,ye,mr,gn,m,pr,qn,he,T,Nn,nn,Ve]),ek({...kn,delta:w,draggingRect:gn,pointerCoordinates:Mi,scrollableAncestors:nn,scrollableAncestorRects:Yr});const Ys=b.useMemo(()=>({active:A,activeNode:ye,activeNodeRect:je,activatorEvent:Pe,collisions:mr,containerNodeRect:zt,dragOverlay:mn,draggableNodes:m,droppableContainers:T,droppableRects:he,over:Nn,measureDroppableContainers:Ye,scrollableAncestors:nn,scrollableAncestorRects:Yr,measuringConfiguration:J,measuringScheduled:it,windowRect:Ni}),[A,ye,je,Pe,mr,zt,mn,m,T,he,Nn,Ye,nn,Yr,J,it,Ni]),Ba=b.useMemo(()=>({activatorEvent:Pe,activators:ja,active:A,activeNodeRect:je,ariaDescribedById:{draggable:Q},dispatch:E,draggableNodes:m,over:Nn,measureDroppableContainers:Ye}),[Pe,ja,A,je,E,Q,m,Nn,Ye]);return ht.createElement(lE.Provider,{value:I},ht.createElement(Sc.Provider,{value:Ba},ht.createElement(wk.Provider,{value:Ys},ht.createElement(wE.Provider,{value:$a},h)),ht.createElement(Ik,{disabled:(l==null?void 0:l.restoreFocus)===!1})),ht.createElement(Cx,{...l,hiddenTextDescribedById:Q}));function Ua(){const xe=(en==null?void 0:en.autoScrollEnabled)===!1,ot=typeof u=="object"?u.enabled===!1:u===!1,at=V&&!xe&&!ot;return typeof u=="object"?{...u,enabled:at}:{enabled:at}}}),xk=b.createContext(null),Jy="button",kk="Droppable";function Nk(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=wc(kk),{activators:o,activatorEvent:l,active:u,activeNodeRect:h,ariaDescribedById:f,draggableNodes:p,over:g}=b.useContext(Sc),{role:S=Jy,roleDescription:x="draggable",tabIndex:P=0}=i??{},N=(u==null?void 0:u.id)===e,E=b.useContext(N?wE:xk),[_,I]=bu(),[D,L]=bu(),V=fk(o,e),v=ma(n);dr(()=>(p.set(e,{id:e,key:s,node:_,activatorNode:D,data:v}),()=>{const w=p.get(e);w&&w.key===s&&p.delete(e)}),[p,e]);const m=b.useMemo(()=>({role:S,tabIndex:P,"aria-disabled":r,"aria-pressed":N&&S===Jy?!0:void 0,"aria-roledescription":x,"aria-describedby":f.draggable}),[r,S,P,N,x,f.draggable]);return{active:u,activatorEvent:l,activeNodeRect:h,attributes:m,isDragging:N,listeners:r?void 0:V,node:_,over:g,setNodeRef:I,setActivatorNodeRef:L,transform:E}}const Dk="Droppable",Mk={timeout:25};function Vk(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=wc(Dk),{active:o,dispatch:l,over:u,measureDroppableContainers:h}=b.useContext(Sc),f=b.useRef({disabled:n}),p=b.useRef(!1),g=b.useRef(null),S=b.useRef(null),{disabled:x,updateMeasurementsFor:P,timeout:N}={...Mk,...i},E=ma(P??r),_=b.useCallback(()=>{if(!p.current){p.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{h(Array.isArray(E.current)?E.current:[E.current]),S.current=null},N)},[N]),I=Tc({callback:_,disabled:x||!o}),D=b.useCallback((m,w)=>{I&&(w&&(I.unobserve(w),p.current=!1),m&&I.observe(m))},[I]),[L,V]=bu(D),v=ma(e);return b.useEffect(()=>{!I||!L.current||(I.disconnect(),p.current=!1,I.observe(L.current))},[L,I]),dr(()=>(l({type:qe.RegisterDroppable,element:{id:r,key:s,disabled:n,node:L,rect:g,data:v}}),()=>l({type:qe.UnregisterDroppable,key:s,id:r})),[r]),b.useEffect(()=>{n!==f.current.disabled&&(l({type:qe.SetDroppableDisabled,id:r,key:s,disabled:n}),f.current.disabled=n)},[r,s,n,l]),{active:o,rect:g,isOver:(u==null?void 0:u.id)===r,node:L,over:u,setNodeRef:V}}var Ft=function(){return Ft=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ft.apply(this,arguments)};function ju(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Ie="-ms-",Uo="-moz-",fe="-webkit-",TE="comm",Ic="rule",Wp="decl",Ok="@import",SE="@keyframes",bk="@layer",IE=Math.abs,qp=String.fromCharCode,of=Object.assign;function Lk(t,e){return tt(t,0)^45?(((e<<2^tt(t,0))<<2^tt(t,1))<<2^tt(t,2))<<2^tt(t,3):0}function AE(t){return t.trim()}function Xn(t,e){return(t=e.exec(t))?t[0]:t}function ne(t,e,n){return t.replace(e,n)}function Gl(t,e,n){return t.indexOf(e,n)}function tt(t,e){return t.charCodeAt(e)|0}function Ns(t,e,n){return t.slice(e,n)}function bn(t){return t.length}function CE(t){return t.length}function Ao(t,e){return e.push(t),t}function Fk(t,e){return t.map(e).join("")}function Zy(t,e){return t.filter(function(n){return!Xn(n,e)})}var Ac=1,Ds=1,RE=0,pn=0,ze=0,Ks="";function Cc(t,e,n,r,i,s,o,l){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Ac,column:Ds,length:o,return:"",siblings:l}}function Tr(t,e){return of(Cc("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function Bi(t){for(;t.root;)t=Tr(t.root,{children:[t]});Ao(t,t.siblings)}function $k(){return ze}function jk(){return ze=pn>0?tt(Ks,--pn):0,Ds--,ze===10&&(Ds=1,Ac--),ze}function Cn(){return ze=pn<RE?tt(Ks,pn++):0,Ds++,ze===10&&(Ds=1,Ac++),ze}function gi(){return tt(Ks,pn)}function Ql(){return pn}function Rc(t,e){return Ns(Ks,t,e)}function af(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Bk(t){return Ac=Ds=1,RE=bn(Ks=t),pn=0,[]}function Uk(t){return Ks="",t}function Lh(t){return AE(Rc(pn-1,lf(t===91?t+2:t===40?t+1:t)))}function zk(t){for(;(ze=gi())&&ze<33;)Cn();return af(t)>2||af(ze)>3?"":" "}function Hk(t,e){for(;--e&&Cn()&&!(ze<48||ze>102||ze>57&&ze<65||ze>70&&ze<97););return Rc(t,Ql()+(e<6&&gi()==32&&Cn()==32))}function lf(t){for(;Cn();)switch(ze){case t:return pn;case 34:case 39:t!==34&&t!==39&&lf(ze);break;case 40:t===41&&lf(t);break;case 92:Cn();break}return pn}function Wk(t,e){for(;Cn()&&t+ze!==57;)if(t+ze===84&&gi()===47)break;return"/*"+Rc(e,pn-1)+"*"+qp(t===47?t:Cn())}function qk(t){for(;!af(gi());)Cn();return Rc(t,pn)}function Kk(t){return Uk(Yl("",null,null,null,[""],t=Bk(t),0,[0],t))}function Yl(t,e,n,r,i,s,o,l,u){for(var h=0,f=0,p=o,g=0,S=0,x=0,P=1,N=1,E=1,_=0,I="",D=i,L=s,V=r,v=I;N;)switch(x=_,_=Cn()){case 40:if(x!=108&&tt(v,p-1)==58){Gl(v+=ne(Lh(_),"&","&\f"),"&\f",IE(h?l[h-1]:0))!=-1&&(E=-1);break}case 34:case 39:case 91:v+=Lh(_);break;case 9:case 10:case 13:case 32:v+=zk(x);break;case 92:v+=Hk(Ql()-1,7);continue;case 47:switch(gi()){case 42:case 47:Ao(Gk(Wk(Cn(),Ql()),e,n,u),u);break;default:v+="/"}break;case 123*P:l[h++]=bn(v)*E;case 125*P:case 59:case 0:switch(_){case 0:case 125:N=0;case 59+f:E==-1&&(v=ne(v,/\f/g,"")),S>0&&bn(v)-p&&Ao(S>32?tv(v+";",r,n,p-1,u):tv(ne(v," ","")+";",r,n,p-2,u),u);break;case 59:v+=";";default:if(Ao(V=ev(v,e,n,h,f,i,l,I,D=[],L=[],p,s),s),_===123)if(f===0)Yl(v,e,V,V,D,s,p,l,L);else switch(g===99&&tt(v,3)===110?100:g){case 100:case 108:case 109:case 115:Yl(t,V,V,r&&Ao(ev(t,V,V,0,0,i,l,I,i,D=[],p,L),L),i,L,p,l,r?D:L);break;default:Yl(v,V,V,V,[""],L,0,l,L)}}h=f=S=0,P=E=1,I=v="",p=o;break;case 58:p=1+bn(v),S=x;default:if(P<1){if(_==123)--P;else if(_==125&&P++==0&&jk()==125)continue}switch(v+=qp(_),_*P){case 38:E=f>0?1:(v+="\f",-1);break;case 44:l[h++]=(bn(v)-1)*E,E=1;break;case 64:gi()===45&&(v+=Lh(Cn())),g=gi(),f=p=bn(I=v+=qk(Ql())),_++;break;case 45:x===45&&bn(v)==2&&(P=0)}}return s}function ev(t,e,n,r,i,s,o,l,u,h,f,p){for(var g=i-1,S=i===0?s:[""],x=CE(S),P=0,N=0,E=0;P<r;++P)for(var _=0,I=Ns(t,g+1,g=IE(N=o[P])),D=t;_<x;++_)(D=AE(N>0?S[_]+" "+I:ne(I,/&\f/g,S[_])))&&(u[E++]=D);return Cc(t,e,n,i===0?Ic:l,u,h,f,p)}function Gk(t,e,n,r){return Cc(t,e,n,TE,qp($k()),Ns(t,2,-2),0,r)}function tv(t,e,n,r,i){return Cc(t,e,n,Wp,Ns(t,0,r),Ns(t,r+1,-1),r,i)}function PE(t,e,n){switch(Lk(t,e)){case 5103:return fe+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return fe+t+t;case 4789:return Uo+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return fe+t+Uo+t+Ie+t+t;case 5936:switch(tt(t,e+11)){case 114:return fe+t+Ie+ne(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return fe+t+Ie+ne(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return fe+t+Ie+ne(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return fe+t+Ie+t+t;case 6165:return fe+t+Ie+"flex-"+t+t;case 5187:return fe+t+ne(t,/(\w+).+(:[^]+)/,fe+"box-$1$2"+Ie+"flex-$1$2")+t;case 5443:return fe+t+Ie+"flex-item-"+ne(t,/flex-|-self/g,"")+(Xn(t,/flex-|baseline/)?"":Ie+"grid-row-"+ne(t,/flex-|-self/g,""))+t;case 4675:return fe+t+Ie+"flex-line-pack"+ne(t,/align-content|flex-|-self/g,"")+t;case 5548:return fe+t+Ie+ne(t,"shrink","negative")+t;case 5292:return fe+t+Ie+ne(t,"basis","preferred-size")+t;case 6060:return fe+"box-"+ne(t,"-grow","")+fe+t+Ie+ne(t,"grow","positive")+t;case 4554:return fe+ne(t,/([^-])(transform)/g,"$1"+fe+"$2")+t;case 6187:return ne(ne(ne(t,/(zoom-|grab)/,fe+"$1"),/(image-set)/,fe+"$1"),t,"")+t;case 5495:case 3959:return ne(t,/(image-set\([^]*)/,fe+"$1$`$1");case 4968:return ne(ne(t,/(.+:)(flex-)?(.*)/,fe+"box-pack:$3"+Ie+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+fe+t+t;case 4200:if(!Xn(t,/flex-|baseline/))return Ie+"grid-column-align"+Ns(t,e)+t;break;case 2592:case 3360:return Ie+ne(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,i){return e=i,Xn(r.props,/grid-\w+-end/)})?~Gl(t+(n=n[e].value),"span",0)?t:Ie+ne(t,"-start","")+t+Ie+"grid-row-span:"+(~Gl(n,"span",0)?Xn(n,/\d+/):+Xn(n,/\d+/)-+Xn(t,/\d+/))+";":Ie+ne(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return Xn(r.props,/grid-\w+-start/)})?t:Ie+ne(ne(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return ne(t,/(.+)-inline(.+)/,fe+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(bn(t)-1-e>6)switch(tt(t,e+1)){case 109:if(tt(t,e+4)!==45)break;case 102:return ne(t,/(.+:)(.+)-([^]+)/,"$1"+fe+"$2-$3$1"+Uo+(tt(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Gl(t,"stretch",0)?PE(ne(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return ne(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,s,o,l,u,h){return Ie+i+":"+s+h+(o?Ie+i+"-span:"+(l?u:+u-+s)+h:"")+t});case 4949:if(tt(t,e+6)===121)return ne(t,":",":"+fe)+t;break;case 6444:switch(tt(t,tt(t,14)===45?18:11)){case 120:return ne(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+fe+(tt(t,14)===45?"inline-":"")+"box$3$1"+fe+"$2$3$1"+Ie+"$2box$3")+t;case 100:return ne(t,":",":"+Ie)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ne(t,"scroll-","scroll-snap-")+t}return t}function Bu(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function Qk(t,e,n,r){switch(t.type){case bk:if(t.children.length)break;case Ok:case Wp:return t.return=t.return||t.value;case TE:return"";case SE:return t.return=t.value+"{"+Bu(t.children,r)+"}";case Ic:if(!bn(t.value=t.props.join(",")))return""}return bn(n=Bu(t.children,r))?t.return=t.value+"{"+n+"}":""}function Yk(t){var e=CE(t);return function(n,r,i,s){for(var o="",l=0;l<e;l++)o+=t[l](n,r,i,s)||"";return o}}function Xk(t){return function(e){e.root||(e=e.return)&&t(e)}}function Jk(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case Wp:t.return=PE(t.value,t.length,n);return;case SE:return Bu([Tr(t,{value:ne(t.value,"@","@"+fe)})],r);case Ic:if(t.length)return Fk(n=t.props,function(i){switch(Xn(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Bi(Tr(t,{props:[ne(i,/:(read-\w+)/,":"+Uo+"$1")]})),Bi(Tr(t,{props:[i]})),of(t,{props:Zy(n,r)});break;case"::placeholder":Bi(Tr(t,{props:[ne(i,/:(plac\w+)/,":"+fe+"input-$1")]})),Bi(Tr(t,{props:[ne(i,/:(plac\w+)/,":"+Uo+"$1")]})),Bi(Tr(t,{props:[ne(i,/:(plac\w+)/,Ie+"input-$1")]})),Bi(Tr(t,{props:[i]})),of(t,{props:Zy(n,r)});break}return""})}}var Zk={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},qt={},Ms=typeof process<"u"&&qt!==void 0&&(qt.REACT_APP_SC_ATTR||qt.SC_ATTR)||"data-styled",xE="active",kE="data-styled-version",Pc="6.1.13",Kp=`/*!sc*/
`,Uu=typeof window<"u"&&"HTMLElement"in window,eN=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&qt!==void 0&&qt.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&qt.REACT_APP_SC_DISABLE_SPEEDY!==""?qt.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&qt.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&qt!==void 0&&qt.SC_DISABLE_SPEEDY!==void 0&&qt.SC_DISABLE_SPEEDY!==""&&qt.SC_DISABLE_SPEEDY!=="false"&&qt.SC_DISABLE_SPEEDY),xc=Object.freeze([]),Vs=Object.freeze({});function tN(t,e,n){return n===void 0&&(n=Vs),t.theme!==n.theme&&t.theme||e||n.theme}var NE=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),nN=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,rN=/(^-|-$)/g;function nv(t){return t.replace(nN,"-").replace(rN,"")}var iN=/(a)(d)/gi,Pl=52,rv=function(t){return String.fromCharCode(t+(t>25?39:97))};function uf(t){var e,n="";for(e=Math.abs(t);e>Pl;e=e/Pl|0)n=rv(e%Pl)+n;return(rv(e%Pl)+n).replace(iN,"$1-$2")}var Fh,DE=5381,is=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},ME=function(t){return is(DE,t)};function sN(t){return uf(ME(t)>>>0)}function oN(t){return t.displayName||t.name||"Component"}function $h(t){return typeof t=="string"&&!0}var VE=typeof Symbol=="function"&&Symbol.for,OE=VE?Symbol.for("react.memo"):60115,aN=VE?Symbol.for("react.forward_ref"):60112,lN={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},uN={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},bE={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},cN=((Fh={})[aN]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Fh[OE]=bE,Fh);function iv(t){return("type"in(e=t)&&e.type.$$typeof)===OE?bE:"$$typeof"in t?cN[t.$$typeof]:lN;var e}var hN=Object.defineProperty,dN=Object.getOwnPropertyNames,sv=Object.getOwnPropertySymbols,fN=Object.getOwnPropertyDescriptor,pN=Object.getPrototypeOf,ov=Object.prototype;function LE(t,e,n){if(typeof e!="string"){if(ov){var r=pN(e);r&&r!==ov&&LE(t,r,n)}var i=dN(e);sv&&(i=i.concat(sv(e)));for(var s=iv(t),o=iv(e),l=0;l<i.length;++l){var u=i[l];if(!(u in uN||n&&n[u]||o&&u in o||s&&u in s)){var h=fN(e,u);try{hN(t,u,h)}catch{}}}}return t}function Os(t){return typeof t=="function"}function Gp(t){return typeof t=="object"&&"styledComponentId"in t}function ci(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function av(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function ya(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function cf(t,e,n){if(n===void 0&&(n=!1),!n&&!ya(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=cf(t[r],e[r]);else if(ya(e))for(var r in e)t[r]=cf(t[r],e[r]);return t}function Qp(t,e){Object.defineProperty(t,"toString",{value:e})}function Va(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var mN=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,s=i;e>=s;)if((s<<=1)<0)throw Va(16,"".concat(e));this.groupSizes=new Uint32Array(s),this.groupSizes.set(r),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var l=this.indexOfGroup(e+1),u=(o=0,n.length);o<u;o++)this.tag.insertRule(l,n[o])&&(this.groupSizes[e]++,l++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n;this.groupSizes[e]=0;for(var s=r;s<i;s++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),s=i+r,o=i;o<s;o++)n+="".concat(this.tag.getRule(o)).concat(Kp);return n},t}(),Xl=new Map,zu=new Map,Jl=1,xl=function(t){if(Xl.has(t))return Xl.get(t);for(;zu.has(Jl);)Jl++;var e=Jl++;return Xl.set(t,e),zu.set(e,t),e},gN=function(t,e){Jl=e+1,Xl.set(t,e),zu.set(e,t)},yN="style[".concat(Ms,"][").concat(kE,'="').concat(Pc,'"]'),vN=new RegExp("^".concat(Ms,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),_N=function(t,e,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&t.registerName(e,r)},EN=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(Kp),i=[],s=0,o=r.length;s<o;s++){var l=r[s].trim();if(l){var u=l.match(vN);if(u){var h=0|parseInt(u[1],10),f=u[2];h!==0&&(gN(f,h),_N(t,f,u[3]),t.getTag().insertRules(h,i)),i.length=0}else i.push(l)}}},lv=function(t){for(var e=document.querySelectorAll(yN),n=0,r=e.length;n<r;n++){var i=e[n];i&&i.getAttribute(Ms)!==xE&&(EN(t,i),i.parentNode&&i.parentNode.removeChild(i))}};function wN(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var FE=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(l){var u=Array.from(l.querySelectorAll("style[".concat(Ms,"]")));return u[u.length-1]}(n),s=i!==void 0?i.nextSibling:null;r.setAttribute(Ms,xE),r.setAttribute(kE,Pc);var o=wN();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},TN=function(){function t(e){this.element=FE(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,i=0,s=r.length;i<s;i++){var o=r[i];if(o.ownerNode===n)return o}throw Va(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t}(),SN=function(){function t(e){this.element=FE(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),IN=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),uv=Uu,AN={isServer:!Uu,useCSSOMInjection:!eN},$E=function(){function t(e,n,r){e===void 0&&(e=Vs),n===void 0&&(n={});var i=this;this.options=Ft(Ft({},AN),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Uu&&uv&&(uv=!1,lv(this)),Qp(this,function(){return function(s){for(var o=s.getTag(),l=o.length,u="",h=function(p){var g=function(E){return zu.get(E)}(p);if(g===void 0)return"continue";var S=s.names.get(g),x=o.getGroup(p);if(S===void 0||!S.size||x.length===0)return"continue";var P="".concat(Ms,".g").concat(p,'[id="').concat(g,'"]'),N="";S!==void 0&&S.forEach(function(E){E.length>0&&(N+="".concat(E,","))}),u+="".concat(x).concat(P,'{content:"').concat(N,'"}').concat(Kp)},f=0;f<l;f++)h(f);return u}(i)})}return t.registerId=function(e){return xl(e)},t.prototype.rehydrate=function(){!this.server&&Uu&&lv(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(Ft(Ft({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(n){var r=n.useCSSOMInjection,i=n.target;return n.isServer?new IN(i):r?new TN(i):new SN(i)}(this.options),new mN(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(xl(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(xl(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(xl(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),CN=/&/g,RN=/^\s*\/\/.*$/gm;function jE(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=jE(n.children,e)),n})}function PN(t){var e,n,r,i=Vs,s=i.options,o=s===void 0?Vs:s,l=i.plugins,u=l===void 0?xc:l,h=function(g,S,x){return x.startsWith(n)&&x.endsWith(n)&&x.replaceAll(n,"").length>0?".".concat(e):g},f=u.slice();f.push(function(g){g.type===Ic&&g.value.includes("&")&&(g.props[0]=g.props[0].replace(CN,n).replace(r,h))}),o.prefix&&f.push(Jk),f.push(Qk);var p=function(g,S,x,P){S===void 0&&(S=""),x===void 0&&(x=""),P===void 0&&(P="&"),e=P,n=S,r=new RegExp("\\".concat(n,"\\b"),"g");var N=g.replace(RN,""),E=Kk(x||S?"".concat(x," ").concat(S," { ").concat(N," }"):N);o.namespace&&(E=jE(E,o.namespace));var _=[];return Bu(E,Yk(f.concat(Xk(function(I){return _.push(I)})))),_};return p.hash=u.length?u.reduce(function(g,S){return S.name||Va(15),is(g,S.name)},DE).toString():"",p}var xN=new $E,hf=PN(),BE=ht.createContext({shouldForwardProp:void 0,styleSheet:xN,stylis:hf});BE.Consumer;ht.createContext(void 0);function cv(){return b.useContext(BE)}var kN=function(){function t(e,n){var r=this;this.inject=function(i,s){s===void 0&&(s=hf);var o=r.name+s.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,s(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,Qp(this,function(){throw Va(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=hf),this.name+e.hash},t}(),NN=function(t){return t>="A"&&t<="Z"};function hv(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;NN(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var UE=function(t){return t==null||t===!1||t===""},zE=function(t){var e,n,r=[];for(var i in t){var s=t[i];t.hasOwnProperty(i)&&!UE(s)&&(Array.isArray(s)&&s.isCss||Os(s)?r.push("".concat(hv(i),":"),s,";"):ya(s)?r.push.apply(r,ju(ju(["".concat(i," {")],zE(s),!1),["}"],!1)):r.push("".concat(hv(i),": ").concat((e=i,(n=s)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in Zk||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function yi(t,e,n,r){if(UE(t))return[];if(Gp(t))return[".".concat(t.styledComponentId)];if(Os(t)){if(!Os(s=t)||s.prototype&&s.prototype.isReactComponent||!e)return[t];var i=t(e);return yi(i,e,n,r)}var s;return t instanceof kN?n?(t.inject(n,r),[t.getName(r)]):[t]:ya(t)?zE(t):Array.isArray(t)?Array.prototype.concat.apply(xc,t.map(function(o){return yi(o,e,n,r)})):[t.toString()]}function DN(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Os(n)&&!Gp(n))return!1}return!0}var MN=ME(Pc),VN=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&DN(e),this.componentId=n,this.baseHash=is(MN,n),this.baseStyle=r,$E.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=ci(i,this.staticRulesId);else{var s=av(yi(this.rules,e,n,r)),o=uf(is(this.baseHash,s)>>>0);if(!n.hasNameForId(this.componentId,o)){var l=r(s,".".concat(o),void 0,this.componentId);n.insertRules(this.componentId,o,l)}i=ci(i,o),this.staticRulesId=o}else{for(var u=is(this.baseHash,r.hash),h="",f=0;f<this.rules.length;f++){var p=this.rules[f];if(typeof p=="string")h+=p;else if(p){var g=av(yi(p,e,n,r));u=is(u,g+f),h+=g}}if(h){var S=uf(u>>>0);n.hasNameForId(this.componentId,S)||n.insertRules(this.componentId,S,r(h,".".concat(S),void 0,this.componentId)),i=ci(i,S)}}return i},t}(),HE=ht.createContext(void 0);HE.Consumer;var jh={};function ON(t,e,n){var r=Gp(t),i=t,s=!$h(t),o=e.attrs,l=o===void 0?xc:o,u=e.componentId,h=u===void 0?function(D,L){var V=typeof D!="string"?"sc":nv(D);jh[V]=(jh[V]||0)+1;var v="".concat(V,"-").concat(sN(Pc+V+jh[V]));return L?"".concat(L,"-").concat(v):v}(e.displayName,e.parentComponentId):u,f=e.displayName,p=f===void 0?function(D){return $h(D)?"styled.".concat(D):"Styled(".concat(oN(D),")")}(t):f,g=e.displayName&&e.componentId?"".concat(nv(e.displayName),"-").concat(e.componentId):e.componentId||h,S=r&&i.attrs?i.attrs.concat(l).filter(Boolean):l,x=e.shouldForwardProp;if(r&&i.shouldForwardProp){var P=i.shouldForwardProp;if(e.shouldForwardProp){var N=e.shouldForwardProp;x=function(D,L){return P(D,L)&&N(D,L)}}else x=P}var E=new VN(n,g,r?i.componentStyle:void 0);function _(D,L){return function(V,v,m){var w=V.attrs,T=V.componentStyle,C=V.defaultProps,R=V.foldedComponentIds,A=V.styledComponentId,we=V.target,en=ht.useContext(HE),xn=cv(),Pe=V.shouldForwardProp||xn.shouldForwardProp,z=tN(v,en,C)||Vs,q=function(it,ye,st){for(var kn,tn=Ft(Ft({},ye),{className:void 0,theme:st}),je=0;je<it.length;je+=1){var zt=Os(kn=it[je])?kn(tn):kn;for(var Be in zt)tn[Be]=Be==="className"?ci(tn[Be],zt[Be]):Be==="style"?Ft(Ft({},tn[Be]),zt[Be]):zt[Be]}return ye.className&&(tn.className=ci(tn.className,ye.className)),tn}(w,v,z),Q=q.as||we,le={};for(var J in q)q[J]===void 0||J[0]==="$"||J==="as"||J==="theme"&&q.theme===z||(J==="forwardedAs"?le.as=q.forwardedAs:Pe&&!Pe(J,Q)||(le[J]=q[J]));var he=function(it,ye){var st=cv(),kn=it.generateAndInjectStyles(ye,st.styleSheet,st.stylis);return kn}(T,q),Ye=ci(R,A);return he&&(Ye+=" "+he),q.className&&(Ye+=" "+q.className),le[$h(Q)&&!NE.has(Q)?"class":"className"]=Ye,le.ref=m,b.createElement(Q,le)}(I,D,L)}_.displayName=p;var I=ht.forwardRef(_);return I.attrs=S,I.componentStyle=E,I.displayName=p,I.shouldForwardProp=x,I.foldedComponentIds=r?ci(i.foldedComponentIds,i.styledComponentId):"",I.styledComponentId=g,I.target=r?i.target:t,Object.defineProperty(I,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(D){this._foldedDefaultProps=r?function(L){for(var V=[],v=1;v<arguments.length;v++)V[v-1]=arguments[v];for(var m=0,w=V;m<w.length;m++)cf(L,w[m],!0);return L}({},i.defaultProps,D):D}}),Qp(I,function(){return".".concat(I.styledComponentId)}),s&&LE(I,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),I}function dv(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n}var fv=function(t){return Object.assign(t,{isCss:!0})};function bN(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Os(t)||ya(t))return fv(yi(dv(xc,ju([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?yi(r):fv(yi(dv(r,e)))}function df(t,e,n){if(n===void 0&&(n=Vs),!e)throw Va(1,e);var r=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return t(e,n,bN.apply(void 0,ju([i],s,!1)))};return r.attrs=function(i){return df(t,e,Ft(Ft({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return df(t,e,Ft(Ft({},n),i))},r}var WE=function(t){return df(ON,t)},Gs=WE;NE.forEach(function(t){Gs[t]=WE(t)});const Yp=Gs.div.attrs(({x:t,y:e,$backgroundColor:n})=>({style:{left:`${t*qg}px`,top:`${e*qg}px`,backgroundColor:n}}))`
  position: absolute;
  width: ${nr}px;
  height: ${nr}px;
  border: ${rs}px solid darkgray;
`,LN=({x:t,y:e,id:n})=>{const{setNodeRef:r,isOver:i}=Vk({id:n,data:{x:t,y:e}}),s=i?"lightgreen":"white";return M.jsx(Yp,{ref:r,x:t,y:e,$backgroundColor:s})},va=Gs.div`
  color: white;
  width: ${Su}px;
  height: ${Su}px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  background: ${t=>t.$isMonster?"crimson":"dodgerblue"};
  border-color: ${t=>t.$isMonster?"darkred":"darkblue"};
  border-width: ${qS}px;
  border-style: solid;
`,FN=Gs(va)`
  position: absolute;
  cursor: grab;
  touch-action: none;
  left: ${t=>t.$left}px;
  top: ${t=>t.$top}px;
`,$N=t=>{const{id:e,x:n,y:r,type:i}=t,{setNodeRef:s,listeners:o,attributes:l,transform:u}=Nk({id:e}),h={transform:tf.Transform.toString(u)},f=n*(nr-rs)+(nr-rs-Su)/2,p=r*(nr-rs)+(nr-rs-Su)/2;return M.jsx(FN,{$left:f,$top:p,$isMonster:i===$s.Monster,ref:s,style:h,...l,...o,children:e})},ss={Wall:"#",Water:"W",Special:"S",Empty:"."},qE={[ss.Wall]:"black",[ss.Water]:"dodgerblue",[ss.Special]:"yellow",[ss.Empty]:"white"},jN=({move:t,units:e,board:n})=>M.jsx(KE,{children:M.jsxs(Pk,{onDragEnd:({over:r,active:i})=>{if(r&&r.data.current&&i){const{x:s,y:o}=r.data.current,l=i.id.toString();t(l,s,o)}},children:[jn(oc).map(r=>jn(Ia).map(i=>n[r][i]==="."?M.jsx(LN,{id:`${i}-${r}`,x:i,y:r},`${i}-${r}`):M.jsx(Yp,{x:i,y:r,$backgroundColor:qE[n[r][i]]??"white"},`${i}-${r}`))),e.filter(r=>r.hp>0||r.type===$s.Character).map(r=>M.jsx($N,{...r},r.id))]})}),KE=Gs.div`
  position: relative;
  width: ${Ia*nr}px;
  height: ${oc*nr}px;
`,BN=t=>t.monsterType!==void 0,UN=({item:t})=>M.jsxs("div",{className:"d-flex flex-row mb-2 p-2 border rounded align-items-center",children:[BN(t)?M.jsx(va,{$isMonster:!0,children:""}):M.jsx(va,{$isMonster:!1,children:t.id}),M.jsx("div",{className:"flex-grow-1 p-2",children:t.name}),M.jsx("div",{className:"fs-5",children:t.initiative})]},t.name),zN=({monster:t,characters:e})=>{const n=[t,...e].sort((r,i)=>i.initiative-r.initiative);return M.jsxs("div",{className:"d-flex flex-column flex-grow-1",children:[M.jsx("h5",{className:"pb-2",children:""}),n.map(r=>M.jsx(UN,{item:r},r.name))]})},HN=t=>M.jsxs(WN,{children:[M.jsx(jN,{...t}),M.jsx(zN,{...t})]}),WN=Gs.div`
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  flex-wrap: wrap;
`,qN=()=>{for(;;){const t=Math.floor(Math.random()*Ia),e=Math.floor(Math.random()*4+oc-4);if(ap[e][t]===".")return{x:t,y:e}}},KN=t=>{const{id:e,name:n,hp:r}=t,{x:i,y:s}=qN();return{id:e,type:$s.Character,name:n,x:i,y:s,hp:r}},GN=t=>Math.floor(Math.random()*20)+1+QN(t),QN=t=>Math.floor((t.abilities[te.DEX]-10)/2),pv={unit:KN,rollInitiative:GN},YN=({unit:t,setHitPoint:e,monster:n})=>M.jsxs("div",{className:"d-flex flex-row mb-2 p-2 border rounded align-items-center",children:[M.jsx(va,{...t,$isMonster:t.type===$s.Monster,children:t.id}),M.jsx("div",{className:"flex-grow-1 p-2",children:M.jsxs("div",{className:"fs-6",children:[M.jsx("span",{children:n.name}),t.hp<=0&&M.jsx("span",{className:"text-danger",children:"[]"})]})}),M.jsx("div",{className:"fs-5 px-2",children:"hp"}),M.jsx("select",{value:t.hp,className:"form-select form-select-lg w-25",onChange:r=>e(t.id,parseInt(r.target.value)),children:jn(n.hp+1).map(r=>M.jsx("option",{value:r,children:r},r))})]},t.name),XN=({units:t,setHitPoint:e,monster:n})=>M.jsxs("div",{children:[M.jsx("h5",{children:""}),t.filter(r=>r.type===$s.Monster).map(r=>M.jsx(YN,{unit:r,setHitPoint:e,monster:n},r.id))]}),JN=t=>{const[e,n]=b.useState(t),[r,i]=b.useState(".");return b.useEffect(()=>{_c(rr(Tn,"board","board"),o=>{var l;n(((l=o.data())==null?void 0:l.board)??t)})},[]),{board:e,flipCell:(o,l)=>{const u=e.map((h,f)=>h.split("").map((p,g)=>g===o&&f===l?p===ss.Empty?r:ss.Empty:p).join(""));ps(rr(Tn,"board","board"),{board:u}).then()},tile:r,setTile:i}},ZN=({board:t,flipCell:e})=>M.jsx(KE,{children:jn(oc).map(n=>jn(Ia).map(r=>M.jsx(Yp,{x:r,y:n,$backgroundColor:qE[t[n][r]]??"white",onClick:()=>e(r,n)},`${r}-${n}`)))}),eD=()=>{const[t,e]=b.useState([]),n=W1(Tn,"characters");return b.useEffect(()=>{_c(n,i=>e(i.docs.map(s=>s.data())))},[]),{characters:t,setCharacter:i=>{const{id:s}=i;ps(rr(Tn,"characters",s),i).then()}}},tD=({character:t,setActive:e,setDex:n,setHp:r})=>M.jsxs("div",{className:"d-flex flex-row mb-2 p-2 border rounded align-items-center",children:[M.jsxs("div",{className:"form-check form-switch me-4",children:[M.jsx("input",{className:"form-check-input",type:"checkbox",id:"isActive",checked:t.active,onChange:i=>{e(i.target.checked)}}),t.active?M.jsx("label",{className:"form-check-label",htmlFor:"isActive",children:""}):M.jsx("label",{className:"form-check-label",htmlFor:"isActive",children:""})]}),M.jsx(va,{...t,$isMonster:!1,children:t.id}),M.jsx("div",{className:"flex-grow-1 p-2",children:M.jsx("div",{className:"fs-6",children:M.jsx("span",{children:t.name})})}),M.jsx("div",{className:"fs-5 px-2",children:"hp"}),M.jsx("select",{value:t.hp,className:"form-select form-select-lg me-4",style:{width:"4em"},onChange:i=>r(parseInt(i.target.value)),children:jn(100).map(i=>M.jsx("option",{value:i,children:i},i))}),M.jsx("div",{className:"fs-5 px-2",children:""}),M.jsx("select",{value:t.abilities[te.DEX],className:"form-select form-select-lg",style:{width:"4em"},onChange:i=>n(parseInt(i.target.value)),children:jn(25).map(i=>M.jsx("option",{value:i,children:i},i))})]},t.id),nD=({characters:t,setCharacter:e})=>M.jsxs(M.Fragment,{children:[M.jsx("h5",{children:""}),Object.values(t).map(n=>M.jsx(tD,{character:n,setActive:r=>{const i={...n,active:r};e(i)},setDex:r=>{const i={...n,abilities:{...n.abilities,[te.DEX]:r}};e(i)},setHp:r=>{const i={...n,hp:r};e(i)}},n.id))]});function rD(){const{settings:t,setLevel:e,setNumCharacters:n,setDifficulty:r,totalExp:i}=BS(HS),{monster:s,reRollMonster:o}=ux(i),{units:l,move:u,setUnit:h,deleteUnit:f,setHitPoint:p}=fx(),{board:g,flipCell:S,tile:x,setTile:P}=JN(ap),{characters:N,setCharacter:E}=eD(),[_,I]=b.useState(!1),D=Object.values(N).filter(T=>T.active),L={[de.Setting]:()=>{o(),v(de.Monster)},[de.Monster]:o,[de.Character]:()=>{},[de.Room]:()=>{jn(s.num).forEach(T=>{const C=Ot.unit(s,T);h(C)}),jn(20-s.num).forEach(T=>{const C=`m${T+s.num}`;f(C)}),Object.values(N).forEach(T=>{const C=pv.rollInitiative(T);E({...T,initiative:C});const R=pv.unit(T);T.active?h(R):f(R.id)})},[de.HitPoint]:()=>{jn(s.num).forEach(T=>{const C=`m${T}`;p(C,s.hp)})},[de.EditRoom]:()=>{S(0,0)}},{page:V,setPage:v,reRollLabel:m,reRoll:w}=hx(L);return M.jsxs(M.Fragment,{children:[M.jsx(dx,{page:V,setPage:v,reRoll:w,reRollLabel:m,isMaster:_,setIsMaster:I}),M.jsxs("div",{className:"container-fluid",children:[V===de.Setting&&M.jsx(cx,{settings:t,setLevel:e,setNumCharacters:n,setDifficulty:r}),V===de.Character&&M.jsx(nD,{characters:N,setCharacter:E}),V===de.Monster&&M.jsx(zS,{monster:s}),V===de.Room&&M.jsx(HN,{units:l,move:u,monster:s,board:g,characters:D}),V===de.HitPoint&&M.jsx(XN,{units:l,setHitPoint:p,monster:s}),M.jsxs("select",{value:x,className:"form-select form-select-lg w-25 m-2",onChange:T=>P(T.target.value),children:[M.jsx("option",{value:"#",children:""},"wall"),M.jsx("option",{value:"W",children:""},"water"),M.jsx("option",{value:"S",children:""},"secret")]}),V===de.EditRoom&&M.jsx(ZN,{board:g,flipCell:S})]})]})}R_(document.getElementById("root")).render(M.jsx(b.StrictMode,{children:M.jsx(rD,{})}));
