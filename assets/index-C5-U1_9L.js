(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ew(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tv={exports:{}},$u={},nv={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pa=Symbol.for("react.element"),tw=Symbol.for("react.portal"),nw=Symbol.for("react.fragment"),rw=Symbol.for("react.strict_mode"),iw=Symbol.for("react.profiler"),sw=Symbol.for("react.provider"),ow=Symbol.for("react.context"),aw=Symbol.for("react.forward_ref"),lw=Symbol.for("react.suspense"),uw=Symbol.for("react.memo"),cw=Symbol.for("react.lazy"),Im=Symbol.iterator;function hw(t){return t===null||typeof t!="object"?null:(t=Im&&t[Im]||t["@@iterator"],typeof t=="function"?t:null)}var rv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iv=Object.assign,sv={};function Ds(t,e,n){this.props=t,this.context=e,this.refs=sv,this.updater=n||rv}Ds.prototype.isReactComponent={};Ds.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ds.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ov(){}ov.prototype=Ds.prototype;function Zd(t,e,n){this.props=t,this.context=e,this.refs=sv,this.updater=n||rv}var ef=Zd.prototype=new ov;ef.constructor=Zd;iv(ef,Ds.prototype);ef.isPureReactComponent=!0;var Am=Array.isArray,av=Object.prototype.hasOwnProperty,tf={current:null},lv={key:!0,ref:!0,__self:!0,__source:!0};function uv(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)av.call(e,r)&&!lv.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:pa,type:t,key:s,ref:o,props:i,_owner:tf.current}}function dw(t,e){return{$$typeof:pa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nf(t){return typeof t=="object"&&t!==null&&t.$$typeof===pa}function fw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cm=/\/+/g;function Lc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fw(""+t.key):e.toString(36)}function Il(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case pa:case tw:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Lc(o,0):r,Am(i)?(n="",t!=null&&(n=t.replace(Cm,"$&/")+"/"),Il(i,e,n,"",function(h){return h})):i!=null&&(nf(i)&&(i=dw(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Cm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Am(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Lc(s,l);o+=Il(s,e,n,u,i)}else if(u=hw(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Lc(s,l++),o+=Il(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function el(t,e,n){if(t==null)return t;var r=[],i=0;return Il(t,r,"","",function(s){return e.call(n,s,i++)}),r}function pw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kt={current:null},Al={transition:null},mw={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Al,ReactCurrentOwner:tf};function cv(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:el,forEach:function(t,e,n){el(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return el(t,function(){e++}),e},toArray:function(t){return el(t,function(e){return e})||[]},only:function(t){if(!nf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Ds;te.Fragment=nw;te.Profiler=iw;te.PureComponent=Zd;te.StrictMode=rw;te.Suspense=lw;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mw;te.act=cv;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=iv({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=tf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)av.call(e,u)&&!lv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:pa,type:t.type,key:i,ref:s,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:ow,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sw,_context:t},t.Consumer=t};te.createElement=uv;te.createFactory=function(t){var e=uv.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:aw,render:t}};te.isValidElement=nf;te.lazy=function(t){return{$$typeof:cw,_payload:{_status:-1,_result:t},_init:pw}};te.memo=function(t,e){return{$$typeof:uw,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Al.transition;Al.transition={};try{t()}finally{Al.transition=e}};te.unstable_act=cv;te.useCallback=function(t,e){return kt.current.useCallback(t,e)};te.useContext=function(t){return kt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return kt.current.useDeferredValue(t)};te.useEffect=function(t,e){return kt.current.useEffect(t,e)};te.useId=function(){return kt.current.useId()};te.useImperativeHandle=function(t,e,n){return kt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return kt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return kt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return kt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return kt.current.useReducer(t,e,n)};te.useRef=function(t){return kt.current.useRef(t)};te.useState=function(t){return kt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return kt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return kt.current.useTransition()};te.version="18.3.1";nv.exports=te;var b=nv.exports;const ct=ew(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gw=b,yw=Symbol.for("react.element"),vw=Symbol.for("react.fragment"),_w=Object.prototype.hasOwnProperty,Ew=gw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ww={key:!0,ref:!0,__self:!0,__source:!0};function hv(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_w.call(e,r)&&!ww.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:yw,type:t,key:s,ref:o,props:i,_owner:Ew.current}}$u.Fragment=vw;$u.jsx=hv;$u.jsxs=hv;tv.exports=$u;var L=tv.exports,dv={exports:{}},Gt={},fv={exports:{}},pv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,W){var Q=U.length;U.push(W);e:for(;0<Q;){var oe=Q-1>>>1,Y=U[oe];if(0<i(Y,W))U[oe]=W,U[Q]=Y,Q=oe;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var W=U[0],Q=U.pop();if(Q!==W){U[0]=Q;e:for(var oe=0,Y=U.length,ue=Y>>>1;oe<ue;){var Ye=2*(oe+1)-1,rt=U[Ye],fe=Ye+1,it=U[fe];if(0>i(rt,Q))fe<Y&&0>i(it,rt)?(U[oe]=it,U[fe]=Q,oe=fe):(U[oe]=rt,U[Ye]=Q,oe=Ye);else if(fe<Y&&0>i(it,Q))U[oe]=it,U[fe]=Q,oe=fe;else break e}}return W}function i(U,W){var Q=U.sortIndex-W.sortIndex;return Q!==0?Q:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,p=null,y=3,T=!1,P=!1,R=!1,D=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var W=n(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=U)r(h),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(h)}}function N(U){if(R=!1,S(U),!P)if(n(u)!==null)P=!0,An(O);else{var W=n(h);W!==null&&Ce(N,W.startTime-U)}}function O(U,W){P=!1,R&&(R=!1,E(m),m=-1),T=!0;var Q=y;try{for(S(W),p=n(u);p!==null&&(!(p.expirationTime>W)||U&&!C());){var oe=p.callback;if(typeof oe=="function"){p.callback=null,y=p.priorityLevel;var Y=oe(p.expirationTime<=W);W=t.unstable_now(),typeof Y=="function"?p.callback=Y:p===n(u)&&r(u),S(W)}else r(u);p=n(u)}if(p!==null)var ue=!0;else{var Ye=n(h);Ye!==null&&Ce(N,Ye.startTime-W),ue=!1}return ue}finally{p=null,y=Q,T=!1}}var M=!1,v=null,m=-1,w=5,I=-1;function C(){return!(t.unstable_now()-I<w)}function x(){if(v!==null){var U=t.unstable_now();I=U;var W=!0;try{W=v(!0,U)}finally{W?A():(M=!1,v=null)}}else M=!1}var A;if(typeof _=="function")A=function(){_(x)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Xt=Ae.port2;Ae.port1.onmessage=x,A=function(){Xt.postMessage(null)}}else A=function(){D(x,0)};function An(U){v=U,M||(M=!0,A())}function Ce(U,W){m=D(function(){U(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){P||T||(P=!0,An(O))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var Q=y;y=W;try{return U()}finally{y=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=y;y=U;try{return W()}finally{y=Q}},t.unstable_scheduleCallback=function(U,W,Q){var oe=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?oe+Q:oe):Q=oe,U){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=Q+Y,U={id:f++,callback:W,priorityLevel:U,startTime:Q,expirationTime:Y,sortIndex:-1},Q>oe?(U.sortIndex=Q,e(h,U),n(u)===null&&U===n(h)&&(R?(E(m),m=-1):R=!0,Ce(N,Q-oe))):(U.sortIndex=Y,e(u,U),P||T||(P=!0,An(O))),U},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(U){var W=y;return function(){var Q=y;y=W;try{return U.apply(this,arguments)}finally{y=Q}}}})(pv);fv.exports=pv;var Tw=fv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw=b,Qt=Tw;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mv=new Set,$o={};function Ai(t,e){ds(t,e),ds(t+"Capture",e)}function ds(t,e){for($o[t]=e,t=0;t<e.length;t++)mv.add(e[t])}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ph=Object.prototype.hasOwnProperty,Iw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rm={},Pm={};function Aw(t){return Ph.call(Pm,t)?!0:Ph.call(Rm,t)?!1:Iw.test(t)?Pm[t]=!0:(Rm[t]=!0,!1)}function Cw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Rw(t,e,n,r){if(e===null||typeof e>"u"||Cw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var rf=/[\-:]([a-z])/g;function sf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rf,sf);pt[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rf,sf);pt[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rf,sf);pt[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function of(t,e,n,r){var i=pt.hasOwnProperty(e)?pt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Rw(e,n,i,r)&&(n=null),r||i===null?Aw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ur=Sw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tl=Symbol.for("react.element"),zi=Symbol.for("react.portal"),Hi=Symbol.for("react.fragment"),af=Symbol.for("react.strict_mode"),xh=Symbol.for("react.profiler"),gv=Symbol.for("react.provider"),yv=Symbol.for("react.context"),lf=Symbol.for("react.forward_ref"),kh=Symbol.for("react.suspense"),Nh=Symbol.for("react.suspense_list"),uf=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),vv=Symbol.for("react.offscreen"),xm=Symbol.iterator;function to(t){return t===null||typeof t!="object"?null:(t=xm&&t[xm]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,Fc;function ho(t){if(Fc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fc=e&&e[1]||""}return`
`+Fc+t}var $c=!1;function Bc(t,e){if(!t||$c)return"";$c=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{$c=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ho(t):""}function Pw(t){switch(t.tag){case 5:return ho(t.type);case 16:return ho("Lazy");case 13:return ho("Suspense");case 19:return ho("SuspenseList");case 0:case 2:case 15:return t=Bc(t.type,!1),t;case 11:return t=Bc(t.type.render,!1),t;case 1:return t=Bc(t.type,!0),t;default:return""}}function Dh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hi:return"Fragment";case zi:return"Portal";case xh:return"Profiler";case af:return"StrictMode";case kh:return"Suspense";case Nh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yv:return(t.displayName||"Context")+".Consumer";case gv:return(t._context.displayName||"Context")+".Provider";case lf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case uf:return e=t.displayName||null,e!==null?e:Dh(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return Dh(t(e))}catch{}}return null}function xw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dh(e);case 8:return e===af?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _v(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kw(t){var e=_v(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nl(t){t._valueTracker||(t._valueTracker=kw(t))}function Ev(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_v(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Kl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mh(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function km(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=jr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wv(t,e){e=e.checked,e!=null&&of(t,"checked",e,!1)}function Vh(t,e){wv(t,e);var n=jr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Oh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Oh(t,e.type,jr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Nm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Oh(t,e,n){(e!=="number"||Kl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fo=Array.isArray;function rs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+jr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function bh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(fo(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:jr(n)}}function Tv(t,e){var n=jr(e.value),r=jr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Mm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Sv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Sv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rl,Iv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(rl=rl||document.createElement("div"),rl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nw=["Webkit","ms","Moz","O"];Object.keys(wo).forEach(function(t){Nw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wo[e]=wo[t]})});function Av(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wo.hasOwnProperty(t)&&wo[t]?(""+e).trim():e+"px"}function Cv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Av(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Dw=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fh(t,e){if(e){if(Dw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function $h(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bh=null;function cf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jh=null,is=null,ss=null;function Vm(t){if(t=ya(t)){if(typeof jh!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Hu(e),jh(t.stateNode,t.type,e))}}function Rv(t){is?ss?ss.push(t):ss=[t]:is=t}function Pv(){if(is){var t=is,e=ss;if(ss=is=null,Vm(t),e)for(t=0;t<e.length;t++)Vm(e[t])}}function xv(t,e){return t(e)}function kv(){}var jc=!1;function Nv(t,e,n){if(jc)return t(e,n);jc=!0;try{return xv(t,e,n)}finally{jc=!1,(is!==null||ss!==null)&&(kv(),Pv())}}function jo(t,e){var n=t.stateNode;if(n===null)return null;var r=Hu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Uh=!1;if(tr)try{var no={};Object.defineProperty(no,"passive",{get:function(){Uh=!0}}),window.addEventListener("test",no,no),window.removeEventListener("test",no,no)}catch{Uh=!1}function Mw(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var To=!1,Ql=null,Gl=!1,zh=null,Vw={onError:function(t){To=!0,Ql=t}};function Ow(t,e,n,r,i,s,o,l,u){To=!1,Ql=null,Mw.apply(Vw,arguments)}function bw(t,e,n,r,i,s,o,l,u){if(Ow.apply(this,arguments),To){if(To){var h=Ql;To=!1,Ql=null}else throw Error(B(198));Gl||(Gl=!0,zh=h)}}function Ci(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Dv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Om(t){if(Ci(t)!==t)throw Error(B(188))}function Lw(t){var e=t.alternate;if(!e){if(e=Ci(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Om(i),t;if(s===r)return Om(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function Mv(t){return t=Lw(t),t!==null?Vv(t):null}function Vv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vv(t);if(e!==null)return e;t=t.sibling}return null}var Ov=Qt.unstable_scheduleCallback,bm=Qt.unstable_cancelCallback,Fw=Qt.unstable_shouldYield,$w=Qt.unstable_requestPaint,$e=Qt.unstable_now,Bw=Qt.unstable_getCurrentPriorityLevel,hf=Qt.unstable_ImmediatePriority,bv=Qt.unstable_UserBlockingPriority,Yl=Qt.unstable_NormalPriority,jw=Qt.unstable_LowPriority,Lv=Qt.unstable_IdlePriority,Bu=null,Vn=null;function Uw(t){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(Bu,t,void 0,(t.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:Ww,zw=Math.log,Hw=Math.LN2;function Ww(t){return t>>>=0,t===0?32:31-(zw(t)/Hw|0)|0}var il=64,sl=4194304;function po(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=po(l):(s&=o,s!==0&&(r=po(s)))}else o=n&~i,o!==0?r=po(o):s!==0&&(r=po(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-En(e),i=1<<n,r|=t[n],e&=~i;return r}function qw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-En(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=qw(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Hh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Fv(){var t=il;return il<<=1,!(il&4194240)&&(il=64),t}function Uc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ma(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-En(e),t[e]=n}function Qw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-En(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function df(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-En(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var he=0;function $v(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Bv,ff,jv,Uv,zv,Wh=!1,ol=[],xr=null,kr=null,Nr=null,Uo=new Map,zo=new Map,Sr=[],Gw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lm(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":Uo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zo.delete(e.pointerId)}}function ro(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ya(e),e!==null&&ff(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Yw(t,e,n,r,i){switch(e){case"focusin":return xr=ro(xr,t,e,n,r,i),!0;case"dragenter":return kr=ro(kr,t,e,n,r,i),!0;case"mouseover":return Nr=ro(Nr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Uo.set(s,ro(Uo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,zo.set(s,ro(zo.get(s)||null,t,e,n,r,i)),!0}return!1}function Hv(t){var e=si(t.target);if(e!==null){var n=Ci(e);if(n!==null){if(e=n.tag,e===13){if(e=Dv(n),e!==null){t.blockedOn=e,zv(t.priority,function(){jv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bh=r,n.target.dispatchEvent(r),Bh=null}else return e=ya(n),e!==null&&ff(e),t.blockedOn=n,!1;e.shift()}return!0}function Fm(t,e,n){Cl(t)&&n.delete(e)}function Xw(){Wh=!1,xr!==null&&Cl(xr)&&(xr=null),kr!==null&&Cl(kr)&&(kr=null),Nr!==null&&Cl(Nr)&&(Nr=null),Uo.forEach(Fm),zo.forEach(Fm)}function io(t,e){t.blockedOn===e&&(t.blockedOn=null,Wh||(Wh=!0,Qt.unstable_scheduleCallback(Qt.unstable_NormalPriority,Xw)))}function Ho(t){function e(i){return io(i,t)}if(0<ol.length){io(ol[0],t);for(var n=1;n<ol.length;n++){var r=ol[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&io(xr,t),kr!==null&&io(kr,t),Nr!==null&&io(Nr,t),Uo.forEach(e),zo.forEach(e),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)Hv(n),n.blockedOn===null&&Sr.shift()}var os=ur.ReactCurrentBatchConfig,Jl=!0;function Jw(t,e,n,r){var i=he,s=os.transition;os.transition=null;try{he=1,pf(t,e,n,r)}finally{he=i,os.transition=s}}function Zw(t,e,n,r){var i=he,s=os.transition;os.transition=null;try{he=4,pf(t,e,n,r)}finally{he=i,os.transition=s}}function pf(t,e,n,r){if(Jl){var i=qh(t,e,n,r);if(i===null)Jc(t,e,r,Zl,n),Lm(t,r);else if(Yw(i,t,e,n,r))r.stopPropagation();else if(Lm(t,r),e&4&&-1<Gw.indexOf(t)){for(;i!==null;){var s=ya(i);if(s!==null&&Bv(s),s=qh(t,e,n,r),s===null&&Jc(t,e,r,Zl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Jc(t,e,r,null,n)}}var Zl=null;function qh(t,e,n,r){if(Zl=null,t=cf(r),t=si(t),t!==null)if(e=Ci(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Dv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zl=t,null}function Wv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bw()){case hf:return 1;case bv:return 4;case Yl:case jw:return 16;case Lv:return 536870912;default:return 16}default:return 16}}var Ar=null,mf=null,Rl=null;function qv(){if(Rl)return Rl;var t,e=mf,n=e.length,r,i="value"in Ar?Ar.value:Ar.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Rl=i.slice(t,1<r?1-r:void 0)}function Pl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function al(){return!0}function $m(){return!1}function Yt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?al:$m,this.isPropagationStopped=$m,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=al)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=al)},persist:function(){},isPersistent:al}),e}var Ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gf=Yt(Ms),ga=Ne({},Ms,{view:0,detail:0}),eT=Yt(ga),zc,Hc,so,ju=Ne({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==so&&(so&&t.type==="mousemove"?(zc=t.screenX-so.screenX,Hc=t.screenY-so.screenY):Hc=zc=0,so=t),zc)},movementY:function(t){return"movementY"in t?t.movementY:Hc}}),Bm=Yt(ju),tT=Ne({},ju,{dataTransfer:0}),nT=Yt(tT),rT=Ne({},ga,{relatedTarget:0}),Wc=Yt(rT),iT=Ne({},Ms,{animationName:0,elapsedTime:0,pseudoElement:0}),sT=Yt(iT),oT=Ne({},Ms,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aT=Yt(oT),lT=Ne({},Ms,{data:0}),jm=Yt(lT),uT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hT[t])?!!e[t]:!1}function yf(){return dT}var fT=Ne({},ga,{key:function(t){if(t.key){var e=uT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yf,charCode:function(t){return t.type==="keypress"?Pl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pT=Yt(fT),mT=Ne({},ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Um=Yt(mT),gT=Ne({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yf}),yT=Yt(gT),vT=Ne({},Ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),_T=Yt(vT),ET=Ne({},ju,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wT=Yt(ET),TT=[9,13,27,32],vf=tr&&"CompositionEvent"in window,So=null;tr&&"documentMode"in document&&(So=document.documentMode);var ST=tr&&"TextEvent"in window&&!So,Kv=tr&&(!vf||So&&8<So&&11>=So),zm=" ",Hm=!1;function Qv(t,e){switch(t){case"keyup":return TT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wi=!1;function IT(t,e){switch(t){case"compositionend":return Gv(e);case"keypress":return e.which!==32?null:(Hm=!0,zm);case"textInput":return t=e.data,t===zm&&Hm?null:t;default:return null}}function AT(t,e){if(Wi)return t==="compositionend"||!vf&&Qv(t,e)?(t=qv(),Rl=mf=Ar=null,Wi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kv&&e.locale!=="ko"?null:e.data;default:return null}}var CT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!CT[t.type]:e==="textarea"}function Yv(t,e,n,r){Rv(r),e=eu(e,"onChange"),0<e.length&&(n=new gf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Io=null,Wo=null;function RT(t){a0(t,0)}function Uu(t){var e=Qi(t);if(Ev(e))return t}function PT(t,e){if(t==="change")return e}var Xv=!1;if(tr){var qc;if(tr){var Kc="oninput"in document;if(!Kc){var qm=document.createElement("div");qm.setAttribute("oninput","return;"),Kc=typeof qm.oninput=="function"}qc=Kc}else qc=!1;Xv=qc&&(!document.documentMode||9<document.documentMode)}function Km(){Io&&(Io.detachEvent("onpropertychange",Jv),Wo=Io=null)}function Jv(t){if(t.propertyName==="value"&&Uu(Wo)){var e=[];Yv(e,Wo,t,cf(t)),Nv(RT,e)}}function xT(t,e,n){t==="focusin"?(Km(),Io=e,Wo=n,Io.attachEvent("onpropertychange",Jv)):t==="focusout"&&Km()}function kT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uu(Wo)}function NT(t,e){if(t==="click")return Uu(e)}function DT(t,e){if(t==="input"||t==="change")return Uu(e)}function MT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sn=typeof Object.is=="function"?Object.is:MT;function qo(t,e){if(Sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ph.call(e,i)||!Sn(t[i],e[i]))return!1}return!0}function Qm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gm(t,e){var n=Qm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qm(n)}}function Zv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function e0(){for(var t=window,e=Kl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kl(t.document)}return e}function _f(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function VT(t){var e=e0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Zv(n.ownerDocument.documentElement,n)){if(r!==null&&_f(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Gm(n,s);var o=Gm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OT=tr&&"documentMode"in document&&11>=document.documentMode,qi=null,Kh=null,Ao=null,Qh=!1;function Ym(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qh||qi==null||qi!==Kl(r)||(r=qi,"selectionStart"in r&&_f(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ao&&qo(Ao,r)||(Ao=r,r=eu(Kh,"onSelect"),0<r.length&&(e=new gf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qi)))}function ll(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ki={animationend:ll("Animation","AnimationEnd"),animationiteration:ll("Animation","AnimationIteration"),animationstart:ll("Animation","AnimationStart"),transitionend:ll("Transition","TransitionEnd")},Qc={},t0={};tr&&(t0=document.createElement("div").style,"AnimationEvent"in window||(delete Ki.animationend.animation,delete Ki.animationiteration.animation,delete Ki.animationstart.animation),"TransitionEvent"in window||delete Ki.transitionend.transition);function zu(t){if(Qc[t])return Qc[t];if(!Ki[t])return t;var e=Ki[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in t0)return Qc[t]=e[n];return t}var n0=zu("animationend"),r0=zu("animationiteration"),i0=zu("animationstart"),s0=zu("transitionend"),o0=new Map,Xm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qr(t,e){o0.set(t,e),Ai(e,[t])}for(var Gc=0;Gc<Xm.length;Gc++){var Yc=Xm[Gc],bT=Yc.toLowerCase(),LT=Yc[0].toUpperCase()+Yc.slice(1);qr(bT,"on"+LT)}qr(n0,"onAnimationEnd");qr(r0,"onAnimationIteration");qr(i0,"onAnimationStart");qr("dblclick","onDoubleClick");qr("focusin","onFocus");qr("focusout","onBlur");qr(s0,"onTransitionEnd");ds("onMouseEnter",["mouseout","mouseover"]);ds("onMouseLeave",["mouseout","mouseover"]);ds("onPointerEnter",["pointerout","pointerover"]);ds("onPointerLeave",["pointerout","pointerover"]);Ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ai("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FT=new Set("cancel close invalid load scroll toggle".split(" ").concat(mo));function Jm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bw(r,e,void 0,t),t.currentTarget=null}function a0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Jm(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Jm(i,l,h),s=u}}}if(Gl)throw t=zh,Gl=!1,zh=null,t}function Ee(t,e){var n=e[Zh];n===void 0&&(n=e[Zh]=new Set);var r=t+"__bubble";n.has(r)||(l0(e,t,2,!1),n.add(r))}function Xc(t,e,n){var r=0;e&&(r|=4),l0(n,t,r,e)}var ul="_reactListening"+Math.random().toString(36).slice(2);function Ko(t){if(!t[ul]){t[ul]=!0,mv.forEach(function(n){n!=="selectionchange"&&(FT.has(n)||Xc(n,!1,t),Xc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ul]||(e[ul]=!0,Xc("selectionchange",!1,e))}}function l0(t,e,n,r){switch(Wv(e)){case 1:var i=Jw;break;case 4:i=Zw;break;default:i=pf}n=i.bind(null,e,n,t),i=void 0,!Uh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Jc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=si(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Nv(function(){var h=s,f=cf(n),p=[];e:{var y=o0.get(t);if(y!==void 0){var T=gf,P=t;switch(t){case"keypress":if(Pl(n)===0)break e;case"keydown":case"keyup":T=pT;break;case"focusin":P="focus",T=Wc;break;case"focusout":P="blur",T=Wc;break;case"beforeblur":case"afterblur":T=Wc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=nT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=yT;break;case n0:case r0:case i0:T=sT;break;case s0:T=_T;break;case"scroll":T=eT;break;case"wheel":T=wT;break;case"copy":case"cut":case"paste":T=aT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Um}var R=(e&4)!==0,D=!R&&t==="scroll",E=R?y!==null?y+"Capture":null:y;R=[];for(var _=h,S;_!==null;){S=_;var N=S.stateNode;if(S.tag===5&&N!==null&&(S=N,E!==null&&(N=jo(_,E),N!=null&&R.push(Qo(_,N,S)))),D)break;_=_.return}0<R.length&&(y=new T(y,P,null,n,f),p.push({event:y,listeners:R}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",y&&n!==Bh&&(P=n.relatedTarget||n.fromElement)&&(si(P)||P[nr]))break e;if((T||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,T?(P=n.relatedTarget||n.toElement,T=h,P=P?si(P):null,P!==null&&(D=Ci(P),P!==D||P.tag!==5&&P.tag!==6)&&(P=null)):(T=null,P=h),T!==P)){if(R=Bm,N="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(R=Um,N="onPointerLeave",E="onPointerEnter",_="pointer"),D=T==null?y:Qi(T),S=P==null?y:Qi(P),y=new R(N,_+"leave",T,n,f),y.target=D,y.relatedTarget=S,N=null,si(f)===h&&(R=new R(E,_+"enter",P,n,f),R.target=S,R.relatedTarget=D,N=R),D=N,T&&P)t:{for(R=T,E=P,_=0,S=R;S;S=Fi(S))_++;for(S=0,N=E;N;N=Fi(N))S++;for(;0<_-S;)R=Fi(R),_--;for(;0<S-_;)E=Fi(E),S--;for(;_--;){if(R===E||E!==null&&R===E.alternate)break t;R=Fi(R),E=Fi(E)}R=null}else R=null;T!==null&&Zm(p,y,T,R,!1),P!==null&&D!==null&&Zm(p,D,P,R,!0)}}e:{if(y=h?Qi(h):window,T=y.nodeName&&y.nodeName.toLowerCase(),T==="select"||T==="input"&&y.type==="file")var O=PT;else if(Wm(y))if(Xv)O=DT;else{O=kT;var M=xT}else(T=y.nodeName)&&T.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(O=NT);if(O&&(O=O(t,h))){Yv(p,O,n,f);break e}M&&M(t,y,h),t==="focusout"&&(M=y._wrapperState)&&M.controlled&&y.type==="number"&&Oh(y,"number",y.value)}switch(M=h?Qi(h):window,t){case"focusin":(Wm(M)||M.contentEditable==="true")&&(qi=M,Kh=h,Ao=null);break;case"focusout":Ao=Kh=qi=null;break;case"mousedown":Qh=!0;break;case"contextmenu":case"mouseup":case"dragend":Qh=!1,Ym(p,n,f);break;case"selectionchange":if(OT)break;case"keydown":case"keyup":Ym(p,n,f)}var v;if(vf)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else Wi?Qv(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(Kv&&n.locale!=="ko"&&(Wi||m!=="onCompositionStart"?m==="onCompositionEnd"&&Wi&&(v=qv()):(Ar=f,mf="value"in Ar?Ar.value:Ar.textContent,Wi=!0)),M=eu(h,m),0<M.length&&(m=new jm(m,t,null,n,f),p.push({event:m,listeners:M}),v?m.data=v:(v=Gv(n),v!==null&&(m.data=v)))),(v=ST?IT(t,n):AT(t,n))&&(h=eu(h,"onBeforeInput"),0<h.length&&(f=new jm("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:h}),f.data=v))}a0(p,e)})}function Qo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function eu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=jo(t,n),s!=null&&r.unshift(Qo(t,s,i)),s=jo(t,e),s!=null&&r.push(Qo(t,s,i))),t=t.return}return r}function Fi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zm(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=jo(n,s),u!=null&&o.unshift(Qo(n,u,l))):i||(u=jo(n,s),u!=null&&o.push(Qo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $T=/\r\n?/g,BT=/\u0000|\uFFFD/g;function eg(t){return(typeof t=="string"?t:""+t).replace($T,`
`).replace(BT,"")}function cl(t,e,n){if(e=eg(e),eg(t)!==e&&n)throw Error(B(425))}function tu(){}var Gh=null,Yh=null;function Xh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jh=typeof setTimeout=="function"?setTimeout:void 0,jT=typeof clearTimeout=="function"?clearTimeout:void 0,tg=typeof Promise=="function"?Promise:void 0,UT=typeof queueMicrotask=="function"?queueMicrotask:typeof tg<"u"?function(t){return tg.resolve(null).then(t).catch(zT)}:Jh;function zT(t){setTimeout(function(){throw t})}function Zc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ho(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ho(e)}function Dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ng(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vs=Math.random().toString(36).slice(2),Mn="__reactFiber$"+Vs,Go="__reactProps$"+Vs,nr="__reactContainer$"+Vs,Zh="__reactEvents$"+Vs,HT="__reactListeners$"+Vs,WT="__reactHandles$"+Vs;function si(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nr]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ng(t);t!==null;){if(n=t[Mn])return n;t=ng(t)}return e}t=n,n=t.parentNode}return null}function ya(t){return t=t[Mn]||t[nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Hu(t){return t[Go]||null}var ed=[],Gi=-1;function Kr(t){return{current:t}}function Te(t){0>Gi||(t.current=ed[Gi],ed[Gi]=null,Gi--)}function ve(t,e){Gi++,ed[Gi]=t.current,t.current=e}var Ur={},Ct=Kr(Ur),bt=Kr(!1),yi=Ur;function fs(t,e){var n=t.type.contextTypes;if(!n)return Ur;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Lt(t){return t=t.childContextTypes,t!=null}function nu(){Te(bt),Te(Ct)}function rg(t,e,n){if(Ct.current!==Ur)throw Error(B(168));ve(Ct,e),ve(bt,n)}function u0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,xw(t)||"Unknown",i));return Ne({},n,r)}function ru(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ur,yi=Ct.current,ve(Ct,t),ve(bt,bt.current),!0}function ig(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=u0(t,e,yi),r.__reactInternalMemoizedMergedChildContext=t,Te(bt),Te(Ct),ve(Ct,t)):Te(bt),ve(bt,n)}var Qn=null,Wu=!1,eh=!1;function c0(t){Qn===null?Qn=[t]:Qn.push(t)}function qT(t){Wu=!0,c0(t)}function Qr(){if(!eh&&Qn!==null){eh=!0;var t=0,e=he;try{var n=Qn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qn=null,Wu=!1}catch(i){throw Qn!==null&&(Qn=Qn.slice(t+1)),Ov(hf,Qr),i}finally{he=e,eh=!1}}return null}var Yi=[],Xi=0,iu=null,su=0,rn=[],sn=0,vi=null,Yn=1,Xn="";function ei(t,e){Yi[Xi++]=su,Yi[Xi++]=iu,iu=t,su=e}function h0(t,e,n){rn[sn++]=Yn,rn[sn++]=Xn,rn[sn++]=vi,vi=t;var r=Yn;t=Xn;var i=32-En(r)-1;r&=~(1<<i),n+=1;var s=32-En(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yn=1<<32-En(e)+i|n<<i|r,Xn=s+t}else Yn=1<<s|n<<i|r,Xn=t}function Ef(t){t.return!==null&&(ei(t,1),h0(t,1,0))}function wf(t){for(;t===iu;)iu=Yi[--Xi],Yi[Xi]=null,su=Yi[--Xi],Yi[Xi]=null;for(;t===vi;)vi=rn[--sn],rn[sn]=null,Xn=rn[--sn],rn[sn]=null,Yn=rn[--sn],rn[sn]=null}var qt=null,Wt=null,Se=!1,vn=null;function d0(t,e){var n=an(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,Wt=Dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vi!==null?{id:Yn,overflow:Xn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=an(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,Wt=null,!0):!1;default:return!1}}function td(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nd(t){if(Se){var e=Wt;if(e){var n=e;if(!sg(t,e)){if(td(t))throw Error(B(418));e=Dr(n.nextSibling);var r=qt;e&&sg(t,e)?d0(r,n):(t.flags=t.flags&-4097|2,Se=!1,qt=t)}}else{if(td(t))throw Error(B(418));t.flags=t.flags&-4097|2,Se=!1,qt=t}}}function og(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function hl(t){if(t!==qt)return!1;if(!Se)return og(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xh(t.type,t.memoizedProps)),e&&(e=Wt)){if(td(t))throw f0(),Error(B(418));for(;e;)d0(t,e),e=Dr(e.nextSibling)}if(og(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=Dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=qt?Dr(t.stateNode.nextSibling):null;return!0}function f0(){for(var t=Wt;t;)t=Dr(t.nextSibling)}function ps(){Wt=qt=null,Se=!1}function Tf(t){vn===null?vn=[t]:vn.push(t)}var KT=ur.ReactCurrentBatchConfig;function oo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function dl(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ag(t){var e=t._init;return e(t._payload)}function p0(t){function e(E,_){if(t){var S=E.deletions;S===null?(E.deletions=[_],E.flags|=16):S.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function i(E,_){return E=br(E,_),E.index=0,E.sibling=null,E}function s(E,_,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<_?(E.flags|=2,_):S):(E.flags|=2,_)):(E.flags|=1048576,_)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,_,S,N){return _===null||_.tag!==6?(_=ah(S,E.mode,N),_.return=E,_):(_=i(_,S),_.return=E,_)}function u(E,_,S,N){var O=S.type;return O===Hi?f(E,_,S.props.children,N,S.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Er&&ag(O)===_.type)?(N=i(_,S.props),N.ref=oo(E,_,S),N.return=E,N):(N=Ol(S.type,S.key,S.props,null,E.mode,N),N.ref=oo(E,_,S),N.return=E,N)}function h(E,_,S,N){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=lh(S,E.mode,N),_.return=E,_):(_=i(_,S.children||[]),_.return=E,_)}function f(E,_,S,N,O){return _===null||_.tag!==7?(_=hi(S,E.mode,N,O),_.return=E,_):(_=i(_,S),_.return=E,_)}function p(E,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=ah(""+_,E.mode,S),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case tl:return S=Ol(_.type,_.key,_.props,null,E.mode,S),S.ref=oo(E,null,_),S.return=E,S;case zi:return _=lh(_,E.mode,S),_.return=E,_;case Er:var N=_._init;return p(E,N(_._payload),S)}if(fo(_)||to(_))return _=hi(_,E.mode,S,null),_.return=E,_;dl(E,_)}return null}function y(E,_,S,N){var O=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return O!==null?null:l(E,_,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case tl:return S.key===O?u(E,_,S,N):null;case zi:return S.key===O?h(E,_,S,N):null;case Er:return O=S._init,y(E,_,O(S._payload),N)}if(fo(S)||to(S))return O!==null?null:f(E,_,S,N,null);dl(E,S)}return null}function T(E,_,S,N,O){if(typeof N=="string"&&N!==""||typeof N=="number")return E=E.get(S)||null,l(_,E,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case tl:return E=E.get(N.key===null?S:N.key)||null,u(_,E,N,O);case zi:return E=E.get(N.key===null?S:N.key)||null,h(_,E,N,O);case Er:var M=N._init;return T(E,_,S,M(N._payload),O)}if(fo(N)||to(N))return E=E.get(S)||null,f(_,E,N,O,null);dl(_,N)}return null}function P(E,_,S,N){for(var O=null,M=null,v=_,m=_=0,w=null;v!==null&&m<S.length;m++){v.index>m?(w=v,v=null):w=v.sibling;var I=y(E,v,S[m],N);if(I===null){v===null&&(v=w);break}t&&v&&I.alternate===null&&e(E,v),_=s(I,_,m),M===null?O=I:M.sibling=I,M=I,v=w}if(m===S.length)return n(E,v),Se&&ei(E,m),O;if(v===null){for(;m<S.length;m++)v=p(E,S[m],N),v!==null&&(_=s(v,_,m),M===null?O=v:M.sibling=v,M=v);return Se&&ei(E,m),O}for(v=r(E,v);m<S.length;m++)w=T(v,E,m,S[m],N),w!==null&&(t&&w.alternate!==null&&v.delete(w.key===null?m:w.key),_=s(w,_,m),M===null?O=w:M.sibling=w,M=w);return t&&v.forEach(function(C){return e(E,C)}),Se&&ei(E,m),O}function R(E,_,S,N){var O=to(S);if(typeof O!="function")throw Error(B(150));if(S=O.call(S),S==null)throw Error(B(151));for(var M=O=null,v=_,m=_=0,w=null,I=S.next();v!==null&&!I.done;m++,I=S.next()){v.index>m?(w=v,v=null):w=v.sibling;var C=y(E,v,I.value,N);if(C===null){v===null&&(v=w);break}t&&v&&C.alternate===null&&e(E,v),_=s(C,_,m),M===null?O=C:M.sibling=C,M=C,v=w}if(I.done)return n(E,v),Se&&ei(E,m),O;if(v===null){for(;!I.done;m++,I=S.next())I=p(E,I.value,N),I!==null&&(_=s(I,_,m),M===null?O=I:M.sibling=I,M=I);return Se&&ei(E,m),O}for(v=r(E,v);!I.done;m++,I=S.next())I=T(v,E,m,I.value,N),I!==null&&(t&&I.alternate!==null&&v.delete(I.key===null?m:I.key),_=s(I,_,m),M===null?O=I:M.sibling=I,M=I);return t&&v.forEach(function(x){return e(E,x)}),Se&&ei(E,m),O}function D(E,_,S,N){if(typeof S=="object"&&S!==null&&S.type===Hi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case tl:e:{for(var O=S.key,M=_;M!==null;){if(M.key===O){if(O=S.type,O===Hi){if(M.tag===7){n(E,M.sibling),_=i(M,S.props.children),_.return=E,E=_;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Er&&ag(O)===M.type){n(E,M.sibling),_=i(M,S.props),_.ref=oo(E,M,S),_.return=E,E=_;break e}n(E,M);break}else e(E,M);M=M.sibling}S.type===Hi?(_=hi(S.props.children,E.mode,N,S.key),_.return=E,E=_):(N=Ol(S.type,S.key,S.props,null,E.mode,N),N.ref=oo(E,_,S),N.return=E,E=N)}return o(E);case zi:e:{for(M=S.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(E,_.sibling),_=i(_,S.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=lh(S,E.mode,N),_.return=E,E=_}return o(E);case Er:return M=S._init,D(E,_,M(S._payload),N)}if(fo(S))return P(E,_,S,N);if(to(S))return R(E,_,S,N);dl(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(E,_.sibling),_=i(_,S),_.return=E,E=_):(n(E,_),_=ah(S,E.mode,N),_.return=E,E=_),o(E)):n(E,_)}return D}var ms=p0(!0),m0=p0(!1),ou=Kr(null),au=null,Ji=null,Sf=null;function If(){Sf=Ji=au=null}function Af(t){var e=ou.current;Te(ou),t._currentValue=e}function rd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function as(t,e){au=t,Sf=Ji=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function un(t){var e=t._currentValue;if(Sf!==t)if(t={context:t,memoizedValue:e,next:null},Ji===null){if(au===null)throw Error(B(308));Ji=t,au.dependencies={lanes:0,firstContext:t}}else Ji=Ji.next=t;return e}var oi=null;function Cf(t){oi===null?oi=[t]:oi.push(t)}function g0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Cf(e)):(n.next=i.next,i.next=n),e.interleaved=n,rr(t,r)}function rr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wr=!1;function Rf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function y0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,rr(t,n)}return i=r.interleaved,i===null?(e.next=e,Cf(r)):(e.next=i.next,i.next=e),r.interleaved=e,rr(t,n)}function xl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,df(t,n)}}function lg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lu(t,e,n,r){var i=t.updateQueue;wr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,f=h=u=null,l=s;do{var y=l.lane,T=l.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,R=l;switch(y=e,T=n,R.tag){case 1:if(P=R.payload,typeof P=="function"){p=P.call(T,p,y);break e}p=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=R.payload,y=typeof P=="function"?P.call(T,p,y):P,y==null)break e;p=Ne({},p,y);break e;case 2:wr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[l]:y.push(l))}else T={eventTime:T,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=T,u=p):f=f.next=T,o|=y;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ei|=o,t.lanes=o,t.memoizedState=p}}function ug(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var va={},On=Kr(va),Yo=Kr(va),Xo=Kr(va);function ai(t){if(t===va)throw Error(B(174));return t}function Pf(t,e){switch(ve(Xo,e),ve(Yo,t),ve(On,va),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lh(e,t)}Te(On),ve(On,e)}function gs(){Te(On),Te(Yo),Te(Xo)}function v0(t){ai(Xo.current);var e=ai(On.current),n=Lh(e,t.type);e!==n&&(ve(Yo,t),ve(On,n))}function xf(t){Yo.current===t&&(Te(On),Te(Yo))}var xe=Kr(0);function uu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var th=[];function kf(){for(var t=0;t<th.length;t++)th[t]._workInProgressVersionPrimary=null;th.length=0}var kl=ur.ReactCurrentDispatcher,nh=ur.ReactCurrentBatchConfig,_i=0,ke=null,We=null,Ze=null,cu=!1,Co=!1,Jo=0,QT=0;function Et(){throw Error(B(321))}function Nf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sn(t[n],e[n]))return!1;return!0}function Df(t,e,n,r,i,s){if(_i=s,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kl.current=t===null||t.memoizedState===null?JT:ZT,t=n(r,i),Co){s=0;do{if(Co=!1,Jo=0,25<=s)throw Error(B(301));s+=1,Ze=We=null,e.updateQueue=null,kl.current=eS,t=n(r,i)}while(Co)}if(kl.current=hu,e=We!==null&&We.next!==null,_i=0,Ze=We=ke=null,cu=!1,e)throw Error(B(300));return t}function Mf(){var t=Jo!==0;return Jo=0,t}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?ke.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function cn(){if(We===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Ze===null?ke.memoizedState:Ze.next;if(e!==null)Ze=e,We=t;else{if(t===null)throw Error(B(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ze===null?ke.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function Zo(t,e){return typeof e=="function"?e(t):e}function rh(t){var e=cn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=We,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var f=h.lane;if((_i&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,ke.lanes|=f,Ei|=f}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,Sn(r,e.memoizedState)||(Vt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ke.lanes|=s,Ei|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ih(t){var e=cn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Sn(s,e.memoizedState)||(Vt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function _0(){}function E0(t,e){var n=ke,r=cn(),i=e(),s=!Sn(r.memoizedState,i);if(s&&(r.memoizedState=i,Vt=!0),r=r.queue,Vf(S0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,ea(9,T0.bind(null,n,r,i,e),void 0,null),nt===null)throw Error(B(349));_i&30||w0(n,e,i)}return i}function w0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function T0(t,e,n,r){e.value=n,e.getSnapshot=r,I0(e)&&A0(t)}function S0(t,e,n){return n(function(){I0(e)&&A0(t)})}function I0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sn(t,n)}catch{return!0}}function A0(t){var e=rr(t,1);e!==null&&wn(e,t,1,-1)}function cg(t){var e=Nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:t},e.queue=t,t=t.dispatch=XT.bind(null,ke,t),[e.memoizedState,t]}function ea(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function C0(){return cn().memoizedState}function Nl(t,e,n,r){var i=Nn();ke.flags|=t,i.memoizedState=ea(1|e,n,void 0,r===void 0?null:r)}function qu(t,e,n,r){var i=cn();r=r===void 0?null:r;var s=void 0;if(We!==null){var o=We.memoizedState;if(s=o.destroy,r!==null&&Nf(r,o.deps)){i.memoizedState=ea(e,n,s,r);return}}ke.flags|=t,i.memoizedState=ea(1|e,n,s,r)}function hg(t,e){return Nl(8390656,8,t,e)}function Vf(t,e){return qu(2048,8,t,e)}function R0(t,e){return qu(4,2,t,e)}function P0(t,e){return qu(4,4,t,e)}function x0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function k0(t,e,n){return n=n!=null?n.concat([t]):null,qu(4,4,x0.bind(null,e,t),n)}function Of(){}function N0(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function D0(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function M0(t,e,n){return _i&21?(Sn(n,e)||(n=Fv(),ke.lanes|=n,Ei|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function GT(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=nh.transition;nh.transition={};try{t(!1),e()}finally{he=n,nh.transition=r}}function V0(){return cn().memoizedState}function YT(t,e,n){var r=Or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},O0(t))b0(e,n);else if(n=g0(t,e,n,r),n!==null){var i=xt();wn(n,t,r,i),L0(n,e,r)}}function XT(t,e,n){var r=Or(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(O0(t))b0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Sn(l,o)){var u=e.interleaved;u===null?(i.next=i,Cf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=g0(t,e,i,r),n!==null&&(i=xt(),wn(n,t,r,i),L0(n,e,r))}}function O0(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function b0(t,e){Co=cu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function L0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,df(t,n)}}var hu={readContext:un,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},JT={readContext:un,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:un,useEffect:hg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Nl(4194308,4,x0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nl(4,2,t,e)},useMemo:function(t,e){var n=Nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YT.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:cg,useDebugValue:Of,useDeferredValue:function(t){return Nn().memoizedState=t},useTransition:function(){var t=cg(!1),e=t[0];return t=GT.bind(null,t[1]),Nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ke,i=Nn();if(Se){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),nt===null)throw Error(B(349));_i&30||w0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,hg(S0.bind(null,r,s,t),[t]),r.flags|=2048,ea(9,T0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Nn(),e=nt.identifierPrefix;if(Se){var n=Xn,r=Yn;n=(r&~(1<<32-En(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Jo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=QT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZT={readContext:un,useCallback:N0,useContext:un,useEffect:Vf,useImperativeHandle:k0,useInsertionEffect:R0,useLayoutEffect:P0,useMemo:D0,useReducer:rh,useRef:C0,useState:function(){return rh(Zo)},useDebugValue:Of,useDeferredValue:function(t){var e=cn();return M0(e,We.memoizedState,t)},useTransition:function(){var t=rh(Zo)[0],e=cn().memoizedState;return[t,e]},useMutableSource:_0,useSyncExternalStore:E0,useId:V0,unstable_isNewReconciler:!1},eS={readContext:un,useCallback:N0,useContext:un,useEffect:Vf,useImperativeHandle:k0,useInsertionEffect:R0,useLayoutEffect:P0,useMemo:D0,useReducer:ih,useRef:C0,useState:function(){return ih(Zo)},useDebugValue:Of,useDeferredValue:function(t){var e=cn();return We===null?e.memoizedState=t:M0(e,We.memoizedState,t)},useTransition:function(){var t=ih(Zo)[0],e=cn().memoizedState;return[t,e]},useMutableSource:_0,useSyncExternalStore:E0,useId:V0,unstable_isNewReconciler:!1};function gn(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function id(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ku={isMounted:function(t){return(t=t._reactInternals)?Ci(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xt(),i=Or(t),s=er(r,i);s.payload=e,n!=null&&(s.callback=n),e=Mr(t,s,i),e!==null&&(wn(e,t,i,r),xl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xt(),i=Or(t),s=er(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Mr(t,s,i),e!==null&&(wn(e,t,i,r),xl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),r=Or(t),i=er(n,r);i.tag=2,e!=null&&(i.callback=e),e=Mr(t,i,r),e!==null&&(wn(e,t,r,n),xl(e,t,r))}};function dg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!qo(n,r)||!qo(i,s):!0}function F0(t,e,n){var r=!1,i=Ur,s=e.contextType;return typeof s=="object"&&s!==null?s=un(s):(i=Lt(e)?yi:Ct.current,r=e.contextTypes,s=(r=r!=null)?fs(t,i):Ur),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ku,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function fg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ku.enqueueReplaceState(e,e.state,null)}function sd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Rf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=un(s):(s=Lt(e)?yi:Ct.current,i.context=fs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(id(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ku.enqueueReplaceState(i,i.state,null),lu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ys(t,e){try{var n="",r=e;do n+=Pw(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function sh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function od(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tS=typeof WeakMap=="function"?WeakMap:Map;function $0(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){fu||(fu=!0,gd=r),od(t,e)},n}function B0(t,e,n){n=er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){od(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){od(t,e),typeof r!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function pg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=mS.bind(null,t,e,n),e.then(t,t))}function mg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,Mr(n,e,1))),n.lanes|=1),t)}var nS=ur.ReactCurrentOwner,Vt=!1;function Pt(t,e,n,r){e.child=t===null?m0(e,null,n,r):ms(e,t.child,n,r)}function yg(t,e,n,r,i){n=n.render;var s=e.ref;return as(e,i),r=Df(t,e,n,r,s,i),n=Mf(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ir(t,e,i)):(Se&&n&&Ef(e),e.flags|=1,Pt(t,e,r,i),e.child)}function vg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!zf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,j0(t,e,s,r,i)):(t=Ol(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:qo,n(o,r)&&t.ref===e.ref)return ir(t,e,i)}return e.flags|=1,t=br(s,r),t.ref=e.ref,t.return=e,e.child=t}function j0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(qo(s,r)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,ir(t,e,i)}return ad(t,e,n,r,i)}function U0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(es,Ht),Ht|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(es,Ht),Ht|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ve(es,Ht),Ht|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ve(es,Ht),Ht|=r;return Pt(t,e,i,n),e.child}function z0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ad(t,e,n,r,i){var s=Lt(n)?yi:Ct.current;return s=fs(e,s),as(e,i),n=Df(t,e,n,r,s,i),r=Mf(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ir(t,e,i)):(Se&&r&&Ef(e),e.flags|=1,Pt(t,e,n,i),e.child)}function _g(t,e,n,r,i){if(Lt(n)){var s=!0;ru(e)}else s=!1;if(as(e,i),e.stateNode===null)Dl(t,e),F0(e,n,r),sd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=un(h):(h=Lt(n)?yi:Ct.current,h=fs(e,h));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&fg(e,o,r,h),wr=!1;var y=e.memoizedState;o.state=y,lu(e,r,o,i),u=e.memoizedState,l!==r||y!==u||bt.current||wr?(typeof f=="function"&&(id(e,n,f,r),u=e.memoizedState),(l=wr||dg(e,n,l,r,y,u,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,y0(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:gn(e.type,l),o.props=h,p=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=un(u):(u=Lt(n)?yi:Ct.current,u=fs(e,u));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||y!==u)&&fg(e,o,r,u),wr=!1,y=e.memoizedState,o.state=y,lu(e,r,o,i);var P=e.memoizedState;l!==p||y!==P||bt.current||wr?(typeof T=="function"&&(id(e,n,T,r),P=e.memoizedState),(h=wr||dg(e,n,h,r,y,P,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return ld(t,e,n,r,s,i)}function ld(t,e,n,r,i,s){z0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ig(e,n,!1),ir(t,e,s);r=e.stateNode,nS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ms(e,t.child,null,s),e.child=ms(e,null,l,s)):Pt(t,e,l,s),e.memoizedState=r.state,i&&ig(e,n,!0),e.child}function H0(t){var e=t.stateNode;e.pendingContext?rg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rg(t,e.context,!1),Pf(t,e.containerInfo)}function Eg(t,e,n,r,i){return ps(),Tf(i),e.flags|=256,Pt(t,e,n,r),e.child}var ud={dehydrated:null,treeContext:null,retryLane:0};function cd(t){return{baseLanes:t,cachePool:null,transitions:null}}function W0(t,e,n){var r=e.pendingProps,i=xe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ve(xe,i&1),t===null)return nd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yu(o,r,0,null),t=hi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=cd(n),e.memoizedState=ud,t):bf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return rS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=br(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=br(l,s):(s=hi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?cd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ud,r}return s=t.child,t=s.sibling,r=br(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bf(t,e){return e=Yu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fl(t,e,n,r){return r!==null&&Tf(r),ms(e,t.child,null,n),t=bf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=sh(Error(B(422))),fl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Yu({mode:"visible",children:r.children},i,0,null),s=hi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ms(e,t.child,null,o),e.child.memoizedState=cd(o),e.memoizedState=ud,s);if(!(e.mode&1))return fl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(B(419)),r=sh(s,r,void 0),fl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Vt||l){if(r=nt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,rr(t,i),wn(r,t,i,-1))}return Uf(),r=sh(Error(B(421))),fl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=gS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Wt=Dr(i.nextSibling),qt=e,Se=!0,vn=null,t!==null&&(rn[sn++]=Yn,rn[sn++]=Xn,rn[sn++]=vi,Yn=t.id,Xn=t.overflow,vi=e),e=bf(e,r.children),e.flags|=4096,e)}function wg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),rd(t.return,e,n)}function oh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function q0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Pt(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wg(t,n,e);else if(t.tag===19)wg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(xe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&uu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),oh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&uu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}oh(e,!0,n,null,s);break;case"together":oh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ir(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ei|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iS(t,e,n){switch(e.tag){case 3:H0(e),ps();break;case 5:v0(e);break;case 1:Lt(e.type)&&ru(e);break;case 4:Pf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ve(ou,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?W0(t,e,n):(ve(xe,xe.current&1),t=ir(t,e,n),t!==null?t.sibling:null);ve(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return q0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ve(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,U0(t,e,n)}return ir(t,e,n)}var K0,hd,Q0,G0;K0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hd=function(){};Q0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ai(On.current);var s=null;switch(n){case"input":i=Mh(t,i),r=Mh(t,r),s=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),s=[];break;case"textarea":i=bh(t,i),r=bh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=tu)}Fh(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&($o.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&($o.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ee("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};G0=function(t,e,n,r){n!==r&&(e.flags|=4)};function ao(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function sS(t,e,n){var r=e.pendingProps;switch(wf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(e),null;case 1:return Lt(e.type)&&nu(),wt(e),null;case 3:return r=e.stateNode,gs(),Te(bt),Te(Ct),kf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vn!==null&&(_d(vn),vn=null))),hd(t,e),wt(e),null;case 5:xf(e);var i=ai(Xo.current);if(n=e.type,t!==null&&e.stateNode!=null)Q0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return wt(e),null}if(t=ai(On.current),hl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Mn]=e,r[Go]=s,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(i=0;i<mo.length;i++)Ee(mo[i],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":km(r,s),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ee("invalid",r);break;case"textarea":Dm(r,s),Ee("invalid",r)}Fh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&cl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&cl(r.textContent,l,t),i=["children",""+l]):$o.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":nl(r),Nm(r,s,!0);break;case"textarea":nl(r),Mm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=tu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Sv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mn]=e,t[Go]=r,K0(t,e,!1,!1),e.stateNode=t;e:{switch(o=$h(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),i=r;break;case"iframe":case"object":case"embed":Ee("load",t),i=r;break;case"video":case"audio":for(i=0;i<mo.length;i++)Ee(mo[i],t);i=r;break;case"source":Ee("error",t),i=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),i=r;break;case"details":Ee("toggle",t),i=r;break;case"input":km(t,r),i=Mh(t,r),Ee("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":Dm(t,r),i=bh(t,r),Ee("invalid",t);break;default:i=r}Fh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Cv(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Iv(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Bo(t,u):typeof u=="number"&&Bo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&($o.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ee("scroll",t):u!=null&&of(t,s,u,o))}switch(n){case"input":nl(t),Nm(t,r,!1);break;case"textarea":nl(t),Mm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+jr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?rs(t,!!r.multiple,s,!1):r.defaultValue!=null&&rs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=tu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wt(e),null;case 6:if(t&&e.stateNode!=null)G0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=ai(Xo.current),ai(On.current),hl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mn]=e,(s=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:cl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mn]=e,e.stateNode=r}return wt(e),null;case 13:if(Te(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&Wt!==null&&e.mode&1&&!(e.flags&128))f0(),ps(),e.flags|=98560,s=!1;else if(s=hl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[Mn]=e}else ps(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wt(e),s=!1}else vn!==null&&(_d(vn),vn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?Qe===0&&(Qe=3):Uf())),e.updateQueue!==null&&(e.flags|=4),wt(e),null);case 4:return gs(),hd(t,e),t===null&&Ko(e.stateNode.containerInfo),wt(e),null;case 10:return Af(e.type._context),wt(e),null;case 17:return Lt(e.type)&&nu(),wt(e),null;case 19:if(Te(xe),s=e.memoizedState,s===null)return wt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ao(s,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=uu(t),o!==null){for(e.flags|=128,ao(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(xe,xe.current&1|2),e.child}t=t.sibling}s.tail!==null&&$e()>vs&&(e.flags|=128,r=!0,ao(s,!1),e.lanes=4194304)}else{if(!r)if(t=uu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ao(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Se)return wt(e),null}else 2*$e()-s.renderingStartTime>vs&&n!==1073741824&&(e.flags|=128,r=!0,ao(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$e(),e.sibling=null,n=xe.current,ve(xe,r?n&1|2:n&1),e):(wt(e),null);case 22:case 23:return jf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ht&1073741824&&(wt(e),e.subtreeFlags&6&&(e.flags|=8192)):wt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function oS(t,e){switch(wf(e),e.tag){case 1:return Lt(e.type)&&nu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gs(),Te(bt),Te(Ct),kf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xf(e),null;case 13:if(Te(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));ps()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(xe),null;case 4:return gs(),null;case 10:return Af(e.type._context),null;case 22:case 23:return jf(),null;case 24:return null;default:return null}}var pl=!1,It=!1,aS=typeof WeakSet=="function"?WeakSet:Set,z=null;function Zi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function dd(t,e,n){try{n()}catch(r){be(t,e,r)}}var Tg=!1;function lS(t,e){if(Gh=Jl,t=e0(),_f(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,f=0,p=t,y=null;t:for(;;){for(var T;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(T=p.firstChild)!==null;)y=p,p=T;for(;;){if(p===t)break t;if(y===n&&++h===i&&(l=o),y===s&&++f===r&&(u=o),(T=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=T}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yh={focusedElem:t,selectionRange:n},Jl=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var R=P.memoizedProps,D=P.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?R:gn(e.type,R),D);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(N){be(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return P=Tg,Tg=!1,P}function Ro(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&dd(e,n,s)}i=i.next}while(i!==r)}}function Qu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Y0(t){var e=t.alternate;e!==null&&(t.alternate=null,Y0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[Go],delete e[Zh],delete e[HT],delete e[WT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function X0(t){return t.tag===5||t.tag===3||t.tag===4}function Sg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||X0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tu));else if(r!==4&&(t=t.child,t!==null))for(pd(t,e,n),t=t.sibling;t!==null;)pd(t,e,n),t=t.sibling}function md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(md(t,e,n),t=t.sibling;t!==null;)md(t,e,n),t=t.sibling}var lt=null,yn=!1;function yr(t,e,n){for(n=n.child;n!==null;)J0(t,e,n),n=n.sibling}function J0(t,e,n){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(Bu,n)}catch{}switch(n.tag){case 5:It||Zi(n,e);case 6:var r=lt,i=yn;lt=null,yr(t,e,n),lt=r,yn=i,lt!==null&&(yn?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(yn?(t=lt,n=n.stateNode,t.nodeType===8?Zc(t.parentNode,n):t.nodeType===1&&Zc(t,n),Ho(t)):Zc(lt,n.stateNode));break;case 4:r=lt,i=yn,lt=n.stateNode.containerInfo,yn=!0,yr(t,e,n),lt=r,yn=i;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&dd(n,e,o),i=i.next}while(i!==r)}yr(t,e,n);break;case 1:if(!It&&(Zi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){be(n,e,l)}yr(t,e,n);break;case 21:yr(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,yr(t,e,n),It=r):yr(t,e,n);break;default:yr(t,e,n)}}function Ig(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aS),e.forEach(function(r){var i=yS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function mn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:lt=l.stateNode,yn=!1;break e;case 3:lt=l.stateNode.containerInfo,yn=!0;break e;case 4:lt=l.stateNode.containerInfo,yn=!0;break e}l=l.return}if(lt===null)throw Error(B(160));J0(s,o,i),lt=null,yn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){be(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Z0(e,t),e=e.sibling}function Z0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mn(e,t),kn(t),r&4){try{Ro(3,t,t.return),Qu(3,t)}catch(R){be(t,t.return,R)}try{Ro(5,t,t.return)}catch(R){be(t,t.return,R)}}break;case 1:mn(e,t),kn(t),r&512&&n!==null&&Zi(n,n.return);break;case 5:if(mn(e,t),kn(t),r&512&&n!==null&&Zi(n,n.return),t.flags&32){var i=t.stateNode;try{Bo(i,"")}catch(R){be(t,t.return,R)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&wv(i,s),$h(l,o);var h=$h(l,s);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?Cv(i,p):f==="dangerouslySetInnerHTML"?Iv(i,p):f==="children"?Bo(i,p):of(i,f,p,h)}switch(l){case"input":Vh(i,s);break;case"textarea":Tv(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var T=s.value;T!=null?rs(i,!!s.multiple,T,!1):y!==!!s.multiple&&(s.defaultValue!=null?rs(i,!!s.multiple,s.defaultValue,!0):rs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Go]=s}catch(R){be(t,t.return,R)}}break;case 6:if(mn(e,t),kn(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(R){be(t,t.return,R)}}break;case 3:if(mn(e,t),kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ho(e.containerInfo)}catch(R){be(t,t.return,R)}break;case 4:mn(e,t),kn(t);break;case 13:mn(e,t),kn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||($f=$e())),r&4&&Ig(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(It=(h=It)||f,mn(e,t),It=h):mn(e,t),kn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(z=t,f=t.child;f!==null;){for(p=z=f;z!==null;){switch(y=z,T=y.child,y.tag){case 0:case 11:case 14:case 15:Ro(4,y,y.return);break;case 1:Zi(y,y.return);var P=y.stateNode;if(typeof P.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(R){be(r,n,R)}}break;case 5:Zi(y,y.return);break;case 22:if(y.memoizedState!==null){Cg(p);continue}}T!==null?(T.return=y,z=T):Cg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Av("display",o))}catch(R){be(t,t.return,R)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(R){be(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:mn(e,t),kn(t),r&4&&Ig(t);break;case 21:break;default:mn(e,t),kn(t)}}function kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(X0(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Bo(i,""),r.flags&=-33);var s=Sg(t);md(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Sg(t);pd(t,l,o);break;default:throw Error(B(161))}}catch(u){be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uS(t,e,n){z=t,e_(t)}function e_(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var i=z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||pl;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||It;l=pl;var h=It;if(pl=o,(It=u)&&!h)for(z=i;z!==null;)o=z,u=o.child,o.tag===22&&o.memoizedState!==null?Rg(i):u!==null?(u.return=o,z=u):Rg(i);for(;s!==null;)z=s,e_(s),s=s.sibling;z=i,pl=l,It=h}Ag(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,z=s):Ag(t)}}function Ag(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||Qu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:gn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ug(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ug(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Ho(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}It||e.flags&512&&fd(e)}catch(y){be(e,e.return,y)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function Cg(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function Rg(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qu(4,e)}catch(u){be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){be(e,i,u)}}var s=e.return;try{fd(e)}catch(u){be(e,s,u)}break;case 5:var o=e.return;try{fd(e)}catch(u){be(e,o,u)}}}catch(u){be(e,e.return,u)}if(e===t){z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,z=l;break}z=e.return}}var cS=Math.ceil,du=ur.ReactCurrentDispatcher,Lf=ur.ReactCurrentOwner,ln=ur.ReactCurrentBatchConfig,se=0,nt=null,He=null,dt=0,Ht=0,es=Kr(0),Qe=0,ta=null,Ei=0,Gu=0,Ff=0,Po=null,Mt=null,$f=0,vs=1/0,qn=null,fu=!1,gd=null,Vr=null,ml=!1,Cr=null,pu=0,xo=0,yd=null,Ml=-1,Vl=0;function xt(){return se&6?$e():Ml!==-1?Ml:Ml=$e()}function Or(t){return t.mode&1?se&2&&dt!==0?dt&-dt:KT.transition!==null?(Vl===0&&(Vl=Fv()),Vl):(t=he,t!==0||(t=window.event,t=t===void 0?16:Wv(t.type)),t):1}function wn(t,e,n,r){if(50<xo)throw xo=0,yd=null,Error(B(185));ma(t,n,r),(!(se&2)||t!==nt)&&(t===nt&&(!(se&2)&&(Gu|=n),Qe===4&&Ir(t,dt)),Ft(t,r),n===1&&se===0&&!(e.mode&1)&&(vs=$e()+500,Wu&&Qr()))}function Ft(t,e){var n=t.callbackNode;Kw(t,e);var r=Xl(t,t===nt?dt:0);if(r===0)n!==null&&bm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bm(n),e===1)t.tag===0?qT(Pg.bind(null,t)):c0(Pg.bind(null,t)),UT(function(){!(se&6)&&Qr()}),n=null;else{switch($v(r)){case 1:n=hf;break;case 4:n=bv;break;case 16:n=Yl;break;case 536870912:n=Lv;break;default:n=Yl}n=l_(n,t_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function t_(t,e){if(Ml=-1,Vl=0,se&6)throw Error(B(327));var n=t.callbackNode;if(ls()&&t.callbackNode!==n)return null;var r=Xl(t,t===nt?dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=mu(t,r);else{e=r;var i=se;se|=2;var s=r_();(nt!==t||dt!==e)&&(qn=null,vs=$e()+500,ci(t,e));do try{fS();break}catch(l){n_(t,l)}while(!0);If(),du.current=s,se=i,He!==null?e=0:(nt=null,dt=0,e=Qe)}if(e!==0){if(e===2&&(i=Hh(t),i!==0&&(r=i,e=vd(t,i))),e===1)throw n=ta,ci(t,0),Ir(t,r),Ft(t,$e()),n;if(e===6)Ir(t,r);else{if(i=t.current.alternate,!(r&30)&&!hS(i)&&(e=mu(t,r),e===2&&(s=Hh(t),s!==0&&(r=s,e=vd(t,s))),e===1))throw n=ta,ci(t,0),Ir(t,r),Ft(t,$e()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:ti(t,Mt,qn);break;case 3:if(Ir(t,r),(r&130023424)===r&&(e=$f+500-$e(),10<e)){if(Xl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){xt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Jh(ti.bind(null,t,Mt,qn),e);break}ti(t,Mt,qn);break;case 4:if(Ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-En(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cS(r/1960))-r,10<r){t.timeoutHandle=Jh(ti.bind(null,t,Mt,qn),r);break}ti(t,Mt,qn);break;case 5:ti(t,Mt,qn);break;default:throw Error(B(329))}}}return Ft(t,$e()),t.callbackNode===n?t_.bind(null,t):null}function vd(t,e){var n=Po;return t.current.memoizedState.isDehydrated&&(ci(t,e).flags|=256),t=mu(t,e),t!==2&&(e=Mt,Mt=n,e!==null&&_d(e)),t}function _d(t){Mt===null?Mt=t:Mt.push.apply(Mt,t)}function hS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Sn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ir(t,e){for(e&=~Ff,e&=~Gu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-En(e),r=1<<n;t[n]=-1,e&=~r}}function Pg(t){if(se&6)throw Error(B(327));ls();var e=Xl(t,0);if(!(e&1))return Ft(t,$e()),null;var n=mu(t,e);if(t.tag!==0&&n===2){var r=Hh(t);r!==0&&(e=r,n=vd(t,r))}if(n===1)throw n=ta,ci(t,0),Ir(t,e),Ft(t,$e()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ti(t,Mt,qn),Ft(t,$e()),null}function Bf(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(vs=$e()+500,Wu&&Qr())}}function wi(t){Cr!==null&&Cr.tag===0&&!(se&6)&&ls();var e=se;se|=1;var n=ln.transition,r=he;try{if(ln.transition=null,he=1,t)return t()}finally{he=r,ln.transition=n,se=e,!(se&6)&&Qr()}}function jf(){Ht=es.current,Te(es)}function ci(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jT(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(wf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nu();break;case 3:gs(),Te(bt),Te(Ct),kf();break;case 5:xf(r);break;case 4:gs();break;case 13:Te(xe);break;case 19:Te(xe);break;case 10:Af(r.type._context);break;case 22:case 23:jf()}n=n.return}if(nt=t,He=t=br(t.current,null),dt=Ht=e,Qe=0,ta=null,Ff=Gu=Ei=0,Mt=Po=null,oi!==null){for(e=0;e<oi.length;e++)if(n=oi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}oi=null}return t}function n_(t,e){do{var n=He;try{if(If(),kl.current=hu,cu){for(var r=ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}cu=!1}if(_i=0,Ze=We=ke=null,Co=!1,Jo=0,Lf.current=null,n===null||n.return===null){Qe=1,ta=e,He=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=dt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=mg(o);if(T!==null){T.flags&=-257,gg(T,o,l,s,e),T.mode&1&&pg(s,h,e),e=T,u=h;var P=e.updateQueue;if(P===null){var R=new Set;R.add(u),e.updateQueue=R}else P.add(u);break e}else{if(!(e&1)){pg(s,h,e),Uf();break e}u=Error(B(426))}}else if(Se&&l.mode&1){var D=mg(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),gg(D,o,l,s,e),Tf(ys(u,l));break e}}s=u=ys(u,l),Qe!==4&&(Qe=2),Po===null?Po=[s]:Po.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=$0(s,u,e);lg(s,E);break e;case 1:l=u;var _=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Vr===null||!Vr.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=B0(s,l,e);lg(s,N);break e}}s=s.return}while(s!==null)}s_(n)}catch(O){e=O,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function r_(){var t=du.current;return du.current=hu,t===null?hu:t}function Uf(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),nt===null||!(Ei&268435455)&&!(Gu&268435455)||Ir(nt,dt)}function mu(t,e){var n=se;se|=2;var r=r_();(nt!==t||dt!==e)&&(qn=null,ci(t,e));do try{dS();break}catch(i){n_(t,i)}while(!0);if(If(),se=n,du.current=r,He!==null)throw Error(B(261));return nt=null,dt=0,Qe}function dS(){for(;He!==null;)i_(He)}function fS(){for(;He!==null&&!Fw();)i_(He)}function i_(t){var e=a_(t.alternate,t,Ht);t.memoizedProps=t.pendingProps,e===null?s_(t):He=e,Lf.current=null}function s_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oS(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,He=null;return}}else if(n=sS(n,e,Ht),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Qe===0&&(Qe=5)}function ti(t,e,n){var r=he,i=ln.transition;try{ln.transition=null,he=1,pS(t,e,n,r)}finally{ln.transition=i,he=r}return null}function pS(t,e,n,r){do ls();while(Cr!==null);if(se&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Qw(t,s),t===nt&&(He=nt=null,dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ml||(ml=!0,l_(Yl,function(){return ls(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ln.transition,ln.transition=null;var o=he;he=1;var l=se;se|=4,Lf.current=null,lS(t,n),Z0(n,t),VT(Yh),Jl=!!Gh,Yh=Gh=null,t.current=n,uS(n),$w(),se=l,he=o,ln.transition=s}else t.current=n;if(ml&&(ml=!1,Cr=t,pu=i),s=t.pendingLanes,s===0&&(Vr=null),Uw(n.stateNode),Ft(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(fu)throw fu=!1,t=gd,gd=null,t;return pu&1&&t.tag!==0&&ls(),s=t.pendingLanes,s&1?t===yd?xo++:(xo=0,yd=t):xo=0,Qr(),null}function ls(){if(Cr!==null){var t=$v(pu),e=ln.transition,n=he;try{if(ln.transition=null,he=16>t?16:t,Cr===null)var r=!1;else{if(t=Cr,Cr=null,pu=0,se&6)throw Error(B(331));var i=se;for(se|=4,z=t.current;z!==null;){var s=z,o=s.child;if(z.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(z=h;z!==null;){var f=z;switch(f.tag){case 0:case 11:case 15:Ro(8,f,s)}var p=f.child;if(p!==null)p.return=f,z=p;else for(;z!==null;){f=z;var y=f.sibling,T=f.return;if(Y0(f),f===h){z=null;break}if(y!==null){y.return=T,z=y;break}z=T}}}var P=s.alternate;if(P!==null){var R=P.child;if(R!==null){P.child=null;do{var D=R.sibling;R.sibling=null,R=D}while(R!==null)}}z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,z=o;else e:for(;z!==null;){if(s=z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ro(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,z=E;break e}z=s.return}}var _=t.current;for(z=_;z!==null;){o=z;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,z=S;else e:for(o=_;z!==null;){if(l=z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Qu(9,l)}}catch(O){be(l,l.return,O)}if(l===o){z=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,z=N;break e}z=l.return}}if(se=i,Qr(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(Bu,t)}catch{}r=!0}return r}finally{he=n,ln.transition=e}}return!1}function xg(t,e,n){e=ys(n,e),e=$0(t,e,1),t=Mr(t,e,1),e=xt(),t!==null&&(ma(t,1,e),Ft(t,e))}function be(t,e,n){if(t.tag===3)xg(t,t,n);else for(;e!==null;){if(e.tag===3){xg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vr===null||!Vr.has(r))){t=ys(n,t),t=B0(e,t,1),e=Mr(e,t,1),t=xt(),e!==null&&(ma(e,1,t),Ft(e,t));break}}e=e.return}}function mS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(dt&n)===n&&(Qe===4||Qe===3&&(dt&130023424)===dt&&500>$e()-$f?ci(t,0):Ff|=n),Ft(t,e)}function o_(t,e){e===0&&(t.mode&1?(e=sl,sl<<=1,!(sl&130023424)&&(sl=4194304)):e=1);var n=xt();t=rr(t,e),t!==null&&(ma(t,e,n),Ft(t,n))}function gS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),o_(t,n)}function yS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),o_(t,n)}var a_;a_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bt.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,iS(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,Se&&e.flags&1048576&&h0(e,su,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Dl(t,e),t=e.pendingProps;var i=fs(e,Ct.current);as(e,n),i=Df(null,e,r,t,i,n);var s=Mf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(r)?(s=!0,ru(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Rf(e),i.updater=Ku,e.stateNode=i,i._reactInternals=e,sd(e,r,t,n),e=ld(null,e,r,!0,s,n)):(e.tag=0,Se&&s&&Ef(e),Pt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Dl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=_S(r),t=gn(r,t),i){case 0:e=ad(null,e,r,t,n);break e;case 1:e=_g(null,e,r,t,n);break e;case 11:e=yg(null,e,r,t,n);break e;case 14:e=vg(null,e,r,gn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),ad(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),_g(t,e,r,i,n);case 3:e:{if(H0(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,y0(t,e),lu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ys(Error(B(423)),e),e=Eg(t,e,r,n,i);break e}else if(r!==i){i=ys(Error(B(424)),e),e=Eg(t,e,r,n,i);break e}else for(Wt=Dr(e.stateNode.containerInfo.firstChild),qt=e,Se=!0,vn=null,n=m0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ps(),r===i){e=ir(t,e,n);break e}Pt(t,e,r,n)}e=e.child}return e;case 5:return v0(e),t===null&&nd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Xh(r,i)?o=null:s!==null&&Xh(r,s)&&(e.flags|=32),z0(t,e),Pt(t,e,o,n),e.child;case 6:return t===null&&nd(e),null;case 13:return W0(t,e,n);case 4:return Pf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ms(e,null,r,n):Pt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),yg(t,e,r,i,n);case 7:return Pt(t,e,e.pendingProps,n),e.child;case 8:return Pt(t,e,e.pendingProps.children,n),e.child;case 12:return Pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ve(ou,r._currentValue),r._currentValue=o,s!==null)if(Sn(s.value,o)){if(s.children===i.children&&!bt.current){e=ir(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=er(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),rd(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),rd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Pt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,as(e,n),i=un(i),r=r(i),e.flags|=1,Pt(t,e,r,n),e.child;case 14:return r=e.type,i=gn(r,e.pendingProps),i=gn(r.type,i),vg(t,e,r,i,n);case 15:return j0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),Dl(t,e),e.tag=1,Lt(r)?(t=!0,ru(e)):t=!1,as(e,n),F0(e,r,i),sd(e,r,i,n),ld(null,e,r,!0,t,n);case 19:return q0(t,e,n);case 22:return U0(t,e,n)}throw Error(B(156,e.tag))};function l_(t,e){return Ov(t,e)}function vS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(t,e,n,r){return new vS(t,e,n,r)}function zf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _S(t){if(typeof t=="function")return zf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lf)return 11;if(t===uf)return 14}return 2}function br(t,e){var n=t.alternate;return n===null?(n=an(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ol(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")zf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Hi:return hi(n.children,i,s,e);case af:o=8,i|=8;break;case xh:return t=an(12,n,e,i|2),t.elementType=xh,t.lanes=s,t;case kh:return t=an(13,n,e,i),t.elementType=kh,t.lanes=s,t;case Nh:return t=an(19,n,e,i),t.elementType=Nh,t.lanes=s,t;case vv:return Yu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gv:o=10;break e;case yv:o=9;break e;case lf:o=11;break e;case uf:o=14;break e;case Er:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=an(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function hi(t,e,n,r){return t=an(7,t,r,e),t.lanes=n,t}function Yu(t,e,n,r){return t=an(22,t,r,e),t.elementType=vv,t.lanes=n,t.stateNode={isHidden:!1},t}function ah(t,e,n){return t=an(6,t,null,e),t.lanes=n,t}function lh(t,e,n){return e=an(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ES(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uc(0),this.expirationTimes=Uc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hf(t,e,n,r,i,s,o,l,u){return t=new ES(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=an(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rf(s),t}function wS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function u_(t){if(!t)return Ur;t=t._reactInternals;e:{if(Ci(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Lt(n))return u0(t,n,e)}return e}function c_(t,e,n,r,i,s,o,l,u){return t=Hf(n,r,!0,t,i,s,o,l,u),t.context=u_(null),n=t.current,r=xt(),i=Or(n),s=er(r,i),s.callback=e??null,Mr(n,s,i),t.current.lanes=i,ma(t,i,r),Ft(t,r),t}function Xu(t,e,n,r){var i=e.current,s=xt(),o=Or(i);return n=u_(n),e.context===null?e.context=n:e.pendingContext=n,e=er(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mr(i,e,o),t!==null&&(wn(t,i,o,s),xl(t,i,o)),o}function gu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wf(t,e){kg(t,e),(t=t.alternate)&&kg(t,e)}function TS(){return null}var h_=typeof reportError=="function"?reportError:function(t){console.error(t)};function qf(t){this._internalRoot=t}Ju.prototype.render=qf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Xu(t,e,null,null)};Ju.prototype.unmount=qf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wi(function(){Xu(null,t,null,null)}),e[nr]=null}};function Ju(t){this._internalRoot=t}Ju.prototype.unstable_scheduleHydration=function(t){if(t){var e=Uv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sr.length&&e!==0&&e<Sr[n].priority;n++);Sr.splice(n,0,t),n===0&&Hv(t)}};function Kf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ng(){}function SS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=gu(o);s.call(h)}}var o=c_(e,r,t,0,null,!1,!1,"",Ng);return t._reactRootContainer=o,t[nr]=o.current,Ko(t.nodeType===8?t.parentNode:t),wi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=gu(u);l.call(h)}}var u=Hf(t,0,!1,null,null,!1,!1,"",Ng);return t._reactRootContainer=u,t[nr]=u.current,Ko(t.nodeType===8?t.parentNode:t),wi(function(){Xu(e,u,n,r)}),u}function ec(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=gu(o);l.call(u)}}Xu(e,o,t,i)}else o=SS(n,e,t,i,r);return gu(o)}Bv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=po(e.pendingLanes);n!==0&&(df(e,n|1),Ft(e,$e()),!(se&6)&&(vs=$e()+500,Qr()))}break;case 13:wi(function(){var r=rr(t,1);if(r!==null){var i=xt();wn(r,t,1,i)}}),Wf(t,1)}};ff=function(t){if(t.tag===13){var e=rr(t,134217728);if(e!==null){var n=xt();wn(e,t,134217728,n)}Wf(t,134217728)}};jv=function(t){if(t.tag===13){var e=Or(t),n=rr(t,e);if(n!==null){var r=xt();wn(n,t,e,r)}Wf(t,e)}};Uv=function(){return he};zv=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};jh=function(t,e,n){switch(e){case"input":if(Vh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Hu(r);if(!i)throw Error(B(90));Ev(r),Vh(r,i)}}}break;case"textarea":Tv(t,n);break;case"select":e=n.value,e!=null&&rs(t,!!n.multiple,e,!1)}};xv=Bf;kv=wi;var IS={usingClientEntryPoint:!1,Events:[ya,Qi,Hu,Rv,Pv,Bf]},lo={findFiberByHostInstance:si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AS={bundleType:lo.bundleType,version:lo.version,rendererPackageName:lo.rendererPackageName,rendererConfig:lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Mv(t),t===null?null:t.stateNode},findFiberByHostInstance:lo.findFiberByHostInstance||TS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gl.isDisabled&&gl.supportsFiber)try{Bu=gl.inject(AS),Vn=gl}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IS;Gt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kf(e))throw Error(B(200));return wS(t,e,null,n)};Gt.createRoot=function(t,e){if(!Kf(t))throw Error(B(299));var n=!1,r="",i=h_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Hf(t,1,!1,null,null,n,!1,r,i),t[nr]=e.current,Ko(t.nodeType===8?t.parentNode:t),new qf(e)};Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=Mv(e),t=t===null?null:t.stateNode,t};Gt.flushSync=function(t){return wi(t)};Gt.hydrate=function(t,e,n){if(!Zu(e))throw Error(B(200));return ec(null,t,e,!0,n)};Gt.hydrateRoot=function(t,e,n){if(!Kf(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=h_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=c_(e,null,t,1,n??null,i,!1,s,o),t[nr]=e.current,Ko(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ju(e)};Gt.render=function(t,e,n){if(!Zu(e))throw Error(B(200));return ec(null,t,e,!1,n)};Gt.unmountComponentAtNode=function(t){if(!Zu(t))throw Error(B(40));return t._reactRootContainer?(wi(function(){ec(null,null,t,!1,function(){t._reactRootContainer=null,t[nr]=null})}),!0):!1};Gt.unstable_batchedUpdates=Bf;Gt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zu(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return ec(t,e,n,!1,r)};Gt.version="18.3.1-next-f1338f8080-20240426";function d_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d_)}catch(t){console.error(t)}}d_(),dv.exports=Gt;var ii=dv.exports,f_,Dg=ii;f_=Dg.createRoot,Dg.hydrateRoot;const Jn={EASY:"簡単",NORMAL:"通常",HARD:"困難",HELL:"死地"},CS={[Jn.EASY]:[25,50,75,125,250,300,350,450,550,600,800,1e3,1100,1250,1400,1600,2e3,2100,2400,2800],[Jn.NORMAL]:[50,100,150,250,500,600,750,900,1100,1200,1600,2e3,2200,2500,2800,3200,3900,4200,4900,5700],[Jn.HARD]:[75,150,225,375,750,900,1100,1400,1600,1900,2400,3e3,3400,3800,4300,4800,5900,6300,7300,8500],[Jn.HELL]:[100,200,400,500,1100,1400,1700,2100,2400,2800,3600,4500,5100,5700,6400,7200,8800,9500,10900,12700]},RS=t=>{const[e,n]=b.useState(t),r=b.useMemo(()=>{const{level:l,numCharacters:u,difficulty:h}=e;return CS[h][l-1]*u},[e]);return{settings:e,setLevel:l=>{n({...e,level:l})},setNumCharacters:l=>{n({...e,numCharacters:l})},setDifficulty:l=>{n({...e,difficulty:l})},totalExp:r}},uh=()=>L.jsx("hr",{className:"my-1"}),Hn=({label:t,text:e})=>L.jsxs("p",{className:"card-text my-0",children:[L.jsx("b",{children:t}),"：",e]}),ee={STR:"筋力",DEX:"敏捷",CON:"耐久",INT:"知力",WIS:"判断",CHA:"魅力"},PS=({label:t,value:e})=>{const n=Math.floor((e-10)/2),r=n>=0?`+${n}`:n.toString();return L.jsxs("div",{className:"col px-0",children:[L.jsx("p",{className:"my-0",children:L.jsx("b",{children:t})}),L.jsxs("p",{className:"my-0",children:[e,"(",r,")"]})]})},xS=({monster:t})=>{const{name:e,num:n,size:r,monsterType:i,ac:s,hp:o,move:l,cr:u,exp:h,abilities:f,actions:p,skills:y,senses:T,languages:P,specialAbilities:R}=t;return L.jsxs("div",{className:"card",children:[L.jsxs("div",{className:"card-header d-flex",children:[L.jsx("h5",{className:"card-title mb-0",children:e}),L.jsxs("span",{className:"ms-auto",children:[n,"体"]})]}),L.jsxs("div",{className:"card-body py-2",children:[L.jsxs("p",{className:"card-text my-0",children:[r,"・",i,"、中立にして悪"]}),L.jsx(uh,{}),L.jsx(Hn,{label:"AC",text:s}),L.jsx(Hn,{label:"hp",text:o}),L.jsx(Hn,{label:"移動速度",text:l.join("、")}),L.jsx(uh,{}),Object.keys(y).length>0&&L.jsx(Hn,{label:"技能",text:Object.entries(y).map(([D,E])=>`${D}+${E}`).join("、")}),L.jsx(Hn,{label:"感覚",text:T.join("、")}),Object.keys(P).length>0&&L.jsx(Hn,{label:"言語",text:P.join("、")}),L.jsx(Hn,{label:"脅威度",text:`${u}(${h}exp)`}),L.jsx(uh,{}),L.jsx("div",{className:"row text-center",children:Object.values(ee).map(D=>L.jsx(PS,{label:D,value:f[D]},D))}),L.jsx("hr",{className:"my-1"}),L.jsx("h6",{className:"card-title mt-2",children:"アクション"}),p.map(({label:D,text:E})=>L.jsx(Hn,{label:D,text:E},D)),L.jsx("hr",{className:"my-1"}),R.map(({label:D,text:E})=>L.jsx(Hn,{label:D,text:E},D))]})]})},kS={level:4,numCharacters:4,difficulty:Jn.NORMAL},yl=t=>t[Math.floor(Math.random()*t.length)],Lr=t=>[...Array(t).keys()],Mg={"1/8":25,"1/4":50,"1/2":100,1:200,2:450,3:700,4:1100,5:1800,6:2300,7:2900,8:3900,9:5e3,10:5900,11:7200,12:8400,13:1e4,14:11500,15:13e3,16:15e3,17:18e3,18:2e4,19:22e3,20:25e3,21:33e3,22:41e3,23:5e4,24:62e3,25:75e3,26:9e4,27:105e3,28:12e4,29:135e3,30:155e3},NS={"1/8":{baseBonus:2,ac:13,hpMin:7,hpMax:35,atBonus:3,damageMin:2,damageMax:3,save:13},"1/4":{baseBonus:2,ac:13,hpMin:36,hpMax:49,atBonus:3,damageMin:4,damageMax:5,save:13},"1/2":{baseBonus:2,ac:13,hpMin:50,hpMax:70,atBonus:3,damageMin:6,damageMax:8,save:13},1:{baseBonus:2,ac:13,hpMin:71,hpMax:85,atBonus:3,damageMin:9,damageMax:14,save:13},2:{baseBonus:2,ac:13,hpMin:86,hpMax:100,atBonus:3,damageMin:15,damageMax:20,save:13},3:{baseBonus:2,ac:13,hpMin:101,hpMax:115,atBonus:3,damageMin:21,damageMax:26,save:13},4:{baseBonus:2,ac:14,hpMin:116,hpMax:130,atBonus:4,damageMin:27,damageMax:32,save:14},5:{baseBonus:3,ac:15,hpMin:131,hpMax:145,atBonus:5,damageMin:33,damageMax:38,save:15},6:{baseBonus:3,ac:15,hpMin:146,hpMax:160,atBonus:5,damageMin:39,damageMax:44,save:15},7:{baseBonus:3,ac:15,hpMin:161,hpMax:175,atBonus:5,damageMin:45,damageMax:50,save:15},8:{baseBonus:3,ac:16,hpMin:176,hpMax:190,atBonus:5,damageMin:51,damageMax:56,save:16},9:{baseBonus:4,ac:16,hpMin:191,hpMax:205,atBonus:6,damageMin:57,damageMax:62,save:16},10:{baseBonus:4,ac:17,hpMin:206,hpMax:220,atBonus:6,damageMin:63,damageMax:68,save:17},11:{baseBonus:4,ac:17,hpMin:221,hpMax:235,atBonus:6,damageMin:69,damageMax:74,save:17},12:{baseBonus:4,ac:17,hpMin:236,hpMax:250,atBonus:6,damageMin:75,damageMax:80,save:17},13:{baseBonus:5,ac:18,hpMin:251,hpMax:265,atBonus:7,damageMin:81,damageMax:86,save:18},14:{baseBonus:5,ac:18,hpMin:266,hpMax:280,atBonus:7,damageMin:87,damageMax:92,save:18},15:{baseBonus:5,ac:18,hpMin:281,hpMax:295,atBonus:7,damageMin:93,damageMax:98,save:18},16:{baseBonus:5,ac:18,hpMin:296,hpMax:310,atBonus:7,damageMin:99,damageMax:104,save:18},17:{baseBonus:6,ac:19,hpMin:311,hpMax:325,atBonus:8,damageMin:105,damageMax:110,save:19},18:{baseBonus:6,ac:19,hpMin:326,hpMax:340,atBonus:8,damageMin:111,damageMax:116,save:19},19:{baseBonus:6,ac:19,hpMin:341,hpMax:355,atBonus:8,damageMin:117,damageMax:122,save:19},20:{baseBonus:6,ac:19,hpMin:356,hpMax:400,atBonus:8,damageMin:123,damageMax:140,save:19},21:{baseBonus:7,ac:19,hpMin:401,hpMax:445,atBonus:9,damageMin:141,damageMax:158,save:19},22:{baseBonus:7,ac:19,hpMin:446,hpMax:490,atBonus:9,damageMin:159,damageMax:176,save:19},23:{baseBonus:7,ac:19,hpMin:491,hpMax:535,atBonus:9,damageMin:177,damageMax:194,save:19},24:{baseBonus:7,ac:19,hpMin:536,hpMax:580,atBonus:9,damageMin:195,damageMax:212,save:19},25:{baseBonus:8,ac:19,hpMin:581,hpMax:625,atBonus:10,damageMin:213,damageMax:230,save:19},26:{baseBonus:8,ac:19,hpMin:626,hpMax:670,atBonus:10,damageMin:231,damageMax:248,save:19},27:{baseBonus:8,ac:19,hpMin:671,hpMax:715,atBonus:10,damageMin:249,damageMax:266,save:19},28:{baseBonus:8,ac:19,hpMin:716,hpMax:760,atBonus:10,damageMin:267,damageMax:284,save:19},29:{baseBonus:9,ac:19,hpMin:761,hpMax:805,atBonus:11,damageMin:285,damageMax:302,save:19},30:{baseBonus:9,ac:19,hpMin:806,hpMax:850,atBonus:11,damageMin:303,damageMax:320,save:19}},ni={TINY:"超小型",SMALL:"小型",MEDIUM:"中型",LARGE:"大型",HUGE:"超大型",GARGANTUAN:"巨大"},Oe={ABERRATION:"異形",BEAST:"野獣",CELESTIAL:"天使",CONSTRUCT:"人造",DRAGON:"ドラゴン",ELEMENTAL:"エレメンタル",FEY:"妖精",FIEND:"悪魔",GIANT:"巨人",HUMANOID:"人型",MONSTROSITY:"怪物",OOZE:"粘体",PLANT:"植物",UNDEAD:"アンデッド"},uo={ACROBATICS:"運動",ANIMAL_HANDLING:"動物使い",ARCANA:"魔法学",ATHLETICS:"運動",DECEPTION:"ペテン",HISTORY:"歴史",INSIGHT:"看破",INTIMIDATION:"脅迫",INVESTIGATION:"捜査",MEDICINE:"医術",NATURE:"自然",PERCEPTION:"知覚",PERFORMANCE:"演技",PERSUASION:"説得",RELIGION:"宗教",SLEIGHT_OF_HAND:"手先の早業",STEALTH:"隠密",SURVIVAL:"生存"},Pe={COMMON:"common",UNCOMMON:"uncommon",RARE:"rare",MYTHIC:"mythic"},ge={TYPE:"type",TERRAIN:"terrain",RACE:"race",CLASS:"class"},Wn=(t,e)=>n=>({...n,specialAbilities:[...n.specialAbilities,{label:t,text:e}]}),ch=[{name:"アンデッド",templateType:ge.TYPE,monsterType:Oe.UNDEAD,rarity:Pe.COMMON,enhancer:t=>{const{senses:e,specialAbilities:n}=t;return{...t,size:ni.MEDIUM,monsterType:Oe.UNDEAD,move:["30ft"],senses:[...e,"暗視60フィート","受動〈知覚〉9"],specialAbilities:[...n,{label:"不死特性",text:"毒ダメージを受けず、[消耗]状態、[毒]状態、[魅了]状態、[恐怖]状態にならない。"}]}}},{name:"人型",templateType:ge.TYPE,monsterType:Oe.HUMANOID,rarity:Pe.COMMON,enhancer:t=>{const{skills:e,senses:n,languages:r}=t;return{...t,size:ni.MEDIUM,monsterType:Oe.HUMANOID,move:["30ft"],skills:{...e,[uo.PERCEPTION]:t.baseBonus},senses:[...n,`受動〈知覚〉${10+t.baseBonus}`],languages:[...r,"共通語"]}}},{name:"グール",rarity:Pe.COMMON,templateType:ge.RACE,monsterType:Oe.UNDEAD,enhancer:Wn("麻痺の爪","攻撃がヒットしたならば難易度${monster.save}の耐久力セーヴに失敗すると1分間麻痺状態になる。対象は自分のターンの終了時に再度セーヴを行い、成功すればこの効果は終了する")},{name:"スケルトン",rarity:Pe.COMMON,templateType:ge.RACE,monsterType:Oe.UNDEAD,enhancer:Wn("ダメージ脆弱性","[殴打]")},{name:"ゾンビ",rarity:Pe.COMMON,templateType:ge.RACE,monsterType:Oe.UNDEAD,enhancer:Wn("不死","[光輝]ダメージ以外でヒットポイントが0になった場合、難易度（受けたダメージ+5）の耐久力セーヴに成功すれば1ヒット・ポイント残る。")},{name:"バンシー",rarity:Pe.RARE,templateType:ge.RACE,monsterType:Oe.UNDEAD,enhancer:t=>({...t,move:[...t.move,"飛行40ft"],specialAbilities:[...t.specialAbilities,{label:"慟哭(1回/日)",text:`30ft以内のアンデッドでないクリーチャーは難易度${t.save}の【耐久力】セーヴに失敗するとhpが0になる。成功すると${t.diceNum}d6+${t.damageMod}の[精神]ダメージを受ける。`}]})},{name:"ゴブリン",rarity:Pe.COMMON,templateType:ge.RACE,monsterType:Oe.HUMANOID,enhancer:Wn("素早い脱出","自分のターンごとにボーナス・アクションとして離脱アクションまたは隠れ身アクションを行なえる")},{name:"オーク",rarity:Pe.COMMON,templateType:ge.RACE,monsterType:Oe.HUMANOID,enhancer:Wn("猛進","ボーナスアクションとして敵対的なクリーチャーに近づくように移動ができる")},{name:"コボルド",rarity:Pe.COMMON,templateType:ge.RACE,monsterType:Oe.HUMANOID,enhancer:Wn("連携戦闘","敵の隣に味方がいるなら、攻撃ロールに有利を得る")},{name:"ノール",rarity:Pe.UNCOMMON,templateType:ge.RACE,monsterType:Oe.HUMANOID,enhancer:Wn("大暴れ","近接攻撃で敵のhpを0にしたならば、ボーナスアクションとして追加攻撃ができる")},{name:"ホブゴブリン",rarity:Pe.UNCOMMON,templateType:ge.RACE,monsterType:Oe.HUMANOID,enhancer:Wn("連携打撃","敵の隣に味方がいるなら、武器攻撃は追加で2d6ダメージを与える")},{name:"バグベア",rarity:Pe.UNCOMMON,templateType:ge.RACE,monsterType:Oe.HUMANOID,enhancer:Wn("蛮力","近接攻撃のダメージダイスが一つ増える")},{name:"マーフォーク",rarity:Pe.UNCOMMON,templateType:ge.RACE,monsterType:Oe.HUMANOID,enhancer:t=>({...t,move:[...t.move,"水泳40ft"],specialAbilities:[...t.specialAbilities,{label:"水陸両性",text:"空気を呼吸することも水を呼吸することもできる"}]})},{name:"リザードフォーク",rarity:Pe.UNCOMMON,templateType:ge.RACE,monsterType:Oe.HUMANOID,enhancer:t=>({...t,ac:t.ac+2,move:[...t.move,"水泳30ft"],specialAbilities:[...t.specialAbilities,{label:"息こらえ",text:"最大１０分まで息を止めることができる"}]})},{name:"ワーウルフ",rarity:Pe.RARE,templateType:ge.RACE,monsterType:Oe.HUMANOID,enhancer:t=>({...t,move:["40ft"],specialAbilities:[...t.specialAbilities,{label:"ダメージ完全耐性",text:"魔法でも銀でもない武器による[刺突][斬撃][殴打]からダメージを受けない"}]})},{name:"トロール",templateType:ge.RACE,rarity:Pe.UNCOMMON,enhancer:t=>{const{skills:e,senses:n,languages:r,specialAbilities:i,save:s}=t;return{...t,size:ni.LARGE,monsterType:Oe.GIANT,move:["30ft"],skills:{...e,[uo.STEALTH]:6},senses:[...n,"暗視60フィート",`受動〈知覚〉${s}`],languages:[...r,"巨人語"],specialAbilities:[...i,{label:"再生",text:"[酸][火]以外のダメージを自分のターン開始時に10hp回復する。"}]}}},{name:"ハーピー",templateType:ge.RACE,rarity:Pe.UNCOMMON,enhancer:t=>{const{senses:e,languages:n,specialAbilities:r,save:i}=t;return{...t,size:ni.MEDIUM,monsterType:Oe.MONSTROSITY,move:["20ft","飛行40ft"],senses:[...e,"暗視60フィート","受動〈知覚〉10"],languages:[...n,"共通語"],specialAbilities:[...r,{label:"誘い寄せの歌",text:`300ft以内で難易度${i+2}の[判断力]セーヴに失敗すると魅了状態になり、最短距離での移動アクション以外行えない`}]}}},{name:"ゾンビ",templateType:ge.RACE,rarity:Pe.COMMON,enhancer:t=>{const{senses:e,specialAbilities:n}=t;return{...t,size:ni.MEDIUM,monsterType:Oe.UNDEAD,move:["10ft"],senses:[...e,"暗視60フィート","受動〈知覚〉9"],specialAbilities:[...n,{label:"不死",text:"[光輝]ダメージ以外でヒットポイントが0になった場合、難易度（受けたダメージ+5）の耐久力セーヴに成功すれば1ヒット・ポイント残る。"},{label:"不死特性",text:"毒ダメージを受けず、[消耗]状態、[毒]状態、[魅了]状態、[恐怖]状態にならない。"}]}}},{name:"メデューサ",templateType:ge.RACE,rarity:Pe.UNCOMMON,enhancer:t=>{const{senses:e,skills:n,specialAbilities:r,languages:i,save:s}=t;return{...t,size:ni.MEDIUM,monsterType:Oe.UNDEAD,move:["30ft"],skills:{...n,[uo.STEALTH]:5,[uo.DECEPTION]:5,[uo.PERCEPTION]:10},senses:[...e,"暗視60フィート",`受動〈知覚〉${s}`],languages:[...i,"共通語"],specialAbilities:[...r,{label:"石化の凝視",text:`30ft以内で自分の手番を開始したクリーチャーは難易度${s+5}の【耐久力】セーヴに失敗すると石化状態になる。難易度${s}で失敗すると拘束状態になる。再度失敗すると石化状態になる。目を逸らすことを選べば石化を免れるが、メデューサへの攻撃・防御に不利を受ける`}]}}},{name:"ソルジャー",templateType:ge.CLASS,rarity:Pe.COMMON,enhancer:t=>{const{actions:e,toHit:n,damage:r,diceNum:i,damageMod:s,specialAbilities:o}=t;return{...t,actions:[...e,{label:"シミター",text:`近接武器攻撃:攻撃+${n+2}、間合い5フィート、目標1つ、ヒット:${r}(${i}d6+${s})[斬撃]ダメージ`}],specialAbilities:[...o,{label:"連携戦闘",text:"敵に隣接して味方がいるなら攻撃ロールに有利を得る。"}]}}},{name:"プリースト",templateType:ge.CLASS,rarity:Pe.COMMON,enhancer:t=>{const{actions:e,toHit:n,damage:r,diceNum:i,damageMod:s,specialAbilities:o}=t;return{...t,actions:[...e,{label:"メイス",text:`近接武器攻撃:攻撃+${n+2}、間合い5フィート、目標1つ、ヒット:${r}(${i}d6+${s})[殴打]ダメージ`}],specialAbilities:[...o,{label:"呪文能力",text:"キュア・ライト・ウーンズ（無制限）、インフリクト・ライト・ウーンズ（無制限）"}]}}},{name:"アーチャー",templateType:ge.CLASS,rarity:Pe.COMMON,enhancer:t=>{const{actions:e,toHit:n,damage:r,diceNum:i,damageMod:s,specialAbilities:o}=t;return{...t,actions:[...e,{label:"ロングボウ",text:`遠隔武器攻撃:攻撃+${n+2}、間合い300フィート、目標1つ、ヒット:${r}(${i}d6+${s})[刺突]ダメージ`}],specialAbilities:[...o,{label:"精密射撃",text:"ボーナスアクションで30ft以上遠い敵への遠隔武器攻撃に有利を得る。"}]}}},{name:"メイジ",templateType:ge.CLASS,rarity:Pe.COMMON,enhancer:t=>{const{actions:e,toHit:n,specialAbilities:r}=t;return{...t,actions:[...e,{label:"ファイアーボルト",text:`近接呪文攻撃:攻撃+${n+4}、間合い5フィート、目標1つ、ヒット:(1d10)[火]ダメージ`}],specialAbilities:[...r,{label:"呪文発動能力",text:"マジックミサイル（無制限）"}]}}}];var Vg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},DS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},m_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=s>>2,p=(s&3)<<4|l>>4;let y=(l&15)<<2|h>>6,T=h&63;u||(T=64,o||(y=64)),r.push(n[f],n[p],n[y],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(p_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||p==null)throw new MS;const y=s<<2|l>>4;if(r.push(y),h!==64){const T=l<<4&240|h>>2;if(r.push(T),p!==64){const P=h<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VS=function(t){const e=p_(t);return m_.encodeByteArray(e,!0)},yu=function(t){return VS(t).replace(/\./g,"")},OS=function(t){try{return m_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=()=>bS().__FIREBASE_DEFAULTS__,FS=()=>{if(typeof process>"u"||typeof Vg>"u")return;const t=Vg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$S=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&OS(t[1]);return e&&JSON.parse(e)},Qf=()=>{try{return LS()||FS()||$S()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BS=t=>{var e,n;return(n=(e=Qf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jS=t=>{const e=BS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},g_=()=>{var t;return(t=Qf())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yu(JSON.stringify(n)),yu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WS(){var t;const e=(t=Qf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qS(){return!WS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KS(){try{return typeof indexedDB=="object"}catch{return!1}}function QS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="FirebaseError";class Os extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=GS,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,y_.prototype.create)}}class y_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?YS(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Os(i,l,r)}}function YS(t,e){return t.replace(XS,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const XS=/\{\$([^}]+)}/g;function Ed(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Og(s)&&Og(o)){if(!Ed(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Og(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t){return t&&t._delegate?t._delegate:t}class na{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new US;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eI(e))try{this.getOrInitializeService({instanceIdentifier:ri})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ri){return this.instances.has(e)}getOptions(e=ri){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ri){return this.component?this.component.multipleInstances?e:ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZS(t){return t===ri?void 0:t}function eI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const nI={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},rI=ie.INFO,iI={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},sI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=iI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class v_{constructor(e){this.name=e,this._logLevel=rI,this._logHandler=sI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const oI=(t,e)=>e.some(n=>t instanceof n);let bg,Lg;function aI(){return bg||(bg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lI(){return Lg||(Lg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const __=new WeakMap,wd=new WeakMap,E_=new WeakMap,hh=new WeakMap,Gf=new WeakMap;function uI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Fr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&__.set(n,t)}).catch(()=>{}),Gf.set(e,t),e}function cI(t){if(wd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});wd.set(t,e)}let Td={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||E_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hI(t){Td=t(Td)}function dI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(dh(this),e,...n);return E_.set(r,e.sort?e.sort():[e]),Fr(r)}:lI().includes(t)?function(...e){return t.apply(dh(this),e),Fr(__.get(this))}:function(...e){return Fr(t.apply(dh(this),e))}}function fI(t){return typeof t=="function"?dI(t):(t instanceof IDBTransaction&&cI(t),oI(t,aI())?new Proxy(t,Td):t)}function Fr(t){if(t instanceof IDBRequest)return uI(t);if(hh.has(t))return hh.get(t);const e=fI(t);return e!==t&&(hh.set(t,e),Gf.set(e,t)),e}const dh=t=>Gf.get(t);function pI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Fr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Fr(o.result),u.oldVersion,u.newVersion,Fr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const mI=["get","getKey","getAll","getAllKeys","count"],gI=["put","add","delete","clear"],fh=new Map;function Fg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fh.get(e))return fh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=gI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mI.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return fh.set(e,s),s}hI(t=>({...t,get:(e,n,r)=>Fg(e,n)||t.get(e,n,r),has:(e,n)=>!!Fg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sd="@firebase/app",$g="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new v_("@firebase/app"),_I="@firebase/app-compat",EI="@firebase/analytics-compat",wI="@firebase/analytics",TI="@firebase/app-check-compat",SI="@firebase/app-check",II="@firebase/auth",AI="@firebase/auth-compat",CI="@firebase/database",RI="@firebase/data-connect",PI="@firebase/database-compat",xI="@firebase/functions",kI="@firebase/functions-compat",NI="@firebase/installations",DI="@firebase/installations-compat",MI="@firebase/messaging",VI="@firebase/messaging-compat",OI="@firebase/performance",bI="@firebase/performance-compat",LI="@firebase/remote-config",FI="@firebase/remote-config-compat",$I="@firebase/storage",BI="@firebase/storage-compat",jI="@firebase/firestore",UI="@firebase/vertexai-preview",zI="@firebase/firestore-compat",HI="firebase",WI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="[DEFAULT]",qI={[Sd]:"fire-core",[_I]:"fire-core-compat",[wI]:"fire-analytics",[EI]:"fire-analytics-compat",[SI]:"fire-app-check",[TI]:"fire-app-check-compat",[II]:"fire-auth",[AI]:"fire-auth-compat",[CI]:"fire-rtdb",[RI]:"fire-data-connect",[PI]:"fire-rtdb-compat",[xI]:"fire-fn",[kI]:"fire-fn-compat",[NI]:"fire-iid",[DI]:"fire-iid-compat",[MI]:"fire-fcm",[VI]:"fire-fcm-compat",[OI]:"fire-perf",[bI]:"fire-perf-compat",[LI]:"fire-rc",[FI]:"fire-rc-compat",[$I]:"fire-gcs",[BI]:"fire-gcs-compat",[jI]:"fire-fst",[zI]:"fire-fst-compat",[UI]:"fire-vertex","fire-js":"fire-js",[HI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=new Map,KI=new Map,Ad=new Map;function Bg(t,e){try{t.container.addComponent(e)}catch(n){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _u(t){const e=t.name;if(Ad.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;Ad.set(e,t);for(const n of vu.values())Bg(n,t);for(const n of KI.values())Bg(n,t);return!0}function QI(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new y_("app","Firebase",GI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=WI;function w_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Id,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw $r.create("bad-app-name",{appName:String(i)});if(n||(n=g_()),!n)throw $r.create("no-options");const s=vu.get(i);if(s){if(Ed(n,s.options)&&Ed(r,s.config))return s;throw $r.create("duplicate-app",{appName:i})}const o=new tI(i);for(const u of Ad.values())o.addComponent(u);const l=new YI(n,r,o);return vu.set(i,l),l}function JI(t=Id){const e=vu.get(t);if(!e&&t===Id&&g_())return w_();if(!e)throw $r.create("no-app",{appName:t});return e}function us(t,e,n){var r;let i=(r=qI[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(l.join(" "));return}_u(new na(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="firebase-heartbeat-database",eA=1,ra="firebase-heartbeat-store";let ph=null;function T_(){return ph||(ph=pI(ZI,eA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ra)}catch(n){console.warn(n)}}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),ph}async function tA(t){try{const n=(await T_()).transaction(ra),r=await n.objectStore(ra).get(S_(t));return await n.done,r}catch(e){if(e instanceof Os)sr.warn(e.message);else{const n=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});sr.warn(n.message)}}}async function jg(t,e){try{const r=(await T_()).transaction(ra,"readwrite");await r.objectStore(ra).put(e,S_(t)),await r.done}catch(n){if(n instanceof Os)sr.warn(n.message);else{const r=$r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sr.warn(r.message)}}}function S_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=1024,rA=30*24*60*60*1e3;class iA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ug();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=rA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){sr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ug(),{heartbeatsToSend:r,unsentEntries:i}=sA(this._heartbeatsCache.heartbeats),s=yu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return sr.warn(n),""}}}function Ug(){return new Date().toISOString().substring(0,10)}function sA(t,e=nA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),zg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),zg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class oA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KS()?QS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return jg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return jg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function zg(t){return yu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t){_u(new na("platform-logger",e=>new yI(e),"PRIVATE")),_u(new na("heartbeat",e=>new iA(e),"PRIVATE")),us(Sd,$g,t),us(Sd,$g,"esm2017"),us("fire-js","")}aA("");var Hg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var di,I_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,m){function w(){}w.prototype=m.prototype,v.D=m.prototype,v.prototype=new w,v.prototype.constructor=v,v.C=function(I,C,x){for(var A=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)A[Ae-2]=arguments[Ae];return m.prototype[C].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,m,w){w||(w=0);var I=Array(16);if(typeof m=="string")for(var C=0;16>C;++C)I[C]=m.charCodeAt(w++)|m.charCodeAt(w++)<<8|m.charCodeAt(w++)<<16|m.charCodeAt(w++)<<24;else for(C=0;16>C;++C)I[C]=m[w++]|m[w++]<<8|m[w++]<<16|m[w++]<<24;m=v.g[0],w=v.g[1],C=v.g[2];var x=v.g[3],A=m+(x^w&(C^x))+I[0]+3614090360&4294967295;m=w+(A<<7&4294967295|A>>>25),A=x+(C^m&(w^C))+I[1]+3905402710&4294967295,x=m+(A<<12&4294967295|A>>>20),A=C+(w^x&(m^w))+I[2]+606105819&4294967295,C=x+(A<<17&4294967295|A>>>15),A=w+(m^C&(x^m))+I[3]+3250441966&4294967295,w=C+(A<<22&4294967295|A>>>10),A=m+(x^w&(C^x))+I[4]+4118548399&4294967295,m=w+(A<<7&4294967295|A>>>25),A=x+(C^m&(w^C))+I[5]+1200080426&4294967295,x=m+(A<<12&4294967295|A>>>20),A=C+(w^x&(m^w))+I[6]+2821735955&4294967295,C=x+(A<<17&4294967295|A>>>15),A=w+(m^C&(x^m))+I[7]+4249261313&4294967295,w=C+(A<<22&4294967295|A>>>10),A=m+(x^w&(C^x))+I[8]+1770035416&4294967295,m=w+(A<<7&4294967295|A>>>25),A=x+(C^m&(w^C))+I[9]+2336552879&4294967295,x=m+(A<<12&4294967295|A>>>20),A=C+(w^x&(m^w))+I[10]+4294925233&4294967295,C=x+(A<<17&4294967295|A>>>15),A=w+(m^C&(x^m))+I[11]+2304563134&4294967295,w=C+(A<<22&4294967295|A>>>10),A=m+(x^w&(C^x))+I[12]+1804603682&4294967295,m=w+(A<<7&4294967295|A>>>25),A=x+(C^m&(w^C))+I[13]+4254626195&4294967295,x=m+(A<<12&4294967295|A>>>20),A=C+(w^x&(m^w))+I[14]+2792965006&4294967295,C=x+(A<<17&4294967295|A>>>15),A=w+(m^C&(x^m))+I[15]+1236535329&4294967295,w=C+(A<<22&4294967295|A>>>10),A=m+(C^x&(w^C))+I[1]+4129170786&4294967295,m=w+(A<<5&4294967295|A>>>27),A=x+(w^C&(m^w))+I[6]+3225465664&4294967295,x=m+(A<<9&4294967295|A>>>23),A=C+(m^w&(x^m))+I[11]+643717713&4294967295,C=x+(A<<14&4294967295|A>>>18),A=w+(x^m&(C^x))+I[0]+3921069994&4294967295,w=C+(A<<20&4294967295|A>>>12),A=m+(C^x&(w^C))+I[5]+3593408605&4294967295,m=w+(A<<5&4294967295|A>>>27),A=x+(w^C&(m^w))+I[10]+38016083&4294967295,x=m+(A<<9&4294967295|A>>>23),A=C+(m^w&(x^m))+I[15]+3634488961&4294967295,C=x+(A<<14&4294967295|A>>>18),A=w+(x^m&(C^x))+I[4]+3889429448&4294967295,w=C+(A<<20&4294967295|A>>>12),A=m+(C^x&(w^C))+I[9]+568446438&4294967295,m=w+(A<<5&4294967295|A>>>27),A=x+(w^C&(m^w))+I[14]+3275163606&4294967295,x=m+(A<<9&4294967295|A>>>23),A=C+(m^w&(x^m))+I[3]+4107603335&4294967295,C=x+(A<<14&4294967295|A>>>18),A=w+(x^m&(C^x))+I[8]+1163531501&4294967295,w=C+(A<<20&4294967295|A>>>12),A=m+(C^x&(w^C))+I[13]+2850285829&4294967295,m=w+(A<<5&4294967295|A>>>27),A=x+(w^C&(m^w))+I[2]+4243563512&4294967295,x=m+(A<<9&4294967295|A>>>23),A=C+(m^w&(x^m))+I[7]+1735328473&4294967295,C=x+(A<<14&4294967295|A>>>18),A=w+(x^m&(C^x))+I[12]+2368359562&4294967295,w=C+(A<<20&4294967295|A>>>12),A=m+(w^C^x)+I[5]+4294588738&4294967295,m=w+(A<<4&4294967295|A>>>28),A=x+(m^w^C)+I[8]+2272392833&4294967295,x=m+(A<<11&4294967295|A>>>21),A=C+(x^m^w)+I[11]+1839030562&4294967295,C=x+(A<<16&4294967295|A>>>16),A=w+(C^x^m)+I[14]+4259657740&4294967295,w=C+(A<<23&4294967295|A>>>9),A=m+(w^C^x)+I[1]+2763975236&4294967295,m=w+(A<<4&4294967295|A>>>28),A=x+(m^w^C)+I[4]+1272893353&4294967295,x=m+(A<<11&4294967295|A>>>21),A=C+(x^m^w)+I[7]+4139469664&4294967295,C=x+(A<<16&4294967295|A>>>16),A=w+(C^x^m)+I[10]+3200236656&4294967295,w=C+(A<<23&4294967295|A>>>9),A=m+(w^C^x)+I[13]+681279174&4294967295,m=w+(A<<4&4294967295|A>>>28),A=x+(m^w^C)+I[0]+3936430074&4294967295,x=m+(A<<11&4294967295|A>>>21),A=C+(x^m^w)+I[3]+3572445317&4294967295,C=x+(A<<16&4294967295|A>>>16),A=w+(C^x^m)+I[6]+76029189&4294967295,w=C+(A<<23&4294967295|A>>>9),A=m+(w^C^x)+I[9]+3654602809&4294967295,m=w+(A<<4&4294967295|A>>>28),A=x+(m^w^C)+I[12]+3873151461&4294967295,x=m+(A<<11&4294967295|A>>>21),A=C+(x^m^w)+I[15]+530742520&4294967295,C=x+(A<<16&4294967295|A>>>16),A=w+(C^x^m)+I[2]+3299628645&4294967295,w=C+(A<<23&4294967295|A>>>9),A=m+(C^(w|~x))+I[0]+4096336452&4294967295,m=w+(A<<6&4294967295|A>>>26),A=x+(w^(m|~C))+I[7]+1126891415&4294967295,x=m+(A<<10&4294967295|A>>>22),A=C+(m^(x|~w))+I[14]+2878612391&4294967295,C=x+(A<<15&4294967295|A>>>17),A=w+(x^(C|~m))+I[5]+4237533241&4294967295,w=C+(A<<21&4294967295|A>>>11),A=m+(C^(w|~x))+I[12]+1700485571&4294967295,m=w+(A<<6&4294967295|A>>>26),A=x+(w^(m|~C))+I[3]+2399980690&4294967295,x=m+(A<<10&4294967295|A>>>22),A=C+(m^(x|~w))+I[10]+4293915773&4294967295,C=x+(A<<15&4294967295|A>>>17),A=w+(x^(C|~m))+I[1]+2240044497&4294967295,w=C+(A<<21&4294967295|A>>>11),A=m+(C^(w|~x))+I[8]+1873313359&4294967295,m=w+(A<<6&4294967295|A>>>26),A=x+(w^(m|~C))+I[15]+4264355552&4294967295,x=m+(A<<10&4294967295|A>>>22),A=C+(m^(x|~w))+I[6]+2734768916&4294967295,C=x+(A<<15&4294967295|A>>>17),A=w+(x^(C|~m))+I[13]+1309151649&4294967295,w=C+(A<<21&4294967295|A>>>11),A=m+(C^(w|~x))+I[4]+4149444226&4294967295,m=w+(A<<6&4294967295|A>>>26),A=x+(w^(m|~C))+I[11]+3174756917&4294967295,x=m+(A<<10&4294967295|A>>>22),A=C+(m^(x|~w))+I[2]+718787259&4294967295,C=x+(A<<15&4294967295|A>>>17),A=w+(x^(C|~m))+I[9]+3951481745&4294967295,v.g[0]=v.g[0]+m&4294967295,v.g[1]=v.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,v.g[2]=v.g[2]+C&4294967295,v.g[3]=v.g[3]+x&4294967295}r.prototype.u=function(v,m){m===void 0&&(m=v.length);for(var w=m-this.blockSize,I=this.B,C=this.h,x=0;x<m;){if(C==0)for(;x<=w;)i(this,v,x),x+=this.blockSize;if(typeof v=="string"){for(;x<m;)if(I[C++]=v.charCodeAt(x++),C==this.blockSize){i(this,I),C=0;break}}else for(;x<m;)if(I[C++]=v[x++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=m},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var m=1;m<v.length-8;++m)v[m]=0;var w=8*this.o;for(m=v.length-8;m<v.length;++m)v[m]=w&255,w/=256;for(this.u(v),v=Array(16),m=w=0;4>m;++m)for(var I=0;32>I;I+=8)v[w++]=this.g[m]>>>I&255;return v};function s(v,m){var w=l;return Object.prototype.hasOwnProperty.call(w,v)?w[v]:w[v]=m(v)}function o(v,m){this.h=m;for(var w=[],I=!0,C=v.length-1;0<=C;C--){var x=v[C]|0;I&&x==m||(w[C]=x,I=!1)}this.g=w}var l={};function u(v){return-128<=v&&128>v?s(v,function(m){return new o([m|0],0>m?-1:0)}):new o([v|0],0>v?-1:0)}function h(v){if(isNaN(v)||!isFinite(v))return p;if(0>v)return D(h(-v));for(var m=[],w=1,I=0;v>=w;I++)m[I]=v/w|0,w*=4294967296;return new o(m,0)}function f(v,m){if(v.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(v.charAt(0)=="-")return D(f(v.substring(1),m));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=h(Math.pow(m,8)),I=p,C=0;C<v.length;C+=8){var x=Math.min(8,v.length-C),A=parseInt(v.substring(C,C+x),m);8>x?(x=h(Math.pow(m,x)),I=I.j(x).add(h(A))):(I=I.j(w),I=I.add(h(A)))}return I}var p=u(0),y=u(1),T=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-D(this).m();for(var v=0,m=1,w=0;w<this.g.length;w++){var I=this.i(w);v+=(0<=I?I:4294967296+I)*m,m*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(P(this))return"0";if(R(this))return"-"+D(this).toString(v);for(var m=h(Math.pow(v,6)),w=this,I="";;){var C=N(w,m).g;w=E(w,C.j(m));var x=((0<w.g.length?w.g[0]:w.h)>>>0).toString(v);if(w=C,P(w))return x+I;for(;6>x.length;)x="0"+x;I=x+I}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function P(v){if(v.h!=0)return!1;for(var m=0;m<v.g.length;m++)if(v.g[m]!=0)return!1;return!0}function R(v){return v.h==-1}t.l=function(v){return v=E(this,v),R(v)?-1:P(v)?0:1};function D(v){for(var m=v.g.length,w=[],I=0;I<m;I++)w[I]=~v.g[I];return new o(w,~v.h).add(y)}t.abs=function(){return R(this)?D(this):this},t.add=function(v){for(var m=Math.max(this.g.length,v.g.length),w=[],I=0,C=0;C<=m;C++){var x=I+(this.i(C)&65535)+(v.i(C)&65535),A=(x>>>16)+(this.i(C)>>>16)+(v.i(C)>>>16);I=A>>>16,x&=65535,A&=65535,w[C]=A<<16|x}return new o(w,w[w.length-1]&-2147483648?-1:0)};function E(v,m){return v.add(D(m))}t.j=function(v){if(P(this)||P(v))return p;if(R(this))return R(v)?D(this).j(D(v)):D(D(this).j(v));if(R(v))return D(this.j(D(v)));if(0>this.l(T)&&0>v.l(T))return h(this.m()*v.m());for(var m=this.g.length+v.g.length,w=[],I=0;I<2*m;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<v.g.length;C++){var x=this.i(I)>>>16,A=this.i(I)&65535,Ae=v.i(C)>>>16,Xt=v.i(C)&65535;w[2*I+2*C]+=A*Xt,_(w,2*I+2*C),w[2*I+2*C+1]+=x*Xt,_(w,2*I+2*C+1),w[2*I+2*C+1]+=A*Ae,_(w,2*I+2*C+1),w[2*I+2*C+2]+=x*Ae,_(w,2*I+2*C+2)}for(I=0;I<m;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=m;I<2*m;I++)w[I]=0;return new o(w,0)};function _(v,m){for(;(v[m]&65535)!=v[m];)v[m+1]+=v[m]>>>16,v[m]&=65535,m++}function S(v,m){this.g=v,this.h=m}function N(v,m){if(P(m))throw Error("division by zero");if(P(v))return new S(p,p);if(R(v))return m=N(D(v),m),new S(D(m.g),D(m.h));if(R(m))return m=N(v,D(m)),new S(D(m.g),m.h);if(30<v.g.length){if(R(v)||R(m))throw Error("slowDivide_ only works with positive integers.");for(var w=y,I=m;0>=I.l(v);)w=O(w),I=O(I);var C=M(w,1),x=M(I,1);for(I=M(I,2),w=M(w,2);!P(I);){var A=x.add(I);0>=A.l(v)&&(C=C.add(w),x=A),I=M(I,1),w=M(w,1)}return m=E(v,C.j(m)),new S(C,m)}for(C=p;0<=v.l(m);){for(w=Math.max(1,Math.floor(v.m()/m.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),x=h(w),A=x.j(m);R(A)||0<A.l(v);)w-=I,x=h(w),A=x.j(m);P(x)&&(x=y),C=C.add(x),v=E(v,A)}return new S(C,v)}t.A=function(v){return N(this,v).h},t.and=function(v){for(var m=Math.max(this.g.length,v.g.length),w=[],I=0;I<m;I++)w[I]=this.i(I)&v.i(I);return new o(w,this.h&v.h)},t.or=function(v){for(var m=Math.max(this.g.length,v.g.length),w=[],I=0;I<m;I++)w[I]=this.i(I)|v.i(I);return new o(w,this.h|v.h)},t.xor=function(v){for(var m=Math.max(this.g.length,v.g.length),w=[],I=0;I<m;I++)w[I]=this.i(I)^v.i(I);return new o(w,this.h^v.h)};function O(v){for(var m=v.g.length+1,w=[],I=0;I<m;I++)w[I]=v.i(I)<<1|v.i(I-1)>>>31;return new o(w,v.h)}function M(v,m){var w=m>>5;m%=32;for(var I=v.g.length-w,C=[],x=0;x<I;x++)C[x]=0<m?v.i(x+w)>>>m|v.i(x+w+1)<<32-m:v.i(x+w);return new o(C,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,I_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,di=o}).apply(typeof Hg<"u"?Hg:typeof self<"u"?self:typeof window<"u"?window:{});var vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var A_,go,C_,bl,Cd,R_,P_,x_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,d){return a==Array.prototype||a==Object.prototype||(a[c]=d.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof vl=="object"&&vl];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var d=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var k=a[g];if(!(k in d))break e;d=d[k]}a=a[a.length-1],g=d[a],c=c(g),c!=g&&c!=null&&e(d,a,{configurable:!0,writable:!0,value:c})}}function s(a,c){a instanceof String&&(a+="");var d=0,g=!1,k={next:function(){if(!g&&d<a.length){var V=d++;return{value:c(V,a[V]),done:!1}}return g=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}i("Array.prototype.values",function(a){return a||function(){return s(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function h(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,d){return a.call.apply(a.bind,arguments)}function p(a,c,d){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,g),a.apply(c,k)}}return function(){return a.apply(c,arguments)}}function y(a,c,d){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function T(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function P(a,c){function d(){}d.prototype=c.prototype,a.aa=c.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(g,k,V){for(var j=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)j[pe-2]=arguments[pe];return c.prototype[k].apply(g,j)}}function R(a){const c=a.length;if(0<c){const d=Array(c);for(let g=0;g<c;g++)d[g]=a[g];return d}return[]}function D(a,c){for(let d=1;d<arguments.length;d++){const g=arguments[d];if(u(g)){const k=a.length||0,V=g.length||0;a.length=k+V;for(let j=0;j<V;j++)a[k+j]=g[j]}else a.push(g)}}class E{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function _(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function N(a){return N[" "](a),a}N[" "]=function(){};var O=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(a,c,d){for(const g in a)c.call(d,a[g],g,a)}function v(a,c){for(const d in a)c.call(void 0,a[d],d,a)}function m(a){const c={};for(const d in a)c[d]=a[d];return c}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,c){let d,g;for(let k=1;k<arguments.length;k++){g=arguments[k];for(d in g)a[d]=g[d];for(let V=0;V<w.length;V++)d=w[V],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function C(a){var c=1;a=a.split(":");const d=[];for(;0<c&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(":")),d}function x(a){l.setTimeout(()=>{throw a},0)}function A(){var a=W;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class Ae{constructor(){this.h=this.g=null}add(c,d){const g=Xt.get();g.set(c,d),this.h?this.h.next=g:this.g=g,this.h=g}}var Xt=new E(()=>new An,a=>a.reset());class An{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,U=!1,W=new Ae,Q=()=>{const a=l.Promise.resolve(void 0);Ce=()=>{a.then(oe)}};var oe=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(d){x(d)}var c=Xt;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}U=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var Ye=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return a}();function rt(a,c){if(ue.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(O){e:{try{N(c.nodeName);var k=!0;break e}catch{}k=!1}k||(c=null)}}else d=="mouseover"?c=a.fromElement:d=="mouseout"&&(c=a.toElement);this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:fe[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&rt.aa.h.call(this)}}P(rt,ue);var fe={2:"touch",3:"pen",4:"mouse"};rt.prototype.h=function(){rt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var it="closure_listenable_"+(1e6*Math.random()|0),Cn=0;function Jt(a,c,d,g,k){this.listener=a,this.proxy=null,this.src=c,this.type=d,this.capture=!!g,this.ha=k,this.key=++Cn,this.da=this.fa=!1}function Be(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Bt(a){this.src=a,this.g={},this.h=0}Bt.prototype.add=function(a,c,d,g,k){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var j=xi(a,c,g,k);return-1<j?(c=a[j],d||(c.fa=!1)):(c=new Jt(c,this.src,V,!!g,k),c.fa=d,a.push(c)),c};function je(a,c){var d=c.type;if(d in a.g){var g=a.g[d],k=Array.prototype.indexOf.call(g,c,void 0),V;(V=0<=k)&&Array.prototype.splice.call(g,k,1),V&&(Be(c),a.g[d].length==0&&(delete a.g[d],a.h--))}}function xi(a,c,d,g){for(var k=0;k<a.length;++k){var V=a[k];if(!V.da&&V.listener==c&&V.capture==!!d&&V.ha==g)return k}return-1}var dn="closure_lm_"+(1e6*Math.random()|0),cr={};function jn(a,c,d,g,k){if(Array.isArray(c)){for(var V=0;V<c.length;V++)jn(a,c[V],d,g,k);return null}return d=Ma(d),a&&a[it]?a.K(c,d,h(g)?!!g.capture:!!g,k):Na(a,c,d,!1,g,k)}function Na(a,c,d,g,k,V){if(!c)throw Error("Invalid event type");var j=h(k)?!!k.capture:!!k,pe=Di(a);if(pe||(a[dn]=pe=new Bt(a)),d=pe.add(c,d,g,j,V),d.proxy)return d;if(g=Da(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)Ye||(k=j),k===void 0&&(k=!1),a.addEventListener(c.toString(),g,k);else if(a.attachEvent)a.attachEvent(Gr(c.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Da(){function a(d){return c.call(a.src,a.listener,d)}const c=Ni;return a}function ki(a,c,d,g,k){if(Array.isArray(c))for(var V=0;V<c.length;V++)ki(a,c[V],d,g,k);else g=h(g)?!!g.capture:!!g,d=Ma(d),a&&a[it]?(a=a.i,c=String(c).toString(),c in a.g&&(V=a.g[c],d=xi(V,d,g,k),-1<d&&(Be(V[d]),Array.prototype.splice.call(V,d,1),V.length==0&&(delete a.g[c],a.h--)))):a&&(a=Di(a))&&(c=a.g[c.toString()],a=-1,c&&(a=xi(c,d,g,k)),(d=-1<a?c[a]:null)&&Zt(d))}function Zt(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[it])je(c.i,a);else{var d=a.type,g=a.proxy;c.removeEventListener?c.removeEventListener(d,g,a.capture):c.detachEvent?c.detachEvent(Gr(d),g):c.addListener&&c.removeListener&&c.removeListener(g),(d=Di(c))?(je(d,a),d.h==0&&(d.src=null,c[dn]=null)):Be(a)}}}function Gr(a){return a in cr?cr[a]:cr[a]="on"+a}function Ni(a,c){if(a.da)a=!0;else{c=new rt(c,this);var d=a.listener,g=a.ha||a.src;a.fa&&Zt(a),a=d.call(g,c)}return a}function Di(a){return a=a[dn],a instanceof Bt?a:null}var Mi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ma(a){return typeof a=="function"?a:(a[Mi]||(a[Mi]=function(c){return a.handleEvent(c)}),a[Mi])}function Xe(){Y.call(this),this.i=new Bt(this),this.M=this,this.F=null}P(Xe,Y),Xe.prototype[it]=!0,Xe.prototype.removeEventListener=function(a,c,d,g){ki(this,a,c,d,g)};function Me(a,c){var d,g=a.F;if(g)for(d=[];g;g=g.F)d.push(g);if(a=a.M,g=c.type||c,typeof c=="string")c=new ue(c,a);else if(c instanceof ue)c.target=c.target||a;else{var k=c;c=new ue(g,a),I(c,k)}if(k=!0,d)for(var V=d.length-1;0<=V;V--){var j=c.g=d[V];k=fn(j,g,!0,c)&&k}if(j=c.g=a,k=fn(j,g,!0,c)&&k,k=fn(j,g,!1,c)&&k,d)for(V=0;V<d.length;V++)j=c.g=d[V],k=fn(j,g,!1,c)&&k}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var d=a.g[c],g=0;g<d.length;g++)Be(d[g]);delete a.g[c],a.h--}}this.F=null},Xe.prototype.K=function(a,c,d,g){return this.i.add(String(a),c,!1,d,g)},Xe.prototype.L=function(a,c,d,g){return this.i.add(String(a),c,!0,d,g)};function fn(a,c,d,g){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var k=!0,V=0;V<c.length;++V){var j=c[V];if(j&&!j.da&&j.capture==d){var pe=j.listener,at=j.ha||j.src;j.fa&&je(a.i,j),k=pe.call(at,g)!==!1&&k}}return k&&!g.defaultPrevented}function hr(a,c,d){if(typeof a=="function")d&&(a=y(a,d));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function Hs(a){a.g=hr(()=>{a.g=null,a.i&&(a.i=!1,Hs(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class Rn extends Y{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Hs(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dr(a){Y.call(this),this.h=a,this.g={}}P(dr,Y);var Va=[];function Oa(a){M(a.g,function(c,d){this.g.hasOwnProperty(d)&&Zt(c)},a),a.g={}}dr.prototype.N=function(){dr.aa.N.call(this),Oa(this)},dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vi=l.JSON.stringify,Ic=l.JSON.parse,ba=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ws(){}Ws.prototype.h=null;function La(a){return a.h||(a.h=a.i())}function Fa(){}var Re={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function st(){ue.call(this,"d")}P(st,ue);function ot(){ue.call(this,"c")}P(ot,ue);var gt={},Rt=null;function yt(){return Rt=Rt||new Xe}gt.La="serverreachability";function jt(a){ue.call(this,gt.La,a)}P(jt,ue);function en(a){const c=yt();Me(c,new jt(c))}gt.STAT_EVENT="statevent";function Dt(a,c){ue.call(this,gt.STAT_EVENT,a),this.stat=c}P(Dt,ue);function Le(a){const c=yt();Me(c,new Dt(c,a))}gt.Ma="timingevent";function fr(a,c){ue.call(this,gt.Ma,a),this.size=c}P(fr,ue);function Pn(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function xn(){this.g=!0}xn.prototype.xa=function(){this.g=!1};function $a(a,c,d,g,k,V){a.info(function(){if(a.g)if(V)for(var j="",pe=V.split("&"),at=0;at<pe.length;at++){var ae=pe[at].split("=");if(1<ae.length){var vt=ae[0];ae=ae[1];var _t=vt.split("_");j=2<=_t.length&&_t[1]=="type"?j+(vt+"="+ae+"&"):j+(vt+"=redacted&")}}else j=null;else j=V;return"XMLHTTP REQ ("+g+") [attempt "+k+"]: "+c+`
`+d+`
`+j})}function Yr(a,c,d,g,k,V,j){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+k+"]: "+c+`
`+d+`
`+V+" "+j})}function tn(a,c,d,g){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+VE(a,d)+(g?" "+g:"")})}function qs(a,c){a.info(function(){return"TIMEOUT: "+c})}xn.prototype.info=function(){};function VE(a,c){if(!a.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var g=d[a];if(!(2>g.length)){var k=g[1];if(Array.isArray(k)&&!(1>k.length)){var V=k[0];if(V!="noop"&&V!="stop"&&V!="close")for(var j=1;j<k.length;j++)k[j]=""}}}}return Vi(d)}catch{return c}}var Ba={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$p={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ac;function ja(){}P(ja,Ws),ja.prototype.g=function(){return new XMLHttpRequest},ja.prototype.i=function(){return{}},Ac=new ja;function pr(a,c,d,g){this.j=a,this.i=c,this.l=d,this.R=g||1,this.U=new dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bp}function Bp(){this.i=null,this.g="",this.h=!1}var jp={},Cc={};function Rc(a,c,d){a.L=1,a.v=Wa(Un(c)),a.m=d,a.P=!0,Up(a,null)}function Up(a,c){a.F=Date.now(),Ua(a),a.A=Un(a.v);var d=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),nm(d.i,"t",g),a.C=0,d=a.j.J,a.h=new Bp,a.g=Em(a.j,d?c:null,!a.m),0<a.O&&(a.M=new Rn(y(a.Y,a,a.g),a.O)),c=a.U,d=a.g,g=a.ca;var k="readystatechange";Array.isArray(k)||(k&&(Va[0]=k.toString()),k=Va);for(var V=0;V<k.length;V++){var j=jn(d,k[V],g||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),en(),$a(a.i,a.u,a.A,a.l,a.R,a.m)}pr.prototype.ca=function(a){a=a.target;const c=this.M;c&&zn(a)==3?c.j():this.Y(a)},pr.prototype.Y=function(a){try{if(a==this.g)e:{const _t=zn(this.g);var c=this.g.Ba();const Li=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||um(this.g)))){this.J||_t!=4||c==7||(c==8||0>=Li?en(3):en(2)),Pc(this);var d=this.g.Z();this.X=d;t:if(zp(this)){var g=um(this.g);a="";var k=g.length,V=zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xr(this),Ks(this);var j="";break t}this.h.i=new l.TextDecoder}for(c=0;c<k;c++)this.h.h=!0,a+=this.h.i.decode(g[c],{stream:!(V&&c==k-1)});g.length=0,this.h.g+=a,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=d==200,Yr(this.i,this.u,this.A,this.l,this.R,_t,d),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,at=this.g;if((pe=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(pe)){var ae=pe;break t}}ae=null}if(d=ae)tn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xc(this,d);else{this.o=!1,this.s=3,Le(12),Xr(this),Ks(this);break e}}if(this.P){d=!0;let pn;for(;!this.J&&this.C<j.length;)if(pn=OE(this,j),pn==Cc){_t==4&&(this.s=4,Le(14),d=!1),tn(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==jp){this.s=4,Le(15),tn(this.i,this.l,j,"[Invalid Chunk]"),d=!1;break}else tn(this.i,this.l,pn,null),xc(this,pn);if(zp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||j.length!=0||this.h.h||(this.s=1,Le(16),d=!1),this.o=this.o&&d,!d)tn(this.i,this.l,j,"[Invalid Chunked Response]"),Xr(this),Ks(this);else if(0<j.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Oc(vt),vt.M=!0,Le(11))}}else tn(this.i,this.l,j,null),xc(this,j);_t==4&&Xr(this),this.o&&!this.J&&(_t==4?gm(this.j,this):(this.o=!1,Ua(this)))}else JE(this.g),d==400&&0<j.indexOf("Unknown SID")?(this.s=3,Le(12)):(this.s=0,Le(13)),Xr(this),Ks(this)}}}catch{}finally{}};function zp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function OE(a,c){var d=a.C,g=c.indexOf(`
`,d);return g==-1?Cc:(d=Number(c.substring(d,g)),isNaN(d)?jp:(g+=1,g+d>c.length?Cc:(c=c.slice(g,g+d),a.C=g+d,c)))}pr.prototype.cancel=function(){this.J=!0,Xr(this)};function Ua(a){a.S=Date.now()+a.I,Hp(a,a.I)}function Hp(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Pn(y(a.ba,a),c)}function Pc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}pr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(qs(this.i,this.A),this.L!=2&&(en(),Le(17)),Xr(this),this.s=2,Ks(this)):Hp(this,this.S-a)};function Ks(a){a.j.G==0||a.J||gm(a.j,a)}function Xr(a){Pc(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,Oa(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function xc(a,c){try{var d=a.j;if(d.G!=0&&(d.g==a||kc(d.h,a))){if(!a.K&&kc(d.h,a)&&d.G==3){try{var g=d.Da.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var k=g;if(k[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)Xa(d),Ga(d);else break e;Vc(d),Le(18)}}else d.za=k[1],0<d.za-d.T&&37500>k[2]&&d.F&&d.v==0&&!d.C&&(d.C=Pn(y(d.Za,d),6e3));if(1>=Kp(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Zr(d,11)}else if((a.K||d.g==a)&&Xa(d),!_(c))for(k=d.Da.g.parse(c),c=0;c<k.length;c++){let ae=k[c];if(d.T=ae[0],ae=ae[1],d.G==2)if(ae[0]=="c"){d.K=ae[1],d.ia=ae[2];const vt=ae[3];vt!=null&&(d.la=vt,d.j.info("VER="+d.la));const _t=ae[4];_t!=null&&(d.Aa=_t,d.j.info("SVER="+d.Aa));const Li=ae[5];Li!=null&&typeof Li=="number"&&0<Li&&(g=1.5*Li,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const pn=a.g;if(pn){const Za=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Za){var V=g.h;V.g||Za.indexOf("spdy")==-1&&Za.indexOf("quic")==-1&&Za.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Nc(V,V.h),V.h=null))}if(g.D){const bc=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;bc&&(g.ya=bc,_e(g.I,g.D,bc))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var j=a;if(g.qa=_m(g,g.J?g.ia:null,g.W),j.K){Qp(g.h,j);var pe=j,at=g.L;at&&(pe.I=at),pe.B&&(Pc(pe),Ua(pe)),g.g=j}else pm(g);0<d.i.length&&Ya(d)}else ae[0]!="stop"&&ae[0]!="close"||Zr(d,7);else d.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?Zr(d,7):Mc(d):ae[0]!="noop"&&d.l&&d.l.ta(ae),d.v=0)}}en(4)}catch{}}var bE=class{constructor(a,c){this.g=a,this.map=c}};function Wp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Kp(a){return a.h?1:a.g?a.g.size:0}function kc(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Nc(a,c){a.g?a.g.add(c):a.h=c}function Qp(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}Wp.prototype.cancel=function(){if(this.i=Gp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Gp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const d of a.g.values())c=c.concat(d.D);return c}return R(a.i)}function LE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],d=a.length,g=0;g<d;g++)c.push(a[g]);return c}c=[],d=0;for(g in a)c[d++]=a[g];return c}function FE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var d=0;d<a;d++)c.push(d);return c}c=[],d=0;for(const g in a)c[d++]=g;return c}}}function Yp(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var d=FE(a),g=LE(a),k=g.length,V=0;V<k;V++)c.call(void 0,g[V],d&&d[V],a)}var Xp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $E(a,c){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var g=a[d].indexOf("="),k=null;if(0<=g){var V=a[d].substring(0,g);k=a[d].substring(g+1)}else V=a[d];c(V,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Jr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Jr){this.h=a.h,za(this,a.j),this.o=a.o,this.g=a.g,Ha(this,a.s),this.l=a.l;var c=a.i,d=new Ys;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),Jp(this,d),this.m=a.m}else a&&(c=String(a).match(Xp))?(this.h=!1,za(this,c[1]||"",!0),this.o=Qs(c[2]||""),this.g=Qs(c[3]||"",!0),Ha(this,c[4]),this.l=Qs(c[5]||"",!0),Jp(this,c[6]||"",!0),this.m=Qs(c[7]||"")):(this.h=!1,this.i=new Ys(null,this.h))}Jr.prototype.toString=function(){var a=[],c=this.j;c&&a.push(Gs(c,Zp,!0),":");var d=this.g;return(d||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Gs(c,Zp,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Gs(d,d.charAt(0)=="/"?UE:jE,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Gs(d,HE)),a.join("")};function Un(a){return new Jr(a)}function za(a,c,d){a.j=d?Qs(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Ha(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function Jp(a,c,d){c instanceof Ys?(a.i=c,WE(a.i,a.h)):(d||(c=Gs(c,zE)),a.i=new Ys(c,a.h))}function _e(a,c,d){a.i.set(c,d)}function Wa(a){return _e(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Qs(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Gs(a,c,d){return typeof a=="string"?(a=encodeURI(a).replace(c,BE),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function BE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Zp=/[#\/\?@]/g,jE=/[#\?:]/g,UE=/[#\?]/g,zE=/[#\?@]/g,HE=/#/g;function Ys(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function mr(a){a.g||(a.g=new Map,a.h=0,a.i&&$E(a.i,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=Ys.prototype,t.add=function(a,c){mr(this),this.i=null,a=Oi(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(c),this.h+=1,this};function em(a,c){mr(a),c=Oi(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function tm(a,c){return mr(a),c=Oi(a,c),a.g.has(c)}t.forEach=function(a,c){mr(this),this.g.forEach(function(d,g){d.forEach(function(k){a.call(c,k,g,this)},this)},this)},t.na=function(){mr(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let g=0;g<c.length;g++){const k=a[g];for(let V=0;V<k.length;V++)d.push(c[g])}return d},t.V=function(a){mr(this);let c=[];if(typeof a=="string")tm(this,a)&&(c=c.concat(this.g.get(Oi(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)c=c.concat(a[d])}return c},t.set=function(a,c){return mr(this),this.i=null,a=Oi(this,a),tm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function nm(a,c,d){em(a,c),0<d.length&&(a.i=null,a.g.set(Oi(a,c),R(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var g=c[d];const V=encodeURIComponent(String(g)),j=this.V(g);for(g=0;g<j.length;g++){var k=V;j[g]!==""&&(k+="="+encodeURIComponent(String(j[g]))),a.push(k)}}return this.i=a.join("&")};function Oi(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function WE(a,c){c&&!a.j&&(mr(a),a.i=null,a.g.forEach(function(d,g){var k=g.toLowerCase();g!=k&&(em(this,g),nm(this,k,d))},a)),a.j=c}function qE(a,c){const d=new xn;if(l.Image){const g=new Image;g.onload=T(gr,d,"TestLoadImage: loaded",!0,c,g),g.onerror=T(gr,d,"TestLoadImage: error",!1,c,g),g.onabort=T(gr,d,"TestLoadImage: abort",!1,c,g),g.ontimeout=T(gr,d,"TestLoadImage: timeout",!1,c,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else c(!1)}function KE(a,c){const d=new xn,g=new AbortController,k=setTimeout(()=>{g.abort(),gr(d,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:g.signal}).then(V=>{clearTimeout(k),V.ok?gr(d,"TestPingServer: ok",!0,c):gr(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(k),gr(d,"TestPingServer: error",!1,c)})}function gr(a,c,d,g,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),g(d)}catch{}}function QE(){this.g=new ba}function GE(a,c,d){const g=d||"";try{Yp(a,function(k,V){let j=k;h(k)&&(j=Vi(k)),c.push(g+V+"="+encodeURIComponent(j))})}catch(k){throw c.push(g+"type="+encodeURIComponent("_badmap")),k}}function qa(a){this.l=a.Ub||null,this.j=a.eb||!1}P(qa,Ws),qa.prototype.g=function(){return new Ka(this.l,this.j)},qa.prototype.i=function(a){return function(){return a}}({});function Ka(a,c){Xe.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Ka,Xe),t=Ka.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,Js(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xs(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Js(this)),this.g&&(this.readyState=3,Js(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function rm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?Xs(this):Js(this),this.readyState==3&&rm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Xs(this))},t.Qa=function(a){this.g&&(this.response=a,Xs(this))},t.ga=function(){this.g&&Xs(this)};function Xs(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Js(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=c.next();return a.join(`\r
`)};function Js(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function im(a){let c="";return M(a,function(d,g){c+=g,c+=":",c+=d,c+=`\r
`}),c}function Dc(a,c,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=im(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):_e(a,c,d))}function Ve(a){Xe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Ve,Xe);var YE=/^https?$/i,XE=["POST","PUT"];t=Ve.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ac.g(),this.v=this.o?La(this.o):La(Ac),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(V){sm(this,V);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var k in g)d.set(k,g[k]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const V of g.keys())d.set(V,g.get(V));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(V=>V.toLowerCase()=="content-type"),k=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(XE,c,void 0))||g||k||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,j]of d)this.g.setRequestHeader(V,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lm(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){sm(this,V)}};function sm(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,om(a),Qa(a)}function om(a){a.A||(a.A=!0,Me(a,"complete"),Me(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Me(this,"complete"),Me(this,"abort"),Qa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qa(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?am(this):this.bb())},t.bb=function(){am(this)};function am(a){if(a.h&&typeof o<"u"&&(!a.v[1]||zn(a)!=4||a.Z()!=2)){if(a.u&&zn(a)==4)hr(a.Ea,0,a);else if(Me(a,"readystatechange"),zn(a)==4){a.h=!1;try{const j=a.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var g;if(g=j===0){var k=String(a.D).match(Xp)[1]||null;!k&&l.self&&l.self.location&&(k=l.self.location.protocol.slice(0,-1)),g=!YE.test(k?k.toLowerCase():"")}d=g}if(d)Me(a,"complete"),Me(a,"success");else{a.m=6;try{var V=2<zn(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",om(a)}}finally{Qa(a)}}}}function Qa(a,c){if(a.g){lm(a);const d=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||Me(a,"ready");try{d.onreadystatechange=g}catch{}}}function lm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function zn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<zn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),Ic(c)}};function um(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function JE(a){const c={};a=(a.g&&2<=zn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(_(a[g]))continue;var d=C(a[g]);const k=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const V=c[k]||[];c[k]=V,V.push(d)}v(c,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zs(a,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||c}function cm(a){this.Aa=0,this.i=[],this.j=new xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zs("baseRetryDelayMs",5e3,a),this.cb=Zs("retryDelaySeedMs",1e4,a),this.Wa=Zs("forwardChannelMaxRetries",2,a),this.wa=Zs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Wp(a&&a.concurrentRequestLimit),this.Da=new QE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=cm.prototype,t.la=8,t.G=1,t.connect=function(a,c,d,g){Le(0),this.W=a,this.H=c||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=_m(this,null,this.W),Ya(this)};function Mc(a){if(hm(a),a.G==3){var c=a.U++,d=Un(a.I);if(_e(d,"SID",a.K),_e(d,"RID",c),_e(d,"TYPE","terminate"),eo(a,d),c=new pr(a,a.j,c),c.L=2,c.v=Wa(Un(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=Em(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Ua(c)}vm(a)}function Ga(a){a.g&&(Oc(a),a.g.cancel(),a.g=null)}function hm(a){Ga(a),a.u&&(l.clearTimeout(a.u),a.u=null),Xa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ya(a){if(!qp(a.h)&&!a.s){a.s=!0;var c=a.Ga;Ce||Q(),U||(Ce(),U=!0),W.add(c,a),a.B=0}}function ZE(a,c){return Kp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Pn(y(a.Ga,a,c),ym(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const k=new pr(this,this.j,a);let V=this.o;if(this.S&&(V?(V=m(V),I(V,this.S)):V=this.S),this.m!==null||this.O||(k.H=V,V=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=fm(this,k,c),d=Un(this.I),_e(d,"RID",a),_e(d,"CVER",22),this.D&&_e(d,"X-HTTP-Session-Id",this.D),eo(this,d),V&&(this.O?c="headers="+encodeURIComponent(String(im(V)))+"&"+c:this.m&&Dc(d,this.m,V)),Nc(this.h,k),this.Ua&&_e(d,"TYPE","init"),this.P?(_e(d,"$req",c),_e(d,"SID","null"),k.T=!0,Rc(k,d,null)):Rc(k,d,c),this.G=2}}else this.G==3&&(a?dm(this,a):this.i.length==0||qp(this.h)||dm(this))};function dm(a,c){var d;c?d=c.l:d=a.U++;const g=Un(a.I);_e(g,"SID",a.K),_e(g,"RID",d),_e(g,"AID",a.T),eo(a,g),a.m&&a.o&&Dc(g,a.m,a.o),d=new pr(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),c&&(a.i=c.D.concat(a.i)),c=fm(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Nc(a.h,d),Rc(d,g,c)}function eo(a,c){a.H&&M(a.H,function(d,g){_e(c,g,d)}),a.l&&Yp({},function(d,g){_e(c,g,d)})}function fm(a,c,d){d=Math.min(a.i.length,d);var g=a.l?y(a.l.Na,a.l,a):null;e:{var k=a.i;let V=-1;for(;;){const j=["count="+d];V==-1?0<d?(V=k[0].g,j.push("ofs="+V)):V=0:j.push("ofs="+V);let pe=!0;for(let at=0;at<d;at++){let ae=k[at].g;const vt=k[at].map;if(ae-=V,0>ae)V=Math.max(0,k[at].g-100),pe=!1;else try{GE(vt,j,"req"+ae+"_")}catch{g&&g(vt)}}if(pe){g=j.join("&");break e}}}return a=a.i.splice(0,d),c.D=a,g}function pm(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;Ce||Q(),U||(Ce(),U=!0),W.add(c,a),a.v=0}}function Vc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Pn(y(a.Fa,a),ym(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,mm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Pn(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Le(10),Ga(this),mm(this))};function Oc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function mm(a){a.g=new pr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=Un(a.qa);_e(c,"RID","rpc"),_e(c,"SID",a.K),_e(c,"AID",a.T),_e(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&_e(c,"TO",a.ja),_e(c,"TYPE","xmlhttp"),eo(a,c),a.m&&a.o&&Dc(c,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Wa(Un(c)),d.m=null,d.P=!0,Up(d,a)}t.Za=function(){this.C!=null&&(this.C=null,Ga(this),Vc(this),Le(19))};function Xa(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function gm(a,c){var d=null;if(a.g==c){Xa(a),Oc(a),a.g=null;var g=2}else if(kc(a.h,c))d=c.D,Qp(a.h,c),g=1;else return;if(a.G!=0){if(c.o)if(g==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var k=a.B;g=yt(),Me(g,new fr(g,d)),Ya(a)}else pm(a);else if(k=c.s,k==3||k==0&&0<c.X||!(g==1&&ZE(a,c)||g==2&&Vc(a)))switch(d&&0<d.length&&(c=a.h,c.i=c.i.concat(d)),k){case 1:Zr(a,5);break;case 4:Zr(a,10);break;case 3:Zr(a,6);break;default:Zr(a,2)}}}function ym(a,c){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*c}function Zr(a,c){if(a.j.info("Error code "+c),c==2){var d=y(a.fb,a),g=a.Xa;const k=!g;g=new Jr(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||za(g,"https"),Wa(g),k?qE(g.toString(),d):KE(g.toString(),d)}else Le(2);a.G=0,a.l&&a.l.sa(c),vm(a),hm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function vm(a){if(a.G=0,a.ka=[],a.l){const c=Gp(a.h);(c.length!=0||a.i.length!=0)&&(D(a.ka,c),D(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function _m(a,c,d){var g=d instanceof Jr?Un(d):new Jr(d);if(g.g!="")c&&(g.g=c+"."+g.g),Ha(g,g.s);else{var k=l.location;g=k.protocol,c=c?c+"."+k.hostname:k.hostname,k=+k.port;var V=new Jr(null);g&&za(V,g),c&&(V.g=c),k&&Ha(V,k),d&&(V.l=d),g=V}return d=a.D,c=a.ya,d&&c&&_e(g,d,c),_e(g,"VER",a.la),eo(a,g),g}function Em(a,c,d){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new Ve(new qa({eb:d})):new Ve(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wm(){}t=wm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ja(){}Ja.prototype.g=function(a,c){return new Ut(a,c)};function Ut(a,c){Xe.call(this),this.g=new cm(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!_(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!_(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new bi(this)}P(Ut,Xe),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Mc(this.g)},Ut.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Vi(a),a=d);c.i.push(new bE(c.Ya++,a)),c.G==3&&Ya(c)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Mc(this.g),delete this.g,Ut.aa.N.call(this)};function Tm(a){st.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const d in c){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}P(Tm,st);function Sm(){ot.call(this),this.status=1}P(Sm,ot);function bi(a){this.g=a}P(bi,wm),bi.prototype.ua=function(){Me(this.g,"a")},bi.prototype.ta=function(a){Me(this.g,new Tm(a))},bi.prototype.sa=function(a){Me(this.g,new Sm)},bi.prototype.ra=function(){Me(this.g,"b")},Ja.prototype.createWebChannel=Ja.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,x_=function(){return new Ja},P_=function(){return yt()},R_=gt,Cd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ba.NO_ERROR=0,Ba.TIMEOUT=8,Ba.HTTP_ERROR=6,bl=Ba,$p.COMPLETE="complete",C_=$p,Fa.EventType=Re,Re.OPEN="a",Re.CLOSE="b",Re.ERROR="c",Re.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,go=Fa,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,A_=Ve}).apply(typeof vl<"u"?vl:typeof self<"u"?self:typeof window<"u"?window:{});const Wg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new v_("@firebase/firestore");function co(){return Ti.logLevel}function H(t,...e){if(Ti.logLevel<=ie.DEBUG){const n=e.map(Yf);Ti.debug(`Firestore (${bs}): ${t}`,...n)}}function or(t,...e){if(Ti.logLevel<=ie.ERROR){const n=e.map(Yf);Ti.error(`Firestore (${bs}): ${t}`,...n)}}function Es(t,...e){if(Ti.logLevel<=ie.WARN){const n=e.map(Yf);Ti.warn(`Firestore (${bs}): ${t}`,...n)}}function Yf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t="Unexpected state"){const e=`FIRESTORE (${bs}) INTERNAL ASSERTION FAILED: `+t;throw or(e),new Error(e)}function de(t,e){t||G()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Os{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(St.UNAUTHENTICATED))}shutdown(){}}class uA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cA{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string"),new k_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new St(e)}}class hA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=St.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class dA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){de(this.o===void 0);const r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.R=n.token,new fA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=mA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function ws(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ge(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new Ge(0,0))}static max(){return new X(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(),r===void 0?r=e.length-n:r>e.length-n&&G(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ia.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ia?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ie extends ia{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const gA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends ia{construct(e,n,r){return new ht(e,n,r)}static isValidIdentifier(e){return gA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ht(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new q($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new q($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new q($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(n)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(Ie.fromString(e))}static fromName(e){return new K(Ie.fromString(e).popFirst(5))}static empty(){return new K(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new Ie(e.slice()))}}function yA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new zr(i,K.empty(),e)}function vA(t){return new zr(t.readTime,t.key,-1)}class zr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zr(X.min(),K.empty(),-1)}static max(){return new zr(X.max(),K.empty(),-1)}}function _A(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==EA)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function TA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ea(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Xf.oe=-1;function tc(t){return t==null}function Eu(t){return t===0&&1/t==-1/0}function SA(t){return typeof t=="number"&&Number.isInteger(t)&&!Eu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ls(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function D_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _l(this.root,e,this.comparator,!1)}getReverseIterator(){return new _l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _l(this.root,e,this.comparator,!0)}}class _l{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ut.RED,this.left=i??ut.EMPTY,this.right=s??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ut(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ut.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Kg(this.data.getIterator())}getIteratorFrom(e){return new Kg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class Kg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new _n([])}unionWith(e){let n=new ft(ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new _n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ws(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new M_("Invalid base64 string: "+s):s}}(e);return new mt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const IA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(t){if(de(!!t),typeof t=="string"){let e=0;const n=IA.exec(t);if(de(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Si(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Zf(t){const e=t.mapValue.fields.__previous_value__;return Jf(e)?Zf(e):e}function sa(t){const e=Hr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n,r,i,s,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class oa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new oa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof oa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ii(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jf(t)?4:RA(t)?9007199254740991:CA(t)?10:11:G()}function $n(t,e){if(t===e)return!0;const n=Ii(t);if(n!==Ii(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sa(t).isEqual(sa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Hr(i.timestampValue),l=Hr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Si(i.bytesValue).isEqual(Si(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Fe(i.geoPointValue.latitude)===Fe(s.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Fe(i.integerValue)===Fe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Fe(i.doubleValue),l=Fe(s.doubleValue);return o===l?Eu(o)===Eu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ws(t.arrayValue.values||[],e.arrayValue.values||[],$n);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(qg(o)!==qg(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!$n(o[u],l[u])))return!1;return!0}(t,e);default:return G()}}function aa(t,e){return(t.values||[]).find(n=>$n(n,e))!==void 0}function Ts(t,e){if(t===e)return 0;const n=Ii(t),r=Ii(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Fe(s.integerValue||s.doubleValue),u=Fe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Qg(t.timestampValue,e.timestampValue);case 4:return Qg(sa(t),sa(e));case 5:return le(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Si(s),u=Si(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=le(l[h],u[h]);if(f!==0)return f}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=le(Fe(s.latitude),Fe(o.latitude));return l!==0?l:le(Fe(s.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Gg(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,h,f;const p=s.fields||{},y=o.fields||{},T=(l=p.value)===null||l===void 0?void 0:l.arrayValue,P=(u=y.value)===null||u===void 0?void 0:u.arrayValue,R=le(((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0,((f=P==null?void 0:P.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:Gg(T,P)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===El.mapValue&&o===El.mapValue)return 0;if(s===El.mapValue)return 1;if(o===El.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const y=le(u[p],f[p]);if(y!==0)return y;const T=Ts(l[u[p]],h[f[p]]);if(T!==0)return T}return le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw G()}}function Qg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Hr(t),r=Hr(e),i=le(n.seconds,r.seconds);return i!==0?i:le(n.nanos,r.nanos)}function Gg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ts(n[i],r[i]);if(s)return s}return le(n.length,r.length)}function Ss(t){return Rd(t)}function Rd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Si(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Rd(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Rd(n.fields[o])}`;return i+"}"}(t.mapValue):G()}function Pd(t){return!!t&&"integerValue"in t}function ep(t){return!!t&&"arrayValue"in t}function Yg(t){return!!t&&"nullValue"in t}function Xg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ll(t){return!!t&&"mapValue"in t}function CA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ko(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ls(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ko(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ko(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ll(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ko(n)}setAll(e){let n=ht.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=ko(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ll(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $n(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ll(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ls(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new on(ko(this.value))}}function V_(t){const e=[];return Ls(t.fields,(n,r)=>{const i=new ht([n]);if(Ll(r)){const s=V_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new _n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new At(e,0,X.min(),X.min(),X.min(),on.empty(),0)}static newFoundDocument(e,n,r,i){return new At(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new At(e,2,n,X.min(),X.min(),on.empty(),0)}static newUnknownDocument(e,n){return new At(e,3,n,X.min(),X.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.position=e,this.inclusive=n}}function Jg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Ts(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Zg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$n(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n="asc"){this.field=e,this.dir=n}}function PA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{}class Ke extends O_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kA(e,n,r):n==="array-contains"?new MA(e,r):n==="in"?new VA(e,r):n==="not-in"?new OA(e,r):n==="array-contains-any"?new bA(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new NA(e,r):new DA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ts(n,this.value)):n!==null&&Ii(this.value)===Ii(n)&&this.matchesComparison(Ts(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bn extends O_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Bn(e,n)}matches(e){return b_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function b_(t){return t.op==="and"}function L_(t){return xA(t)&&b_(t)}function xA(t){for(const e of t.filters)if(e instanceof Bn)return!1;return!0}function xd(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+Ss(t.value);if(L_(t))return t.filters.map(e=>xd(e)).join(",");{const e=t.filters.map(n=>xd(n)).join(",");return`${t.op}(${e})`}}function F_(t,e){return t instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&$n(r.value,i.value)}(t,e):t instanceof Bn?function(r,i){return i instanceof Bn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&F_(o,i.filters[l]),!0):!1}(t,e):void G()}function $_(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${Ss(n.value)}`}(t):t instanceof Bn?function(n){return n.op.toString()+" {"+n.getFilters().map($_).join(" ,")+"}"}(t):"Filter"}class kA extends Ke{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class NA extends Ke{constructor(e,n){super(e,"in",n),this.keys=B_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DA extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=B_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function B_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class MA extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ep(n)&&aa(n.arrayValue,this.value)}}class VA extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&aa(this.value.arrayValue,n)}}class OA extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!aa(this.value.arrayValue,n)}}class bA extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ep(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>aa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function ey(t,e=null,n=[],r=[],i=null,s=null,o=null){return new LA(t,e,n,r,i,s,o)}function tp(t){const e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>xd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),tc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ss(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ss(r)).join(",")),e.ue=n}return e.ue}function np(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!F_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Zg(t.startAt,e.startAt)&&Zg(t.endAt,e.endAt)}function kd(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function FA(t,e,n,r,i,s,o,l){return new nc(t,e,n,r,i,s,o,l)}function rp(t){return new nc(t)}function ty(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $A(t){return t.collectionGroup!==null}function No(t){const e=J(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ft(ht.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Tu(s,r))}),n.has(ht.keyField().canonicalString())||e.ce.push(new Tu(ht.keyField(),r))}return e.ce}function bn(t){const e=J(t);return e.le||(e.le=BA(e,No(t))),e.le}function BA(t,e){if(t.limitType==="F")return ey(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Tu(i.field,s)});const n=t.endAt?new wu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wu(t.startAt.position,t.startAt.inclusive):null;return ey(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Nd(t,e,n){return new nc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rc(t,e){return np(bn(t),bn(e))&&t.limitType===e.limitType}function j_(t){return`${tp(bn(t))}|lt:${t.limitType}`}function Bi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$_(i)).join(", ")}]`),tc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ss(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ss(i)).join(",")),`Target(${r})`}(bn(t))}; limitType=${t.limitType})`}function ic(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of No(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=Jg(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,No(r),i)||r.endAt&&!function(o,l,u){const h=Jg(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,No(r),i))}(t,e)}function jA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function U_(t){return(e,n)=>{let r=!1;for(const i of No(t)){const s=UA(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function UA(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ts(u,h):G()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return D_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new De(K.comparator);function ar(){return zA}const z_=new De(K.comparator);function yo(...t){let e=z_;for(const n of t)e=e.insert(n.key,n);return e}function H_(t){let e=z_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function li(){return Do()}function W_(){return Do()}function Do(){return new Fs(t=>t.toString(),(t,e)=>t.isEqual(e))}const HA=new De(K.comparator),WA=new ft(K.comparator);function ne(...t){let e=WA;for(const n of t)e=e.add(n);return e}const qA=new ft(le);function KA(){return qA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eu(e)?"-0":e}}function q_(t){return{integerValue:""+t}}function QA(t,e){return SA(e)?q_(e):ip(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(){this._=void 0}}function GA(t,e,n){return t instanceof Su?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Jf(s)&&(s=Zf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof la?Q_(t,e):t instanceof ua?G_(t,e):function(i,s){const o=K_(i,s),l=ny(o)+ny(i.Pe);return Pd(o)&&Pd(i.Pe)?q_(l):ip(i.serializer,l)}(t,e)}function YA(t,e,n){return t instanceof la?Q_(t,e):t instanceof ua?G_(t,e):n}function K_(t,e){return t instanceof Iu?function(r){return Pd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Su extends sc{}class la extends sc{constructor(e){super(),this.elements=e}}function Q_(t,e){const n=Y_(e);for(const r of t.elements)n.some(i=>$n(i,r))||n.push(r);return{arrayValue:{values:n}}}class ua extends sc{constructor(e){super(),this.elements=e}}function G_(t,e){let n=Y_(e);for(const r of t.elements)n=n.filter(i=>!$n(i,r));return{arrayValue:{values:n}}}class Iu extends sc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ny(t){return Fe(t.integerValue||t.doubleValue)}function Y_(t){return ep(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function XA(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof la&&i instanceof la||r instanceof ua&&i instanceof ua?ws(r.elements,i.elements,$n):r instanceof Iu&&i instanceof Iu?$n(r.Pe,i.Pe):r instanceof Su&&i instanceof Su}(t.transform,e.transform)}class JA{constructor(e,n){this.version=e,this.transformResults=n}}class Ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class oc{}function X_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sp(t.key,Ln.none()):new wa(t.key,t.data,Ln.none());{const n=t.data,r=on.empty();let i=new ft(ht.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ri(t.key,r,new _n(i.toArray()),Ln.none())}}function ZA(t,e,n){t instanceof wa?function(i,s,o){const l=i.value.clone(),u=iy(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ri?function(i,s,o){if(!Fl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=iy(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(J_(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Mo(t,e,n,r){return t instanceof wa?function(s,o,l,u){if(!Fl(s.precondition,o))return l;const h=s.value.clone(),f=sy(s.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ri?function(s,o,l,u){if(!Fl(s.precondition,o))return l;const h=sy(s.fieldTransforms,u,o),f=o.data;return f.setAll(J_(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return Fl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function eC(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=K_(r.transform,i||null);s!=null&&(n===null&&(n=on.empty()),n.set(r.field,s))}return n||null}function ry(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ws(r,i,(s,o)=>XA(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wa extends oc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ri extends oc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function J_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function iy(t,e,n){const r=new Map;de(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,YA(o,l,n[i]))}return r}function sy(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,GA(s,o,e))}return r}class sp extends oc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tC extends oc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&ZA(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=W_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=X_(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&ws(this.mutations,e.mutations,(n,r)=>ry(n,r))&&ws(this.baseMutations,e.baseMutations,(n,r)=>ry(n,r))}}class op{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){de(e.mutations.length===r.length);let i=function(){return HA}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new op(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,re;function sC(t){switch(t){default:return G();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function Z_(t){if(t===void 0)return or("GRPC error has no .code"),$.UNKNOWN;switch(t){case Ue.OK:return $.OK;case Ue.CANCELLED:return $.CANCELLED;case Ue.UNKNOWN:return $.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return $.INTERNAL;case Ue.UNAVAILABLE:return $.UNAVAILABLE;case Ue.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ue.NOT_FOUND:return $.NOT_FOUND;case Ue.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ue.ABORTED:return $.ABORTED;case Ue.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ue.DATA_LOSS:return $.DATA_LOSS;default:return G()}}(re=Ue||(Ue={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=new di([4294967295,4294967295],0);function oy(t){const e=oC().encode(t),n=new I_;return n.update(e),new Uint8Array(n.digest())}function ay(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new di([n,r],0),new di([i,s],0)]}class ap{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new vo(`Invalid padding: ${n}`);if(r<0)throw new vo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new vo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=di.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(di.fromNumber(r)));return i.compare(aC)===1&&(i=new di([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=oy(e),[r,i]=ay(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new ap(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=oy(e),[r,i]=ay(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class vo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ta.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ac(X.min(),i,new De(le),ar(),ne())}}class Ta{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ta(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class e1{constructor(e,n){this.targetId=e,this.me=n}}class t1{constructor(e,n,r=mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ly{constructor(){this.fe=0,this.ge=cy(),this.pe=mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:G()}}),new Ta(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=cy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class lC{constructor(e){this.Le=e,this.Be=new Map,this.ke=ar(),this.qe=uy(),this.Qe=new De(le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(kd(s))if(r===0){const o=new K(s.path);this.Ue(n,o,At.newNoDocument(o,X.min()))}else de(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Si(r).toUint8Array()}catch(u){if(u instanceof M_)return Es("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new ap(o,i,s)}catch(u){return Es(u instanceof vo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&kd(l.target)){const u=new K(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,At.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ne();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new ac(e,n,this.Qe,this.ke,r);return this.ke=ar(),this.qe=uy(),this.Qe=new De(le),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ly,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ft(le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ly),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function uy(){return new De(K.comparator)}function cy(){return new De(K.comparator)}const uC={asc:"ASCENDING",desc:"DESCENDING"},cC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hC={and:"AND",or:"OR"};class dC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dd(t,e){return t.useProto3Json||tc(e)?e:{value:e}}function Au(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function n1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fC(t,e){return Au(t,e.toTimestamp())}function Fn(t){return de(!!t),X.fromTimestamp(function(n){const r=Hr(n);return new Ge(r.seconds,r.nanos)}(t))}function lp(t,e){return Md(t,e).canonicalString()}function Md(t,e){const n=function(i){return new Ie(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function r1(t){const e=Ie.fromString(t);return de(l1(e)),e}function Vd(t,e){return lp(t.databaseId,e.path)}function mh(t,e){const n=r1(e);if(n.get(1)!==t.databaseId.projectId)throw new q($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(s1(n))}function i1(t,e){return lp(t.databaseId,e)}function pC(t){const e=r1(t);return e.length===4?Ie.emptyPath():s1(e)}function Od(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function s1(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function hy(t,e,n){return{name:Vd(t,e),fields:n.value.mapValue.fields}}function mC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(de(f===void 0||typeof f=="string"),mt.fromBase64String(f||"")):(de(f===void 0||f instanceof Buffer||f instanceof Uint8Array),mt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const f=h.code===void 0?$.UNKNOWN:Z_(h.code);return new q(f,h.message||"")}(o);n=new t1(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=mh(t,r.document.name),s=Fn(r.document.updateTime),o=r.document.createTime?Fn(r.document.createTime):X.min(),l=new on({mapValue:{fields:r.document.fields}}),u=At.newFoundDocument(i,s,o,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new $l(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=mh(t,r.document),s=r.readTime?Fn(r.readTime):X.min(),o=At.newNoDocument(i,s),l=r.removedTargetIds||[];n=new $l([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=mh(t,r.document),s=r.removedTargetIds||[];n=new $l([],s,i,null)}else{if(!("filter"in e))return G();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new iC(i,s),l=r.targetId;n=new e1(l,o)}}return n}function gC(t,e){let n;if(e instanceof wa)n={update:hy(t,e.key,e.value)};else if(e instanceof sp)n={delete:Vd(t,e.key)};else if(e instanceof Ri)n={update:hy(t,e.key,e.data),updateMask:AC(e.fieldMask)};else{if(!(e instanceof tC))return G();n={verify:Vd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Su)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof la)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ua)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Iu)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw G()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:fC(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:G()}(t,e.precondition)),n}function yC(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Fn(i.updateTime):Fn(s);return o.isEqual(X.min())&&(o=Fn(s)),new JA(o,i.transformResults||[])}(n,e))):[]}function vC(t,e){return{documents:[i1(t,e.path)]}}function _C(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=i1(t,i);const s=function(h){if(h.length!==0)return a1(Bn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(f=>function(y){return{field:ji(y.field),direction:TC(y.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Dd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function EC(t){let e=pC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){de(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const y=o1(p);return y instanceof Bn&&L_(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(y=>function(P){return new Tu(Ui(P.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(p){let y;return y=typeof p=="object"?p.value:p,tc(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){const y=!!p.before,T=p.values||[];return new wu(T,y)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const y=!p.before,T=p.values||[];return new wu(T,y)}(n.endAt)),FA(e,i,o,s,l,"F",u,h)}function wC(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function o1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ui(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ui(n.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ui(n.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ui(n.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(Ui(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Bn.create(n.compositeFilter.filters.map(r=>o1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(t):G()}function TC(t){return uC[t]}function SC(t){return cC[t]}function IC(t){return hC[t]}function ji(t){return{fieldPath:t.canonicalString()}}function Ui(t){return ht.fromServerFormat(t.fieldPath)}function a1(t){return t instanceof Ke?function(n){if(n.op==="=="){if(Xg(n.value))return{unaryFilter:{field:ji(n.field),op:"IS_NAN"}};if(Yg(n.value))return{unaryFilter:{field:ji(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Xg(n.value))return{unaryFilter:{field:ji(n.field),op:"IS_NOT_NAN"}};if(Yg(n.value))return{unaryFilter:{field:ji(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ji(n.field),op:SC(n.op),value:n.value}}}(t):t instanceof Bn?function(n){const r=n.getFilters().map(i=>a1(i));return r.length===1?r[0]:{compositeFilter:{op:IC(n.op),filters:r}}}(t):G()}function AC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function l1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,r,i,s=X.min(),o=X.min(),l=mt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.ct=e}}function RC(t){const e=EC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.un=new xC}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(zr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(zr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class xC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ft(Ie.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ft(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Is(0)}static kn(){return new Is(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.changes=new Fs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Mo(r.mutation,i,_n.empty(),Ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const i=li();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=yo();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=li();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=ar();const o=Do(),l=function(){return Do()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof Ri)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Mo(f.mutation,h,f.mutation.getFieldMask(),Ge.now())):o.set(h.key,_n.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var p;return l.set(h,new NC(f,(p=o.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Do();let i=new De((o,l)=>o-l),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||_n.empty();f=l.applyToLocalView(h,f),r.set(u,f);const p=(i.get(l.batchId)||ne()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,p=W_();f.forEach(y=>{if(!s.has(y)){const T=X_(n.get(y),r.get(y));T!==null&&p.set(y,T),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$A(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(li());let l=-1,u=s;return o.next(h=>F.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ne())).next(f=>({batchId:l,changes:H_(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=yo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=yo();return this.indexManager.getCollectionParents(e,s).next(l=>F.forEach(l,u=>{const h=function(p,y){return new nc(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,At.newInvalidDocument(f)))});let l=yo();return o.forEach((u,h)=>{const f=s.get(u);f!==void 0&&Mo(f.mutation,h,_n.empty(),Ge.now()),ic(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Fn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:RC(i.bundledQuery),readTime:Fn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.overlays=new De(K.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=li();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=li(),s=n.length+1,o=new K(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new De((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=li(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=li(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return F.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rC(n,r));let s=this.Ir.get(n);s===void 0&&(s=ne(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this.Tr=new ft(Je.Er),this.dr=new ft(Je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Je(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new Ie([])),r=new Je(n,e),i=new Je(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new Ie([])),r=new Je(n,e),i=new Je(n,e+1);let s=ne();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Je(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||le(e.wr,n.wr)}static Ar(e,n){return le(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ft(Je.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nC(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Je(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),i=new Je(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(le);return n.forEach(i=>{const s=new Je(i,0),o=new Je(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new Je(new K(s),0);let l=new ft(le);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new Je(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Je(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.Mr=e,this.docs=function(){return new De(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():At.newInvalidDocument(n))}getEntries(e,n){let r=ar();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():At.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ar();const o=n.path,l=new K(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||_A(vA(f),r)<=0||(i.has(f.key)||ic(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){G()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FC(this)}getSize(e){return F.resolve(this.size)}}class FC extends kC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.persistence=e,this.Nr=new Fs(n=>tp(n),np),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new up,this.targetCount=0,this.kr=Is.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Is(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Xf(0),this.Kr=!1,this.Kr=!0,this.$r=new OC,this.referenceDelegate=e(this),this.Ur=new $C(this),this.indexManager=new PC,this.remoteDocumentCache=function(i){return new LC(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new CC(n),this.Gr=new MC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new VC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new bC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const i=new jC(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class jC extends wA{constructor(e){super(),this.currentSequenceNumber=e}}class cp{constructor(e){this.persistence=e,this.Jr=new up,this.Yr=null}static Zr(e){return new cp(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=K.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ne(),i=ne();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qS()?8:TA(HS())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new UC;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(co()<=ie.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Bi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(co()<=ie.DEBUG&&H("QueryEngine","Query:",Bi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(co()<=ie.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Bi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(n))):F.resolve())}Yi(e,n){if(ty(n))return F.resolve(null);let r=bn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Nd(n,null,"F"),r=bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ne(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Nd(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,i){return ty(n)||i.isEqual(X.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?F.resolve(null):(co()<=ie.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bi(n)),this.rs(e,o,n,yA(i,-1)).next(l=>l))})}ts(e,n){let r=new ft(U_(e));return n.forEach((i,s)=>{ic(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return co()<=ie.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Bi(n)),this.Ji.getDocumentsMatchingQuery(e,n,zr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new De(le),this._s=new Fs(s=>tp(s),np),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function WC(t,e,n,r){return new HC(t,e,n,r)}async function u1(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ne();for(const h of i){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of s){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function qC(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const p=h.batch,y=p.keys();let T=F.resolve();return y.forEach(P=>{T=T.next(()=>f.getEntry(u,P)).next(R=>{const D=h.docVersions.get(P);de(D!==null),R.version.compareTo(D)<0&&(p.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),f.addEntry(R)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ne();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function c1(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function KC(t,e){const n=J(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const y=i.get(p);if(!y)return;l.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,p)));let T=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?T=T.withResumeToken(mt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,r)),i=i.insert(p,T),function(R,D,E){return R.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(y,T,f)&&l.push(n.Ur.updateTargetData(s,T))});let u=ar(),h=ne();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(QC(s,o,e.documentUpdates).next(f=>{u=f.Ps,h=f.Is})),!r.isEqual(X.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.os=i,s))}function QC(t,e,n){let r=ne(),i=ne();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ar();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):H("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function GC(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YC(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Rr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function bd(t,e,n){const r=J(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ea(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function dy(t,e,n){const r=J(t);let i=X.min(),s=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const p=J(u),y=p._s.get(f);return y!==void 0?F.resolve(p.os.get(y)):p.Ur.getTargetData(h,f)}(r,o,bn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:X.min(),n?s:ne())).next(l=>(XC(r,jA(e),l),{documents:l,Ts:s})))}function XC(t,e,n){let r=t.us.get(e)||X.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class fy{constructor(){this.activeTargetIds=KA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JC{constructor(){this.so=new fy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new fy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wl=null;function gh(){return wl===null?wl=function(){return 268435456+Math.round(2147483648*Math.random())}():wl++,"0x"+wl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="WebChannelConnection";class nR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=gh(),u=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,u,h,i).then(f=>(H("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Es("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=eR[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=gh();return new Promise((o,l)=>{const u=new A_;u.setWithCredentials(!0),u.listenOnce(C_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case bl.NO_ERROR:const f=u.getResponseJson();H(Tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case bl.TIMEOUT:H(Tt,`RPC '${e}' ${s} timed out`),l(new q($.DEADLINE_EXCEEDED,"Request time out"));break;case bl.HTTP_ERROR:const p=u.getStatus();if(H(Tt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const T=y==null?void 0:y.error;if(T&&T.status&&T.message){const P=function(D){const E=D.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(E)>=0?E:$.UNKNOWN}(T.status);l(new q(P,T.message))}else l(new q($.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new q($.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{H(Tt,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);H(Tt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=gh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=x_(),l=P_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");H(Tt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=o.createWebChannel(f,u);let y=!1,T=!1;const P=new tR({Io:D=>{T?H(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(y||(H(Tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),H(Tt,`RPC '${e}' stream ${i} sending:`,D),p.send(D))},To:()=>p.close()}),R=(D,E,_)=>{D.listen(E,S=>{try{_(S)}catch(N){setTimeout(()=>{throw N},0)}})};return R(p,go.EventType.OPEN,()=>{T||(H(Tt,`RPC '${e}' stream ${i} transport opened.`),P.yo())}),R(p,go.EventType.CLOSE,()=>{T||(T=!0,H(Tt,`RPC '${e}' stream ${i} transport closed`),P.So())}),R(p,go.EventType.ERROR,D=>{T||(T=!0,Es(Tt,`RPC '${e}' stream ${i} transport errored:`,D),P.So(new q($.UNAVAILABLE,"The operation could not be completed")))}),R(p,go.EventType.MESSAGE,D=>{var E;if(!T){const _=D.data[0];de(!!_);const S=_,N=S.error||((E=S[0])===null||E===void 0?void 0:E.error);if(N){H(Tt,`RPC '${e}' stream ${i} received error:`,N);const O=N.status;let M=function(w){const I=Ue[w];if(I!==void 0)return Z_(I)}(O),v=N.message;M===void 0&&(M=$.INTERNAL,v="Unknown error status: "+O+" with message "+N.message),T=!0,P.So(new q(M,v)),p.close()}else H(Tt,`RPC '${e}' stream ${i} received:`,_),P.bo(_)}}),R(l,R_.STAT_EVENT,D=>{D.stat===Cd.PROXY?H(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===Cd.NOPROXY&&H(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function yh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t){return new dC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new h1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new q($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rR extends d1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=mC(this.serializer,e),r=function(s){if(!("targetChange"in s))return X.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?Fn(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Od(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=kd(u)?{documents:vC(s,u)}:{query:_C(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=n1(s,o.resumeToken);const h=Dd(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(X.min())>0){l.readTime=Au(s,o.snapshotVersion.toTimestamp());const h=Dd(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=wC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Od(this.serializer),n.removeTarget=e,this.a_(n)}}class iR extends d1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return de(!!e.streamToken),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=yC(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Od(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new q($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Md(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q($.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Md(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q($.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class oR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(or(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Pi(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=J(u);h.L_.add(4),await Sa(h),h.q_.set("Unknown"),h.L_.delete(4),await uc(h)}(this))})}),this.q_=new oR(r,i)}}async function uc(t){if(Pi(t))for(const e of t.B_)await e(!0)}async function Sa(t){for(const e of t.B_)await e(!1)}function f1(t,e){const n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),mp(n)?pp(n):$s(n).r_()&&fp(n,e))}function dp(t,e){const n=J(t),r=$s(n);n.N_.delete(e),r.r_()&&p1(n,e),n.N_.size===0&&(r.r_()?r.o_():Pi(n)&&n.q_.set("Unknown"))}function fp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$s(t).A_(e)}function p1(t,e){t.Q_.xe(e),$s(t).R_(e)}function pp(t){t.Q_=new lC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),$s(t).start(),t.q_.v_()}function mp(t){return Pi(t)&&!$s(t).n_()&&t.N_.size>0}function Pi(t){return J(t).L_.size===0}function m1(t){t.Q_=void 0}async function lR(t){t.q_.set("Online")}async function uR(t){t.N_.forEach((e,n)=>{fp(t,e)})}async function cR(t,e){m1(t),mp(t)?(t.q_.M_(e),pp(t)):t.q_.set("Unknown")}async function hR(t,e,n){if(t.q_.set("Online"),e instanceof t1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cu(t,r)}else if(e instanceof $l?t.Q_.Ke(e):e instanceof e1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const r=await c1(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(h);f&&s.N_.set(h,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(mt.EMPTY_BYTE_STRING,f.snapshotVersion)),p1(s,u);const p=new Rr(f.target,u,h,f.sequenceNumber);fp(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await Cu(t,r)}}async function Cu(t,e,n){if(!Ea(e))throw e;t.L_.add(1),await Sa(t),t.q_.set("Offline"),n||(n=()=>c1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await uc(t)})}function g1(t,e){return e().catch(n=>Cu(t,n,e))}async function cc(t){const e=J(t),n=Wr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;dR(e);)try{const i=await GC(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,fR(e,i)}catch(i){await Cu(e,i)}y1(e)&&v1(e)}function dR(t){return Pi(t)&&t.O_.length<10}function fR(t,e){t.O_.push(e);const n=Wr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function y1(t){return Pi(t)&&!Wr(t).n_()&&t.O_.length>0}function v1(t){Wr(t).start()}async function pR(t){Wr(t).p_()}async function mR(t){const e=Wr(t);for(const n of t.O_)e.m_(n.mutations)}async function gR(t,e,n){const r=t.O_.shift(),i=op.from(r,e,n);await g1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await cc(t)}async function yR(t,e){e&&Wr(t).V_&&await async function(r,i){if(function(o){return sC(o)&&o!==$.ABORTED}(i.code)){const s=r.O_.shift();Wr(r).s_(),await g1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await cc(r)}}(t,e),y1(t)&&v1(t)}async function my(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=Pi(n);n.L_.add(3),await Sa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await uc(n)}async function vR(t,e){const n=J(t);e?(n.L_.delete(2),await uc(n)):e||(n.L_.add(2),await Sa(n),n.q_.set("Unknown"))}function $s(t){return t.K_||(t.K_=function(n,r,i){const s=J(n);return s.w_(),new rR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:lR.bind(null,t),Ro:uR.bind(null,t),mo:cR.bind(null,t),d_:hR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),mp(t)?pp(t):t.q_.set("Unknown")):(await t.K_.stop(),m1(t))})),t.K_}function Wr(t){return t.U_||(t.U_=function(n,r,i){const s=J(n);return s.w_(),new iR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:pR.bind(null,t),mo:yR.bind(null,t),f_:mR.bind(null,t),g_:gR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await cc(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new gp(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yp(t,e){if(or("AsyncQueue",`${e}: ${t}`),Ea(t))return new q($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=yo(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new cs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new cs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this.W_=new De(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class As{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new As(e,n,cs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class ER{constructor(){this.queries=yy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=J(n),s=i.queries;i.queries=yy(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new q($.ABORTED,"Firestore shutting down"))}}function yy(){return new Fs(t=>j_(t),rc)}async function wR(t,e){const n=J(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new _R,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=yp(o,`Initialization of query '${Bi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&vp(n)}async function TR(t,e){const n=J(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function SR(t,e){const n=J(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&vp(n)}function IR(t,e,n){const r=J(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function vp(t){t.Y_.forEach(e=>{e.next()})}var Ld,vy;(vy=Ld||(Ld={})).ea="default",vy.Cache="cache";class AR{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new As(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=As.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ld.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.key=e}}class E1{constructor(e){this.key=e}}class CR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=U_(e),this.Ra=new cs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new gy,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const y=i.get(f),T=ic(this.query,p)?p:null,P=!!y&&this.mutatedKeys.has(y.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let D=!1;y&&T?y.data.isEqual(T.data)?P!==R&&(r.track({type:3,doc:T}),D=!0):this.ga(y,T)||(r.track({type:2,doc:T}),D=!0,(u&&this.Aa(T,u)>0||h&&this.Aa(T,h)<0)&&(l=!0)):!y&&T?(r.track({type:0,doc:T}),D=!0):y&&!T&&(r.track({type:1,doc:y}),D=!0,(u||h)&&(l=!0)),D&&(T?(o=o.add(T),s=R?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(T,P){const R=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return R(T)-R(P)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new As(this.query,e.Ra,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new gy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new E1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new _1(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return As.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class RR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class PR{constructor(e){this.key=e,this.va=!1}}class xR{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Fs(l=>j_(l),rc),this.Ma=new Map,this.xa=new Set,this.Oa=new De(K.comparator),this.Na=new Map,this.La=new up,this.Ba={},this.ka=new Map,this.qa=Is.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kR(t,e,n=!0){const r=C1(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await w1(r,e,n,!0),i}async function NR(t,e){const n=C1(t);await w1(n,e,!0,!1)}async function w1(t,e,n,r){const i=await YC(t.localStore,bn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await DR(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&f1(t.remoteStore,i),l}async function DR(t,e,n,r,i){t.Ka=(p,y,T)=>async function(R,D,E,_){let S=D.view.ma(E);S.ns&&(S=await dy(R.localStore,D.query,!1).then(({documents:v})=>D.view.ma(v,S)));const N=_&&_.targetChanges.get(D.targetId),O=_&&_.targetMismatches.get(D.targetId)!=null,M=D.view.applyChanges(S,R.isPrimaryClient,N,O);return Ey(R,D.targetId,M.wa),M.snapshot}(t,p,y,T);const s=await dy(t.localStore,e,!0),o=new CR(e,s.Ts),l=o.ma(s.documents),u=Ta.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);Ey(t,n,h.wa);const f=new RR(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function MR(t,e,n){const r=J(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!rc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dp(r.remoteStore,i.targetId),Fd(r,i.targetId)}).catch(_a)):(Fd(r,i.targetId),await bd(r.localStore,i.targetId,!0))}async function VR(t,e){const n=J(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dp(n.remoteStore,r.targetId))}async function OR(t,e,n){const r=UR(t);try{const i=await function(o,l){const u=J(o),h=Ge.now(),f=l.reduce((T,P)=>T.add(P.key),ne());let p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let P=ar(),R=ne();return u.cs.getEntries(T,f).next(D=>{P=D,P.forEach((E,_)=>{_.isValidDocument()||(R=R.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,P)).next(D=>{p=D;const E=[];for(const _ of l){const S=eC(_,p.get(_.key).overlayedDocument);S!=null&&E.push(new Ri(_.key,S,V_(S.value.mapValue),Ln.exists(!0)))}return u.mutationQueue.addMutationBatch(T,h,E,l)}).next(D=>{y=D;const E=D.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(T,D.batchId,E)})}).then(()=>({batchId:y.batchId,changes:H_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new De(le)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await Ia(r,i.changes),await cc(r.remoteStore)}catch(i){const s=yp(i,"Failed to persist write");n.reject(s)}}async function T1(t,e){const n=J(t);try{const r=await KC(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?de(o.va):i.removedDocuments.size>0&&(de(o.va),o.va=!1))}),await Ia(n,r,e)}catch(r){await _a(r)}}function _y(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=J(o);u.onlineState=l;let h=!1;u.queries.forEach((f,p)=>{for(const y of p.j_)y.Z_(l)&&(h=!0)}),h&&vp(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bR(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new De(K.comparator);o=o.insert(s,At.newNoDocument(s,X.min()));const l=ne().add(s),u=new ac(X.min(),new Map,new De(le),o,l);await T1(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),_p(r)}else await bd(r.localStore,e,!1).then(()=>Fd(r,e,n)).catch(_a)}async function LR(t,e){const n=J(t),r=e.batch.batchId;try{const i=await qC(n.localStore,e);I1(n,r,null),S1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ia(n,i)}catch(i){await _a(i)}}async function FR(t,e,n){const r=J(t);try{const i=await function(o,l){const u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(de(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);I1(r,e,n),S1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ia(r,i)}catch(i){await _a(i)}}function S1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function I1(t,e,n){const r=J(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Fd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||A1(t,r)})}function A1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(dp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),_p(t))}function Ey(t,e,n){for(const r of n)r instanceof _1?(t.La.addReference(r.key,e),$R(t,r)):r instanceof E1?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||A1(t,r.key)):G()}function $R(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),_p(t))}function _p(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(Ie.fromString(e)),r=t.qa.next();t.Na.set(r,new PR(n)),t.Oa=t.Oa.insert(n,r),f1(t.remoteStore,new Rr(bn(rp(n.path)),r,"TargetPurposeLimboResolution",Xf.oe))}}async function Ia(t,e,n){const r=J(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=hp.Wi(u.targetId,h);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,h){const f=J(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(h,y=>F.forEach(y.$i,T=>f.persistence.referenceDelegate.addReference(p,y.targetId,T)).next(()=>F.forEach(y.Ui,T=>f.persistence.referenceDelegate.removeReference(p,y.targetId,T)))))}catch(p){if(!Ea(p))throw p;H("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const y=p.targetId;if(!p.fromCache){const T=f.os.get(y),P=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(P);f.os=f.os.insert(y,R)}}}(r.localStore,s))}async function BR(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await u1(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new q($.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ia(n,r.hs)}}function jR(t,e){const n=J(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let i=ne();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function C1(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=T1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bR.bind(null,e),e.Ca.d_=SR.bind(null,e.eventManager),e.Ca.$a=IR.bind(null,e.eventManager),e}function UR(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FR.bind(null,e),e}class Ru{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return WC(this.persistence,new zC,e.initialUser,this.serializer)}Ga(e){return new BC(cp.Zr,this.serializer)}Wa(e){return new JC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ru.provider={build:()=>new Ru};class $d{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_y(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BR.bind(null,this.syncEngine),await vR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ER}()}createDatastore(e){const n=lc(e.databaseInfo.databaseId),r=function(s){return new nR(s)}(e.databaseInfo);return function(s,o,l,u){return new sR(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new aR(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>_y(this.syncEngine,n,0),function(){return py.D()?new py:new ZC}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,f){const p=new xR(i,s,o,l,u,h);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=J(i);H("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Sa(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}$d.provider={build:()=>new $d};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=St.UNAUTHENTICATED,this.clientId=N_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vh(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await u1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WR(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>my(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>my(e.remoteStore,i)),t._onlineComponents=e}async function WR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await vh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Es("Error using user provided cache. Falling back to memory cache: "+n),await vh(t,new Ru)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await vh(t,new Ru);return t._offlineComponents}async function R1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await wy(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await wy(t,new $d))),t._onlineComponents}function qR(t){return R1(t).then(e=>e.syncEngine)}async function Ty(t){const e=await R1(t),n=e.eventManager;return n.onListen=kR.bind(null,e.syncEngine),n.onUnlisten=MR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VR.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t,e,n){if(!n)throw new q($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KR(t,e,n,r){if(e===!0&&r===!0)throw new q($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Iy(t){if(!K.isDocumentKey(t))throw new q($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ay(t){if(K.isDocumentKey(t))throw new q($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ep(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function pi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ep(t);throw new q($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=P1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new q($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new q($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new q($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lA;switch(r.type){case"firstParty":return new dA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Sy.get(n);r&&(H("ComponentProvider","Removing Datastore"),Sy.delete(n),r.terminate())}(this),Promise.resolve()}}function QR(t,e,n,r={}){var i;const s=(t=pi(t,hc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=St.MOCK_USER;else{l=zS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new q($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new St(h)}t._authCredentials=new uA(new k_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dc(this.firestore,e,this._query)}}class Kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}}class Br extends dc{constructor(e,n,r){super(e,n,rp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new K(e))}withConverter(e){return new Br(this.firestore,e,this._path)}}function GR(t,e,...n){if(t=_s(t),x1("collection","path",e),t instanceof hc){const r=Ie.fromString(e,...n);return Ay(r),new Br(t,null,r)}{if(!(t instanceof Kt||t instanceof Br))throw new q($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return Ay(r),new Br(t.firestore,null,r)}}function Pr(t,e,...n){if(t=_s(t),arguments.length===1&&(e=N_.newId()),x1("doc","path",e),t instanceof hc){const r=Ie.fromString(e,...n);return Iy(r),new Kt(t,null,new K(r))}{if(!(t instanceof Kt||t instanceof Br))throw new q($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return Iy(r),new Kt(t.firestore,t instanceof Br?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new h1(this,"async_queue_retry"),this.Vu=()=>{const r=yh();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=yh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=yh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new fi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ea(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw or("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=gp.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&G()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Py(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class ca extends hc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ry,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ry(e),this._firestoreClient=void 0,await e}}}function YR(t,e){const n=typeof t=="object"?t:JI(),r=typeof t=="string"?t:"(default)",i=QI(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=jS("firestore");s&&QR(i,...s)}return i}function k1(t){if(t._terminated)throw new q($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XR(t),t._firestoreClient}function XR(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,h,f){return new AA(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,P1(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new HR(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cs(mt.fromBase64String(e))}catch(n){throw new q($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Cs(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=/^__.*__$/;class ZR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ri(e,this.data,this.fieldMask,n,this.fieldTransforms):new wa(e,this.data,n,this.fieldTransforms)}}function D1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class Ip{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ip(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Pu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(D1(this.Cu)&&JR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class eP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lc(e)}Qu(e,n,r,i=!1){return new Ip({Cu:e,methodName:n,qu:r,path:ht.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tP(t){const e=t._freezeSettings(),n=lc(t._databaseId);return new eP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nP(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);b1("Data must be an object, but it was:",o,r);const l=V1(r,o);let u,h;if(s.merge)u=new _n(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const y=rP(e,p,n);if(!o.contains(y))throw new q($.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);sP(f,y)||f.push(y)}u=new _n(f),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new ZR(new on(l),u,h)}function M1(t,e){if(O1(t=_s(t)))return b1("Unsupported field value:",e,t),V1(t,e);if(t instanceof N1)return function(r,i){if(!D1(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=M1(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=_s(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ge.fromDate(r);return{timestampValue:Au(i.serializer,s)}}if(r instanceof Ge){const s=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Au(i.serializer,s)}}if(r instanceof Tp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cs)return{bytesValue:n1(i.serializer,r._byteString)};if(r instanceof Kt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sp)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return ip(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Ep(r)}`)}(t,e)}function V1(t,e){const n={};return D_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(t,(r,i)=>{const s=M1(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function O1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof Tp||t instanceof Cs||t instanceof Kt||t instanceof N1||t instanceof Sp)}function b1(t,e,n){if(!O1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ep(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function rP(t,e,n){if((e=_s(e))instanceof wp)return e._internalPath;if(typeof e=="string")return L1(t,e);throw Pu("Field path arguments must be of type string or ",t,!1,void 0,n)}const iP=new RegExp("[~\\*/\\[\\]]");function L1(t,e,n){if(e.search(iP)>=0)throw Pu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wp(...e.split("."))._internalPath}catch{throw Pu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new q($.INVALID_ARGUMENT,l+t+u)}function sP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oP extends F1{data(){return super.data()}}function $1(t,e){return typeof e=="string"?L1(t,e):e instanceof wp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lP{convertValue(e,n="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ls(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Fe(o.doubleValue));return new Sp(s)}convertGeoPoint(e){return new Tp(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(sa(e));default:return null}}convertTimestamp(e){const n=Hr(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);de(l1(r));const i=new oa(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||or(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class B1 extends F1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Bl extends B1{data(e={}){return super.data(e)}}class cP{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new _o(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Bl(this._firestore,this._userDataWriter,r.key,r,new _o(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Bl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new _o(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Bl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new _o(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:hP(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function hP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}class j1 extends lP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function Vo(t,e,n){t=pi(t,Kt);const r=pi(t.firestore,ca),i=uP(t.converter,e,n);return U1(r,[nP(tP(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ln.none())])}function dP(t){return U1(pi(t.firestore,ca),[new sp(t._key,Ln.none())])}function Ap(t,...e){var n,r,i;t=_s(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Py(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Py(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,h,f;if(t instanceof Kt)h=pi(t.firestore,ca),f=rp(t._key.path),u={next:p=>{e[o]&&e[o](fP(h,t,p))},error:e[o+1],complete:e[o+2]};else{const p=pi(t,dc);h=pi(p.firestore,ca),f=p._query;const y=new j1(h);u={next:T=>{e[o]&&e[o](new cP(h,y,p,T))},error:e[o+1],complete:e[o+2]},aP(t._query)}return function(y,T,P,R){const D=new zR(R),E=new AR(T,D,P);return y.asyncQueue.enqueueAndForget(async()=>wR(await Ty(y),E)),()=>{D.Za(),y.asyncQueue.enqueueAndForget(async()=>TR(await Ty(y),E))}}(k1(h),f,l,u)}function U1(t,e){return function(r,i){const s=new fi;return r.asyncQueue.enqueueAndForget(async()=>OR(await qR(r),i,s)),s.promise}(k1(t),e)}function fP(t,e,n){const r=n.docs.get(e._key),i=new j1(t);return new B1(t,i,e._key,r,new _o(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){bs=i})(XI),_u(new na("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new ca(new cA(r.getProvider("auth-internal")),new pA(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new q($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oa(h.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),us(Wg,"4.7.3",e),us(Wg,"4.7.3","esm2017")})();var pP="firebase",mP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us(pP,mP,"app");const gP={apiKey:"AIzaSyAffBMfX9NHVgSg_w4a8ZKa55vmp0eHb2w",authDomain:"dd5tools.firebaseapp.com",databaseURL:"https://dd5tools.firebaseio.com",projectId:"dd5tools",storageBucket:"dd5tools.appspot.com",messagingSenderId:"1096592466642",appId:"1:1096592466642:web:f03ea81d304964f1f1030b"},yP=w_(gP),Gn=YR(yP),Aa={Monster:"Monster",Character:"Character"},Zn=50,xu=44,ts=1,vP=2,xy=Zn-ts,Ca=16,fc=20,Cp=["##............##","#..............#","................","................","................","................","................","................","........####....","........####....","...####.........","...####.........","................",".............#..",".............#..",".............#..","................","................","...............#","..............##"],_P=t=>Math.floor(Math.random()*20)+1+z1(t),z1=t=>Math.floor((t.abilities[ee.DEX]-10)/2),EP=()=>{for(;;){const t=Math.floor(Math.random()*Ca),e=Math.floor(Math.random()*10);if(Cp[e][t]===".")return{x:t,y:e}}},wP=(t,e)=>{const{x:n,y:r}=EP(),{hp:i,name:s}=t;return{id:`m${e}`,type:Aa.Monster,name:s,x:n,y:r,hp:i}},TP={name:"string",num:-1,size:"中型",monsterType:"人型",ac:-1,hp:-1,save:-1,move:[],skills:{},senses:[],languages:[],cr:"string",exp:-1,abilities:{[ee.STR]:10,[ee.DEX]:10,[ee.CON]:10,[ee.INT]:10,[ee.WIS]:10,[ee.CHA]:10},actions:[],specialAbilities:[],toHit:-1,damage:-1,diceNum:-1,damageMod:-1,baseBonus:-1,initiative:-1},H1={initiative:_P,dexMod:z1,unit:wP,empty:TP},SP=t=>{const[e,n]=b.useState(0),[r,i]=b.useState(H1.empty);b.useEffect(()=>{Ap(Pr(Gn,"monster","monster"),C=>{i(C.data())})},[]);const{cr:s,num:o,exp:l}=b.useMemo(()=>yl(Object.keys(Mg).map(C=>{const x=Mg[C],A=Math.floor(t/x);return{cr:C,num:A,exp:x}}).filter(({num:C})=>1<=C&&C<=15)),[e]),u=b.useMemo(()=>yl(ch.filter(C=>C.templateType===ge.TYPE)),[e]),h=b.useMemo(()=>yl(ch.filter(C=>C.templateType===ge.RACE&&C.monsterType===u.monsterType)),[e]),f=b.useMemo(()=>yl(ch.filter(C=>C.templateType===ge.CLASS)),[e]),{baseBonus:p,ac:y,hpMin:T,hpMax:P,atBonus:R,damageMin:D,damageMax:E,save:_}=NS[s],S=Math.floor((T+P)/2),N=Math.floor((D+E)/2),O=Math.floor(N/3.5),M=Math.floor(N-O*3.5),v=Math.floor(Math.random()*20)+p,m={name:h.name+f.name,num:o,size:ni.MEDIUM,monsterType:Oe.HUMANOID,ac:y,hp:S,save:_,move:[],cr:s,exp:l,abilities:{[ee.STR]:8+p,[ee.DEX]:8+p,[ee.CON]:8+p,[ee.INT]:8+p,[ee.WIS]:8+p,[ee.CHA]:8+p},skills:{},senses:[],languages:[],specialAbilities:[],actions:[],toHit:R,damage:N,diceNum:O,damageMod:M,baseBonus:p,initiative:v},w=u.enhancer(h.enhancer(f.enhancer(m)));return{monster:r,reRollMonster:()=>{n(Math.random()),Vo(Pr(Gn,"monster","monster"),w).then()}}},IP=({settings:t,setLevel:e,setNumCharacters:n,setDifficulty:r})=>{const{level:i,numCharacters:s,difficulty:o}=t;return L.jsxs(L.Fragment,{children:[L.jsx("h3",{children:"設定"}),L.jsxs("select",{value:i,className:"form-select form-select-lg mb-3",onChange:l=>e(parseInt(l.target.value)),children:[L.jsx("option",{value:"",children:"レベルを選択してください"}),[...Array(20).keys()].map(l=>L.jsxs("option",{value:l+1,children:["キャラクターレベル ",l+1]},l))]}),L.jsxs("select",{value:s,className:"form-select form-select-lg mb-3",onChange:l=>n(parseInt(l.target.value)),children:[L.jsx("option",{value:"",children:"人数を選択してください"}),[...Array(6).keys()].map(l=>L.jsxs("option",{value:l+1,children:["人数 ",l+1]},l))]}),L.jsxs("select",{value:o,className:"form-select form-select-lg mb-3",onChange:l=>r(l.target.value),children:[L.jsx("option",{value:"",children:"難易度を選択してください"}),L.jsx("option",{value:Jn.EASY,children:"簡単"}),L.jsx("option",{value:Jn.NORMAL,children:"通常"}),L.jsx("option",{value:Jn.HARD,children:"困難"}),L.jsx("option",{value:Jn.HELL,children:"死地"})]})]})},me={Setting:"Setting",Monster:"Monster",Room:"Room",HitPoint:"HitPoint",EditRoom:"EditRoom"},AP=t=>{const[e,n]=b.useState(me.Setting),r=b.useMemo(()=>{switch(e){case me.Setting:return"モンスターを作成";case me.Monster:return"モンスターを再作成";case me.Room:return"ユニットを配置";case me.HitPoint:return"ヒットポイントを初期化";case me.EditRoom:return"壁をクリア";default:return""}},[e]);return{page:e,setPage:n,reRoll:()=>{t[e]()},reRollLabel:r}},CP=({page:t,setPage:e,reRoll:n,reRollLabel:r,isMaster:i,setIsMaster:s})=>L.jsx("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark mb-3",children:L.jsxs("div",{className:"container-fluid",children:[L.jsx("a",{className:"navbar-brand",onClick:n,children:"DD5eTool"}),L.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:L.jsx("span",{className:"navbar-toggler-icon"})}),L.jsxs("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[L.jsxs("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[L.jsx("li",{className:"nav-item",children:L.jsx("a",{className:t===me.Setting?"nav-link active":"nav-link",onClick:()=>e(me.Setting),children:"設定"})}),L.jsx("li",{className:"nav-item",children:L.jsx("a",{className:t===me.Monster?"nav-link active":"nav-link",onClick:()=>e(me.Monster),children:"モンスター"})}),L.jsx("li",{className:"nav-item",children:L.jsx("a",{className:t===me.Room?"nav-link active":"nav-link",onClick:()=>e(me.Room),children:"戦闘マップ"})}),i&&L.jsx("li",{className:"nav-item",children:L.jsx("a",{className:t===me.HitPoint?"nav-link active":"nav-link",onClick:()=>e(me.HitPoint),children:"ヒットポイント"})}),i&&L.jsx("li",{className:"nav-item",children:L.jsx("a",{className:t===me.EditRoom?"nav-link active":"nav-link",onClick:()=>e(me.EditRoom),children:"マップ編集"})})]}),L.jsxs("div",{className:"form-check form-switch me-4",children:[L.jsx("input",{className:"form-check-input",type:"checkbox",id:"isMaster",checked:i,onChange:o=>{console.log(`isMaster: ${o.target.checked}`),s(o.target.checked)}}),i?L.jsx("label",{className:"form-check-label text-white",htmlFor:"isMaster",children:"マスター：有効"}):L.jsx("label",{className:"form-check-label text-white",htmlFor:"isMaster",children:"マスター：無効"})]}),L.jsx("button",{className:"btn btn-secondary",onClick:n,children:L.jsx("i",{className:"bi bi-dice-5-fill",children:r})})]})]})}),RP=()=>{const[t,e]=b.useState([]),n=GR(Gn,"units");return b.useEffect(()=>{Ap(n,l=>e(l.docs.map(u=>u.data())))},[]),{units:t,move:(l,u,h)=>{Vo(Pr(Gn,"units",l),{x:u,y:h},{merge:!0}).then()},setUnit:l=>{Vo(Pr(Gn,"units",l.id),l).then()},deleteUnit:l=>{dP(Pr(Gn,"units",l)).then()},setHitPoint:(l,u)=>{Vo(Pr(Gn,"units",l),{hp:u},{merge:!0}).then()}}},pc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Bs(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Rp(t){return"nodeType"in t}function $t(t){var e,n;return t?Bs(t)?t:Rp(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Pp(t){const{Document:e}=$t(t);return t instanceof e}function Ra(t){return Bs(t)?!1:t instanceof $t(t).HTMLElement}function W1(t){return t instanceof $t(t).SVGElement}function js(t){return t?Bs(t)?t.document:Rp(t)?Pp(t)?t:Ra(t)||W1(t)?t.ownerDocument:document:document:document}const lr=pc?b.useLayoutEffect:b.useEffect;function xp(t){const e=b.useRef(t);return lr(()=>{e.current=t}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function PP(){const t=b.useRef(null),e=b.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=b.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function ha(t,e){e===void 0&&(e=[t]);const n=b.useRef(t);return lr(()=>{n.current!==t&&(n.current=t)},e),n}function Pa(t,e){const n=b.useRef();return b.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function ku(t){const e=xp(t),n=b.useRef(null),r=b.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function Bd(t){const e=b.useRef();return b.useEffect(()=>{e.current=t},[t]),e.current}let _h={};function mc(t,e){return b.useMemo(()=>{if(e)return e;const n=_h[t]==null?0:_h[t]+1;return _h[t]=n,t+"-"+n},[t,e])}function q1(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const l=Object.entries(o);for(const[u,h]of l){const f=s[u];f!=null&&(s[u]=f+t*h)}return s},{...e})}}const hs=q1(1),Nu=q1(-1);function xP(t){return"clientX"in t&&"clientY"in t}function K1(t){if(!t)return!1;const{KeyboardEvent:e}=$t(t.target);return e&&t instanceof e}function kP(t){if(!t)return!1;const{TouchEvent:e}=$t(t.target);return e&&t instanceof e}function jd(t){if(kP(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return xP(t)?{x:t.clientX,y:t.clientY}:null}const Ud=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ud.Translate.toString(t),Ud.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),ky="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function NP(t){return t.matches(ky)?t:t.querySelector(ky)}const DP={display:"none"};function MP(t){let{id:e,value:n}=t;return ct.createElement("div",{id:e,style:DP},n)}function VP(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ct.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function OP(){const[t,e]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Q1=b.createContext(null);function bP(t){const e=b.useContext(Q1);b.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function LP(){const[t]=b.useState(()=>new Set),e=b.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[b.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,s)})},[t]),e]}const FP={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},$P={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function BP(t){let{announcements:e=$P,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=FP}=t;const{announce:s,announcement:o}=OP(),l=mc("DndLiveRegion"),[u,h]=b.useState(!1);if(b.useEffect(()=>{h(!0)},[]),bP(b.useMemo(()=>({onDragStart(p){let{active:y}=p;s(e.onDragStart({active:y}))},onDragMove(p){let{active:y,over:T}=p;e.onDragMove&&s(e.onDragMove({active:y,over:T}))},onDragOver(p){let{active:y,over:T}=p;s(e.onDragOver({active:y,over:T}))},onDragEnd(p){let{active:y,over:T}=p;s(e.onDragEnd({active:y,over:T}))},onDragCancel(p){let{active:y,over:T}=p;s(e.onDragCancel({active:y,over:T}))}}),[s,e])),!u)return null;const f=ct.createElement(ct.Fragment,null,ct.createElement(MP,{id:r,value:i.draggable}),ct.createElement(VP,{id:l,announcement:o}));return n?ii.createPortal(f,n):f}var qe;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(qe||(qe={}));function Du(){}const In=Object.freeze({x:0,y:0});function jP(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function UP(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function zP(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,l=s-n;if(r<i&&n<s){const u=e.width*e.height,h=t.width*t.height,f=o*l,p=f/(u+h-f);return Number(p.toFixed(4))}return 0}const HP=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=zP(l,e);u>0&&i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(jP)};function WP(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function G1(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:In}function qP(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const KP=qP(1);function QP(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function GP(t,e,n){const r=QP(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:l}=r,u=t.left-o-(1-i)*parseFloat(n),h=t.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),f=i?t.width/i:t.width,p=s?t.height/s:t.height;return{width:f,height:p,top:h,right:u+f,bottom:h+p,left:u}}const YP={ignoreTransform:!1};function xa(t,e){e===void 0&&(e=YP);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:f}=$t(t).getComputedStyle(t);h&&(n=GP(n,h,f))}const{top:r,left:i,width:s,height:o,bottom:l,right:u}=n;return{top:r,left:i,width:s,height:o,bottom:l,right:u}}function Ny(t){return xa(t,{ignoreTransform:!0})}function XP(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function JP(t,e){return e===void 0&&(e=$t(t).getComputedStyle(t)),e.position==="fixed"}function ZP(t,e){e===void 0&&(e=$t(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function kp(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(Pp(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Ra(i)||W1(i)||n.includes(i))return n;const s=$t(t).getComputedStyle(i);return i!==t&&ZP(i,s)&&n.push(i),JP(i,s)?n:r(i.parentNode)}return t?r(t):n}function Y1(t){const[e]=kp(t,1);return e??null}function Eh(t){return!pc||!t?null:Bs(t)?t:Rp(t)?Pp(t)||t===js(t).scrollingElement?window:Ra(t)?t:null:null}function X1(t){return Bs(t)?t.scrollX:t.scrollLeft}function J1(t){return Bs(t)?t.scrollY:t.scrollTop}function zd(t){return{x:X1(t),y:J1(t)}}var et;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(et||(et={}));function Z1(t){return!pc||!t?!1:t===document.scrollingElement}function eE(t){const e={x:0,y:0},n=Z1(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const ex={x:.2,y:.2};function tx(t,e,n,r,i){let{top:s,left:o,right:l,bottom:u}=n;r===void 0&&(r=10),i===void 0&&(i=ex);const{isTop:h,isBottom:f,isLeft:p,isRight:y}=eE(t),T={x:0,y:0},P={x:0,y:0},R={height:e.height*i.y,width:e.width*i.x};return!h&&s<=e.top+R.height?(T.y=et.Backward,P.y=r*Math.abs((e.top+R.height-s)/R.height)):!f&&u>=e.bottom-R.height&&(T.y=et.Forward,P.y=r*Math.abs((e.bottom-R.height-u)/R.height)),!y&&l>=e.right-R.width?(T.x=et.Forward,P.x=r*Math.abs((e.right-R.width-l)/R.width)):!p&&o<=e.left+R.width&&(T.x=et.Backward,P.x=r*Math.abs((e.left+R.width-o)/R.width)),{direction:T,speed:P}}function nx(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function tE(t){return t.reduce((e,n)=>hs(e,zd(n)),In)}function rx(t){return t.reduce((e,n)=>e+X1(n),0)}function ix(t){return t.reduce((e,n)=>e+J1(n),0)}function sx(t,e){if(e===void 0&&(e=xa),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);Y1(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const ox=[["x",["left","right"],rx],["y",["top","bottom"],ix]];class Np{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=kp(n),i=tE(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,l]of ox)for(const u of o)Object.defineProperty(this,u,{get:()=>{const h=l(r),f=i[s]-h;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Oo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function ax(t){const{EventTarget:e}=$t(t);return t instanceof e?t:js(t)}function wh(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var nn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(nn||(nn={}));function Dy(t){t.preventDefault()}function lx(t){t.stopPropagation()}var ye;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(ye||(ye={}));const nE={start:[ye.Space,ye.Enter],cancel:[ye.Esc],end:[ye.Space,ye.Enter]},ux=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ye.Right:return{...n,x:n.x+25};case ye.Left:return{...n,x:n.x-25};case ye.Down:return{...n,y:n.y+25};case ye.Up:return{...n,y:n.y-25}}};class rE{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Oo(js(n)),this.windowListeners=new Oo($t(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(nn.Resize,this.handleCancel),this.windowListeners.add(nn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(nn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&sx(r),n(In)}handleKeyDown(e){if(K1(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=nE,coordinateGetter:o=ux,scrollBehavior:l="smooth"}=i,{code:u}=e;if(s.end.includes(u)){this.handleEnd(e);return}if(s.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:h}=r.current,f=h?{x:h.left,y:h.top}:In;this.referenceCoordinates||(this.referenceCoordinates=f);const p=o(e,{active:n,context:r.current,currentCoordinates:f});if(p){const y=Nu(p,f),T={x:0,y:0},{scrollableAncestors:P}=r.current;for(const R of P){const D=e.code,{isTop:E,isRight:_,isLeft:S,isBottom:N,maxScroll:O,minScroll:M}=eE(R),v=nx(R),m={x:Math.min(D===ye.Right?v.right-v.width/2:v.right,Math.max(D===ye.Right?v.left:v.left+v.width/2,p.x)),y:Math.min(D===ye.Down?v.bottom-v.height/2:v.bottom,Math.max(D===ye.Down?v.top:v.top+v.height/2,p.y))},w=D===ye.Right&&!_||D===ye.Left&&!S,I=D===ye.Down&&!N||D===ye.Up&&!E;if(w&&m.x!==p.x){const C=R.scrollLeft+y.x,x=D===ye.Right&&C<=O.x||D===ye.Left&&C>=M.x;if(x&&!y.y){R.scrollTo({left:C,behavior:l});return}x?T.x=R.scrollLeft-C:T.x=D===ye.Right?R.scrollLeft-O.x:R.scrollLeft-M.x,T.x&&R.scrollBy({left:-T.x,behavior:l});break}else if(I&&m.y!==p.y){const C=R.scrollTop+y.y,x=D===ye.Down&&C<=O.y||D===ye.Up&&C>=M.y;if(x&&!y.x){R.scrollTo({top:C,behavior:l});return}x?T.y=R.scrollTop-C:T.y=D===ye.Down?R.scrollTop-O.y:R.scrollTop-M.y,T.y&&R.scrollBy({top:-T.y,behavior:l});break}}this.handleMove(e,hs(Nu(p,this.referenceCoordinates),T))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}rE.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=nE,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=s.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function My(t){return!!(t&&"distance"in t)}function Vy(t){return!!(t&&"delay"in t)}class Dp{constructor(e,n,r){var i;r===void 0&&(r=ax(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=js(o),this.documentListeners=new Oo(this.document),this.listeners=new Oo(r),this.windowListeners=new Oo($t(o)),this.initialCoordinates=(i=jd(s))!=null?i:In,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(nn.Resize,this.handleCancel),this.windowListeners.add(nn.DragStart,Dy),this.windowListeners.add(nn.VisibilityChange,this.handleCancel),this.windowListeners.add(nn.ContextMenu,Dy),this.documentListeners.add(nn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Vy(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(My(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(nn.Click,lx,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(nn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:l}}=s;if(!i)return;const u=(n=jd(e))!=null?n:In,h=Nu(i,u);if(!r&&l){if(My(l)){if(l.tolerance!=null&&wh(h,l.tolerance))return this.handleCancel();if(wh(h,l.distance))return this.handleStart()}return Vy(l)&&wh(h,l.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===ye.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const cx={move:{name:"pointermove"},end:{name:"pointerup"}};class iE extends Dp{constructor(e){const{event:n}=e,r=js(n.target);super(e,cx,r)}}iE.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const hx={move:{name:"mousemove"},end:{name:"mouseup"}};var Hd;(function(t){t[t.RightClick=2]="RightClick"})(Hd||(Hd={}));class dx extends Dp{constructor(e){super(e,hx,js(e.event.target))}}dx.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Hd.RightClick?!1:(r==null||r({event:n}),!0)}}];const Th={move:{name:"touchmove"},end:{name:"touchend"}};class fx extends Dp{constructor(e){super(e,Th)}static setup(){return window.addEventListener(Th.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Th.move.name,e)};function e(){}}}fx.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var bo;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(bo||(bo={}));var Mu;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Mu||(Mu={}));function px(t){let{acceleration:e,activator:n=bo.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:l=Mu.TreeOrder,pointerCoordinates:u,scrollableAncestors:h,scrollableAncestorRects:f,delta:p,threshold:y}=t;const T=gx({delta:p,disabled:!s}),[P,R]=PP(),D=b.useRef({x:0,y:0}),E=b.useRef({x:0,y:0}),_=b.useMemo(()=>{switch(n){case bo.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case bo.DraggableRect:return i}},[n,i,u]),S=b.useRef(null),N=b.useCallback(()=>{const M=S.current;if(!M)return;const v=D.current.x*E.current.x,m=D.current.y*E.current.y;M.scrollBy(v,m)},[]),O=b.useMemo(()=>l===Mu.TreeOrder?[...h].reverse():h,[l,h]);b.useEffect(()=>{if(!s||!h.length||!_){R();return}for(const M of O){if((r==null?void 0:r(M))===!1)continue;const v=h.indexOf(M),m=f[v];if(!m)continue;const{direction:w,speed:I}=tx(M,m,_,e,y);for(const C of["x","y"])T[C][w[C]]||(I[C]=0,w[C]=0);if(I.x>0||I.y>0){R(),S.current=M,P(N,o),D.current=I,E.current=w;return}}D.current={x:0,y:0},E.current={x:0,y:0},R()},[e,N,r,R,s,o,JSON.stringify(_),JSON.stringify(T),P,h,O,f,JSON.stringify(y)])}const mx={x:{[et.Backward]:!1,[et.Forward]:!1},y:{[et.Backward]:!1,[et.Forward]:!1}};function gx(t){let{delta:e,disabled:n}=t;const r=Bd(e);return Pa(i=>{if(n||!r||!i)return mx;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[et.Backward]:i.x[et.Backward]||s.x===-1,[et.Forward]:i.x[et.Forward]||s.x===1},y:{[et.Backward]:i.y[et.Backward]||s.y===-1,[et.Forward]:i.y[et.Forward]||s.y===1}}},[n,e,r])}function yx(t,e){const n=e!==null?t.get(e):void 0,r=n?n.node.current:null;return Pa(i=>{var s;return e===null?null:(s=r??i)!=null?s:null},[r,e])}function vx(t,e){return b.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var da;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(da||(da={}));var Wd;(function(t){t.Optimized="optimized"})(Wd||(Wd={}));const Oy=new Map;function _x(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=b.useState(null),{frequency:l,measure:u,strategy:h}=i,f=b.useRef(t),p=D(),y=ha(p),T=b.useCallback(function(E){E===void 0&&(E=[]),!y.current&&o(_=>_===null?E:_.concat(E.filter(S=>!_.includes(S))))},[y]),P=b.useRef(null),R=Pa(E=>{if(p&&!n)return Oy;if(!E||E===Oy||f.current!==t||s!=null){const _=new Map;for(let S of t){if(!S)continue;if(s&&s.length>0&&!s.includes(S.id)&&S.rect.current){_.set(S.id,S.rect.current);continue}const N=S.node.current,O=N?new Np(u(N),N):null;S.rect.current=O,O&&_.set(S.id,O)}return _}return E},[t,s,n,p,u]);return b.useEffect(()=>{f.current=t},[t]),b.useEffect(()=>{p||T()},[n,p]),b.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),b.useEffect(()=>{p||typeof l!="number"||P.current!==null||(P.current=setTimeout(()=>{T(),P.current=null},l))},[l,p,T,...r]),{droppableRects:R,measureDroppableContainers:T,measuringScheduled:s!=null};function D(){switch(h){case da.Always:return!1;case da.BeforeDragging:return n;default:return!n}}}function sE(t,e){return Pa(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Ex(t,e){return sE(t,e)}function wx(t){let{callback:e,disabled:n}=t;const r=xp(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function gc(t){let{callback:e,disabled:n}=t;const r=xp(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Tx(t){return new Np(xa(t),t)}function by(t,e,n){e===void 0&&(e=Tx);const[r,i]=b.useReducer(l,null),s=wx({callback(u){if(t)for(const h of u){const{type:f,target:p}=h;if(f==="childList"&&p instanceof HTMLElement&&p.contains(t)){i();break}}}}),o=gc({callback:i});return lr(()=>{i(),t?(o==null||o.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[t]),r;function l(u){if(!t)return null;if(t.isConnected===!1){var h;return(h=u??n)!=null?h:null}const f=e(t);return JSON.stringify(u)===JSON.stringify(f)?u:f}}function Sx(t){const e=sE(t);return G1(t,e)}const Ly=[];function Ix(t){const e=b.useRef(t),n=Pa(r=>t?r&&r!==Ly&&t&&e.current&&t.parentNode===e.current.parentNode?r:kp(t):Ly,[t]);return b.useEffect(()=>{e.current=t},[t]),n}function Ax(t){const[e,n]=b.useState(null),r=b.useRef(t),i=b.useCallback(s=>{const o=Eh(s.target);o&&n(l=>l?(l.set(o,zd(o)),new Map(l)):null)},[]);return b.useEffect(()=>{const s=r.current;if(t!==s){o(s);const l=t.map(u=>{const h=Eh(u);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,zd(h)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(s)};function o(l){l.forEach(u=>{const h=Eh(u);h==null||h.removeEventListener("scroll",i)})}},[i,t]),b.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>hs(s,o),In):tE(t):In,[t,e])}function Fy(t,e){e===void 0&&(e=[]);const n=b.useRef(null);return b.useEffect(()=>{n.current=null},e),b.useEffect(()=>{const r=t!==In;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Nu(t,n.current):In}function Cx(t){b.useEffect(()=>{if(!pc)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function Rx(t,e){return b.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function oE(t){return b.useMemo(()=>t?XP(t):null,[t])}const Sh=[];function Px(t,e){e===void 0&&(e=xa);const[n]=t,r=oE(n?$t(n):null),[i,s]=b.useReducer(l,Sh),o=gc({callback:s});return t.length>0&&i===Sh&&s(),lr(()=>{t.length?t.forEach(u=>o==null?void 0:o.observe(u)):(o==null||o.disconnect(),s())},[t]),i;function l(){return t.length?t.map(u=>Z1(u)?r:new Np(e(u),u)):Sh}}function xx(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Ra(e)?e:t}function kx(t){let{measure:e}=t;const[n,r]=b.useState(null),i=b.useCallback(h=>{for(const{target:f}of h)if(Ra(f)){r(p=>{const y=e(f);return p?{...p,width:y.width,height:y.height}:y});break}},[e]),s=gc({callback:i}),o=b.useCallback(h=>{const f=xx(h);s==null||s.disconnect(),f&&(s==null||s.observe(f)),r(f?e(f):null)},[e,s]),[l,u]=ku(o);return b.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const Nx=[{sensor:iE,options:{}},{sensor:rE,options:{}}],Dx={current:{}},jl={draggable:{measure:Ny},droppable:{measure:Ny,strategy:da.WhileDragging,frequency:Wd.Optimized},dragOverlay:{measure:xa}};class Lo extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const Mx={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Lo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Du},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:jl,measureDroppableContainers:Du,windowRect:null,measuringScheduled:!1},Vx={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Du,draggableNodes:new Map,over:null,measureDroppableContainers:Du},yc=b.createContext(Vx),Ox=b.createContext(Mx);function bx(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Lo}}}function Lx(t,e){switch(e.type){case qe.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case qe.DragMove:return t.draggable.active?{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}}:t;case qe.DragEnd:case qe.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case qe.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new Lo(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case qe.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new Lo(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case qe.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new Lo(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function Fx(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=b.useContext(yc),s=Bd(r),o=Bd(n==null?void 0:n.id);return b.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!K1(s)||document.activeElement===s.target)return;const l=i.get(o);if(!l)return;const{activatorNode:u,node:h}=l;if(!u.current&&!h.current)return;requestAnimationFrame(()=>{for(const f of[u.current,h.current]){if(!f)continue;const p=NP(f);if(p){p.focus();break}}})}},[r,e,i,o,s]),null}function $x(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function Bx(t){return b.useMemo(()=>({draggable:{...jl.draggable,...t==null?void 0:t.draggable},droppable:{...jl.droppable,...t==null?void 0:t.droppable},dragOverlay:{...jl.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function jx(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=b.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;lr(()=>{if(!o&&!l||!e){s.current=!1;return}if(s.current||!r)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const f=n(h),p=G1(f,r);if(o||(p.x=0),l||(p.y=0),s.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const y=Y1(h);y&&y.scrollBy({top:p.y,left:p.x})}},[e,o,l,r,n])}const aE=b.createContext({...In,scaleX:1,scaleY:1});var Tr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Tr||(Tr={}));const Ux=b.memo(function(e){var n,r,i,s;let{id:o,accessibility:l,autoScroll:u=!0,children:h,sensors:f=Nx,collisionDetection:p=HP,measuring:y,modifiers:T,...P}=e;const R=b.useReducer(Lx,void 0,bx),[D,E]=R,[_,S]=LP(),[N,O]=b.useState(Tr.Uninitialized),M=N===Tr.Initialized,{draggable:{active:v,nodes:m,translate:w},droppable:{containers:I}}=D,C=v?m.get(v):null,x=b.useRef({initial:null,translated:null}),A=b.useMemo(()=>{var Re;return v!=null?{id:v,data:(Re=C==null?void 0:C.data)!=null?Re:Dx,rect:x}:null},[v,C]),Ae=b.useRef(null),[Xt,An]=b.useState(null),[Ce,U]=b.useState(null),W=ha(P,Object.values(P)),Q=mc("DndDescribedBy",o),oe=b.useMemo(()=>I.getEnabled(),[I]),Y=Bx(y),{droppableRects:ue,measureDroppableContainers:Ye,measuringScheduled:rt}=_x(oe,{dragging:M,dependencies:[w.x,w.y],config:Y.droppable}),fe=yx(m,v),it=b.useMemo(()=>Ce?jd(Ce):null,[Ce]),Cn=Fa(),Jt=Ex(fe,Y.draggable.measure);jx({activeNode:v?m.get(v):null,config:Cn.layoutShiftCompensation,initialRect:Jt,measure:Y.draggable.measure});const Be=by(fe,Y.draggable.measure,Jt),Bt=by(fe?fe.parentElement:null),je=b.useRef({activatorEvent:null,active:null,activeNode:fe,collisionRect:null,collisions:null,droppableRects:ue,draggableNodes:m,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),xi=I.getNodeFor((n=je.current.over)==null?void 0:n.id),dn=kx({measure:Y.dragOverlay.measure}),cr=(r=dn.nodeRef.current)!=null?r:fe,jn=M?(i=dn.rect)!=null?i:Be:null,Na=!!(dn.nodeRef.current&&dn.rect),Da=Sx(Na?null:Be),ki=oE(cr?$t(cr):null),Zt=Ix(M?xi??fe:null),Gr=Px(Zt),Ni=$x(T,{transform:{x:w.x-Da.x,y:w.y-Da.y,scaleX:1,scaleY:1},activatorEvent:Ce,active:A,activeNodeRect:Be,containerNodeRect:Bt,draggingNodeRect:jn,over:je.current.over,overlayNodeRect:dn.rect,scrollableAncestors:Zt,scrollableAncestorRects:Gr,windowRect:ki}),Di=it?hs(it,w):null,Mi=Ax(Zt),Ma=Fy(Mi),Xe=Fy(Mi,[Be]),Me=hs(Ni,Ma),fn=jn?KP(jn,Ni):null,hr=A&&fn?p({active:A,collisionRect:fn,droppableRects:ue,droppableContainers:oe,pointerCoordinates:Di}):null,Hs=UP(hr,"id"),[Rn,dr]=b.useState(null),Va=Na?Ni:hs(Ni,Xe),Oa=WP(Va,(s=Rn==null?void 0:Rn.rect)!=null?s:null,Be),Vi=b.useCallback((Re,st)=>{let{sensor:ot,options:gt}=st;if(Ae.current==null)return;const Rt=m.get(Ae.current);if(!Rt)return;const yt=Re.nativeEvent,jt=new ot({active:Ae.current,activeNode:Rt,event:yt,options:gt,context:je,onStart(Dt){const Le=Ae.current;if(Le==null)return;const fr=m.get(Le);if(!fr)return;const{onDragStart:Pn}=W.current,xn={active:{id:Le,data:fr.data,rect:x}};ii.unstable_batchedUpdates(()=>{Pn==null||Pn(xn),O(Tr.Initializing),E({type:qe.DragStart,initialCoordinates:Dt,active:Le}),_({type:"onDragStart",event:xn})})},onMove(Dt){E({type:qe.DragMove,coordinates:Dt})},onEnd:en(qe.DragEnd),onCancel:en(qe.DragCancel)});ii.unstable_batchedUpdates(()=>{An(jt),U(Re.nativeEvent)});function en(Dt){return async function(){const{active:fr,collisions:Pn,over:xn,scrollAdjustedTranslate:$a}=je.current;let Yr=null;if(fr&&$a){const{cancelDrop:tn}=W.current;Yr={activatorEvent:yt,active:fr,collisions:Pn,delta:$a,over:xn},Dt===qe.DragEnd&&typeof tn=="function"&&await Promise.resolve(tn(Yr))&&(Dt=qe.DragCancel)}Ae.current=null,ii.unstable_batchedUpdates(()=>{E({type:Dt}),O(Tr.Uninitialized),dr(null),An(null),U(null);const tn=Dt===qe.DragEnd?"onDragEnd":"onDragCancel";if(Yr){const qs=W.current[tn];qs==null||qs(Yr),_({type:tn,event:Yr})}})}}},[m]),Ic=b.useCallback((Re,st)=>(ot,gt)=>{const Rt=ot.nativeEvent,yt=m.get(gt);if(Ae.current!==null||!yt||Rt.dndKit||Rt.defaultPrevented)return;const jt={active:yt};Re(ot,st.options,jt)===!0&&(Rt.dndKit={capturedBy:st.sensor},Ae.current=gt,Vi(ot,st))},[m,Vi]),ba=vx(f,Ic);Cx(f),lr(()=>{Be&&N===Tr.Initializing&&O(Tr.Initialized)},[Be,N]),b.useEffect(()=>{const{onDragMove:Re}=W.current,{active:st,activatorEvent:ot,collisions:gt,over:Rt}=je.current;if(!st||!ot)return;const yt={active:st,activatorEvent:ot,collisions:gt,delta:{x:Me.x,y:Me.y},over:Rt};ii.unstable_batchedUpdates(()=>{Re==null||Re(yt),_({type:"onDragMove",event:yt})})},[Me.x,Me.y]),b.useEffect(()=>{const{active:Re,activatorEvent:st,collisions:ot,droppableContainers:gt,scrollAdjustedTranslate:Rt}=je.current;if(!Re||Ae.current==null||!st||!Rt)return;const{onDragOver:yt}=W.current,jt=gt.get(Hs),en=jt&&jt.rect.current?{id:jt.id,rect:jt.rect.current,data:jt.data,disabled:jt.disabled}:null,Dt={active:Re,activatorEvent:st,collisions:ot,delta:{x:Rt.x,y:Rt.y},over:en};ii.unstable_batchedUpdates(()=>{dr(en),yt==null||yt(Dt),_({type:"onDragOver",event:Dt})})},[Hs]),lr(()=>{je.current={activatorEvent:Ce,active:A,activeNode:fe,collisionRect:fn,collisions:hr,droppableRects:ue,draggableNodes:m,draggingNode:cr,draggingNodeRect:jn,droppableContainers:I,over:Rn,scrollableAncestors:Zt,scrollAdjustedTranslate:Me},x.current={initial:jn,translated:fn}},[A,fe,hr,fn,m,cr,jn,ue,I,Rn,Zt,Me]),px({...Cn,delta:w,draggingRect:fn,pointerCoordinates:Di,scrollableAncestors:Zt,scrollableAncestorRects:Gr});const Ws=b.useMemo(()=>({active:A,activeNode:fe,activeNodeRect:Be,activatorEvent:Ce,collisions:hr,containerNodeRect:Bt,dragOverlay:dn,draggableNodes:m,droppableContainers:I,droppableRects:ue,over:Rn,measureDroppableContainers:Ye,scrollableAncestors:Zt,scrollableAncestorRects:Gr,measuringConfiguration:Y,measuringScheduled:rt,windowRect:ki}),[A,fe,Be,Ce,hr,Bt,dn,m,I,ue,Rn,Ye,Zt,Gr,Y,rt,ki]),La=b.useMemo(()=>({activatorEvent:Ce,activators:ba,active:A,activeNodeRect:Be,ariaDescribedById:{draggable:Q},dispatch:E,draggableNodes:m,over:Rn,measureDroppableContainers:Ye}),[Ce,ba,A,Be,E,Q,m,Rn,Ye]);return ct.createElement(Q1.Provider,{value:S},ct.createElement(yc.Provider,{value:La},ct.createElement(Ox.Provider,{value:Ws},ct.createElement(aE.Provider,{value:Oa},h)),ct.createElement(Fx,{disabled:(l==null?void 0:l.restoreFocus)===!1})),ct.createElement(BP,{...l,hiddenTextDescribedById:Q}));function Fa(){const Re=(Xt==null?void 0:Xt.autoScrollEnabled)===!1,st=typeof u=="object"?u.enabled===!1:u===!1,ot=M&&!Re&&!st;return typeof u=="object"?{...u,enabled:ot}:{enabled:ot}}}),zx=b.createContext(null),$y="button",Hx="Droppable";function Wx(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=mc(Hx),{activators:o,activatorEvent:l,active:u,activeNodeRect:h,ariaDescribedById:f,draggableNodes:p,over:y}=b.useContext(yc),{role:T=$y,roleDescription:P="draggable",tabIndex:R=0}=i??{},D=(u==null?void 0:u.id)===e,E=b.useContext(D?aE:zx),[_,S]=ku(),[N,O]=ku(),M=Rx(o,e),v=ha(n);lr(()=>(p.set(e,{id:e,key:s,node:_,activatorNode:N,data:v}),()=>{const w=p.get(e);w&&w.key===s&&p.delete(e)}),[p,e]);const m=b.useMemo(()=>({role:T,tabIndex:R,"aria-disabled":r,"aria-pressed":D&&T===$y?!0:void 0,"aria-roledescription":P,"aria-describedby":f.draggable}),[r,T,R,D,P,f.draggable]);return{active:u,activatorEvent:l,activeNodeRect:h,attributes:m,isDragging:D,listeners:r?void 0:M,node:_,over:y,setNodeRef:S,setActivatorNodeRef:O,transform:E}}const qx="Droppable",Kx={timeout:25};function Qx(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=mc(qx),{active:o,dispatch:l,over:u,measureDroppableContainers:h}=b.useContext(yc),f=b.useRef({disabled:n}),p=b.useRef(!1),y=b.useRef(null),T=b.useRef(null),{disabled:P,updateMeasurementsFor:R,timeout:D}={...Kx,...i},E=ha(R??r),_=b.useCallback(()=>{if(!p.current){p.current=!0;return}T.current!=null&&clearTimeout(T.current),T.current=setTimeout(()=>{h(Array.isArray(E.current)?E.current:[E.current]),T.current=null},D)},[D]),S=gc({callback:_,disabled:P||!o}),N=b.useCallback((m,w)=>{S&&(w&&(S.unobserve(w),p.current=!1),m&&S.observe(m))},[S]),[O,M]=ku(N),v=ha(e);return b.useEffect(()=>{!S||!O.current||(S.disconnect(),p.current=!1,S.observe(O.current))},[O,S]),lr(()=>(l({type:qe.RegisterDroppable,element:{id:r,key:s,disabled:n,node:O,rect:y,data:v}}),()=>l({type:qe.UnregisterDroppable,key:s,id:r})),[r]),b.useEffect(()=>{n!==f.current.disabled&&(l({type:qe.SetDroppableDisabled,id:r,key:s,disabled:n}),f.current.disabled=n)},[r,s,n,l]),{active:o,rect:y,isOver:(u==null?void 0:u.id)===r,node:O,over:u,setNodeRef:M}}var Ot=function(){return Ot=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ot.apply(this,arguments)};function Vu(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var we="-ms-",Fo="-moz-",ce="-webkit-",lE="comm",vc="rule",Mp="decl",Gx="@import",uE="@keyframes",Yx="@layer",cE=Math.abs,Vp=String.fromCharCode,qd=Object.assign;function Xx(t,e){return tt(t,0)^45?(((e<<2^tt(t,0))<<2^tt(t,1))<<2^tt(t,2))<<2^tt(t,3):0}function hE(t){return t.trim()}function Kn(t,e){return(t=e.exec(t))?t[0]:t}function Z(t,e,n){return t.replace(e,n)}function Ul(t,e,n){return t.indexOf(e,n)}function tt(t,e){return t.charCodeAt(e)|0}function Rs(t,e,n){return t.slice(e,n)}function Dn(t){return t.length}function dE(t){return t.length}function Eo(t,e){return e.push(t),t}function Jx(t,e){return t.map(e).join("")}function By(t,e){return t.filter(function(n){return!Kn(n,e)})}var _c=1,Ps=1,fE=0,hn=0,ze=0,Us="";function Ec(t,e,n,r,i,s,o,l){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:_c,column:Ps,length:o,return:"",siblings:l}}function _r(t,e){return qd(Ec("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function $i(t){for(;t.root;)t=_r(t.root,{children:[t]});Eo(t,t.siblings)}function Zx(){return ze}function ek(){return ze=hn>0?tt(Us,--hn):0,Ps--,ze===10&&(Ps=1,_c--),ze}function Tn(){return ze=hn<fE?tt(Us,hn++):0,Ps++,ze===10&&(Ps=1,_c++),ze}function mi(){return tt(Us,hn)}function zl(){return hn}function wc(t,e){return Rs(Us,t,e)}function Kd(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function tk(t){return _c=Ps=1,fE=Dn(Us=t),hn=0,[]}function nk(t){return Us="",t}function Ih(t){return hE(wc(hn-1,Qd(t===91?t+2:t===40?t+1:t)))}function rk(t){for(;(ze=mi())&&ze<33;)Tn();return Kd(t)>2||Kd(ze)>3?"":" "}function ik(t,e){for(;--e&&Tn()&&!(ze<48||ze>102||ze>57&&ze<65||ze>70&&ze<97););return wc(t,zl()+(e<6&&mi()==32&&Tn()==32))}function Qd(t){for(;Tn();)switch(ze){case t:return hn;case 34:case 39:t!==34&&t!==39&&Qd(ze);break;case 40:t===41&&Qd(t);break;case 92:Tn();break}return hn}function sk(t,e){for(;Tn()&&t+ze!==57;)if(t+ze===84&&mi()===47)break;return"/*"+wc(e,hn-1)+"*"+Vp(t===47?t:Tn())}function ok(t){for(;!Kd(mi());)Tn();return wc(t,hn)}function ak(t){return nk(Hl("",null,null,null,[""],t=tk(t),0,[0],t))}function Hl(t,e,n,r,i,s,o,l,u){for(var h=0,f=0,p=o,y=0,T=0,P=0,R=1,D=1,E=1,_=0,S="",N=i,O=s,M=r,v=S;D;)switch(P=_,_=Tn()){case 40:if(P!=108&&tt(v,p-1)==58){Ul(v+=Z(Ih(_),"&","&\f"),"&\f",cE(h?l[h-1]:0))!=-1&&(E=-1);break}case 34:case 39:case 91:v+=Ih(_);break;case 9:case 10:case 13:case 32:v+=rk(P);break;case 92:v+=ik(zl()-1,7);continue;case 47:switch(mi()){case 42:case 47:Eo(lk(sk(Tn(),zl()),e,n,u),u);break;default:v+="/"}break;case 123*R:l[h++]=Dn(v)*E;case 125*R:case 59:case 0:switch(_){case 0:case 125:D=0;case 59+f:E==-1&&(v=Z(v,/\f/g,"")),T>0&&Dn(v)-p&&Eo(T>32?Uy(v+";",r,n,p-1,u):Uy(Z(v," ","")+";",r,n,p-2,u),u);break;case 59:v+=";";default:if(Eo(M=jy(v,e,n,h,f,i,l,S,N=[],O=[],p,s),s),_===123)if(f===0)Hl(v,e,M,M,N,s,p,l,O);else switch(y===99&&tt(v,3)===110?100:y){case 100:case 108:case 109:case 115:Hl(t,M,M,r&&Eo(jy(t,M,M,0,0,i,l,S,i,N=[],p,O),O),i,O,p,l,r?N:O);break;default:Hl(v,M,M,M,[""],O,0,l,O)}}h=f=T=0,R=E=1,S=v="",p=o;break;case 58:p=1+Dn(v),T=P;default:if(R<1){if(_==123)--R;else if(_==125&&R++==0&&ek()==125)continue}switch(v+=Vp(_),_*R){case 38:E=f>0?1:(v+="\f",-1);break;case 44:l[h++]=(Dn(v)-1)*E,E=1;break;case 64:mi()===45&&(v+=Ih(Tn())),y=mi(),f=p=Dn(S=v+=ok(zl())),_++;break;case 45:P===45&&Dn(v)==2&&(R=0)}}return s}function jy(t,e,n,r,i,s,o,l,u,h,f,p){for(var y=i-1,T=i===0?s:[""],P=dE(T),R=0,D=0,E=0;R<r;++R)for(var _=0,S=Rs(t,y+1,y=cE(D=o[R])),N=t;_<P;++_)(N=hE(D>0?T[_]+" "+S:Z(S,/&\f/g,T[_])))&&(u[E++]=N);return Ec(t,e,n,i===0?vc:l,u,h,f,p)}function lk(t,e,n,r){return Ec(t,e,n,lE,Vp(Zx()),Rs(t,2,-2),0,r)}function Uy(t,e,n,r,i){return Ec(t,e,n,Mp,Rs(t,0,r),Rs(t,r+1,-1),r,i)}function pE(t,e,n){switch(Xx(t,e)){case 5103:return ce+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ce+t+t;case 4789:return Fo+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ce+t+Fo+t+we+t+t;case 5936:switch(tt(t,e+11)){case 114:return ce+t+we+Z(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ce+t+we+Z(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ce+t+we+Z(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return ce+t+we+t+t;case 6165:return ce+t+we+"flex-"+t+t;case 5187:return ce+t+Z(t,/(\w+).+(:[^]+)/,ce+"box-$1$2"+we+"flex-$1$2")+t;case 5443:return ce+t+we+"flex-item-"+Z(t,/flex-|-self/g,"")+(Kn(t,/flex-|baseline/)?"":we+"grid-row-"+Z(t,/flex-|-self/g,""))+t;case 4675:return ce+t+we+"flex-line-pack"+Z(t,/align-content|flex-|-self/g,"")+t;case 5548:return ce+t+we+Z(t,"shrink","negative")+t;case 5292:return ce+t+we+Z(t,"basis","preferred-size")+t;case 6060:return ce+"box-"+Z(t,"-grow","")+ce+t+we+Z(t,"grow","positive")+t;case 4554:return ce+Z(t,/([^-])(transform)/g,"$1"+ce+"$2")+t;case 6187:return Z(Z(Z(t,/(zoom-|grab)/,ce+"$1"),/(image-set)/,ce+"$1"),t,"")+t;case 5495:case 3959:return Z(t,/(image-set\([^]*)/,ce+"$1$`$1");case 4968:return Z(Z(t,/(.+:)(flex-)?(.*)/,ce+"box-pack:$3"+we+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ce+t+t;case 4200:if(!Kn(t,/flex-|baseline/))return we+"grid-column-align"+Rs(t,e)+t;break;case 2592:case 3360:return we+Z(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,i){return e=i,Kn(r.props,/grid-\w+-end/)})?~Ul(t+(n=n[e].value),"span",0)?t:we+Z(t,"-start","")+t+we+"grid-row-span:"+(~Ul(n,"span",0)?Kn(n,/\d+/):+Kn(n,/\d+/)-+Kn(t,/\d+/))+";":we+Z(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return Kn(r.props,/grid-\w+-start/)})?t:we+Z(Z(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return Z(t,/(.+)-inline(.+)/,ce+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Dn(t)-1-e>6)switch(tt(t,e+1)){case 109:if(tt(t,e+4)!==45)break;case 102:return Z(t,/(.+:)(.+)-([^]+)/,"$1"+ce+"$2-$3$1"+Fo+(tt(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Ul(t,"stretch",0)?pE(Z(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return Z(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,s,o,l,u,h){return we+i+":"+s+h+(o?we+i+"-span:"+(l?u:+u-+s)+h:"")+t});case 4949:if(tt(t,e+6)===121)return Z(t,":",":"+ce)+t;break;case 6444:switch(tt(t,tt(t,14)===45?18:11)){case 120:return Z(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+ce+(tt(t,14)===45?"inline-":"")+"box$3$1"+ce+"$2$3$1"+we+"$2box$3")+t;case 100:return Z(t,":",":"+we)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Z(t,"scroll-","scroll-snap-")+t}return t}function Ou(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function uk(t,e,n,r){switch(t.type){case Yx:if(t.children.length)break;case Gx:case Mp:return t.return=t.return||t.value;case lE:return"";case uE:return t.return=t.value+"{"+Ou(t.children,r)+"}";case vc:if(!Dn(t.value=t.props.join(",")))return""}return Dn(n=Ou(t.children,r))?t.return=t.value+"{"+n+"}":""}function ck(t){var e=dE(t);return function(n,r,i,s){for(var o="",l=0;l<e;l++)o+=t[l](n,r,i,s)||"";return o}}function hk(t){return function(e){e.root||(e=e.return)&&t(e)}}function dk(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case Mp:t.return=pE(t.value,t.length,n);return;case uE:return Ou([_r(t,{value:Z(t.value,"@","@"+ce)})],r);case vc:if(t.length)return Jx(n=t.props,function(i){switch(Kn(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":$i(_r(t,{props:[Z(i,/:(read-\w+)/,":"+Fo+"$1")]})),$i(_r(t,{props:[i]})),qd(t,{props:By(n,r)});break;case"::placeholder":$i(_r(t,{props:[Z(i,/:(plac\w+)/,":"+ce+"input-$1")]})),$i(_r(t,{props:[Z(i,/:(plac\w+)/,":"+Fo+"$1")]})),$i(_r(t,{props:[Z(i,/:(plac\w+)/,we+"input-$1")]})),$i(_r(t,{props:[i]})),qd(t,{props:By(n,r)});break}return""})}}var fk={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},zt={},xs=typeof process<"u"&&zt!==void 0&&(zt.REACT_APP_SC_ATTR||zt.SC_ATTR)||"data-styled",mE="active",gE="data-styled-version",Tc="6.1.13",Op=`/*!sc*/
`,bu=typeof window<"u"&&"HTMLElement"in window,pk=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&zt!==void 0&&zt.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&zt.REACT_APP_SC_DISABLE_SPEEDY!==""?zt.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&zt.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&zt!==void 0&&zt.SC_DISABLE_SPEEDY!==void 0&&zt.SC_DISABLE_SPEEDY!==""&&zt.SC_DISABLE_SPEEDY!=="false"&&zt.SC_DISABLE_SPEEDY),Sc=Object.freeze([]),ks=Object.freeze({});function mk(t,e,n){return n===void 0&&(n=ks),t.theme!==n.theme&&t.theme||e||n.theme}var yE=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),gk=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,yk=/(^-|-$)/g;function zy(t){return t.replace(gk,"-").replace(yk,"")}var vk=/(a)(d)/gi,Tl=52,Hy=function(t){return String.fromCharCode(t+(t>25?39:97))};function Gd(t){var e,n="";for(e=Math.abs(t);e>Tl;e=e/Tl|0)n=Hy(e%Tl)+n;return(Hy(e%Tl)+n).replace(vk,"$1-$2")}var Ah,vE=5381,ns=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},_E=function(t){return ns(vE,t)};function _k(t){return Gd(_E(t)>>>0)}function Ek(t){return t.displayName||t.name||"Component"}function Ch(t){return typeof t=="string"&&!0}var EE=typeof Symbol=="function"&&Symbol.for,wE=EE?Symbol.for("react.memo"):60115,wk=EE?Symbol.for("react.forward_ref"):60112,Tk={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Sk={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},TE={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ik=((Ah={})[wk]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ah[wE]=TE,Ah);function Wy(t){return("type"in(e=t)&&e.type.$$typeof)===wE?TE:"$$typeof"in t?Ik[t.$$typeof]:Tk;var e}var Ak=Object.defineProperty,Ck=Object.getOwnPropertyNames,qy=Object.getOwnPropertySymbols,Rk=Object.getOwnPropertyDescriptor,Pk=Object.getPrototypeOf,Ky=Object.prototype;function SE(t,e,n){if(typeof e!="string"){if(Ky){var r=Pk(e);r&&r!==Ky&&SE(t,r,n)}var i=Ck(e);qy&&(i=i.concat(qy(e)));for(var s=Wy(t),o=Wy(e),l=0;l<i.length;++l){var u=i[l];if(!(u in Sk||n&&n[u]||o&&u in o||s&&u in s)){var h=Rk(e,u);try{Ak(t,u,h)}catch{}}}}return t}function Ns(t){return typeof t=="function"}function bp(t){return typeof t=="object"&&"styledComponentId"in t}function ui(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function Qy(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function fa(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function Yd(t,e,n){if(n===void 0&&(n=!1),!n&&!fa(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=Yd(t[r],e[r]);else if(fa(e))for(var r in e)t[r]=Yd(t[r],e[r]);return t}function Lp(t,e){Object.defineProperty(t,"toString",{value:e})}function ka(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var xk=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,s=i;e>=s;)if((s<<=1)<0)throw ka(16,"".concat(e));this.groupSizes=new Uint32Array(s),this.groupSizes.set(r),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var l=this.indexOfGroup(e+1),u=(o=0,n.length);o<u;o++)this.tag.insertRule(l,n[o])&&(this.groupSizes[e]++,l++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n;this.groupSizes[e]=0;for(var s=r;s<i;s++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),s=i+r,o=i;o<s;o++)n+="".concat(this.tag.getRule(o)).concat(Op);return n},t}(),Wl=new Map,Lu=new Map,ql=1,Sl=function(t){if(Wl.has(t))return Wl.get(t);for(;Lu.has(ql);)ql++;var e=ql++;return Wl.set(t,e),Lu.set(e,t),e},kk=function(t,e){ql=e+1,Wl.set(t,e),Lu.set(e,t)},Nk="style[".concat(xs,"][").concat(gE,'="').concat(Tc,'"]'),Dk=new RegExp("^".concat(xs,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Mk=function(t,e,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&t.registerName(e,r)},Vk=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(Op),i=[],s=0,o=r.length;s<o;s++){var l=r[s].trim();if(l){var u=l.match(Dk);if(u){var h=0|parseInt(u[1],10),f=u[2];h!==0&&(kk(f,h),Mk(t,f,u[3]),t.getTag().insertRules(h,i)),i.length=0}else i.push(l)}}},Gy=function(t){for(var e=document.querySelectorAll(Nk),n=0,r=e.length;n<r;n++){var i=e[n];i&&i.getAttribute(xs)!==mE&&(Vk(t,i),i.parentNode&&i.parentNode.removeChild(i))}};function Ok(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var IE=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(l){var u=Array.from(l.querySelectorAll("style[".concat(xs,"]")));return u[u.length-1]}(n),s=i!==void 0?i.nextSibling:null;r.setAttribute(xs,mE),r.setAttribute(gE,Tc);var o=Ok();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},bk=function(){function t(e){this.element=IE(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,i=0,s=r.length;i<s;i++){var o=r[i];if(o.ownerNode===n)return o}throw ka(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t}(),Lk=function(){function t(e){this.element=IE(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),Fk=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),Yy=bu,$k={isServer:!bu,useCSSOMInjection:!pk},AE=function(){function t(e,n,r){e===void 0&&(e=ks),n===void 0&&(n={});var i=this;this.options=Ot(Ot({},$k),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&bu&&Yy&&(Yy=!1,Gy(this)),Lp(this,function(){return function(s){for(var o=s.getTag(),l=o.length,u="",h=function(p){var y=function(E){return Lu.get(E)}(p);if(y===void 0)return"continue";var T=s.names.get(y),P=o.getGroup(p);if(T===void 0||!T.size||P.length===0)return"continue";var R="".concat(xs,".g").concat(p,'[id="').concat(y,'"]'),D="";T!==void 0&&T.forEach(function(E){E.length>0&&(D+="".concat(E,","))}),u+="".concat(P).concat(R,'{content:"').concat(D,'"}').concat(Op)},f=0;f<l;f++)h(f);return u}(i)})}return t.registerId=function(e){return Sl(e)},t.prototype.rehydrate=function(){!this.server&&bu&&Gy(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(Ot(Ot({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(n){var r=n.useCSSOMInjection,i=n.target;return n.isServer?new Fk(i):r?new bk(i):new Lk(i)}(this.options),new xk(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(Sl(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(Sl(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(Sl(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),Bk=/&/g,jk=/^\s*\/\/.*$/gm;function CE(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=CE(n.children,e)),n})}function Uk(t){var e,n,r,i=ks,s=i.options,o=s===void 0?ks:s,l=i.plugins,u=l===void 0?Sc:l,h=function(y,T,P){return P.startsWith(n)&&P.endsWith(n)&&P.replaceAll(n,"").length>0?".".concat(e):y},f=u.slice();f.push(function(y){y.type===vc&&y.value.includes("&")&&(y.props[0]=y.props[0].replace(Bk,n).replace(r,h))}),o.prefix&&f.push(dk),f.push(uk);var p=function(y,T,P,R){T===void 0&&(T=""),P===void 0&&(P=""),R===void 0&&(R="&"),e=R,n=T,r=new RegExp("\\".concat(n,"\\b"),"g");var D=y.replace(jk,""),E=ak(P||T?"".concat(P," ").concat(T," { ").concat(D," }"):D);o.namespace&&(E=CE(E,o.namespace));var _=[];return Ou(E,ck(f.concat(hk(function(S){return _.push(S)})))),_};return p.hash=u.length?u.reduce(function(y,T){return T.name||ka(15),ns(y,T.name)},vE).toString():"",p}var zk=new AE,Xd=Uk(),RE=ct.createContext({shouldForwardProp:void 0,styleSheet:zk,stylis:Xd});RE.Consumer;ct.createContext(void 0);function Xy(){return b.useContext(RE)}var Hk=function(){function t(e,n){var r=this;this.inject=function(i,s){s===void 0&&(s=Xd);var o=r.name+s.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,s(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,Lp(this,function(){throw ka(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=Xd),this.name+e.hash},t}(),Wk=function(t){return t>="A"&&t<="Z"};function Jy(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;Wk(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var PE=function(t){return t==null||t===!1||t===""},xE=function(t){var e,n,r=[];for(var i in t){var s=t[i];t.hasOwnProperty(i)&&!PE(s)&&(Array.isArray(s)&&s.isCss||Ns(s)?r.push("".concat(Jy(i),":"),s,";"):fa(s)?r.push.apply(r,Vu(Vu(["".concat(i," {")],xE(s),!1),["}"],!1)):r.push("".concat(Jy(i),": ").concat((e=i,(n=s)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in fk||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function gi(t,e,n,r){if(PE(t))return[];if(bp(t))return[".".concat(t.styledComponentId)];if(Ns(t)){if(!Ns(s=t)||s.prototype&&s.prototype.isReactComponent||!e)return[t];var i=t(e);return gi(i,e,n,r)}var s;return t instanceof Hk?n?(t.inject(n,r),[t.getName(r)]):[t]:fa(t)?xE(t):Array.isArray(t)?Array.prototype.concat.apply(Sc,t.map(function(o){return gi(o,e,n,r)})):[t.toString()]}function qk(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Ns(n)&&!bp(n))return!1}return!0}var Kk=_E(Tc),Qk=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&qk(e),this.componentId=n,this.baseHash=ns(Kk,n),this.baseStyle=r,AE.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=ui(i,this.staticRulesId);else{var s=Qy(gi(this.rules,e,n,r)),o=Gd(ns(this.baseHash,s)>>>0);if(!n.hasNameForId(this.componentId,o)){var l=r(s,".".concat(o),void 0,this.componentId);n.insertRules(this.componentId,o,l)}i=ui(i,o),this.staticRulesId=o}else{for(var u=ns(this.baseHash,r.hash),h="",f=0;f<this.rules.length;f++){var p=this.rules[f];if(typeof p=="string")h+=p;else if(p){var y=Qy(gi(p,e,n,r));u=ns(u,y+f),h+=y}}if(h){var T=Gd(u>>>0);n.hasNameForId(this.componentId,T)||n.insertRules(this.componentId,T,r(h,".".concat(T),void 0,this.componentId)),i=ui(i,T)}}return i},t}(),kE=ct.createContext(void 0);kE.Consumer;var Rh={};function Gk(t,e,n){var r=bp(t),i=t,s=!Ch(t),o=e.attrs,l=o===void 0?Sc:o,u=e.componentId,h=u===void 0?function(N,O){var M=typeof N!="string"?"sc":zy(N);Rh[M]=(Rh[M]||0)+1;var v="".concat(M,"-").concat(_k(Tc+M+Rh[M]));return O?"".concat(O,"-").concat(v):v}(e.displayName,e.parentComponentId):u,f=e.displayName,p=f===void 0?function(N){return Ch(N)?"styled.".concat(N):"Styled(".concat(Ek(N),")")}(t):f,y=e.displayName&&e.componentId?"".concat(zy(e.displayName),"-").concat(e.componentId):e.componentId||h,T=r&&i.attrs?i.attrs.concat(l).filter(Boolean):l,P=e.shouldForwardProp;if(r&&i.shouldForwardProp){var R=i.shouldForwardProp;if(e.shouldForwardProp){var D=e.shouldForwardProp;P=function(N,O){return R(N,O)&&D(N,O)}}else P=R}var E=new Qk(n,y,r?i.componentStyle:void 0);function _(N,O){return function(M,v,m){var w=M.attrs,I=M.componentStyle,C=M.defaultProps,x=M.foldedComponentIds,A=M.styledComponentId,Ae=M.target,Xt=ct.useContext(kE),An=Xy(),Ce=M.shouldForwardProp||An.shouldForwardProp,U=mk(v,Xt,C)||ks,W=function(rt,fe,it){for(var Cn,Jt=Ot(Ot({},fe),{className:void 0,theme:it}),Be=0;Be<rt.length;Be+=1){var Bt=Ns(Cn=rt[Be])?Cn(Jt):Cn;for(var je in Bt)Jt[je]=je==="className"?ui(Jt[je],Bt[je]):je==="style"?Ot(Ot({},Jt[je]),Bt[je]):Bt[je]}return fe.className&&(Jt.className=ui(Jt.className,fe.className)),Jt}(w,v,U),Q=W.as||Ae,oe={};for(var Y in W)W[Y]===void 0||Y[0]==="$"||Y==="as"||Y==="theme"&&W.theme===U||(Y==="forwardedAs"?oe.as=W.forwardedAs:Ce&&!Ce(Y,Q)||(oe[Y]=W[Y]));var ue=function(rt,fe){var it=Xy(),Cn=rt.generateAndInjectStyles(fe,it.styleSheet,it.stylis);return Cn}(I,W),Ye=ui(x,A);return ue&&(Ye+=" "+ue),W.className&&(Ye+=" "+W.className),oe[Ch(Q)&&!yE.has(Q)?"class":"className"]=Ye,oe.ref=m,b.createElement(Q,oe)}(S,N,O)}_.displayName=p;var S=ct.forwardRef(_);return S.attrs=T,S.componentStyle=E,S.displayName=p,S.shouldForwardProp=P,S.foldedComponentIds=r?ui(i.foldedComponentIds,i.styledComponentId):"",S.styledComponentId=y,S.target=r?i.target:t,Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(N){this._foldedDefaultProps=r?function(O){for(var M=[],v=1;v<arguments.length;v++)M[v-1]=arguments[v];for(var m=0,w=M;m<w.length;m++)Yd(O,w[m],!0);return O}({},i.defaultProps,N):N}}),Lp(S,function(){return".".concat(S.styledComponentId)}),s&&SE(S,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),S}function Zy(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n}var ev=function(t){return Object.assign(t,{isCss:!0})};function Yk(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ns(t)||fa(t))return ev(gi(Zy(Sc,Vu([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?gi(r):ev(gi(Zy(r,e)))}function Jd(t,e,n){if(n===void 0&&(n=ks),!e)throw ka(1,e);var r=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return t(e,n,Yk.apply(void 0,Vu([i],s,!1)))};return r.attrs=function(i){return Jd(t,e,Ot(Ot({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return Jd(t,e,Ot(Ot({},n),i))},r}var NE=function(t){return Jd(Gk,t)},zs=NE;yE.forEach(function(t){zs[t]=NE(t)});const Fp=zs.div.attrs(({x:t,y:e,$backgroundColor:n})=>({style:{left:`${t*xy}px`,top:`${e*xy}px`,backgroundColor:n}}))`
  position: absolute;
  width: ${Zn}px;
  height: ${Zn}px;
  border: ${ts}px solid darkgray;
`,Xk=({x:t,y:e,id:n})=>{const{setNodeRef:r,isOver:i}=Qx({id:n,data:{x:t,y:e}}),s=i?"lightgreen":"white";return L.jsx(Fp,{ref:r,x:t,y:e,$backgroundColor:s})},Fu=zs.div`
  color: white;
  width: ${xu}px;
  height: ${xu}px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  background: ${t=>t.$isMonster?"crimson":"dodgerblue"};
  border-color: ${t=>t.$isMonster?"darkred":"darkblue"};
  border-width: ${vP}px;
  border-style: solid;
`,Jk=zs(Fu)`
  position: absolute;
  cursor: grab;
  touch-action: none;
  left: ${t=>t.$left}px;
  top: ${t=>t.$top}px;
`,Zk=t=>{const{id:e,x:n,y:r,type:i}=t,{setNodeRef:s,listeners:o,attributes:l,transform:u}=Wx({id:e}),h={transform:Ud.Transform.toString(u)},f=n*(Zn-ts)+(Zn-ts-xu)/2,p=r*(Zn-ts)+(Zn-ts-xu)/2;return L.jsx(Jk,{$left:f,$top:p,$isMonster:i===Aa.Monster,ref:s,style:h,...l,...o,children:e})},eN=({move:t,units:e,board:n})=>L.jsx(DE,{children:L.jsxs(Ux,{onDragEnd:({over:r,active:i})=>{if(r&&r.data.current&&i){const{x:s,y:o}=r.data.current,l=i.id.toString();t(l,s,o)}},children:[Lr(fc).map(r=>Lr(Ca).map(i=>n[r][i]==="."?L.jsx(Xk,{id:`${i}-${r}`,x:i,y:r},`${i}-${r}`):L.jsx(Fp,{x:i,y:r,$backgroundColor:"black"},`${i}-${r}`))),e.filter(r=>r.hp>0||r.type===Aa.Character).map(r=>L.jsx(Zk,{...r},r.id))]})}),DE=zs.div`
  position: relative;
  width: ${Ca*Zn}px;
  height: ${fc*Zn}px;
`,tN=t=>t.monsterType!==void 0,nN=({item:t})=>L.jsxs("div",{className:"d-flex flex-row mb-2 p-2 border rounded align-items-center",children:[tN(t)?L.jsx(Fu,{...t,$isMonster:!0,children:"怪物"}):L.jsx(Fu,{...t,$isMonster:!1,children:t.id}),L.jsx("div",{className:"flex-grow-1 p-2",children:t.name}),L.jsxs("div",{className:"row",children:[L.jsxs("div",{className:"fs-6 col d-flex flex-column",children:[L.jsx("div",{style:{fontSize:12},children:"hp"}),L.jsx("div",{children:t.hp})]}),L.jsx("div",{className:"fs-6 col",children:t.initiative})]})]},t.name),vr={Fighter:"ファイター",Wizard:"ウィザード",Rogue:"ローグ",Cleric:"クレリック",Bard:"バード",Monk:"モンク",Paladin:"パラディン",Ranger:"レンジャー",Sorcerer:"ソーサラー",Warlock:"ウォーロック",Barbarian:"バーバリアン",Druid:"ドルイド"},ME={岩熊:{id:"岩熊",name:"ロックベアー",level:4,classLevel:{[vr.Barbarian]:2,[vr.Druid]:2},ac:18,hp:54,abilities:{[ee.STR]:16,[ee.DEX]:14,[ee.CON]:16,[ee.INT]:8,[ee.WIS]:16,[ee.CHA]:8},initiative:6},灰鼠:{id:"灰鼠",name:"グレイラット",level:4,classLevel:{[vr.Wizard]:2,[vr.Rogue]:2},ac:18,hp:36,abilities:{[ee.STR]:16,[ee.DEX]:14,[ee.CON]:14,[ee.INT]:10,[ee.WIS]:10,[ee.CHA]:10},initiative:17},エマ:{id:"エマ",name:"エマさん",level:4,classLevel:{[vr.Barbarian]:2,[vr.Ranger]:2},ac:16,hp:42,abilities:{[ee.STR]:14,[ee.DEX]:16,[ee.CON]:14,[ee.INT]:8,[ee.WIS]:12,[ee.CHA]:8},initiative:18},エド:{id:"エド",name:"先生",level:4,classLevel:{[vr.Rogue]:2,[vr.Ranger]:2},ac:15,hp:34,abilities:{[ee.STR]:14,[ee.DEX]:16,[ee.CON]:12,[ee.INT]:8,[ee.WIS]:12,[ee.CHA]:8},initiative:10}},rN=({monster:t})=>{const e=[t,...Object.values(ME)].sort((n,r)=>r.initiative-n.initiative);return L.jsxs("div",{className:"d-flex flex-column flex-grow-1",children:[L.jsx("h5",{className:"pb-2",children:"イニシアティブ"}),e.map(n=>L.jsx(nN,{item:n},n.name))]})},iN=t=>L.jsxs(sN,{children:[L.jsx(eN,{...t}),L.jsx(rN,{...t})]}),sN=zs.div`
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  flex-wrap: wrap;
`,oN=()=>{for(;;){const t=Math.floor(Math.random()*Ca),e=Math.floor(Math.random()*4+fc-4);if(Cp[e][t]===".")return{x:t,y:e}}},aN=t=>{const{id:e,name:n,hp:r}=t,{x:i,y:s}=oN();return{id:e,type:Aa.Character,name:n,x:i,y:s,hp:r}},lN={unit:aN},uN=({unit:t,setHitPoint:e,monster:n})=>L.jsxs("div",{className:"d-flex flex-row mb-2 p-2 border rounded align-items-center",children:[L.jsx(Fu,{...t,$isMonster:t.hp===0,children:t.id}),L.jsx("div",{className:"flex-grow-1 p-2",children:n.name}),L.jsx("div",{className:"fs-5 px-2",children:"hp"}),L.jsx("select",{value:t.hp,className:"form-select form-select-lg w-25",onChange:r=>e(t.id,parseInt(r.target.value)),children:Lr(n.hp+1).map(r=>L.jsx("option",{value:r,children:r},r))})]},t.name),cN=({units:t,setHitPoint:e,monster:n})=>L.jsxs("div",{children:[L.jsx("h5",{children:"ヒットポイント管理"}),t.filter(r=>r.type===Aa.Monster).map(r=>L.jsx(uN,{unit:r,setHitPoint:e,monster:n},r.name))]}),hN=t=>{const[e,n]=b.useState(t);return b.useEffect(()=>{Ap(Pr(Gn,"board","board"),i=>{var s;n(((s=i.data())==null?void 0:s.board)??t)})},[]),{board:e,flipCell:(i,s)=>{const o=e.map((l,u)=>l.split("").map((h,f)=>f===i&&u===s?h==="#"?".":"#":h).join(""));Vo(Pr(Gn,"board","board"),{board:o}).then()}}},dN=({board:t,flipCell:e})=>L.jsx(DE,{children:Lr(fc).map(n=>Lr(Ca).map(r=>L.jsx(Fp,{x:r,y:n,$backgroundColor:t[n][r]==="#"?"black":"white",onClick:()=>e(r,n)},`${r}-${n}`)))});function fN(){const{settings:t,setLevel:e,setNumCharacters:n,setDifficulty:r,totalExp:i}=RS(kS),{monster:s,reRollMonster:o}=SP(i),{units:l,move:u,setUnit:h,deleteUnit:f,setHitPoint:p}=RP(),{board:y,flipCell:T}=hN(Cp),[P,R]=b.useState(!1),D={[me.Setting]:()=>{o(),_(me.Monster)},[me.Monster]:o,[me.Room]:()=>{Lr(s.num).forEach(O=>{const M=H1.unit(s,O);h(M)}),Lr(20-s.num).forEach(O=>{const M=`m${O+s.num}`;f(M)}),Object.values(ME).forEach(O=>{const M=lN.unit(O);h(M)})},[me.HitPoint]:()=>{Lr(s.num).forEach(O=>{const M=`m${O}`;p(M,s.hp)})},[me.EditRoom]:()=>{T(0,0)}},{page:E,setPage:_,reRollLabel:S,reRoll:N}=AP(D);return L.jsxs(L.Fragment,{children:[L.jsx(CP,{page:E,setPage:_,reRoll:N,reRollLabel:S,isMaster:P,setIsMaster:R}),L.jsxs("div",{className:"container-fluid",children:[E===me.Setting&&L.jsx(IP,{settings:t,setLevel:e,setNumCharacters:n,setDifficulty:r}),E===me.Monster&&L.jsx(xS,{monster:s}),E===me.Room&&L.jsx(iN,{units:l,move:u,monster:s,board:y}),E===me.HitPoint&&L.jsx(cN,{units:l,setHitPoint:p,monster:s}),E===me.EditRoom&&L.jsx(dN,{board:y,flipCell:T})]})]})}f_(document.getElementById("root")).render(L.jsx(b.StrictMode,{children:L.jsx(fN,{})}));
